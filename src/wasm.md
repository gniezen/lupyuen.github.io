# Simulate RISC-V BL602 with WebAssembly, uLisp and Blockly

üìù _26 May 2021_

What if we...

1.  Compile the __uLisp Interpreter to WebAssembly__...

1.  Use the WebAssembly version of uLisp to __simulate BL602 in a Web Browser__...

    (Including GPIO, I2C, SPI, Display Controller, Touch Controller, LoRaWAN... [Similar to this](https://lupyuen.github.io/pinetime-rust-mynewt/articles/simulator))

1.  Integrate the __BL602 Simulator with Blockly__...

1.  To allow embedded developers to __preview their BL602 Blockly Apps in the Web Browser__?

TODO

- [__Watch the uLisp WebAssembly demo on YouTube__](https://youtu.be/9uegWNcokxY)

- [__Try uLisp WebAssembly here__](https://lupyuen.github.io/ulisp-bl602/ulisp.html)

- [__Watch the BL602 Simulator with Blockly and uLisp WebAssembly demo on YouTube__](https://youtu.be/Ag2CERd1OzQ)

- [__Try BL602 Simulator with Blockly and uLisp WebAssembly here__](https://appkaki.github.io/blockly-ulisp/demos/simulator/)

![BL602 Simulator with uLisp and Blockly in WebAssembly](https://lupyuen.github.io/images/wasm-title.png)

_BL602 Simulator with uLisp and Blockly in WebAssembly_

# Emscripten and WebAssembly

TODO

![Compiling uLisp to WebAssembly with Emscripten](https://lupyuen.github.io/images/lisp-wasm.png)

TODO

![](https://lupyuen.github.io/images/wasm-stub.png)

TODO

![Testing uLisp compiled with Emscripten](https://lupyuen.github.io/images/lisp-wasm2.png)

# BL602 Simulator

TODO

![BL602 Simulator with uLisp WebAssembly](https://lupyuen.github.io/images/lisp-simulator.png)

TODO

# JSON Stream of Simulation Events

TODO

![](https://lupyuen.github.io/images/wasm-stream2.png)

TODO

![](https://lupyuen.github.io/images/wasm-ulisp.png)

TODO

![](https://lupyuen.github.io/images/wasm-stream.png)

TODO

# Add a Simulation Event

TODO

![](https://lupyuen.github.io/images/wasm-add.png)

TODO

# Add a Delay

TODO

![](https://lupyuen.github.io/images/wasm-delay.png)

TODO

# Handling Loops

TODO

![](https://lupyuen.github.io/images/wasm-loop.png)

TODO

# HTML Canvas and JavaScript

TODO

![](https://lupyuen.github.io/images/wasm-photoshop.png)

TODO

![](https://lupyuen.github.io/images/wasm-led.png)

TODO

![](https://lupyuen.github.io/images/wasm-event.png)

TODO

![](https://lupyuen.github.io/images/wasm-image.png)

TODO

# Pass data between JavaScript and WebAssembly

TODO

![](https://lupyuen.github.io/images/wasm-string.png)

TODO

# Add Simulator to Blockly

TODO

![](https://lupyuen.github.io/images/wasm-blockly.png)

TODO

# What's Next

Porting uLisp and Blockly to BL602 has been a fun experience.

But more work needs to be done, I hope the Community can help.

Could this be the better way to learn Embedded Programming on modern microcontrollers?

Let's build it and find out! üôè üëç üòÄ

-   [Sponsor me a coffee](https://github.com/sponsors/lupyuen)

-   [Read "The RISC-V BL602 Book"](https://lupyuen.github.io/articles/book)

-   [Check out my articles](https://lupyuen.github.io)

-   [RSS Feed](https://lupyuen.github.io/rss.xml)

_Got a question, comment or suggestion? Create an Issue or submit a Pull Request here..._

[`lupyuen.github.io/src/wasm.md`](https://github.com/lupyuen/lupyuen.github.io/blob/master/src/wasm.md)

# Notes

1.  This article is the expanded version of [this Twitter Thread](https://twitter.com/MisterTechBlog/status/1393554618924212224)


![](https://lupyuen.github.io/images/wasm-error.png)

