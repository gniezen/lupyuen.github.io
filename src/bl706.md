# RISC-V BL706 Audio Video Board

üìù _18 Jul 2021_

_What's inside the Bouffalo Lab RISC-V BL706 Audio Video Board... And how it differs from BL602_

TODO: Create USB Multimedia Firmware with Wireless Networking

Many thanks to __Bouffalo Lab__ for providing the BL706 Audio Video Board! (BTW I'm not paid to write this article)

![Dev Kit for Bouffalo Lab BL706 Audio Video Board](https://lupyuen.github.io/images/bl706-title.jpg)

_Dev Kit for Bouffalo Lab BL706 Audio Video Board_

_Top to bottom: ILI9341 SPI Display, BL706 AVB, Camera, JTAG Adapter_

# BL706 Audio Video Board

_What is BL706?_

BL706 is the new __RISC-V + 2.4 GHz RF SoC by Bouffalo Lab__...

1.  __32-bit RISC-V CPU with FPU__ (Hardware Floating-Point)

    CPU Frequency configurable from __1 MHz to 144 MHz__

1.  __132 KB RAM, 192 KB ROM__

    __XIP QSPI Flash / pSRAM__ with hardware encryption support

1.  __2.4 GHz Radio Frequency Transceiver__

    Supports __Bluetooth LE 5.0 and Zigbee 3.0__

1.  __Camera__ Interface

1.  __Ethernet__ RMII Interface

1.  __Infrared__ Remote Control Interface, Passive Infrared Detection

1.  __USB 2.0__ Full-Speed Device Interface

1.  __Other Peripherals__

    UART x 2, SPI x 1, I2C x 1, I2S x 1

    PWM x 5, ADC 12-bit, DAC 10-bit

    GPIO x 31

(Note that BL706 does NOT support WiFi)

![BL706 Datasheet](https://lupyuen.github.io/images/bl706-datasheet.jpg)

The BL706 docs are located here...

-   [__BL702 / BL704 / BL706 Datasheet__](https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/chipSpecification/bl70x_docs/BL702_BL704_BL706_DS_EN_Combo_2.0.pdf)

-   [__BL702 / BL704 / BL706 Reference Manual__](https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/chipSpecification/bl70x_docs/BL702_BL704_706_RM_EN_1.1.pdf)

-   [__Other Docs__](https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs)

BL702 and BL704 have fewer features than BL706.

(How does BL706 compare with BL602? We'll discuss in a while)

_What is BL706 Audio Video Board?_

Bouffalo Lab has created __2 Development Boards for BL706__...

1.  __BL706 IoT Development Board__

    This is the Smaller Board, with __GPIO Pins and USB Port__ exposed.

    The BL706 IoT Dev Board is useful for running __Bluetooth LE and Zigbee Firmware__.

    [(See this)](https://github.com/bouffalolab/bl_mcu_sdk#hardware-resources)

1.  __BL706 Audio Video Board (AVB)__

    This is the Bigger Board, with connectors for __SPI Display, Camera and Audio Codec__. Plus GPIO Pins and USB Port.

    The BL706 AVB is great for __Mulimedia Firmware__. And it works with Bluetooth LE and Zigbee too.

    (We're using this today)

[(Trivia: Both BL706 boards were used in a hackathon at Nanjing University of Information Science & Technology)](http://www.bjxy.cn/info/1039/9445.htm)

Here's the __Pinout for BL706 AVB__...

![BL706 AVB Pinout](https://lupyuen.github.io/images/bl706-pinout.jpg)

[(Source)](https://github.com/bouffalolab/bl_mcu_sdk)

Here's the __Front View of BL706 AVB__...

![Front of BL706 Audio Video Board](https://lupyuen.github.io/images/bl706-front1.jpg)

(ILI9341 SPI Display is connected at left. The `PEN` Pin must be disconnected)

And here's the __Back View of BL706 AVB__...

![Back of BL706 Audio Video Board](https://lupyuen.github.io/images/bl706-back1.jpg)

(The Camera Connector is at top left. `FUNC1` and `FUNC2` refer to the two jumpers at the bottom of the Front View)

_What kinds of Multimedia Firmware can we create with BL706 AVB?_

Plenty! Today we shall run the __LVGL Graphics Demo Firmware__ and draw some cool graphics on the __ILI9341 Display__.

With the onboard __USB 2.0 Device Interface__ we can create lots of fun firmware...

1.  [__CDC__](https://en.wikipedia.org/wiki/USB_communications_device_class): USB Serial Port (Command-Line Interface)

1.  [__MSC__](https://en.wikipedia.org/wiki/USB_mass_storage_device_class): USB Storage (BL706 becomes a USB Drive)

1.  [__HID__](https://en.wikipedia.org/wiki/USB_human_interface_device_class): USB Mouse and Keyboard

1.  __Video__: USB Cam

1.  __Audio__: USB Microphone

[Check out the USB Demo Firmware](https://github.com/bouffalolab/bl_mcu_sdk/tree/master/examples/usb)

# Install SDK and Toolchain

TODO: BL MCU SDK

-   [__BL MCU SDK on GitHub__](https://github.com/bouffalolab/bl_mcu_sdk)

-   [__BL MCU SDK on Gitee__](https://gitee.com/bouffalolab/bl_mcu_sdk)

(The version on Gitee is probably more recent than GitHub)

TODO: Quick Start

-   [__Linux Quick Start for Ubuntu (Chinese))__](https://bouffalolab.gitee.io/bl_mcu_sdk/get_started/Linux_quick_start_ubuntu.html)

    [(Alternative Link)](https://htmlpreview.github.io/?https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/development_guide/build/html/get_started/Linux_quick_start_ubuntu.html)

-   [__Windows Quick Start for CDK (Chinese)__](https://bouffalolab.gitee.io/bl_mcu_sdk/get_started/Windows_quick_start_cdk.html)

    [(Alternative Link)](https://htmlpreview.github.io/?https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/development_guide/build/html/get_started/Windows_quick_start_cdk.html)

-   [__Windows Quick Start for Eclipse (Chinese)__](https://bouffalolab.gitee.io/bl_mcu_sdk/get_started/Windows_quick_start_eclipse.html)

    [(Alternative Link)](https://htmlpreview.github.io/?https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/development_guide/build/html/get_started/Windows_quick_start_eclipse.html)

TODO: LVGL

-   [__LVGL Sample for BL706__](https://github.com/bouffalolab/bl_mcu_sdk/tree/master/examples/lvgl)

![BL706 LVGL Demo](https://lupyuen.github.io/images/bl706-lvgl.png)

# Build Firmware

TODO

-   [__Instructions for LVGL Demo Firmware__](https://github.com/bouffalolab/bl_mcu_sdk/tree/master/examples/lvgl)

```bash
make APP=lvgl \
  BOARD=bl706_avb \
  SUPPORT_LVGL=y
```

![BL706 Firmware Build](https://lupyuen.github.io/images/bl706-build.png)

# Flash Firmware

TODO: BOOT and RST Buttons

To enter Flashing Mode on #BL706 AVB, use the Two Finger Salute: 1Ô∏è‚É£ Press and Hold BOOT 2Ô∏è‚É£ Press RST 3Ô∏è‚É£ Release RST 4Ô∏è‚É£ Release BOOT

![BOOT and RST Buttons](https://lupyuen.github.io/images/bl706-boot2.jpg)

TODO: USB

![BL706 USB](https://lupyuen.github.io/images/bl706-usb.png)

TODO: BL Dev Cube

-   [__Download BL Dev Cube__](https://dev.bouffalolab.com/download)

More about BL Dev Cube...

-   [__Instructions for BL Dev Cube (Chinese)__](https://bouffalolab.gitee.io/bl_mcu_sdk/get_started/bl_dev_cube.html)

    [(Alternative Link)](https://htmlpreview.github.io/?https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/development_guide/build/html/get_started/bl_dev_cube.html)

![Flashing BL706 with BL Dev Cube](https://lupyuen.github.io/images/bl706-flash.png)

TODO: JTAG and JLink

![BL706 OpenOCD](https://lupyuen.github.io/images/bl706-openocd.png)

[(Source)](https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/development_guide/source/get_started/get_started.rst)

[(Instructions)](https://github.com/bouffalolab/bl_mcu_sdk/blob/master/docs/development_guide/source/get_started/connecting_hardware.rst)

# Run LVGL Firmware

TODO

![BL706 Jumpers](https://lupyuen.github.io/images/bl706-jumpers.jpg)

TODO: Front with display attached

The PEN Pin at left is NOT connected.

![Front of BL706 Audio Video Board](https://lupyuen.github.io/images/bl706-front2b.jpg)

TODO: Back with display attached

![Back of BL706 Audio Video Board](https://lupyuen.github.io/images/bl706-back2b.jpg)

TODO: LVGL Demo

![BL706 LVGL Demo Firmware](https://lupyuen.github.io/images/bl706-lvgl2a.jpg)

[__Watch the demo on YouTube__](https://youtu.be/q7mjNy6GSHo)

# BL706 vs BL602

TODO

![BL706 MCU SDK vs BL602 IoT SDK](https://lupyuen.github.io/images/bl706-mcusdk.jpg)

TODO: macOS

![BL706 doesn't support macOS](https://lupyuen.github.io/images/bl706-macos.png)

TODO: cmake

![BL706 uses cmake](https://lupyuen.github.io/images/bl706-cmake.png)

TODO: GCC Toolchain not bundled

![GCC Toolchain not bundled](https://lupyuen.github.io/images/bl706-gcc.png)

TODO: TensorFlow Lite

![BL706 TensorFlow Lite](https://lupyuen.github.io/images/bl706-tflite.png)

TODO: Porting from STM32CUBEMX

[Porting from STM32CUBEMX](https://bouffalolab.gitee.io/bl_mcu_sdk/api_reference/board.html)

# What's Next

TODO

-   [Sponsor me a coffee](https://github.com/sponsors/lupyuen)

-   [Read "The RISC-V BL602 Book"](https://lupyuen.github.io/articles/book)

-   [Check out my articles](https://lupyuen.github.io)

-   [RSS Feed](https://lupyuen.github.io/rss.xml)

_Got a question, comment or suggestion? Create an Issue or submit a Pull Request here..._

[`lupyuen.github.io/src/bl706.md`](https://github.com/lupyuen/lupyuen.github.io/blob/master/src/bl706.md)

# Notes

1.  This article is the expanded version of [this Twitter Thread](https://twitter.com/MisterTechBlog/status/1407845438787489794)

![Front of BL706 Audio Video Board](https://lupyuen.github.io/images/bl706-front2a.jpg)
