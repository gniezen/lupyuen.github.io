<!doctype html>
<html lang="en">

<head>
  <script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
  <script
    type="text/javascript">window.addEventListener('DOMContentLoaded', function () { var v = archive_analytics.values; v.service = 'wb'; v.server_name = 'wwwb-app100.us.archive.org'; v.server_ms = 1253; archive_analytics.send_pageview({}); });</script>
  <script type="text/javascript" src="/_static/js/playback.bundle.js?v=bQvHU8mx" charset="utf-8"></script>
  <script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
  <script type="text/javascript">
    __wm.init("https://web.archive.org/web");
    __wm.wombat("https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e", "20201025032303", "https://web.archive.org/", "web", "/_static/",
      "1603596183");
  </script>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <!-- End Wayback Rewrite JS Include -->
  <script>!function (c, f) { var t, o, i, e = [], r = { passive: !0, capture: !0 }, n = new Date, a = "pointerup", u = "pointercancel"; function p(n, e) { t || (t = e, o = n, i = new Date, w(f), s()) } function s() { 0 <= o && o < i - n && (e.forEach(function (n) { n(o, t) }), e = []) } function l(n) { if (n.cancelable) { var e = (1e12 < n.timeStamp ? new Date : performance.now()) - n.timeStamp; "pointerdown" == n.type ? function (n, e) { function t() { p(n, e), i() } function o() { i() } function i() { f(a, t, r), f(u, o, r) } c(a, t, r), c(u, o, r) }(e, n) : p(e, n) } } function w(e) { ["click", "mousedown", "keydown", "touchstart", "pointerdown"].forEach(function (n) { e(n, l, r) }) } w(c), self.perfMetrics = self.perfMetrics || {}, self.perfMetrics.onFirstInputDelay = function (n) { e.push(n), s() } }(addEventListener, removeEventListener)</script>
  <script defer
    src="https://web.archive.org/web/20201025032303js_/https://cdn.optimizely.com/js/16180790160.js"></script>
  <title data-rh="true">Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt | by Lup Yuen Lee 李立源 |
    Medium</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" name="twitter:app:name:iphone" content="Medium" />
  <meta data-rh="true" name="twitter:app:id:iphone" content="828256236" />
  <meta data-rh="true" property="al:ios:app_name" content="Medium" />
  <meta data-rh="true" property="al:ios:app_store_id" content="828256236" />
  <meta data-rh="true" property="al:android:package" content="com.medium.reader" />
  <meta data-rh="true" property="fb:app_id" content="542599432471018" />
  <meta data-rh="true" property="og:site_name" content="Medium" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2020-02-02T09:00:34.688Z" />
  <meta data-rh="true" name="title"
    content="Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt | by Lup Yuen Lee 李立源 | Medium" />
  <meta data-rh="true" property="og:title"
    content="Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt" />
  <meta data-rh="true" property="twitter:title"
    content="Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt" />
  <meta data-rh="true" name="twitter:site" content="@Medium" />
  <meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/ef62a7e28f7e" />
  <meta data-rh="true" property="al:android:url" content="medium://p/ef62a7e28f7e" />
  <meta data-rh="true" property="al:ios:url" content="medium://p/ef62a7e28f7e" />
  <meta data-rh="true" property="al:android:app_name" content="Medium" />
  <meta data-rh="true" name="description"
    content="Safer, simpler NB-IoT coding with Embedded Rust and Visual Studio Code" />
  <meta data-rh="true" property="og:description"
    content="Safer, simpler NB-IoT coding with Embedded Rust and Visual Studio Code" />
  <meta data-rh="true" property="twitter:description"
    content="Safer, simpler NB-IoT coding with Embedded Rust and Visual Studio Code" />
  <meta data-rh="true" property="og:url"
    content="https://web.archive.org/web/20201025032303/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e" />
  <meta data-rh="true" property="al:web:url"
    content="https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e" />
  <meta data-rh="true" property="og:image"
    content="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1200/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg" />
  <meta data-rh="true" name="twitter:image:src"
    content="https://miro.medium.com/max/1200/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" property="article:author" content="https://medium.com/@ly.lee" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow,max-image-preview:large" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="22 min read" />
  <meta data-rh="true" name="parsely-post-id" content="ef62a7e28f7e" />
  <link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium"
    href="/web/20201025032303/https://medium.com/osd.xml" />
  <link data-rh="true" rel="apple-touch-icon" sizes="152x152"
    href="https://web.archive.org/web/20201025032303im_/https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="120x120"
    href="https://web.archive.org/web/20201025032303im_/https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="76x76"
    href="https://web.archive.org/web/20201025032303im_/https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="60x60"
    href="https://web.archive.org/web/20201025032303im_/https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="mask-icon"
    href="https://web.archive.org/web/20201025032303im_/https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg"
    color="#171717" />
  <link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css"
    href="https://web.archive.org/web/20201025032303cs_/https://glyph.medium.com/css/unbound.css" />
  <link data-rh="true" rel="author" href="https://medium.com/@ly.lee" />
  <link data-rh="true" rel="canonical"
    href="https://web.archive.org/web/20201025032303/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e" />
  <link data-rh="true" rel="alternate"
    href="https://web.archive.org/web/20201025032303/android-app://com.medium.reader/https/medium.com/p/ef62a7e28f7e" />
  <script data-rh="true"
    type="application/ld+json">{"@context":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttp:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*I2s4rSDpnbim1sOeMzFmIQ.jpeg"],"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e","dateCreated":"2019-08-04T15:39:57.759Z","datePublished":"2019-08-04T15:39:57.759Z","dateModified":"2020-02-02T09:00:35.203Z","headline":"Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt","name":"Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt","description":"Safer, simpler NB-IoT coding with Embedded Rust and Visual Studio Code","identifier":"ef62a7e28f7e","keywords":["Lite:true","Tag:Rust","Tag:Internet of Things","Tag:Stm32","Tag:Programming","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:0"],"author":{"@type":"Person","name":"Lup Yuen Lee 李立源","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee"},"creator":["Lup Yuen Lee 李立源"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"}</script>
  <script data-rh="true">(function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://web.archive.org/web/20201025032303/https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-24232453-2', 'auto');
    ga('send', 'pageview');</script>
  <link rel="preload" href="https://web.archive.org/web/20201025032303/https://cdn.optimizely.com/js/16180790160.js"
    as="script">
  <style type="text/css" data-fela-rehydration="609" data-fela-type="STATIC">
    html {
      box-sizing: border-box
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit
    }

    body {
      margin: 0;
      padding: 0;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      color: rgba(0, 0, 0, 0.8);
      position: relative;
      min-height: 100vh
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    dl,
    dd,
    ol,
    ul,
    menu,
    figure,
    blockquote,
    p,
    pre,
    form {
      margin: 0
    }

    menu,
    ol,
    ul {
      padding: 0;
      list-style: none;
      list-style-image: none
    }

    main {
      display: block
    }

    a {
      color: inherit;
      text-decoration: none
    }

    a,
    button,
    input {
      -webkit-tap-highlight-color: transparent
    }

    img,
    svg {
      vertical-align: middle
    }

    button {
      background: transparent;
      overflow: visible
    }

    button,
    input,
    optgroup,
    select,
    textarea {
      margin: 0
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE">
    .a {
      font-family: medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif
    }

    .b {
      font-weight: 400
    }

    .c {
      background-color: rgba(255, 255, 255, 1)
    }

    .l {
      height: 100vh
    }

    .m {
      width: 100vw
    }

    .n {
      display: flex
    }

    .o {
      align-items: center
    }

    .p {
      justify-content: center
    }

    .q {
      height: 35px
    }

    .r {
      fill: rgba(41, 41, 41, 1)
    }

    .s {
      padding-top: 8px
    }

    .t {
      width: 100%
    }

    .u {
      border-bottom: 1px solid rgba(230, 230, 230, 1)
    }

    .v {
      min-height: 160px
    }

    .w {
      display: block
    }

    .x {
      flex-direction: column
    }

    .y {
      display: none
    }

    .ab {
      position: relative
    }

    .ac {
      z-index: 500
    }

    .aj {
      max-width: 1192px
    }

    .ak {
      min-width: 0
    }

    .al {
      height: 62px
    }

    .am {
      flex-direction: row
    }

    .an {
      flex: 1 0 auto
    }

    .ao {
      margin-right: 16px
    }

    .ap {
      font-family: sohne, "Helvetica Neue", Helvetica, Arial, sans-serif
    }

    .aq {
      font-size: 14px
    }

    .ar {
      line-height: 20px
    }

    .as {
      color: rgba(26, 137, 23, 1)
    }

    .at {
      padding: 7px 16px 9px
    }

    .au {
      background: 0
    }

    .av {
      fill: rgba(26, 137, 23, 1)
    }

    .aw {
      border-color: rgba(26, 137, 23, 1)
    }

    .ax:hover {
      color: rgba(15, 115, 12, 1)
    }

    .ay:hover {
      fill: rgba(15, 115, 12, 1)
    }

    .az:hover {
      border-color: rgba(15, 115, 12, 1)
    }

    .ba:hover {
      cursor: pointer
    }

    .bb:disabled {
      cursor: inherit
    }

    .bc:disabled {
      opacity: 0.3
    }

    .bd:disabled:hover {
      color: rgba(26, 137, 23, 1)
    }

    .be:disabled:hover {
      fill: rgba(26, 137, 23, 1)
    }

    .bf:disabled:hover {
      border-color: rgba(26, 137, 23, 1)
    }

    .bg {
      border-radius: 4px
    }

    .bh {
      border-width: 1px
    }

    .bi {
      border-style: solid
    }

    .bj {
      box-sizing: border-box
    }

    .bk {
      display: inline-block
    }

    .bl {
      text-decoration: none
    }

    .bm {
      border-radius: 1000px
    }

    .bn {
      background-color: rgba(255, 255, 255, 0.8)
    }

    .bo {
      padding: 6px
    }

    .bp {
      visibility: hidden
    }

    .bq {
      margin-left: 0px
    }

    .br {
      color: rgba(117, 117, 117, 1)
    }

    .bs {
      font-size: inherit
    }

    .bt {
      border: inherit
    }

    .bu {
      font-family: inherit
    }

    .bv {
      letter-spacing: inherit
    }

    .bw {
      font-weight: inherit
    }

    .bx {
      padding: 0
    }

    .by {
      margin: 0
    }

    .bz:disabled {
      cursor: default
    }

    .ca:disabled {
      color: rgba(26, 137, 23, 0.3)
    }

    .cb:disabled {
      fill: rgba(26, 137, 23, 0.3)
    }

    .cc {
      height: 25px
    }

    .cd {
      justify-content: space-between
    }

    .ci {
      align-items: flex-start
    }

    .cj {
      margin-bottom: 0px
    }

    .ck {
      margin-top: -40px
    }

    .cl {
      align-items: flex-end
    }

    .cm {
      flex-wrap: wrap
    }

    .cn {
      margin-top: 40px
    }

    .co {
      margin-right: 24px
    }

    .cp {
      font-weight: 700
    }

    .cq {
      font-size: 27px
    }

    .cr {
      line-height: 34px
    }

    .cs:before {
      margin-bottom: -14px
    }

    .ct:before {
      content: ""
    }

    .cu:before {
      display: table
    }

    .cv:before {
      border-collapse: collapse
    }

    .cw:after {
      margin-top: -6px
    }

    .cx:after {
      content: ""
    }

    .cy:after {
      display: table
    }

    .cz:after {
      border-collapse: collapse
    }

    .da {
      letter-spacing: 0
    }

    .db {
      color: rgba(25, 25, 25, 1)
    }

    .dc {
      word-break: break-word
    }

    .de {
      font-size: 16px
    }

    .df {
      line-height: 24px
    }

    .dg:before {
      margin-bottom: -10px
    }

    .dh {
      color: rgba(41, 41, 41, 1)
    }

    .di {
      margin-left: 12px
    }

    .dj {
      margin-right: 12px
    }

    .dk {
      color: inherit
    }

    .dl {
      fill: inherit
    }

    .dm:hover {
      color: rgba(25, 25, 25, 1)
    }

    .dn:hover {
      fill: rgba(25, 25, 25, 1)
    }

    .do:disabled {
      color: rgba(117, 117, 117, 1)
    }

    .dp:disabled {
      fill: rgba(117, 117, 117, 1)
    }

    .dq {
      flex: 0 0 auto
    }

    .dr {
      justify-self: flex-end
    }

    .ds {
      padding-left: 24px
    }

    .dt {
      padding-right: 24px
    }

    .du {
      margin-left: auto
    }

    .dv {
      margin-right: auto
    }

    .dw {
      max-width: 728px
    }

    .dx {
      position: absolute
    }

    .dy {
      left: 0
    }

    .dz {
      top: calc(100vh + 100px)
    }

    .ea {
      bottom: calc(100vh + 100px)
    }

    .eb {
      width: 10px
    }

    .ec {
      pointer-events: none
    }

    .ed {
      word-wrap: break-word
    }

    .ee:after {
      display: block
    }

    .ef:after {
      clear: both
    }

    .eg {
      clear: both
    }

    .eh {
      margin-top: 0px
    }

    .ei {
      transition: transform 300ms cubic-bezier(0.2, 0, 0.2, 1)
    }

    .ej {
      cursor: zoom-in
    }

    .ek {
      z-index: auto
    }

    .el {
      opacity: 0
    }

    .em {
      transition: opacity 100ms 400ms
    }

    .en {
      top: 0
    }

    .eo {
      height: 100%
    }

    .ep {
      overflow: hidden
    }

    .eq {
      will-change: transform
    }

    .er {
      transform: translateZ(0)
    }

    .es {
      margin: auto
    }

    .et {
      background-color: rgba(242, 242, 242, 1)
    }

    .eu {
      padding-bottom: 63.60294117647059%
    }

    .ev {
      height: 0
    }

    .ew {
      filter: blur(20px)
    }

    .ex {
      transform: scale(1.1)
    }

    .ey {
      visibility: visible
    }

    .ez {
      margin-top: 10px
    }

    .fa {
      text-align: center
    }

    .fd {
      max-width: 680px
    }

    .fe {
      line-height: 1.23
    }

    .ff {
      font-style: normal
    }

    .ga {
      margin-bottom: -0.27em
    }

    .gb {
      margin-top: 32px
    }

    .gf {
      width: 28px
    }

    .gg {
      height: 28px
    }

    .gh {
      width: calc(100% + 24px)
    }

    .gi {
      height: calc(100% + 24px)
    }

    .gj {
      top: 50%
    }

    .gk {
      left: 50%
    }

    .gl {
      transform: translateX(-50%) translateY(-50%)
    }

    .gm {
      border-radius: 50%
    }

    .gn {
      margin: 0 4px
    }

    .go {
      margin: 0 7px
    }

    .gx {
      padding-right: 6px
    }

    .gy {
      margin-right: 8px
    }

    .gz {
      fill: rgba(117, 117, 117, 1)
    }

    .ha {
      margin-right: -6px
    }

    .hb {
      line-height: 1.58
    }

    .hc {
      letter-spacing: -0.004em
    }

    .hd {
      font-family: charter, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .ht {
      margin-top: 24px
    }

    .hu {
      margin-bottom: -0.46em
    }

    .hv {
      font-style: italic
    }

    .hw {
      text-decoration: underline
    }

    .hx {
      max-width: 2549px
    }

    .id {
      background: rgba(255, 255, 255, 1)
    }

    .ie {
      border-width: 2px
    }

    .if {
      border-color: rgba(255, 255, 255, 1)
    }

    .ig {
      float: left
    }

    .ih {
      margin-left: -150px
    }

    .ii {
      margin-right: 30px
    }

    .ij {
      width: 75%
    }

    .ik {
      padding-bottom: 10px
    }

    .ip {
      margin-bottom: 16px
    }

    .iq {
      padding-bottom: 122.12632404864652%
    }

    .ja {
      padding-bottom: NaN%
    }

    .jb {
      padding: 2px 4px
    }

    .jc {
      font-size: 75%
    }

    .jd>strong {
      font-family: inherit
    }

    .je {
      font-family: Menlo, Monaco, "Courier New", Courier, monospace
    }

    .jf {
      margin-bottom: 14px
    }

    .jg {
      padding-top: 24px
    }

    .jh {
      background-color: rgba(8, 8, 8, 1)
    }

    .ji {
      height: 3px
    }

    .jj {
      width: 3px
    }

    .jk {
      margin-right: 20px
    }

    .jl {
      line-height: 1.12
    }

    .jm {
      letter-spacing: -0.022em
    }

    .jn {
      font-weight: 500
    }

    .kg {
      margin-bottom: -0.28em
    }

    .ku {
      padding-bottom: 75%
    }

    .kv {
      padding-bottom: 55.64748201438849%
    }

    .kw {
      padding-left: 30px
    }

    .kx {
      line-height: 40px
    }

    .ky {
      letter-spacing: -0.009em
    }

    .kz {
      font-weight: 300
    }

    .la {
      font-size: 28px
    }

    .ll {
      padding: 20px
    }

    .lm {
      background: rgba(242, 242, 242, 1)
    }

    .ln {
      overflow-x: auto
    }

    .lo {
      line-height: 1.18
    }

    .lp {
      margin-top: -0.09em
    }

    .lq {
      margin-bottom: -0.09em
    }

    .lr {
      white-space: pre-wrap
    }

    .mc {
      max-width: 500px
    }

    .md {
      padding-bottom: 139%
    }

    .me {
      max-width: 1200px
    }

    .mf {
      padding-bottom: 5px
    }

    .mg {
      padding-top: 5px
    }

    .mh {
      max-width: 2071px
    }

    .mi {
      padding-bottom: 66.63447609850314%
    }

    .mj {
      max-width: 1800px
    }

    .mk {
      padding-bottom: 2.7777777777777777%
    }

    .ml {
      padding-bottom: 57%
    }

    .mm {
      padding-bottom: 2.7499999999999996%
    }

    .mn {
      max-width: 450px
    }

    .mo {
      padding-bottom: 64.22222222222221%
    }

    .mp {
      max-width: 551px
    }

    .mq {
      padding-bottom: 61.88747731397459%
    }

    .mr {
      padding-bottom: 85.4%
    }

    .mx {
      box-shadow: inset 0 0 0 1px rgba(230, 230, 230, 1)
    }

    .my {
      padding: 0px
    }

    .mz {
      padding: 16px 20px
    }

    .na {
      flex: 1 1 auto
    }

    .nc {
      max-height: 40px
    }

    .nd {
      text-overflow: ellipsis
    }

    .ne {
      display: -webkit-box
    }

    .nf {
      -webkit-line-clamp: 2
    }

    .ng {
      -webkit-box-orient: vertical
    }

    .ni {
      margin-top: 8px
    }

    .nj {
      margin-top: 12px
    }

    .nk {
      font-size: 13px
    }

    .nl {
      width: 160px
    }

    .nm {
      background-image: url(https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/320/1*cWkz4VgkkdnGOdTMoAxcmQ.png)
    }

    .nn {
      background-origin: border-box
    }

    .no {
      background-size: cover
    }

    .np {
      height: 167px
    }

    .nq {
      background-position: 50% 50%
    }

    .nr {
      max-width: 100%
    }

    .ns {
      background-image: url(https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/320/1*kEsNkF1AtQAE8J5ggHDH8w.png)
    }

    .nt {
      padding-bottom: 60.526315789473685%
    }

    .nu {
      list-style-type: disc
    }

    .nv {
      margin-left: 30px
    }

    .nw {
      padding-left: 0px
    }

    .oc {
      list-style-type: decimal
    }

    .od {
      will-change: opacity
    }

    .oe {
      position: fixed
    }

    .of {
      width: 188px
    }

    .og {
      transform: translateX(406px)
    }

    .oh {
      top: calc(65px + 54px + 14px)
    }

    .ok {
      top: 159px
    }

    .om {
      width: 131px
    }

    .on {
      padding-bottom: 28px
    }

    .oo {
      font-size: 12px
    }

    .op {
      line-height: 16px
    }

    .oq {
      letter-spacing: 0.083em
    }

    .or {
      text-transform: uppercase
    }

    .os {
      padding-top: 2px
    }

    .ot {
      padding-top: 14px
    }

    .ou {
      padding: 4px 12px 6px
    }

    .ov {
      border-color: rgba(117, 117, 117, 1)
    }

    .ow:hover {
      color: rgba(8, 8, 8, 1)
    }

    .ox:hover {
      fill: rgba(8, 8, 8, 1)
    }

    .oy:hover {
      border-color: rgba(41, 41, 41, 1)
    }

    .oz:disabled:hover {
      color: rgba(41, 41, 41, 1)
    }

    .pa:disabled:hover {
      fill: rgba(41, 41, 41, 1)
    }

    .pb:disabled:hover {
      border-color: rgba(117, 117, 117, 1)
    }

    .pc {
      padding-top: 28px
    }

    .pd {
      margin-bottom: 19px
    }

    .pe {
      margin-left: -3px
    }

    .pk {
      outline: 0
    }

    .pl {
      border: 0
    }

    .pm {
      user-select: none
    }

    .pn {
      cursor: pointer
    }

    .po>svg {
      pointer-events: none
    }

    .pp:active {
      border-style: none
    }

    .pq {
      -webkit-user-select: none
    }

    .pr:focus {
      fill: rgba(117, 117, 117, 1)
    }

    .ps:hover {
      fill: rgba(117, 117, 117, 1)
    }

    .qa button {
      text-align: left
    }

    .qb {
      opacity: 0.4
    }

    .qc {
      cursor: not-allowed
    }

    .qd {
      padding-right: 9px
    }

    .qm {
      padding-bottom: 25px
    }

    .qn {
      margin-top: 25px
    }

    .qo {
      max-width: 155px
    }

    .qs {
      top: 1px
    }

    .rg {
      margin-left: -1px
    }

    .rh {
      margin-left: -4px
    }

    .rp {
      padding-right: 8px
    }

    .rq {
      padding-bottom: 40px
    }

    .rr {
      list-style-type: none
    }

    .rs {
      margin-bottom: 8px
    }

    .rt {
      line-height: 22px
    }

    .ru {
      border-radius: 3px
    }

    .rv {
      padding: 5px 10px
    }

    .rw {
      padding-top: 40px
    }

    .rz {
      padding-bottom: 4px
    }

    .sa {
      padding-top: 32px
    }

    .sb {
      background-color: rgba(250, 250, 250, 1)
    }

    .sr {
      -webkit-line-clamp: 1
    }

    .ss {
      padding-right: 168px
    }

    .st {
      padding-top: 25px
    }

    .sw {
      margin-bottom: 40px
    }

    .sx {
      padding-bottom: 16px
    }

    .sy {
      margin-bottom: 24px
    }

    .us {
      flex-grow: 0
    }

    .ut {
      padding-bottom: 24px
    }

    .uu {
      flex: 0 1 auto
    }

    .uy {
      padding-bottom: 8px
    }

    .vg:hover {
      text-decoration: underline
    }

    .vj {
      padding-bottom: 100%
    }

    .vu {
      padding: 32px 0
    }

    .vv {
      background-color: rgba(0, 0, 0, 0.9)
    }

    .vx:hover {
      color: rgba(255, 255, 255, 0.99)
    }

    .vy:hover {
      fill: rgba(255, 255, 255, 0.99)
    }

    .vz:disabled {
      color: rgba(255, 255, 255, 0.7)
    }

    .wa:disabled {
      fill: rgba(255, 255, 255, 0.7)
    }

    .wb {
      fill: rgba(255, 255, 255, 1)
    }

    .wc {
      height: 22px
    }

    .wd {
      color: rgba(255, 255, 255, 0.7)
    }

    .we {
      width: 200px
    }

    .wh {
      color: rgba(255, 255, 255, 0.98)
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (min-width: 1080px)">
    .d {
      display: none
    }

    .ai {
      margin: 0 64px
    }

    .fw {
      font-size: 46px
    }

    .fx {
      margin-top: 0.6em
    }

    .fy {
      line-height: 56px
    }

    .fz {
      letter-spacing: -0.011em
    }

    .gv {
      margin-left: 30px
    }

    .hq {
      font-size: 21px
    }

    .hr {
      line-height: 32px
    }

    .hs {
      letter-spacing: -0.003em
    }

    .ic {
      margin-top: 56px
    }

    .iv {
      margin-top: 2em
    }

    .kc {
      font-size: 30px
    }

    .kd {
      margin-top: 1.25em
    }

    .ke {
      line-height: 36px
    }

    .kf {
      letter-spacing: 0
    }

    .kl {
      margin-top: 0.86em
    }

    .kt {
      max-width: 1192px
    }

    .lf {
      margin-top: 2.75em
    }

    .lk {
      margin-top: 3.14em
    }

    .lw {
      margin-top: 80px
    }

    .mb {
      margin-top: 1.91em
    }

    .mw {
      margin-top: 32px
    }

    .ob {
      margin-top: 1.05em
    }

    .pj {
      margin-right: 5px
    }

    .pz {
      margin-top: 5px
    }

    .ql {
      padding-left: 6px
    }

    .qu {
      display: inline-block
    }

    .qz {
      margin-left: 7px
    }

    .ra {
      margin-top: 8px
    }

    .rf {
      width: 25px
    }

    .rn {
      padding-left: 7px
    }

    .ro {
      top: 3px
    }

    .so {
      font-size: 20px
    }

    .sp {
      line-height: 24px
    }

    .sq {
      max-height: 24px
    }

    .sv {
      margin: 0
    }

    .tj {
      font-size: 22px
    }

    .tk {
      line-height: 28px
    }

    .tx {
      width: calc(100% + 32px)
    }

    .ty {
      margin-left: -16px
    }

    .tz {
      margin-right: -16px
    }

    .uo {
      padding-left: 16px
    }

    .up {
      padding-right: 16px
    }

    .uq {
      flex-basis: 25%
    }

    .ur {
      max-width: 25%
    }

    .vd {
      font-size: 16px
    }

    .ve {
      line-height: 20px
    }

    .vs {
      min-width: 70px
    }

    .vt {
      min-height: 70px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (max-width: 1079.98px)">
    .e {
      display: none
    }

    .fb {
      margin-left: auto
    }

    .fc {
      text-align: center
    }

    .gu {
      margin-left: 30px
    }

    .il {
      float: none
    }

    .im {
      margin-left: 0
    }

    .in {
      margin-right: 0
    }

    .io {
      width: 100%
    }

    .pi {
      margin-right: 5px
    }

    .py {
      margin-top: 5px
    }

    .qk {
      padding-left: 6px
    }

    .qt {
      display: inline-block
    }

    .qx {
      margin-left: 7px
    }

    .qy {
      margin-top: 8px
    }

    .re {
      width: 25px
    }

    .rl {
      padding-left: 7px
    }

    .rm {
      top: 3px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (max-width: 903.98px)">
    .f {
      display: none
    }

    .gt {
      margin-left: 30px
    }

    .iw {
      float: none
    }

    .ix {
      margin-left: 0
    }

    .iy {
      margin-right: 0
    }

    .iz {
      width: 100%
    }

    .ph {
      margin-right: 5px
    }

    .px {
      margin-top: 5px
    }

    .qi {
      padding-left: 6px
    }

    .qj {
      top: 3px
    }

    .qr {
      display: inline-block
    }

    .qv {
      margin-left: 7px
    }

    .qw {
      margin-top: 8px
    }

    .rd {
      width: 15px
    }

    .rk {
      padding-left: 3px
    }

    .ux {
      margin-right: 16px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (max-width: 727.98px)">
    .g {
      display: none
    }

    .z {
      display: block
    }

    .ce {
      min-height: 160px
    }

    .cf {
      align-items: flex-start
    }

    .cg {
      flex-direction: column
    }

    .ch {
      justify-content: center
    }

    .dd {
      margin-top: 20px
    }

    .gd {
      margin-top: 32px
    }

    .ge {
      flex-direction: column-reverse
    }

    .gr {
      margin-bottom: 30px
    }

    .gs {
      margin-left: 0px
    }

    .nb {
      padding: 10px 12px 10px
    }

    .pg {
      margin-left: 8px
    }

    .pv {
      margin-top: 2px
    }

    .pw {
      margin-right: 8px
    }

    .qg {
      padding-left: 6px
    }

    .qh {
      top: 3px
    }

    .qq {
      display: inline-block
    }

    .rc {
      width: 15px
    }

    .rj {
      padding-left: 3px
    }

    .rx {
      padding-top: 0
    }

    .ry {
      border-top: none
    }

    .sz {
      padding-bottom: 12px
    }

    .ta {
      margin-top: 16px
    }

    .uw {
      margin-right: 16px
    }

    .vh {
      margin-left: 16px
    }

    .vi {
      margin-right: 0px
    }

    .vw {
      padding: 32px 0
    }

    .wf {
      width: 140px
    }

    .wg {
      display: flex
    }

    .wi {
      margin-bottom: 16px
    }

    .wj {
      margin-top: 30px
    }

    .wk {
      width: 100%
    }

    .wl {
      flex-direction: row
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (max-width: 551.98px)">
    .h {
      display: none
    }

    .ae {
      margin: 0 24px
    }

    .fg {
      font-size: 32px
    }

    .fh {
      margin-top: 0.64em
    }

    .fi {
      line-height: 40px
    }

    .fj {
      letter-spacing: -0.016em
    }

    .gc {
      margin-top: 32px
    }

    .gp {
      margin-bottom: 30px
    }

    .gq {
      margin-left: 0px
    }

    .he {
      font-size: 18px
    }

    .hf {
      line-height: 28px
    }

    .hg {
      letter-spacing: -0.003em
    }

    .hy {
      margin-top: 40px
    }

    .ir {
      margin-top: 1.56em
    }

    .jo {
      font-size: 22px
    }

    .jp {
      margin-top: 0.93em
    }

    .jq {
      letter-spacing: 0
    }

    .kh {
      margin-top: 0.67em
    }

    .km {
      margin: 0
    }

    .kn {
      max-width: 100%
    }

    .lb {
      margin-top: 1.42em
    }

    .lg {
      margin-top: 2em
    }

    .ls {
      margin-top: 48px
    }

    .lx {
      margin-top: 1.41em
    }

    .ms {
      margin-top: 24px
    }

    .nx {
      margin-top: 1.34em
    }

    .pf {
      margin-left: 8px
    }

    .pt {
      margin-top: 2px
    }

    .pu {
      margin-right: 8px
    }

    .qe {
      padding-left: 6px
    }

    .qf {
      top: 3px
    }

    .qp {
      display: inline-block
    }

    .rb {
      width: 15px
    }

    .ri {
      padding-left: 3px
    }

    .sc {
      font-size: 16px
    }

    .sd {
      line-height: 20px
    }

    .se {
      max-height: 20px
    }

    .tb {
      font-size: 20px
    }

    .tc {
      line-height: 24px
    }

    .tl {
      width: calc(100% + 24px)
    }

    .tm {
      margin-left: -12px
    }

    .tn {
      margin-right: -12px
    }

    .ua {
      padding-left: 12px
    }

    .ub {
      padding-right: 12px
    }

    .uc {
      flex-basis: 100%
    }

    .uv {
      margin-right: 16px
    }

    .vf {
      margin-bottom: 0px
    }

    .vk {
      min-width: 48px
    }

    .vl {
      min-height: 48px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE"
    media="all and (min-width: 904px) and (max-width: 1079.98px)">
    .i {
      display: none
    }

    .ah {
      margin: 0 64px
    }

    .fs {
      font-size: 46px
    }

    .ft {
      margin-top: 0.6em
    }

    .fu {
      line-height: 56px
    }

    .fv {
      letter-spacing: -0.011em
    }

    .hn {
      font-size: 21px
    }

    .ho {
      line-height: 32px
    }

    .hp {
      letter-spacing: -0.003em
    }

    .ib {
      margin-top: 56px
    }

    .iu {
      margin-top: 2em
    }

    .jy {
      font-size: 30px
    }

    .jz {
      margin-top: 1.25em
    }

    .ka {
      line-height: 36px
    }

    .kb {
      letter-spacing: 0
    }

    .kk {
      margin-top: 0.86em
    }

    .ks {
      max-width: 1192px
    }

    .le {
      margin-top: 2.75em
    }

    .lj {
      margin-top: 3.14em
    }

    .lv {
      margin-top: 80px
    }

    .ma {
      margin-top: 1.91em
    }

    .mv {
      margin-top: 32px
    }

    .oa {
      margin-top: 1.05em
    }

    .sl {
      font-size: 20px
    }

    .sm {
      line-height: 24px
    }

    .sn {
      max-height: 24px
    }

    .su {
      margin: 0
    }

    .th {
      font-size: 22px
    }

    .ti {
      line-height: 28px
    }

    .tu {
      width: calc(100% + 32px)
    }

    .tv {
      margin-left: -16px
    }

    .tw {
      margin-right: -16px
    }

    .uk {
      padding-left: 16px
    }

    .ul {
      padding-right: 16px
    }

    .um {
      flex-basis: 25%
    }

    .un {
      max-width: 25%
    }

    .vb {
      font-size: 16px
    }

    .vc {
      line-height: 20px
    }

    .vq {
      min-width: 70px
    }

    .vr {
      min-height: 70px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE"
    media="all and (min-width: 728px) and (max-width: 903.98px)">
    .j {
      display: none
    }

    .ag {
      margin: 0 48px
    }

    .fo {
      font-size: 46px
    }

    .fp {
      margin-top: 0.6em
    }

    .fq {
      line-height: 56px
    }

    .fr {
      letter-spacing: -0.011em
    }

    .hk {
      font-size: 21px
    }

    .hl {
      line-height: 32px
    }

    .hm {
      letter-spacing: -0.003em
    }

    .ia {
      margin-top: 56px
    }

    .it {
      margin-top: 2em
    }

    .ju {
      font-size: 30px
    }

    .jv {
      margin-top: 1.25em
    }

    .jw {
      line-height: 36px
    }

    .jx {
      letter-spacing: 0
    }

    .kj {
      margin-top: 0.86em
    }

    .kq {
      margin: 0
    }

    .kr {
      max-width: 100%
    }

    .ld {
      margin-top: 2.75em
    }

    .li {
      margin-top: 3.14em
    }

    .lu {
      margin-top: 80px
    }

    .lz {
      margin-top: 1.91em
    }

    .mu {
      margin-top: 32px
    }

    .nz {
      margin-top: 1.05em
    }

    .si {
      font-size: 20px
    }

    .sj {
      line-height: 24px
    }

    .sk {
      max-height: 24px
    }

    .tf {
      font-size: 22px
    }

    .tg {
      line-height: 28px
    }

    .tr {
      width: calc(100% + 28px)
    }

    .ts {
      margin-left: -14px
    }

    .tt {
      margin-right: -14px
    }

    .ug {
      padding-left: 14px
    }

    .uh {
      padding-right: 14px
    }

    .ui {
      flex-basis: 50%
    }

    .uj {
      max-width: 50%
    }

    .uz {
      font-size: 16px
    }

    .va {
      line-height: 20px
    }

    .vo {
      min-width: 48px
    }

    .vp {
      min-height: 48px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE"
    media="all and (min-width: 552px) and (max-width: 727.98px)">
    .k {
      display: none
    }

    .af {
      margin: 0 24px
    }

    .fk {
      font-size: 32px
    }

    .fl {
      margin-top: 0.64em
    }

    .fm {
      line-height: 40px
    }

    .fn {
      letter-spacing: -0.016em
    }

    .hh {
      font-size: 18px
    }

    .hi {
      line-height: 28px
    }

    .hj {
      letter-spacing: -0.003em
    }

    .hz {
      margin-top: 40px
    }

    .is {
      margin-top: 1.56em
    }

    .jr {
      font-size: 22px
    }

    .js {
      margin-top: 0.93em
    }

    .jt {
      letter-spacing: 0
    }

    .ki {
      margin-top: 0.67em
    }

    .ko {
      margin: 0
    }

    .kp {
      max-width: 100%
    }

    .lc {
      margin-top: 1.42em
    }

    .lh {
      margin-top: 2em
    }

    .lt {
      margin-top: 48px
    }

    .ly {
      margin-top: 1.41em
    }

    .mt {
      margin-top: 24px
    }

    .ny {
      margin-top: 1.34em
    }

    .sf {
      font-size: 16px
    }

    .sg {
      line-height: 20px
    }

    .sh {
      max-height: 20px
    }

    .td {
      font-size: 20px
    }

    .te {
      line-height: 24px
    }

    .to {
      width: calc(100% + 24px)
    }

    .tp {
      margin-left: -12px
    }

    .tq {
      margin-right: -12px
    }

    .ud {
      padding-left: 12px
    }

    .ue {
      padding-right: 12px
    }

    .uf {
      flex-basis: 100%
    }

    .vm {
      min-width: 48px
    }

    .vn {
      min-height: 48px
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="print">
    .gw {
      display: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE"
    media="(orientation: landscape) and (max-width: 903.98px)">
    .nh {
      max-height: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE"
    media="(prefers-reduced-motion: no-preference)">
    .oi {
      transition: opacity 200ms
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (max-width: 1230px)">
    .oj {
      display: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="609" data-fela-type="RULE" media="all and (max-width: 1198px)">
    .ol {
      display: none
    }
  </style>
</head>

<body>
  <!-- BEGIN WAYBACK TOOLBAR INSERT -->
  <style type="text/css">
    body {
      margin-top: 0 !important;
      padding-top: 0 !important;
      /*min-width:800px !important;*/
    }
  </style>
  <script>__wm.rw(0);</script>
  <div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
    <div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
      <div id="wm-ipp-inside">
        <div style="position:relative;">
          <div id="wm-logo" style="float:left;width:110px;padding-top:12px;">
            <a href="/web/" title="Wayback Machine home page"><img
                src="/_static/images/toolbar/wayback-toolbar-logo-200.png"
                srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x"
                alt="Wayback Machine" style="width:100px" border="0" /></a>
          </div>
          <div class="r" style="float:right;">
            <div id="wm-btns" style="text-align:right;height:25px;">
              <div id="wm-save-snapshot-success">success</div>
              <div id="wm-save-snapshot-fail">fail</div>
              <a id="wm-save-snapshot-open" href="#" title="Share via My Web Archive">
                <span class="iconochive-web"></span>
              </a>
              <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in">
                <span class="iconochive-person"></span>
              </a>
              <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
              <a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine"
                style="top:-6px;"><span class="iconochive-question"
                  style="color:rgb(87,186,244);font-size:160%;"></span></a>
              <a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;"
                title="Close the toolbar"><span class="iconochive-remove-circle"
                  style="color:#888888;font-size:240%;"></span></a>
            </div>
            <div id="wm-share">
              <a href="/web/20201025032303/http://web.archive.org/screenshot/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                id="wm-screenshot" title="screenshot">
                <span class="wm-icon-screen-shot"></span>
              </a>
              <a id="wm-share-facebook" href="#"
                data-url="https://web.archive.org/web/20201025032303/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook"
                  style="color:#3b5998;font-size:160%;"></span></a>
              <a id="wm-share-twitter" href="#"
                data-url="https://web.archive.org/web/20201025032303/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter"
                  style="color:#1dcaff;font-size:160%;"></span></a>
            </div>
          </div>
          <table class="c" style="">
            <tbody>
              <tr>
                <td class="u" colspan="2">
                  <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text"
                      name="url" id="wmtbURL"
                      value="https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                      onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input
                      type="hidden" name="date" value="20201025032303" /><input type="submit" value="Go" /></form>
                </td>
                <td class="n" rowspan="2" style="width:110px;">
                  <table>
                    <tbody>
                      <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
                      <tr class="m">
                        <td class="b" nowrap="nowrap"><a
                            href="https://web.archive.org/web/20190923070217/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                            title="23 Sep 2019"><strong>Sep</strong></a></td>
                        <td class="c" id="displayMonthEl" title="You are here: 03:23:03 Oct 25, 2020">OCT</td>
                        <td class="f" nowrap="nowrap">Nov</td>
                      </tr>
                      <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
                      <tr class="d">
                        <td class="b" nowrap="nowrap"><a
                            href="https://web.archive.org/web/20190923070217/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                            title="07:02:17 Sep 23, 2019"><img src="/_static/images/toolbar/wm_tb_prv_on.png"
                              alt="Previous capture" width="14" height="16" border="0" /></a></td>
                        <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;"
                          title="You are here: 03:23:03 Oct 25, 2020">25</td>
                        <td class="f" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_nxt_off.png"
                            alt="Next capture" width="14" height="16" border="0" /></td>
                      </tr>
                      <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
                      <tr class="y">
                        <td class="b" nowrap="nowrap"><a
                            href="https://web.archive.org/web/20190923070217/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                            title="23 Sep 2019"><strong>2019</strong></a></td>
                        <td class="c" id="displayYearEl" title="You are here: 03:23:03 Oct 25, 2020">2020</td>
                        <td class="f" nowrap="nowrap">2021</td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td class="s">
                  <div id="wm-nav-captures">
                    <a class="t"
                      href="/web/20201025032303*/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
                      title="See a list of every capture for this URL">12 captures</a>
                    <div class="r" title="Timespan for captures of this URL">04 Aug 2019 - 25 Oct 2020</div>
                  </div>
                </td>
                <td class="k">
                  <a href="" id="wm-graph-anchor">
                    <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
                      <canvas id="wm-sparkline-canvas" width="650" height="27" border="0"></canvas>
                    </div>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="position:absolute;bottom:0;right:2px;text-align:right;">
            <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span
                id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this
                capture</span></a>
          </div>
        </div>
        <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
          <div id="wm-capinfo-collected-by">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
            <div style="padding:3px;position:relative" id="wm-collected-by-content">
              <div style="display:inline-block;vertical-align:top;width:49%;">
                <span class="c-logo" style="background-image:url(https://archive.org/services/img/commoncrawl)"></span>
                <div>Collection: <a style="color:#33f;" href="https://archive.org/details/commoncrawl"
                    target="_new"><span class="wm-title">Common Crawl</span></a></div>
                <div style="max-height:75px;overflow:hidden;position:relative;">
                  <div
                    style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);">
                  </div>
                  Web crawl data from Common Crawl.
                </div>
              </div>
            </div>
          </div>
          <div id="wm-capinfo-timestamps">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center"
              title="Timestamps for the elements of this page">TIMESTAMPS</div>
            <div>
              <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important">
              </div>
              <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img
                  src="/_static/images/loading.gif" alt="loading" /></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="donato" style="position:relative;width:100%;">
    <div id="donato-base">
      <iframe id="donato-if"
        src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20201025032303/https%3A//medium.com/%2540ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"
        scrolling="no" frameborder="0" style="width:100%; height:100%">
      </iframe>
    </div>
  </div>
  <script type="text/javascript">
    __wm.bt(650, 27, 25, 2, "web", "https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e", "20201025032303", 1996, "/_static/", ["/_static/css/banner-styles.css?v=bsmaklHF", "/_static/css/iconochive.css?v=qtvMKcIJ"]);
    __wm.rw(1);
  </script>
  <!-- END WAYBACK TOOLBAR INSERT -->
  <div id="root">
    <div class="a b c">
      <div class="d e f g h i j k"></div>
      <script>document.domain = document.domain;</script>
      <div>
        <script>if (window.self !== window.top) window.location = "about:blank"</script>
      </div>
      <script>window.PARSELY = window.PARSELY || { autotrack: false }</script>
      <div class="u v w">
        <div class="n x c">
          <div class="y z">
            <div class="u w ab ac">
              <div class="n p">
                <div class="ae af ag ah ai aj ak t">
                  <div class="al n o">
                    <div class="n o am an">
                      <div class="ao w"><span><button
                            class="ap b aq ar as at au av aw ax ay az ba bb bc bd be bf bg bh bi bj bk bl">Get
                            started</button></span></div>
                      <div class="bm bn">
                        <div class="bo w">
                          <div class="bp" id="lo-general-navbar-open-in-app-button">
                            <div class="bq y z"><span class="ap b aq ar br"><a
                                  href="https://web.archive.org/web/20201025032303/https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fef62a7e28f7e&amp;~feature=LoOpenInAppButton&amp;~channel=ShowPostUnderUser&amp;~stage=mobileNavBar&amp;source=post_page-----ef62a7e28f7e--------------------------------"
                                  class="as av bs bt bu bv bw bx by ba ax ay bz ca cb" rel="noopener nofollow">Open in
                                  app</a></span></div>
                          </div>
                        </div>
                      </div>
                    </div><a aria-label="Homepage" rel="noopener"
                      href="/web/20201025032303/https://medium.com/?source=post_page-----ef62a7e28f7e--------------------------------"><svg
                        viewbox="0 0 1043.63 592.71" class="cc r">
                        <g data-name="Layer 2">
                          <g data-name="Layer 1">
                            <path
                              d="M588.67 296.36c0 163.67-131.78 296.35-294.33 296.35S0 460 0 296.36 131.78 0 294.34 0s294.33 132.69 294.33 296.36M911.56 296.36c0 154.06-65.89 279-147.17 279s-147.17-124.94-147.17-279 65.88-279 147.16-279 147.17 124.9 147.17 279M1043.63 296.36c0 138-23.17 249.94-51.76 249.94s-51.75-111.91-51.75-249.94 23.17-249.94 51.75-249.94 51.76 111.9 51.76 249.94">
                            </path>
                          </g>
                        </g>
                      </svg></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="n p">
            <div class="ae af ag ah ai aj ak t">
              <div class="v n o am cd ce cf cg ch">
                <div class="t n ci cd">
                  <div class="s n t">
                    <div class="cj ck t n cl am cm cf cg">
                      <div class="cn co w"><a aria-label="Author Homepage" rel="noopener"
                          href="/web/20201025032303/https://medium.com/@ly.lee?source=post_page-----ef62a7e28f7e--------------------------------"><span
                            class="ap cp cq cr cs ct cu cv cw cx cy cz da db dc">Lup Yuen Lee 李立源</span></a></div>
                      <div class="cn w dd">
                        <h4 class="ap b de df dg ct cu cv cw cx cy cz br">
                          <div class="n o"><span class="ap b de df dh">955 Followers</span>
                            <div class="di dj w">·</div>
                            <div class="co w"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener"
                                href="/web/20201025032303/https://medium.com/@ly.lee/about?source=post_page-----ef62a7e28f7e--------------------------------">About</a>
                            </div><span><a
                                href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fsubscribe%2Fuser%2F1da08193a324&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_page-1da08193a324----ef62a7e28f7e---------------------follow_header-----------"
                                class="as av bs bt bu bv bw bx by ba ax ay bz ca cb" rel="noopener">Follow</a></span>
                          </div>
                        </h4>
                      </div>
                    </div>
                  </div>
                  <div class="n o dq dr ac g">
                    <div class="co w"><span><button
                          class="ap b aq ar as at au av aw ax ay az ba bb bc bd be bf bg bh bi bj bk bl">Get
                          started</button></span></div><a aria-label="Homepage" rel="noopener"
                      href="/web/20201025032303/https://medium.com/?source=post_page-----ef62a7e28f7e--------------------------------"><svg
                        viewbox="0 0 1043.63 592.71" class="cc r">
                        <g data-name="Layer 2">
                          <g data-name="Layer 1">
                            <path
                              d="M588.67 296.36c0 163.67-131.78 296.35-294.33 296.35S0 460 0 296.36 131.78 0 294.34 0s294.33 132.69 294.33 296.36M911.56 296.36c0 154.06-65.89 279-147.17 279s-147.17-124.94-147.17-279 65.88-279 147.16-279 147.17 124.9 147.17 279M1043.63 296.36c0 138-23.17 249.94-51.76 249.94s-51.75-111.91-51.75-249.94 23.17-249.94 51.75-249.94 51.76 111.9 51.76 249.94">
                            </path>
                          </g>
                        </g>
                      </svg></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <article>
        <section class="ds dt du dv t dw bj w"></section><span class="w"></span>
        <div>
          <div class="dx dy dz ea eb ec"></div>
          <section class="dc ed ee cx ef">
            <div class="eg t">
              <figure class="eh eg t paragraph-image">
                <div class="ei ej ab ek t">
                  <div class="es w ab et">
                    <div class="eu ev w">
                      <div class="el em dx en dy eo t ep eq er"><img alt="Image for post" class="dx en dy eo t ew ex ey"
                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg?q=20"
                          width="3264" height="2076" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                        width="3264" height="2076" /><noscript><img alt="Image for post" class="dx en dy eo t"
                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/6528/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg"
                          width="3264" height="2076"
                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1456/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 728w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1632/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 816w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1808/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 904w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1984/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 992w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2160/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 1080w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2700/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 1350w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3240/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 1620w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3780/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 1890w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/4320/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 2160w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/4800/1*I2s4rSDpnbim1sOeMzFmIQ.jpeg 2400w"
                          sizes="100vw" /></noscript>
                    </div>
                  </div>
                </div>
                <figcaption class="ez fa dw du dv fb fc ap b aq ar br">STM32 Blue Pill with Quectel BC95-G Global NB-IoT
                  Module and 18650 lithium ion battery</figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <div>
                  <h1 id="9d4b"
                    class="fe da ff ap cp fg fh fi fj fk fl fm fn fo fp fq fr fs ft fu fv fw fx fy fz ga dh">Rust Rocks
                    NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt</h1>
                  <div class="gb">
                    <div class="n cd gc gd ge">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="/web/20201025032303/https://medium.com/@ly.lee?source=post_page-----ef62a7e28f7e--------------------------------">
                            <div class="ab gf gg">
                              <div class="av n am o p dx gh gi gj gk gl ec"><svg width="36" height="36"
                                  viewbox="0 0 36 36">
                                  <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M18 1.87c-6.63 0-12.4 4.14-15.21 10.21L2 11.71C4.94 5.37 11 1 18 1s13.06 4.37 16 10.71l-.79.37C30.4 6.01 24.63 1.88 18 1.88zM2.79 23.92c2.81 6.07 8.58 10.2 15.21 10.2 6.63 0 12.4-4.13 15.21-10.2l.79.37C31.06 30.63 25 35 18 35S4.94 30.63 2 24.29l.79-.37z">
                                  </path>
                                </svg></div><img alt="Lup Yuen Lee 李立源" class="w gm gg gf"
                                src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/56/56/1*72qLH3RF4S4q2AcxlnIdSw.jpeg"
                                width="28" height="28" />
                            </div>
                          </a></div>
                        <div class="di t n">
                          <div class="n">
                            <div style="flex:1"><span class="ap b aq ar dh"><a class="" rel="noopener"
                                  href="/web/20201025032303/https://medium.com/@ly.lee?source=post_page-----ef62a7e28f7e--------------------------------">
                                  <h4 class="ap b aq ar as">Lup Yuen Lee 李立源</h4>
                                </a></span></div>
                          </div><span class="ap b aq ar br"><a class="" rel="noopener"
                              href="/web/20201025032303/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=post_page-----ef62a7e28f7e--------------------------------">
                              <h4 class="ap b aq ar br"><span class="gn"></span>Aug 4, 2019<span class="go">·</span>22
                                min read</h4>
                            </a></span>
                        </div>
                      </div>
                      <div class="n cl gp gq gr gs gt gu gv gw">
                        <div class="n o">
                          <div class="gx w">
                            <div class="bk" aria-hidden="false"><button
                                class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" aria-label="Share Post"><svg
                                  width="25" height="25" class="r">
                                  <g fill-rule="evenodd">
                                    <path
                                      d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01">
                                    </path>
                                    <path
                                      d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2">
                                    </path>
                                  </g>
                                </svg></button></div>
                          </div>
                          <div class="gy w">
                            <div class="gz"><span><a
                                  href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fbookmark%2Fp%2Fef62a7e28f7e&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_actions_header--------------------------bookmark_preview-----------"
                                  class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener"><svg width="25"
                                    height="25" viewbox="0 0 25 25">
                                    <path
                                      d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                      fill-rule="evenodd"></path>
                                  </svg></a></span></div>
                          </div>
                          <div class="ha w an"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="3a54" class="hb hc ff hd b he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu dc dh"><em
                    class="hv">The year is 2029. Humans are populating the Moon, starting at </em><a class="dk hw"
                    rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/create-your-iot-gadget-with-apache-mynewt-and-stm32-blue-pill-d689b3ca725"><em
                      class="hv">Moon Base One</em></a><em class="hv">. Two Moon Base Operators are about to commit
                    another grave mistake in the crop garden of beautiful red tomatoes…</em></p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv hx">
                      <div class="es w ab et">
                        <div class="iq ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/50/1*JW5WYNcBXvviXWg8mXxIbQ.png?q=20"
                              width="2549" height="3113" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="2549" height="3113" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/5098/1*JW5WYNcBXvviXWg8mXxIbQ.png"
                              width="2549" height="3113"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*JW5WYNcBXvviXWg8mXxIbQ.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/1*JW5WYNcBXvviXWg8mXxIbQ.png 500w"
                              sizes="500px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Tomato Crop and NB-IoT Sensors on Moon Base One
                  </figcaption>
                </figure>
                <p id="0078" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 1</em>: After the <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/get-started-with-nb-iot-and-quectel-modules-6e7c581e0d61">last
                    IoT calamity</a> I’m glad we switched from MQTT to <strong class="hd cp">CoAP Servers connected by
                    NB-IoT</strong>. Now that we have added many sensors to our crop garden, our NB-IoT Sensors need to
                  transmit more efficiently. Can you change the <strong class="hd cp">CoAP payload from JSON to
                  </strong><a href="https://web.archive.org/web/20201025032303/https://en.wikipedia.org/wiki/CBOR"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">CBOR</strong></a>?</p>
                <p id="8e47" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 2</em>: Sure th<span id="rmm">i</span>ng! Lemme look at the <a
                    href="https://web.archive.org/web/20201025032303/https://tools.ietf.org/html/rfc7049" class="dk hw"
                    rel="noopener nofollow">specs of the CBOR binary format</a> and <strong class="hd cp">program the
                  </strong><a href="https://web.archive.org/web/20201025032303/https://github.com/intel/tinycbor"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">CBOR encoder in C</strong></a>…</p>
                <p id="3ca4" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 1</em>: It’s already 2029! <strong class="hd cp">Why aren’t you using
                    Rust?</strong> Just call the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/encoding/macros.rs"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Rust Macro</strong></a> that encodes
                  CoAP payloads into JSON and CBOR!</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Encoding CoAP Payloads in JSON and CBOR with a
                    Rust Macro. From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs</a>
                  </figcaption>
                </figure>
                <p id="a14f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 2</em>: <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac"><strong
                      class="hd cp">Rust Macros can do so much</strong></a><strong class="hd cp">?</strong> Wow I did
                  not know that! Anyway I have finished the C programming for the new firmware. <strong
                    class="hd cp">I’ll push the new firmware to 1,000 sensors now</strong>…</p>
                <p id="cabb" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 1</em>: Great! Hold on… <strong class="hd cp">Our IoT Dashboards are going
                    crazy</strong>… <strong class="hd cp">Temperature 80 degrees Celsius? Humidity 25 percent?</strong>
                  WHAT HAPPENED??!!</p>
                <p id="db45" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 2</em>: OOPS I think the <strong class="hd cp">pointers are corrupted</strong>
                  in my C firmware… The Sensor Data was supposed to point to the string “<code
                    class="et jb jc jd je b">TEMPERATURE</code>”… But it got overwritten by “<code
                    class="et jb jc jd je b">HUMIDITY</code>”… Should have used <strong class="hd cp">safer, simpler
                    Rust</strong> instead of C…</p>
                <p id="5a49" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Operator 1</em>: The Temperature and Humidity Sensor Data are <strong class="hd cp">ALL
                    MIXED UP</strong>!!! The sprinklers are <strong class="hd cp">spraying water</strong> on our
                  tomatoes! The ventilators are <strong class="hd cp">blowing cold air</strong> on them!</p>
                <p id="7451" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Our beautiful tomatoes are turning into… <strong class="hd cp">ICED TOMATOES</strong>!!! NOOOOO…</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="3839" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Why Embedded Rust instead of Embedded C?</h1>
                <p id="a517" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  We’re back in 2019… Hardly anyone writes embedded programs in Rust for microcontrollers (like STM32
                  Blue Pill), we all use C. But we really should switch to Rust! <em class="hv">Moon Base One</em> has
                  given us 2 key reasons…</p>
                <p id="886f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ <strong class="hd cp">Complexity</strong>: Our gadgets are more powerful than ever before. They
                  can communicate via Bluetooth, WiFi, Zigbee, nRF, LoRa, Sigfox and now NB-IoT. Messaging formats are
                  getting more complicated with CoAP and CBOR. Embedded C wasn’t meant for handling such complexity.
                  <strong class="hd cp"><em class="hv">Rust is!</em></strong></p>
                <p id="d9a5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ <strong class="hd cp">Safety</strong>: <em class="hv">With great power comes great
                    responsibility</em>… says the Great Arachnid. How do we ensure that our complex gadgets run non-stop
                  without crashing? We need something safer than Embedded C to prevent runaway pointers before they
                  happen… <strong class="hd cp"><em class="hv">Rust can!</em></strong></p>
                <p id="8f73" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">But have our gadgets already become so complex and unsafe and affordable that we need
                    Embedded Rust?</em></p>
                <p id="b509" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Well, take a look at this video demo… <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://youtu.be/MgK72dqwDuM" class="dk hw" rel="noopener nofollow">https://youtu.be/MgK72dqwDuM</a></code>
                </p>
              </div>
            </div>
            <div class="eg">
              <div class="n p">
                <div class="km kn ko kp kq kr ah ks ai kt ak t">
                  <figure class="hy hz ia ib ic eg">
                    <div class="es w ab">
                      <div class="ku ev w"></div>
                    </div>
                    <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Demo of Embedded Rust on STM32 Blue Pill with
                      Quectel BC95-G Global NB-IoT Module</figcaption>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <p id="cb91" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/swlh/super-blue-pill-like-stm32-blue-pill-but-better-6d341d9347da?source=friends_link&amp;sk=956087171b9b9efcc484ea60b9c78c16"><strong
                      class="hd cp">STM32 Blue Pill</strong></a> with <a
                    href="https://web.archive.org/web/20201025032303/https://www.quectel.com/product/bc95g.htm"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Quectel BC95-G</strong></a> Global
                  NB-IoT Module… Runs a realtime operating system (<a
                    href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/" class="dk hw"
                    rel="noopener nofollow"><strong class="hd cp">Apache Mynewt</strong></a>) that polls the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/libs/temp_stm32"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">internal temperature
                      sensor</strong></a><strong class="hd cp"> </strong>every<strong class="hd cp"> 10 seconds</strong>
                  <strong class="hd cp">concurrently</strong> while transmitting <a
                    href="https://web.archive.org/web/20201025032303/https://rust-lang.github.io/rust-bindgen/"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">CoAP</strong></a> messages over <a
                    href="https://web.archive.org/web/20201025032303/https://rust-lang.github.io/rust-bindgen/"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">NB-IoT</strong></a>… All built for
                  <strong class="hd cp">under $10</strong>… <strong class="hd cp">And managed flawlessly by </strong><a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/rust/app/src"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Embedded Rust</strong></a>!</p>
                <p id="8e53" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This article uncovers the secrets of the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/rust/app/src"
                    class="dk hw" rel="noopener nofollow">Embedded Rust program</a> running on that Blue Pill… And how
                  how you can do the same! <em class="hv">If you’re new to Embedded Rust</em>, no worries, this will be
                  a friendly and gentle introduction to Embedded Rust… I promise!</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="bc24" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Overall Program Flow</h1>
                <p id="185c" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  This diagram illustrates the overall flow of the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/rust/app/src"
                    class="dk hw" rel="noopener nofollow">Embedded Rust program</a>. We’ll dive into each function now…
                </p>
              </div>
            </div>
            <div class="eg t">
              <figure class="hy hz ia ib ic eg t paragraph-image">
                <div class="ei ej ab ek t">
                  <div class="es w ab et">
                    <div class="kv ev w">
                      <div class="el em dx en dy eo t ep eq er"><img alt="Image for post" class="dx en dy eo t ew ex ey"
                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*i_HQIE8DZ50hbfLCUoWW4Q.png?q=20"
                          width="2780" height="1547" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                        width="2780" height="1547" /><noscript><img alt="Image for post" class="dx en dy eo t"
                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/5560/1*i_HQIE8DZ50hbfLCUoWW4Q.png"
                          width="2780" height="1547"
                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*i_HQIE8DZ50hbfLCUoWW4Q.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*i_HQIE8DZ50hbfLCUoWW4Q.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*i_HQIE8DZ50hbfLCUoWW4Q.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1456/1*i_HQIE8DZ50hbfLCUoWW4Q.png 728w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1632/1*i_HQIE8DZ50hbfLCUoWW4Q.png 816w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1808/1*i_HQIE8DZ50hbfLCUoWW4Q.png 904w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1984/1*i_HQIE8DZ50hbfLCUoWW4Q.png 992w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2160/1*i_HQIE8DZ50hbfLCUoWW4Q.png 1080w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2700/1*i_HQIE8DZ50hbfLCUoWW4Q.png 1350w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3240/1*i_HQIE8DZ50hbfLCUoWW4Q.png 1620w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3780/1*i_HQIE8DZ50hbfLCUoWW4Q.png 1890w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/4320/1*i_HQIE8DZ50hbfLCUoWW4Q.png 2160w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/4800/1*i_HQIE8DZ50hbfLCUoWW4Q.png 2400w"
                          sizes="100vw" /></noscript>
                    </div>
                  </div>
                </div>
                <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Overall flow of our Embedded Rust program
                </figcaption>
              </figure>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="768c" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Main Program: lib.rs</h1>
                <p id="bb17" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  Normally the Rust Compiler builds our Rust Programs starting at <code
                    class="et jb jc jd je b">main.rs</code>. In this case we’re building a Rust Library that will be
                  linked into the Apache Mynewt firmware, so the Rust Compiler starts at <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs" class="dk hw" rel="noopener nofollow">lib.rs</a></code>
                  instead.</p>
                <figure class="hy hz ia ib ic eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L24-L37"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L24-L37</a>
                  </figcaption>
                </figure>
                <p id="d1af" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  First thing in <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs" class="dk hw" rel="noopener nofollow">lib.rs</a></code>…
                  <code class="et jb jc jd je b">#![no_std]</code>. This is absolutely essential for Embedded Rust
                  programs and libraries — it tells the Rust Compiler not to include the <a
                    href="https://web.archive.org/web/20201025032303/https://doc.rust-lang.org/std/index.html"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Rust Standard Library</strong></a>,
                  which contains code that is unnecessary for embedded devices. Think of the Rust Standard Library as
                  the C standard libraries <code class="et jb jc jd je b">stdio</code> + <code
                    class="et jb jc jd je b">stdlib</code> + …</p>
                <p id="33d6" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  When we specify <code class="et jb jc jd je b">#![no_std]</code>, the Rust Compiler includes a lighter
                  version of the standard library, known as the <a
                    href="https://web.archive.org/web/20201025032303/https://doc.rust-lang.org/core/index.html"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Rust Core Library</strong></a>. It
                  contains the bare minimum needed to run Rust applications.</p>
                <blockquote class="kw">
                  <p id="f850" class="kx ky ff ap kz la lb lc ld le lf hu br">Rust Externs and Modules</p>
                </blockquote>
                <p id="2c22" class="hb hc ff hd b he lg hf hg hh lh hi hj hk li hl hm hn lj ho hp hq lk hr hs hu dc dh">
                  <code class="et jb jc jd je b">extern crate</code> declares the external Rust Libraries (known as
                  Crates) that we’ll be using. External Crates are declared in <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/Cargo.toml" class="dk hw" rel="noopener nofollow">Cargo.toml</a></code>
                  and don’t need to be declared again here… Unless we’re using macros from these crates.</p>
                <p id="2a4f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">mod app_sensor</code> tells the Rust Compiler that we have a Rust
                  module named <code class="et jb jc jd je b">app_sensor</code>, and the module’s source code may be
                  found in <code class="et jb jc jd je b">app_sensor.rs</code>.</p>
                <p id="1e56" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  If you remember how <code class="et jb jc jd je b">namespace</code> and <code
                    class="et jb jc jd je b">#include “…”</code> work in C++, <code
                    class="et jb jc jd je b">mod app_sensor</code> translates into something like this in C++…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="1bf9" class="dh lo jm ff je b de lp lq w lr">namespace app_sensor {<br/>    #include &quot;app_sensor.rs&quot;<br/>}</span></pre>
                <p id="249f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Which means that the functions in <code class="et jb jc jd je b">app_sensor.rs</code> will be imported
                  in the module namespace <code class="et jb jc jd je b">app_sensor</code>. (We’ll see this later when
                  we study the macro expansions for our program.)</p>
                <p id="0358" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  We’ll soon discover that in Rust we use <code class="et jb jc jd je b">mod</code> often to pull in
                  Rust source files, which may use <code class="et jb jc jd je b">mod</code> to pull in other source
                  files, … That’s how we assemble a Rust program from a tree of Rust source files, starting at <code
                    class="et jb jc jd je b">lib.rs</code> or <code class="et jb jc jd je b">main.rs</code>.</p>
                <p id="ab6b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">app_sensor</code> and <code class="et jb jc jd je b">app_network</code>
                  will be covered in the subsequent sections.</p>
                <figure class="hy hz ia ib ic eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L38-L45"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L38-L45</a>
                  </figcaption>
                </figure>
                <p id="7607" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Next we tell the Rust Compiler which functions and types to import into this code file (lib.rs). We
                  could write <code class="et jb jc jd je b">core::panic::PanicInfo</code> in our code. But when we say
                  <code class="et jb jc jd je b">use core::panic::PanicInfo</code>, we can just refer to it later in our
                  code as <code class="et jb jc jd je b">PanicInfo</code>.</p>
                <p id="eedb" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">core</code> refers to the Rust Core Library. <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://docs.rs/cortex-m/0.6.0/cortex_m/" class="dk hw" rel="noopener nofollow">cortex_m</a></code>
                  is an external crate that has useful functions for Arm Cortex-M processors, like triggering debugger
                  breakpoints.</p>
                <p id="f31b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/rust/mynewt" class="dk hw" rel="noopener nofollow">mynewt</a></code>
                  is a crate that contains Rust wrappers for the Mynewt API. That means we can call the Mynewt system
                  functions written in C — just use the Rust wrappers that have been provided. More about Rust safe
                  wrappers in a while.</p>
                <p id="8e49" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  In <code class="et jb jc jd je b">lib.rs</code> we’ll be calling some Mynewt kernel-level functions,
                  as well as the debugging console and the <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/build-your-iot-sensor-network-stm32-blue-pill-nrf24l01-esp8266-apache-mynewt-thethings-io-ca7486523f5d?source=friends_link&amp;sk=e49514a7e616d4ff931dd24329a82ce0"><strong
                      class="hd cp">Sensor Network Library</strong></a> that provides NB-IoT networking.</p>
                <blockquote class="kw">
                  <p id="6938" class="kx ky ff ap kz la lb lc ld le lf hu br">Rust Main Function</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L46-L74"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L46-L74</a>
                  </figcaption>
                </figure>
                <p id="6ac3" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This is the <code class="et jb jc jd je b">main()</code> function — it works just like C.</p>
                <p id="5a43" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/lib.rs#L36-L41" class="dk hw" rel="noopener nofollow">mynewt::sysinit</a>()</code>
                  is called to start up the Mynewt OS system functions and drivers, like the driver for the Blue Pill
                  internal temperature sensor.</p>
                <p id="a1ed" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">app_sensor::start_sensor_listener()</code> is defined in the <code
                    class="et jb jc jd je b">app_sensor</code> module (explained below). This function tells Mynewt to
                  poll the internal temperature sensor every 10 seconds.</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Quectel BC95-G driver sends AT commands to
                    connect to NB-IoT. From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log#L90-L100"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log#L90-L100</a>
                  </figcaption>
                </figure>
                <p id="7f94" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/libs/sensor_network/src/sensor_network.c#L136-L143" class="dk hw" rel="noopener nofollow">sensor_network::start_server_transport</a>()</code>
                  tells the Sensor Network Library to start the NB-IoT network.</p>
                <p id="5576" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/libs/bc95g"
                    class="dk hw" rel="noopener nofollow">NB-IoT Driver</a> starts sending <a class="dk hw"
                    rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/get-started-with-nb-iot-and-quectel-modules-6e7c581e0d61?source=friends_link&amp;sk=40ece196fc51f7a2903c9981f46efa46">AT
                    commands</a> to the NB-IoT Module (Quectel BC95-G), and waits for successful connection to the
                  NB-IoT network.</p>
                <p id="bc68" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This happens in the background, so other functions may continue running, like polling the temperature
                  sensor.</p>
                <blockquote class="kw">
                  <p id="282f" class="kx ky ff ap kz la lb lc ld le lf hu br">Check Rust Errors with Expect</p>
                </blockquote>
                <p id="8ed5" class="hb hc ff hd b he lg hf hg hh lh hi hj hk li hl hm hn lj ho hp hq lk hr hs hu dc dh">
                  Note the curious way that we’re calling the functions followed by <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://learning-rust.github.io/docs/e4.unwrap_and_expect.html" class="dk hw" rel="noopener nofollow">expect</a>()</code>…
                </p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="0e2a" class="dh lo jm ff je b de lp lq w lr">app_sensor::start_sensor_listener()<br/>    .expect(&quot;TMP fail&quot;);</span></pre>
                <p id="c5ef" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This actually means “<em class="hv">call the function</em> <code
                    class="et jb jc jd je b">start_sensor_listener()</code>, <em class="hv">and if it</em> <strong
                    class="hd cp">FAILS</strong>, <em class="hv">show the message </em><code
                    class="et jb jc jd je b">TMP fail</code>”. So it certainly doesn’t mean that we <code
                    class="et jb jc jd je b">expect</code> the function to fail!</p>
                <p id="4685" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This is an unusual Rust coding convention. But thankfully we’ll see <code
                    class="et jb jc jd je b">expect</code> only in the <code class="et jb jc jd je b">main()</code>
                  function. In other functions we’ll use a simpler way to check for failures… the question-mark
                  operator: <code class="et jb jc jd je b">?</code></p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="aff2" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Sensor Functions: app_sensor.rs</h1>
                <figure class="hy hz ia ib ic eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L37-L45"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L37-L45</a>
                  </figcaption>
                </figure>
                <p id="0424" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs" class="dk hw" rel="noopener nofollow">app_sensor.rs</a></code>
                  configures Mynewt to poll Blue Pill’s internal temperature sensor every 10 seconds. At the top we
                  define the constants…</p>
                <p id="a325" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  ▶️ <code class="et jb jc jd je b">SENSOR_DEVICE</code>: Name of the sensor that we’ll be polling. Each
                  sensor in Mynewt is assigned a name by the sensor’s driver. We’ll be using Blue Pill’s internal
                  temperature sensor, named <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/libs/temp_stm32" class="dk hw" rel="noopener nofollow">temp_stm32_0</a></code>
                </p>
                <p id="cf2a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Note that <code class="et jb jc jd je b">SENSOR_DEVICE</code> has type <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/lib.rs#L96-L206" class="dk hw" rel="noopener nofollow">Strn</a></code>,
                  which refers to a null-terminated string. Although Rust has two types of strings (<code
                    class="et jb jc jd je b">str</code> and <code class="et jb jc jd je b">String</code>), I created
                  <code class="et jb jc jd je b">Strn</code> because it works more efficiently with Mynewt.</p>
                <p id="f373" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Unlike Rust strings, <code class="et jb jc jd je b">Strn</code> strings are always null-terminated. So
                  we prevent excessive copying of strings when passing <code class="et jb jc jd je b">Strn</code> to
                  Mynewt and back. <code class="et jb jc jd je b">Strn</code> may be passed directly into Mynewt APIs
                  like this…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="5fe0" class="dh lo jm ff je b de lp lq w lr">//  Set the sensor polling time to 10 seconds.<br/>sensor::set_poll_rate_ms(<br/>    &amp;SENSOR_DEVICE, SENSOR_POLL_TIME) ? ;</span></pre>
                <p id="dd68" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/lib.rs#L121-L147" class="dk hw" rel="noopener nofollow">init_strn!</a>()</code>
                  is a Rust Macro that initialises a <code class="et jb jc jd je b">Strn</code> and terminates the
                  string with null. How do we know it’s a Rust Macro? Because it has <code
                    class="et jb jc jd je b">!</code> in its name. Rust Macros are similar to C Macros, but much more
                  powerful.</p>
                <p id="07ce" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  ▶️ <code class="et jb jc jd je b">SENSOR_POLL_TIME</code>: How often Mynewt should poll the sensor, in
                  milliseconds. We’ll be polling the temperature sensor every 10 seconds, so we set this value to
                  10,000.</p>
                <p id="e5b9" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  ▶️ <code class="et jb jc jd je b">TEMP_SENSOR_KEY</code>: When transmitting the temperature sensor
                  value to the server, we’ll use <code class="et jb jc jd je b">t</code> as the name of the sensor
                  value.</p>
                <p id="9ffd" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  ▶️ <code class="et jb jc jd je b">TEMP_SENSOR_TYPE</code>: This declares the type of sensor data,
                  which will be a raw temperature value. Although we could transmit the temperature as a decimal or
                  floating-point number like <code class="et jb jc jd je b">28.9</code> degrees Celsius, it’s more
                  efficient to transmit the raw temperature as an integer like <code
                    class="et jb jc jd je b">1925</code>.</p>
                <p id="8e02" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This eliminates the need to install floating-point libraries on the device. We’ll convert the raw
                  temperature into actual temperature at the CoAP Server.</p>
                <blockquote class="kw">
                  <p id="fc3e" class="kx ky ff ap kz la lb lc ld le lf hu br">Poll The Sensor with Mynewt Sensor
                    Framework</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L46-L53"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L46-L53</a>
                  </figcaption>
                </figure>
                <p id="7686" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Mynewt provides an elegant way to manage IoT sensors and it truly shines here. Recall that <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L46-L71" class="dk hw" rel="noopener nofollow">start_sensor_listener</a>()</code>
                  is called by <code class="et jb jc jd je b">main()</code> to poll the temperature sensor. How do we
                  instruct Mynewt to poll our temperature sensor every 10 seconds? Easy — just call <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_mgr_api.html#c.sensor_set_poll_rate_ms" class="dk hw" rel="noopener nofollow">sensor::set_poll_rate_ms</a>()</code>
                  like above.</p>
                <p id="fd82" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  In Mynewt’s <a
                    href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_framework.html"
                    class="dk hw" rel="noopener nofollow">Sensor Framework</a>, Mynewt is aware of all sensors installed
                  (like <code class="et jb jc jd je b">temp_stm32_0</code>, our temperature sensor) and the type of
                  sensor data each sensor will return (like raw temperature). So Mynewt is capable of polling sensors
                  for sensor data on its own… But it needs to know what to do with the polled data.</p>
                <figure class="hy hz ia ib ic eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L54-L57"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L54-L57</a>
                  </figcaption>
                </figure>
                <p id="1436" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  To answer that, we call <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_mgr_api.html#c.sensor_mgr_find_next_bydevname" class="dk hw" rel="noopener nofollow">sensor::mgr_find_next_bydevname</a>()</code>
                  to fetch the sensor object for our temperature sensor. For safety, we check that returned sensor
                  object pointer is not null.</p>
                <blockquote class="kw">
                  <p id="b758" class="kx ky ff ap kz la lb lc ld le lf hu br">Define Sensor Listener with Rust Struct
                  </p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L58-L64"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L58-L64</a>
                  </figcaption>
                </figure>
                <p id="09fe" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Then we define a <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#data-structures" class="dk hw" rel="noopener nofollow">sensor_listener</a></code>,
                  the function that Mynewt will call whenever it has fetched the sensor data. We declare to Mynewt that
                  the function (called the <strong class="hd cp">Listener Function</strong>) accepts temperature sensor
                  values (<code class="et jb jc jd je b">TEMP_SENSOR_TYPE</code>).</p>
                <p id="70d7" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The Listener Function is named <code class="et jb jc jd je b">handle_sensor_data()</code> and we’ll
                  see it in a while. We call <code class="et jb jc jd je b">sensor::as_untyped()</code> to do some
                  translation from Rust to C, because callback functions like <code
                    class="et jb jc jd je b">handle_sensor_data()</code> are defined differently in Rust and C.</p>
                <p id="e224" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  If we look at the way <code class="et jb jc jd je b">listener</code> is defined as a <code
                    class="et jb jc jd je b">sensor_listener</code>…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="b925" class="dh lo jm ff je b de lp lq w lr">let listener = <strong class="je cp">sensor_listener</strong> { ... };</span></pre>
                <p id="915f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Looks familiar? <code class="et jb jc jd je b">sensor_listener</code> is actually a <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://doc.rust-lang.org/book/ch05-01-defining-structs.html" class="dk hw" rel="noopener nofollow">struct</a></code>
                  type! In C++ we would write this as…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="c999" class="dh lo jm ff je b de lp lq w lr"><strong class="je cp">sensor_listener</strong> listener = { ... };</span></pre>
                <p id="18de" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">structs</code> in Rust work the same way as <code
                    class="et jb jc jd je b">structs</code> in C and C++. But unlike C and C++, Rust also supports this
                  interesting construct…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="2275" class="dh lo jm ff je b de lp lq w lr">let listener = sensor_listener {<br/>    sl_sensor_type: ... ,<br/>    sl_func:        ... ,</span><span id="4a55" class="dh lo jm ff je b de lx ly lz ma mb lq w lr">    //  Set other fields to 0<br/>    <strong class="je cp">..fill_zero!(sensor_listener)</strong><br/>};</span></pre>
                <p id="cf4e" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">..</code> means “<a
                    href="https://web.archive.org/web/20201025032303/https://doc.rust-lang.org/book/ch05-01-defining-structs.html"
                    class="dk hw" rel="noopener nofollow"><em class="hv">copy the remaining fields from the following
                      object</em></a>”. The object after <code class="et jb jc jd je b">..</code> happens to be <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/util/macros.rs#L8-L49" class="dk hw" rel="noopener nofollow">fill_zero!</a>(sensor_listener)</code>,
                  a Rust Macro that generates an empty <code class="et jb jc jd je b">sensor_listener</code> with all
                  fields zeroed out. So the result…</p>
                <p id="05b9" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ We set <code class="et jb jc jd je b">listener</code> to an instance of <code
                    class="et jb jc jd je b">sensor_listener</code>…</p>
                <p id="1814" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ And we set in <code class="et jb jc jd je b">listener</code> the <code
                    class="et jb jc jd je b">sl_sensor_type</code> and <code class="et jb jc jd je b">sl_func</code>
                  fields shown above…</p>
                <p id="576e" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  3️⃣ And we set the remaining fields of <code class="et jb jc jd je b">listener</code> to <code
                    class="et jb jc jd je b">0</code></p>
                <p id="0263" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This is a handy construct (similar to <a
                    href="https://web.archive.org/web/20201025032303/https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax"
                    class="dk hw" rel="noopener nofollow">JavaScript’s … operator</a>) to assure ourselves that the
                  remaining fields in the <code class="et jb jc jd je b">struct</code> are initialised to some known
                  value. Otherwise the remaining fields will become assigned to some unknown value from the stack and
                  cause runtime errors. In fact, the Rust Compiler refuses to compile this code…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="ce3f" class="dh lo jm ff je b de lp lq w lr">let listener = sensor_listener {<br/>    sl_sensor_type: ... ,<br/>    sl_func:        ... ,<br/>    <strong class="je cp">//  What about the other fields?</strong><br/>};</span></pre>
                <p id="71aa" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Because the compiler knows that <code class="et jb jc jd je b">sensor_listener</code> contains other
                  fields that we have not initialised. And that’s the really cool thing about Rust — <em class="hv">it
                    genuinely cares about our </em><strong class="hd cp"><em class="hv">Safety</em></strong><em
                    class="hv"> and it will do anything it can to prevent our programs from crashing! </em>We’ll see
                  many examples of Safe Coding in Rust in a while.</p>
                <blockquote class="kw">
                  <p id="a33e" class="kx ky ff ap kz la lb lc ld le lf hu br">Register Sensor Listener with Mynewt
                    Sensor Framework</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L65-L71"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L65-L71</a>
                  </figcaption>
                </figure>
                <p id="06d8" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Finally we call <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="dk hw" rel="noopener nofollow">sensor::register_listener</a>()</code>
                  to register our Listener Function for the sensor. Mynewt will call our Listener Function <code
                    class="et jb jc jd je b">handle_sensor_data()</code> every 10 seconds after fetching the temperature
                  sensor data.</p>
                <blockquote class="kw">
                  <p id="a171" class="kx ky ff ap kz la lb lc ld le lf hu br">Return Result in Rust</p>
                </blockquote>
                <p id="8018" class="hb hc ff hd b he lg hf hg hh lh hi hj hk li hl hm hn lj ho hp hq lk hr hs hu dc dh">
                  In Rust, functions are expected to return the <code class="et jb jc jd je b">Result</code> type which
                  contains either a result value or a failure code. Hence <code
                    class="et jb jc jd je b">start_sensor_listener()</code> is declared as…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="1cb5" class="dh lo jm ff je b de lp lq w lr">pub fn start_sensor_listener() <br/>    -&gt; <strong class="je cp">MynewtResult&lt;()&gt;</strong>  <br/>    { ... }</span></pre>
                <p id="f933" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Which tells the Rust Compiler that <code class="et jb jc jd je b">start_sensor_listener()</code> will
                  return a <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/lib.rs#L42-L95" class="dk hw" rel="noopener nofollow">MynewtResult</a></code>
                  type. What’s the result value for this function? <code
                    class="et jb jc jd je b">start_sensor_listener()</code> works like a <code
                    class="et jb jc jd je b">void</code> function in C… it doesn’t return any values. It returns
                  nothing.</p>
                <p id="651b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  In Rust we write “nothing” as <code class="et jb jc jd je b">()</code>. Therefore the function returns
                  <code class="et jb jc jd je b">MynewtResult&lt;()&gt;</code>, a generic result that contains either
                  “nothing” or an error code. How do we return “nothing” at the end of the function?</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="c8cc" class="dh lo jm ff je b de lp lq w lr">pub fn start_sensor_listener() <br/>    -&gt; <strong class="je cp">MynewtResult&lt;()&gt;</strong> {<br/>    ...<br/>    //  Return `Ok()` to indicate success.  <br/>    //  This line should not end with a semicolon (;).<br/>    Ok(())<br/>}</span></pre>
                <p id="a01c" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  If this function is expected to return <code class="et jb jc jd je b">123</code> we would write it as
                  <code class="et jb jc jd je b">Ok(123)</code>. But since this function returns “nothing”, we write it
                  as <code class="et jb jc jd je b">Ok(())</code>. Which means “<em class="hv">yes this function has
                    completed successfully, but we don’t have a result value</em>”.</p>
                <p id="e9ab" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  When we return <code class="et jb jc jd je b">Ok(...)</code> at the end of a function, make sure that
                  we don’t add a semicolon <code class="et jb jc jd je b">;</code>. That’s because the Rust Compiler
                  treats a block of code like a sushi conveyor belt that unveils statement after statement… separated by
                  a semicolon <code class="et jb jc jd je b">;</code>.</p>
                <p id="5ecd" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The final statement <code class="et jb jc jd je b">Ok(...)</code> is the result value for the entire
                  sushi conveyor belt… er… function. In fact, returning <code class="et jb jc jd je b">Ok(...)</code>
                  like this…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="3d2b" class="dh lo jm ff je b de lp lq w lr">    ...<br/>    <strong class="je cp">Ok(123)</strong><br/>}</span></pre>
                <p id="a252" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  …is actually equivalent to a return statement plus semicolon…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="aeb5" class="dh lo jm ff je b de lp lq w lr">    ...<br/>    <strong class="je cp">return Ok(123);</strong><br/>}</span></pre>
                <p id="a335" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Both are perfectly valid in Rust. But of course I’ll choose the shorter version. When we call
                  functions that return <code class="et jb jc jd je b">Result</code>, we add a question mark <code
                    class="et jb jc jd je b">?</code> like this…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="d310" class="dh lo jm ff je b de lp lq w lr">//  Set the sensor polling time to 10 seconds<br/>sensor::set_poll_rate_ms(&amp;SENSOR_DEVICE, SENSOR_POLL_TIME) <strong class="je cp">?</strong> ;</span></pre>
                <p id="7234" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This means “<em class="hv">check the result of</em> <code
                    class="et jb jc jd je b">sensor::set_poll_rate_ms()</code> <em class="hv">and if it’s an error, stop
                    the current function and return the error code to the caller</em>”. It’s easy to miss the question
                  mark <code class="et jb jc jd je b">?</code> so I make it highly conspicuous by surrounding it with
                  spaces.</p>
                <blockquote class="kw">
                  <p id="c048" class="kx ky ff ap kz la lb lc ld le lf hu br">Handle Sensor Data with Rust Pattern
                    Matching</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L72-L103"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L72-L103</a>
                  </figcaption>
                </figure>
                <p id="5fd1" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L72-L103" class="dk hw" rel="noopener nofollow">handle_sensor_data</a>()</code>
                  is the Listener Function that’s called by Mynewt after it has polled the temperature sensor. It calls
                  <code class="et jb jc jd je b">convert_sensor_data()</code> to convert the sensor data from Mynewt’s
                  format to our own transmission format. More about this in a while.</p>
                <p id="4345" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Then it calls <code class="et jb jc jd je b">send_sensor_data()</code> to transmit the converted
                  sensor data. (We’ll learn more in the next section.) <code
                    class="et jb jc jd je b">send_sensor_data()</code> is called like this…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="f5ae" class="dh lo jm ff je b de lp lq w lr">let result = send_sensor_data(&amp;sensor_value);</span><span id="1ee6" class="dh lo jm ff je b de lx ly lz ma mb lq w lr">//  `if let` will assign `<!-- -->error_code<!-- -->` to<br/>//  the error code inside `result`<br/><strong class="je cp">if let Err(</strong><strong class="je cp">error_code</strong><strong class="je cp">) = result</strong> {</span><span id="80f5" class="dh lo jm ff je b de lx ly lz ma mb lq w lr">    //  Check the error code<br/>    if <!-- -->error_code<!-- --> == MynewtError::SYS_EAGAIN {<br/>        ...<br/>    }<br/>}</span></pre>
                <p id="1248" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">send_sensor_data()</code> returns the <code
                    class="et jb jc jd je b">MynewtResult&lt;()&gt;</code> type, which contains…</p>
                <p id="c530" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ Either <code class="et jb jc jd je b">Ok(())</code>, which means no error and nothing to return…
                </p>
                <p id="4ba2" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ Or <code class="et jb jc jd je b">Err(error_code)</code>, which is an error code</p>
                <p id="21a4" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Which is it? Let’s use <strong class="hd cp">Rust </strong><a
                    href="https://web.archive.org/web/20201025032303/https://doc.rust-lang.org/book/ch06-03-if-let.html"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Pattern Matching</strong></a>! This
                  <code class="et jb jc jd je b">if let</code> condition…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="8738" class="dh lo jm ff je b de lp lq w lr">if let <strong class="je cp">Err(</strong><strong class="je cp">error_code</strong><strong class="je cp">) = result</strong> { ... }</span></pre>
                <p id="1f6e" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  …will fail if the <code class="et jb jc jd je b">result</code> is <code
                    class="et jb jc jd je b">Ok(())</code>. So that eliminates option 1️⃣. What about the error code for
                  option 2️⃣?</p>
                <p id="adfb" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  When we match the pattern <code class="et jb jc jd je b">Err(error_code)</code> with <code
                    class="et jb jc jd je b">result</code>, we actually bind <code
                    class="et jb jc jd je b">error_code</code> to the error code inside <code
                    class="et jb jc jd je b">result</code>.</p>
                <p id="7aa1" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  So subsequently we may check the value of <code class="et jb jc jd je b">error_code</code> like this…
                </p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="57e5" class="dh lo jm ff je b de lp lq w lr">if <strong class="je cp">error_code</strong> == MynewtError::SYS_EAGAIN { ... }</span></pre>
                <p id="b2d4" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  That’s how we use Rust Pattern Matching to check error codes in <code
                    class="et jb jc jd je b">Results</code>! If we’re not really interested in the error code, just use
                  the question mark <code class="et jb jc jd je b">?</code> to check for success or failure.</p>
                <blockquote class="kw">
                  <p id="062e" class="kx ky ff ap kz la lb lc ld le lf hu br">Convert Sensor Data with Rust Pattern
                    Matching</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L104-L127"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L104-L127</a>
                  </figcaption>
                </figure>
                <p id="3670" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L104-L127" class="dk hw" rel="noopener nofollow">convert_sensor_data</a>()</code>
                  is a beautiful function that could only happen in Rust, not C. Recall that it converts sensor data
                  from Mynewt’s format to our own transmission format. The structure of the function looks interesting…
                </p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="c04c" class="dh lo jm ff je b de lp lq w lr">fn convert_sensor_data(...) -&gt; SensorValue {</span><span id="1c94" class="dh lo jm ff je b de lx ly lz ma mb lq w lr">    //  Construct and return a new `SensorValue` (without semicolon)<br/>    SensorValue {<br/>        key: &quot;t&quot;,<br/>        val: ...<br/>    }<br/>}</span></pre>
                <p id="125a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Remember the <code class="et jb jc jd je b">Ok(...)</code> trick for <strong class="hd cp">returning
                    things without semicolon</strong> from the sushi conveyor belt… er… function? We’re using it here!
                  We construct a <code class="et jb jc jd je b">struct</code> with <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/hw/sensor.rs#L146-L175" class="dk hw" rel="noopener nofollow">SensorValue</a> { ... }</code>.
                  Then we return the <code class="et jb jc jd je b">struct</code>, semicolon-less!</p>
                <p id="5111" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Now look closely what’s inside <code class="et jb jc jd je b">val</code>…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="1a97" class="dh lo jm ff je b de lp lq w lr">//  Construct and return a new `SensorValue` (without semicolon)<br/>SensorValue {<br/>    key: &quot;t&quot;,<br/>    <strong class="je cp">val: match sensor_type</strong> {<br/>        //  If this is raw temperature...<br/>        SENSOR_TYPE_AMBIENT_TEMPERATURE_RAW =&gt; {  <br/>            //  Get the raw temperature<br/>            let mut raw = fill_zero!(sensor_temp_raw_data);<br/>            let rc = unsafe { <br/>                sensor::get_temp_raw_data(<br/>                    sensor_data, &amp;mut raw) <br/>            };<br/>            //  Return the raw temperature<br/>            <strong class="je cp">SensorValueType::Uint( raw.strd_temp_raw )</strong><br/>        }<br/>        //  Unknown type of sensor value<br/>        //  _ =&gt; { assert!(false, &quot;sensor type&quot;); ... } <br/>    }<br/>}</span></pre>
                <p id="b27a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Does <code class="et jb jc jd je b">match</code> look familiar? Yes it looks like <code
                    class="et jb jc jd je b">switch ... case</code> in C! But in Rust, <code
                    class="et jb jc jd je b">match</code> can return values like this…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="c9da" class="dh lo jm ff je b de lp lq w lr">    ...<br/>    //  Return the raw temperature<br/>    SensorValueType::Uint( raw.strd_temp_raw )<br/>}</span></pre>
                <p id="e0b5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Again we used the <strong class="hd cp">disappearing semicolon trick</strong> to return a value inside
                  <code class="et jb jc jd je b">match</code>.</p>
                <p id="af75" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  What’s <code class="et jb jc jd je b">SensorValueType::Uint</code>? That’s an <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html" class="dk hw" rel="noopener nofollow">enum</a></code>.
                  And as expected, Rust <code class="et jb jc jd je b">enums</code> are more powerful than <code
                    class="et jb jc jd je b">enums</code> in C… <strong class="hd cp">Rust </strong><code
                    class="et jb jc jd je b"><strong class="hd cp">enums</strong></code><strong class="hd cp"> can
                    contain values</strong> (like <code class="et jb jc jd je b">raw.strd_temp_raw</code>)!</p>
                <p id="0afe" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Remember our friends <code class="et jb jc jd je b">Ok(...)</code> and <code
                    class="et jb jc jd je b">Err(...)</code>? They are <code class="et jb jc jd je b">enums</code> too!
                  Yes <code class="et jb jc jd je b">enums</code> are shockingly powerful in Rust. (Then again,
                  everything in Rust is shockingly powerful!)</p>
                <p id="27c2" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The pattern <code class="et jb jc jd je b">_ =&gt; ...</code> at the end of <code
                    class="et jb jc jd je b">match</code> is identical to the <code
                    class="et jb jc jd je b">default</code> construct in C’s <code
                    class="et jb jc jd je b">switch ... case</code> statement (it matches everything else).</p>
                <p id="10b9" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  But the Rust Compiler is super intelligent in deducing that <code
                    class="et jb jc jd je b">sensor_type</code> has one and only one possible pattern: <code
                    class="et jb jc jd je b">SENSOR_TYPE_AMBIENT_TEMPERATURE_RAW</code>. So the Rust Compiler refuses to
                  accept the default pattern <code class="et jb jc jd je b">_</code>. (And hence I have commented it
                  out.)</p>
                <blockquote class="kw">
                  <p id="c537" class="kx ky ff ap kz la lb lc ld le lf hu br">Code Safety in Rust</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L114-L121"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L114-L121</a>
                  </figcaption>
                </figure>
                <p id="b538" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  More reminders from <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_sensor.rs#L104-L127" class="dk hw" rel="noopener nofollow">convert_sensor_data</a>()</code>
                  that the Rust Compiler really cares about our Safety…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="1cc0" class="dh lo jm ff je b de lp lq w lr">let <strong class="je cp">mut</strong> raw = ...</span></pre>
                <p id="c3ae" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">mut</code> (mutable) declares to the Rust Compiler that <code
                    class="et jb jc jd je b">raw</code> is a variable that will be changed. The Rust Compiler assumes
                  that<strong class="hd cp"> all variables are </strong><code
                    class="et jb jc jd je b"><strong class="hd cp">const</strong></code><strong class="hd cp"> and will
                    not be changed</strong>, unless we declare them as <code class="et jb jc jd je b">mut</code>.</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="d241" class="dh lo jm ff je b de lp lq w lr">sensor::get_temp_raw_data(sensor_data, <strong class="je cp">&amp;mut</strong> raw)</span></pre>
                <p id="854b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  We write <code class="et jb jc jd je b">&amp;mut</code> to pass a variable to a function that’s
                  expected to change the variable. So <code class="et jb jc jd je b">sensor::get_temp_raw_data()</code>
                  is expected to change the value of <code class="et jb jc jd je b">raw</code> above.</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="596f" class="dh lo jm ff je b de lp lq w lr">let rc = <strong class="je cp">unsafe</strong> { <br/>    sensor::get_temp_raw_data( ... ) <br/>};</span></pre>
                <p id="9ba7" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This ought to alarm us… We are calling a function <code
                    class="et jb jc jd je b">sensor::get_temp_raw_data()</code> that’s <strong
                    class="hd cp">Unsafe</strong>! This function is declared <code
                    class="et jb jc jd je b">unsafe</code> because it’s a C function that could cause our program to
                  crash.</p>
                <p id="9bf4" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Unlike the other Mynewt C functions, I haven’t constructed a Safe Wrapper yet for <code
                    class="et jb jc jd je b">sensor::get_temp_raw_data()</code>, so we have to call it the Unsafe way.
                  <code class="et jb jc jd je b">unsafe</code> is a good way to tag C functions that require closer
                  inspection before calling them.</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="1cfc" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Network Functions: app_network.rs</h1>
                <p id="843c" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs" class="dk hw" rel="noopener nofollow">app_network.rs</a></code>
                  contains the functions for transmitting sensor data to the <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/get-started-with-nb-iot-and-quectel-modules-6e7c581e0d61?source=friends_link&amp;sk=40ece196fc51f7a2903c9981f46efa46">CoAP
                    Server</a> over NB-IoT. We’re using the CoAP Server hosted at thethings.io.</p>
                <figure class="hy hz ia ib ic eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L39-L62"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L39-L62</a>
                  </figcaption>
                </figure>
                <p id="2910" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">send_sensor_data()</code> is called by <code
                    class="et jb jc jd je b">handle_sensor_data()</code> to transmit the polled sensor data from the
                  temperature sensor.</p>
                <p id="57d7" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  It calls <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/libs/sensor_network/src/sensor_network.c#L385-L402" class="dk hw" rel="noopener nofollow">sensor_network::get_device_id</a>()</code>
                  to fetch the randomly-generated device ID. This device ID changes each time we restart the device.
                  We’ll transmit the device ID to thethings.io so that we can see the sensor data for our device.</p>
                <p id="5c38" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/libs/sensor_network/src/sensor_network.c#L241-L250" class="dk hw" rel="noopener nofollow">sensor_network::init_server_post</a>()</code>
                  prepares the memory buffers to compose a new CoAP message. In embedded devices like Blue Pill, we have
                  limited RAM so we can’t compose two CoAP messages at the same time. Hence <code
                    class="et jb jc jd je b">init_server_post()</code> uses a locking Mynewt semaphore to ensure that
                  only one task is composing a CoAP message at any time.</p>
                <p id="c4ad" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Remember that the connection to NB-IoT is established by a background task. There’s a chance that the
                  connection isn’t ready yet. If it’s not ready, we return <code
                    class="et jb jc jd je b">Err( MynewtError::SYS_EAGAIN )</code> to ask the Listener Function to retry
                  later. That’s how we return an error code <code class="et jb jc jd je b">SYS_EAGAIN</code> as a <code
                    class="et jb jc jd je b">Result</code> type in Rust.</p>
                <p id="c74b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Here comes the magical part of the entire program… How we actually compose a CoAP Message containing
                  the sensor data… And how we manage <strong class="hd cp">Intent vs Implementation</strong>…</p>
                <blockquote class="kw">
                  <p id="aaac" class="kx ky ff ap kz la lb lc ld le lf hu br">CoAP Intent vs Implementation</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L63-L76"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L63-L76</a>
                  </figcaption>
                </figure>
                <p id="aef5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The above Rust code shows our <strong class="hd cp">Intent</strong> clearly… We just want to transmit
                  2 items of data to the server:</p>
                <p id="d579" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ <strong class="hd cp">Device ID</strong>, which we’ll be using to view our sensor data. (In case
                  there are other devices transmitting at the same time)</p>
                <p id="ec51" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ <strong class="hd cp">Raw Temperature</strong>, which is a whole number from 0 to 4095</p>
                <p id="b0cb" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  What about the <strong class="hd cp">Implementation</strong>? Well that depends which server we’ll be
                  transmitting the message to. For thethings.io, the server expects a <strong class="hd cp">JSON
                    Payload</strong> in the CoAP Message like this…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="00dd" class="dh lo jm ff je b de lp lq w lr">{&quot;values&quot;:[<br/>    {&quot;key&quot;:&quot;device&quot;,<br/>         &quot;value&quot;:&quot;010203&quot;},<br/>    {&quot;key&quot;:&quot;t&quot;,   <br/>         &quot;value&quot;:1715}<br/>]}</span></pre>
                <p id="ccdd" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  It’s <strong class="hd cp">similar to our Intent</strong>, just that the<strong class="hd cp">
                    Implementation is different</strong>. And the above Rust code handles that! <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/encoding/macros.rs" class="dk hw" rel="noopener nofollow">coap!</a>()</code>
                  is a Rust Macro I have written that generates the above JSON Payload given the <code
                    class="et jb jc jd je b">device_id</code> and <code class="et jb jc jd je b">val</code> values.</p>
                <p id="36f5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">Why is this Intent vs Implementation distinction important?</em></p>
                <p id="8cee" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  As I’m writing this, thethings.io is preparing to launch <a
                    href="https://web.archive.org/web/20201025032303/https://en.wikipedia.org/wiki/CBOR" class="dk hw"
                    rel="noopener nofollow">CBOR</a> support for their CoAP Server. As we have seen on <em
                    class="hv">Moon Base One</em>, CBOR promises to shrink our CoAP Messages because we will no longer
                  use inefficient JSON Payload encoding… we will use compressed, binary CBOR Payload encoding instead!
                </p>
                <p id="407a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Guess What? The <code class="et jb jc jd je b">coap!()</code> macro is ready to generate CBOR Payloads
                  based on the same code! All we need to do is to replace “<code class="et jb jc jd je b">@json</code>”
                  by “<code class="et jb jc jd je b">@cbor</code>” and the rest happens like magic!</p>
                <p id="6fb8" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Same for your own CoAP Server — you should be able to tweak the <code
                    class="et jb jc jd je b">coap!()</code> macro to support the encoding format required by your
                  server. This level of Intent vs Implementation separation is not possible with C Macros, only with
                  Rust Macros.</p>
                <blockquote class="kw">
                  <p id="b7dc" class="kx ky ff ap kz la lb lc ld le lf hu br">Multitasking with Mynewt</p>
                </blockquote>
                <figure class="ls lt lu lv lw eg">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L77-L88"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L77-L88</a>
                  </figcaption>
                </figure>
                <p id="21f5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Finally we call <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/libs/sensor_network/src/sensor_network.c#L307-L316" class="dk hw" rel="noopener nofollow">sensor_network::do_server_post</a>()</code>
                  to transmit our CoAP Message. The actual transmission is done by a background task so that the we
                  won’t get stuck waiting for the transmission to complete. We display the URL for viewing the sensor
                  data. And we return <code class="et jb jc jd je b">Ok(())</code> semicolon-lessly.</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Our Rust program reads the sensor and transmits
                    the sensor data concurrently, managed by Mynewt. From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log#L128-L148"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log#L128-L148</a>
                  </figcaption>
                </figure>
                <p id="127f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  We can see that Mynewt plays an important role in managing the realtime tasks on our Blue Pill…</p>
                <p id="e130" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ The temperature sensor is <strong class="hd cp">polled automatically</strong> by Mynewt according
                  to a timer (every 10 seconds)</p>
                <p id="3f11" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ CoAP Messages are transmitted by Mynewt in a <strong class="hd cp">background task</strong></p>
                <p id="7842" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This is possible only because Mynewt is a <strong class="hd cp">realtime operating system</strong>. It
                  would be very difficult for Rust to do this on bare metal.</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="0c66" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Install Embedded Rust and Mynewt</h1>
                <p id="14d6" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  Ready to try out the Embedded Rust code for yourself? Follow the instructions below to install the
                  Embedded Rust + Mynewt build and application files on Windows…</p>
                <p id="2acc" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <strong class="hd cp"><em class="hv">“</em></strong><a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/install-embedded-rust-and-apache-mynewt-for-visual-studio-code-on-windows-533ac87b35ad?source=friends_link&amp;sk=f3c23859d1b27372d41c7e9b7913a6e8"><strong
                      class="hd cp"><em class="hv">Install Embedded Rust and Apache Mynewt <br />for Visual Studio Code
                        on Windows</em></strong></a><strong class="hd cp"><em class="hv">”</em></strong></p>
                <p id="c3fc" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  🛈 <a
                    href="https://web.archive.org/web/20201025032303/https://gist.github.com/lupyuen/08e383845d68d3337747e8eb59d0f624"
                    class="dk hw" rel="noopener nofollow"><em class="hv">What is VSCode? Is it related to Visual Studio?
                      How is Microsoft involved? Read this</em></a></p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="b136" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Hardware Required</h1>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="du dv mc">
                    <div class="es w ab et">
                      <div class="md ev w">
                        <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                            class="dx en dy eo t ew ex ey"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/44/0*Txoz218gp-m-TUBo.png?q=20"
                            width="500" height="695" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                          width="500" height="695" /><noscript><img alt="Image for post" class="dx en dy eo t"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/0*Txoz218gp-m-TUBo.png"
                            width="500" height="695"
                            srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*Txoz218gp-m-TUBo.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/0*Txoz218gp-m-TUBo.png 500w"
                            sizes="500px" /></noscript>
                      </div>
                    </div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">STM32 Blue Pill, ST-Link V2, Quectel BC95-G
                    breakout board with antenna, NB-IoT SIM</figcaption>
                </figure>
                <p id="5da9" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  To run the Embedded Rust program and send sensor data over NB-IoT, we’ll need the following hardware…
                </p>
                <p id="ad3b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ <a
                    href="https://web.archive.org/web/20201025032303/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924131057&amp;SearchText=stm32f103c8t6+development+board"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">STM32 Blue Pill</strong></a></p>
                <p id="27f5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ <a
                    href="https://web.archive.org/web/20201025032303/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924134644&amp;SearchText=st-link+v2"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">ST-Link V2 USB Adapter</strong></a></p>
                <p id="4881" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  3️⃣ <a
                    href="https://web.archive.org/web/20201025032303/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20190725022150&amp;SearchText=bc95-g+nb101&amp;switch_new_app=y"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Quectel BC95-G Global NB-IoT
                      Module</strong></a> (breakout board with antenna). I ordered mine <a
                    href="https://web.archive.org/web/20201025032303/https://item.taobao.com/item.htm?id=577310122904"
                    class="dk hw" rel="noopener nofollow">here</a>. The manual in Chinese is <a
                    href="https://web.archive.org/web/20201025032303/http://rs.iotxx.com/uploads/doc/%E8%B0%B7%E9%9B%A8NB10x%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E4%B9%A6-V1.3.pdf"
                    class="dk hw" rel="noopener nofollow">here</a>.</p>
                <p id="f24b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  4️⃣ <strong class="hd cp">NB-IoT SIM</strong> from your local NB-IoT network operator</p>
                <p id="a2f6" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Many thanks to <a href="https://web.archive.org/web/20201025032303/https://www.starhub.com/"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">StarHub</strong></a> for sponsoring the
                  NB-IoT SIM that I used for this tutorial!</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="631d" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Connect The Hardware</h1>
                <p id="d19f" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  To connect Blue Pill to Quectel BC95-G and ST-Link, <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/connect-the-nb-iot-hardware-stm32-blue-pill-and-quectel-bc95-g-module-978920c964b1">follow
                    the instructions here</a></p>
              </div>
            </div>
            <div class="eg">
              <div class="n p">
                <div class="km kn ko kp kq kr ah ks ai kt ak t">
                  <figure class="hy hz ia ib ic eg mf mg paragraph-image">
                    <div class="ei ej ab ek t">
                      <div class="du dv me">
                        <div class="es w ab et">
                          <div class="ku ev w">
                            <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                                class="dx en dy eo t ew ex ey"
                                src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*mXSaar7zA66oGDii.jpeg?q=20"
                                width="1200" height="900" /></div><img alt="Image for post"
                              class="el em dx en dy eo t c" width="1200" height="900" /><noscript><img
                                alt="Image for post" class="dx en dy eo t"
                                src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2400/0*mXSaar7zA66oGDii.jpeg"
                                width="1200" height="900"
                                srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*mXSaar7zA66oGDii.jpeg 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/0*mXSaar7zA66oGDii.jpeg 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/0*mXSaar7zA66oGDii.jpeg 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1456/0*mXSaar7zA66oGDii.jpeg 728w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1632/0*mXSaar7zA66oGDii.jpeg 816w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1808/0*mXSaar7zA66oGDii.jpeg 904w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1984/0*mXSaar7zA66oGDii.jpeg 992w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2000/0*mXSaar7zA66oGDii.jpeg 1000w"
                                sizes="1000px" /></noscript>
                          </div>
                        </div>
                      </div>
                    </div>
                    <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Blue Pill connected to Quectel BC95-G and
                      ST-Link</figcaption>
                  </figure>
                </div>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="cf92" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Flash The Firmware To Blue Pill</h1>
                <p id="8bcd" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  The next step is to flash the firmware into Blue Pill’s ROM. We’ll need to connect the Blue Pill to
                  the USB port of our computer via an <a
                    href="https://web.archive.org/web/20201025032303/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924134644&amp;SearchText=st-link+v2&amp;switch_new_app=y"
                    class="dk hw" rel="noopener nofollow">ST-Link V2 adapter</a>.</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv mh">
                      <div class="es w ab et">
                        <div class="mi ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg?q=20"
                              width="2071" height="1380" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="2071" height="1380" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/4142/1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg"
                              width="2071" height="1380"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg 500w"
                              sizes="500px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Blue Pill and ST-Link connected to USB port
                  </figcaption>
                </figure>
                <p id="dee2" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  1️⃣ Check that the Blue Pill is connected to ST-Link…</p>
                <p id="7b56" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  And the ST-Link is connected to your computer’s USB port.</p>
                <p id="e455" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Now let’s head back to Visual Studio Code…</p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv mj">
                      <div class="es w ab et">
                        <div class="mk ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1800" height="50" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*pmGFQ2cRpqypaNDM1UYwEw.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*pmGFQ2cRpqypaNDM1UYwEw.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*pmGFQ2cRpqypaNDM1UYwEw.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/1*pmGFQ2cRpqypaNDM1UYwEw.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="b3c2" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ Click <code class="et jb jc jd je b">Terminal → Run Task → [4] Load bluepill_boot</code></p>
                <p id="a933" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This flashes the bootloader to Blue Pill, to start the Apache Mynewt operating system upon startup. If
                  it shows errors, compare with <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/load-bootloader.log"
                    class="dk hw" rel="noopener nofollow">this flash log</a>.</p>
                <p id="4a5f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  3️⃣ Click <code class="et jb jc jd je b">Terminal → Run Task → [5] Load bluepill_my_sensor</code></p>
                <p id="6784" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This flashes the firmware (containing our Visual Program) to Blue Pill. If it shows errors, compare
                  with <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/load-application.log"
                    class="dk hw" rel="noopener nofollow">this flash log</a>.</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="bb03" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Run The Program</h1>
                <p id="aaf6" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  1️⃣ Click <code class="et jb jc jd je b">Debug → Start Debugging</code></p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="du dv mc">
                    <div class="es w ab et">
                      <div class="ml ev w">
                        <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                            class="dx en dy eo t ew ex ey"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*Mp3PwMWgGLnJfB2X.png?q=20"
                            width="500" height="285" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                          width="500" height="285" /><noscript><img alt="Image for post" class="dx en dy eo t"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/0*Mp3PwMWgGLnJfB2X.png"
                            width="500" height="285"
                            srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*Mp3PwMWgGLnJfB2X.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/0*Mp3PwMWgGLnJfB2X.png 500w"
                            sizes="500px" /></noscript>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="05eb" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  2️⃣ Click <code class="et jb jc jd je b">View → Output</code></p>
                <p id="5ec5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Select <code class="et jb jc jd je b">Adapter Output</code> to see the Blue Pill log</p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv me">
                      <div class="es w ab et">
                        <div class="mm ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*90lBQnZsntBt5ohv.png?q=20"
                              width="1200" height="33" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1200" height="33" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2400/0*90lBQnZsntBt5ohv.png"
                              width="1200" height="33"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*90lBQnZsntBt5ohv.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/0*90lBQnZsntBt5ohv.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/0*90lBQnZsntBt5ohv.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/0*90lBQnZsntBt5ohv.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <figure class="ez eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="du dv mn">
                    <div class="es w ab et">
                      <div class="mo ev w">
                        <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                            class="dx en dy eo t ew ex ey"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*ttNb9ISrhaD4j6lb.png?q=20"
                            width="450" height="289" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                          width="450" height="289" /><noscript><img alt="Image for post" class="dx en dy eo t"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/900/0*ttNb9ISrhaD4j6lb.png"
                            width="450" height="289"
                            srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*ttNb9ISrhaD4j6lb.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/900/0*ttNb9ISrhaD4j6lb.png 450w"
                            sizes="450px" /></noscript>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="91cc" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  3️⃣ The debugger pauses at the line with <code class="et jb jc jd je b">LoopCopyDataInit</code></p>
                <p id="2598" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Click <code class="et jb jc jd je b">Continue</code> or press <code class="et jb jc jd je b">F5</code>
                </p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv me">
                      <div class="es w ab et">
                        <div class="mm ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*CRD7qSOItwVYR7pt.png?q=20"
                              width="1200" height="33" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1200" height="33" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2400/0*CRD7qSOItwVYR7pt.png"
                              width="1200" height="33"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*CRD7qSOItwVYR7pt.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/0*CRD7qSOItwVYR7pt.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/0*CRD7qSOItwVYR7pt.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/0*CRD7qSOItwVYR7pt.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <figure class="ez eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv mp">
                      <div class="es w ab et">
                        <div class="mq ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*XpPw1ohylYFVuqFOJ92H9g.png?q=20"
                              width="551" height="341" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="551" height="341" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1102/1*XpPw1ohylYFVuqFOJ92H9g.png"
                              width="551" height="341"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*XpPw1ohylYFVuqFOJ92H9g.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/1*XpPw1ohylYFVuqFOJ92H9g.png 500w"
                              sizes="500px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="cc81" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  4️⃣ The debugger pauses next at the <code class="et jb jc jd je b">main()</code> function.</p>
                <p id="1590" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Click <code class="et jb jc jd je b">Continue</code> or press <code class="et jb jc jd je b">F5</code>
                </p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv me">
                      <div class="es w ab et">
                        <div class="mm ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*7f4oCaOs-O_xaLQG.png?q=20"
                              width="1200" height="33" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1200" height="33" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2400/0*7f4oCaOs-O_xaLQG.png"
                              width="1200" height="33"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*7f4oCaOs-O_xaLQG.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/0*7f4oCaOs-O_xaLQG.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/0*7f4oCaOs-O_xaLQG.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/0*7f4oCaOs-O_xaLQG.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="3fbf" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The program should now poll the internal temperature sensor every 10 seconds and transmit to
                  thethings.io. Let’s study the Blue Pill execution log…</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="57b6" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  Check The Log</h1>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Excerpt from the Blue Pill log: Reading the
                    sensor and transmitting the sensor data over NB-IoT. From <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log#L128-L148"
                      class="dk hw"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log#L128-L148</a>
                  </figcaption>
                </figure>
                <p id="5887" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The log from our Blue Pill should <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/standalone-node.log"
                    class="dk hw" rel="noopener nofollow">look like this</a>.</p>
                <p id="c976" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The contents of the log should be similar to the <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/connect-stm32-blue-pill-to-nb-iot-with-quectel-bc95-g-and-apache-mynewt-c99a9d8417a9?source=friends_link&amp;sk=34fb9befbea42e98cb5942d66f594027">previous
                    article</a>. To understand the log messages, refer to the section <em class="hv">“Check The
                    Log”</em> of <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/connect-stm32-blue-pill-to-nb-iot-with-quectel-bc95-g-and-apache-mynewt-c99a9d8417a9?source=friends_link&amp;sk=34fb9befbea42e98cb5942d66f594027">this
                    article</a>.</p>
                <p id="b374" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  When we Ctrl-Click the URL in the log…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="901e" class="dh lo jm ff je b de lp lq w lr"><a href="https://web.archive.org/web/20201025032303/https://blue-pill-geolocate.appspot.com/?device=ac913c504b27e00bc8b68dfe843b297c" class="dk hw" rel="noopener nofollow">https://blue-pill-geolocate.appspot.com?device=ac913c</a>…</span></pre>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik il im in io ip paragraph-image">
                  <div class="du dv mc">
                    <div class="es w ab et">
                      <div class="mr ev w">
                        <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                            class="dx en dy eo t ew ex ey"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*d0FLvDkcIx-J66EY.png?q=20"
                            width="500" height="427" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                          width="500" height="427" /><noscript><img alt="Image for post" class="dx en dy eo t"
                            src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/0*d0FLvDkcIx-J66EY.png"
                            width="500" height="427"
                            srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/0*d0FLvDkcIx-J66EY.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1000/0*d0FLvDkcIx-J66EY.png 500w"
                            sizes="500px" /></noscript>
                      </div>
                    </div>
                  </div>
                  <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Web page with computed temperature</figcaption>
                </figure>
                <p id="f123" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  …We see a web page with the computed temperature value of our temperature sensor in degrees Celsius.
                </p>
                <p id="1d89" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  That’s because <strong class="hd cp">thethings.io has converted the raw temperature into the actual
                    temperature</strong> (in degrees Celsius).</p>
                <p id="bbda" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  We have installed a <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/thethingsio-wifi-geolocation"
                    class="dk hw" rel="noopener nofollow">script at thethings.io</a> that pushes the computed
                  temperature to <code class="et jb jc jd je b">blue-pill-geolocate.appspot.com</code>, so that we could
                  see the computed temperature.</p>
                <p id="db40" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The URL (and the random number) <strong class="hd cp">changes each time we restart the
                    program</strong>. More details about the setup for thethings.io may be found in an <a class="dk hw"
                    rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/get-started-with-nb-iot-and-quectel-modules-6e7c581e0d61">earlier
                    article</a>.</p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="e655" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  What’s Next?</h1>
                <p id="ca66" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/visual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c?source=friends_link&amp;sk=222de63e45993aacd0db5a2e4b1f33c7">Visual
                    Rust</a>, of course! We’ll soon be able to generate the Embedded Rust program in this article by
                  simply dragging and dropping blocks around. Check out the article here…</p>
                <div class="ms mt mu mv mw mx"><a target="_blank" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/visual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c">
                    <div class="my n dq">
                      <div class="mz n x p na nb">
                        <h2 class="ap cp de ar ep nc nd ne nf ng nh da dh">Visual Embedded Rust Programming with Visual
                          Studio Code</h2>
                        <div class="ni w">
                          <h3 class="ap b de ar ep nc nd ne nf ng nh br">Create and edit Embedded Rust programs for
                            STM32 Blue Pill and Apache Mynewt… By dragging and dropping blocks!</h3>
                        </div>
                        <div class="nj w">
                          <h4 class="ap b nk ar ep nc nd ne nf ng nh br">medium.com</h4>
                        </div>
                      </div>
                      <div class="nl w">
                        <div class="nm w nn no np nl nq nr mx"></div>
                      </div>
                    </div>
                  </a></div>
                <p id="6500" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  I have extended the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/blockly-mynewt-rust"
                    class="dk hw" rel="noopener nofollow">Rust Code Generator</a> for Google Blockly to generate Rust
                  code that’s fairly close to the code that we see in this article.</p>
                <p id="d055" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Embedded Rust can clearly harness our powerful gadgets… It handles complex embedded programs well. And
                  it prevents bugs from crashing our gadgets.</p>
                <p id="1e43" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">But will we know how to harness the power of Rust?</em></p>
                <p id="ed2a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <em class="hv">With great power comes great… </em><strong class="hd cp"><em
                      class="hv">Teaching</em></strong><em class="hv">! (</em>That’s where I fit in…)</p>
                <p id="924d" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Could Rust harness its own power, like with auto-generated Safe Wrappers?</p>
                <p id="488b" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Or could we do it Visually… so we can see in a single glance how Rust is controlling our gadgets?</p>
                <p id="82b6" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  I’m about to find out… Stay tuned!</p>
                <p id="22e5" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <strong class="hd cp">UPDATE</strong>: I have a new article that explains how to reduce the power
                  consumption of our device…</p>
                <div class="ms mt mu mv mw mx"><a target="_blank" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/low-power-nb-iot-on-stm32-blue-pill-with-apache-mynewt-and-embedded-rust-cef5a3ecdd90">
                    <div class="my n dq">
                      <div class="mz n x p na nb">
                        <h2 class="ap cp de ar ep nc nd ne nf ng nh da dh">Low Power NB-IoT on STM32 Blue Pill with
                          Apache Mynewt and Embedded Rust</h2>
                        <div class="ni w">
                          <h3 class="ap b de ar ep nc nd ne nf ng nh br">How much power do Quectel NB-IoT modules
                            consume? Let’s find out with the RuiDeng DPS 3005</h3>
                        </div>
                        <div class="nj w">
                          <h4 class="ap b nk ar ep nc nd ne nf ng nh br">medium.com</h4>
                        </div>
                      </div>
                      <div class="nl w">
                        <div class="ns w nn no np nl nq nr mx"></div>
                      </div>
                    </div>
                  </a></div>
              </div>
            </div>
            <div class="eg t">
              <figure class="hy hz ia ib ic eg">
                <div class="es w ab">
                  <div class="ku ev w"></div>
                </div>
              </figure>
              <figure class="eh eg t paragraph-image">
                <div class="es w ab et">
                  <div class="nt ev w">
                    <div class="el em dx en dy eo t ep eq er"><img alt="Image for post" class="dx en dy eo t ew ex ey"
                        src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*UcILlk-C-XtzwRlKd8S1Mg.png?q=20"
                        width="1862" height="1127" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                      width="1862" height="1127" /><noscript><img alt="Image for post" class="dx en dy eo t"
                        src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3724/1*UcILlk-C-XtzwRlKd8S1Mg.png"
                        width="1862" height="1127"
                        srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*UcILlk-C-XtzwRlKd8S1Mg.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*UcILlk-C-XtzwRlKd8S1Mg.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*UcILlk-C-XtzwRlKd8S1Mg.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1456/1*UcILlk-C-XtzwRlKd8S1Mg.png 728w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1632/1*UcILlk-C-XtzwRlKd8S1Mg.png 816w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1808/1*UcILlk-C-XtzwRlKd8S1Mg.png 904w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1984/1*UcILlk-C-XtzwRlKd8S1Mg.png 992w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2160/1*UcILlk-C-XtzwRlKd8S1Mg.png 1080w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/2700/1*UcILlk-C-XtzwRlKd8S1Mg.png 1350w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3240/1*UcILlk-C-XtzwRlKd8S1Mg.png 1620w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3724/1*UcILlk-C-XtzwRlKd8S1Mg.png 1862w"
                        sizes="1862px" /></noscript>
                  </div>
                </div>
                <figcaption class="ez fa dw du dv fb fc ap b aq ar br">Under Development: Visual Studio Code Extension
                  for Visual Embedded Rust</figcaption>
              </figure>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="1642" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  💎 Advanced Topic: CoAP Macro</h1>
                <p id="58f3" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  The CoAP Macro is defined in <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/encoding/macros.rs" class="dk hw" rel="noopener nofollow">rust/mynewt/src/encoding/macros.rs</a></code>
                </p>
                <p id="59c3" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  It’s a <a
                    href="https://web.archive.org/web/20201025032303/https://danielkeep.github.io/tlborm/book/mbe-README.html"
                    class="dk hw" rel="noopener nofollow"><strong class="hd cp">Rust Declarative Macro</strong></a> that
                  parses the JSON-like input (sensor data fields) and generates Rust code to encode the sensor data in
                  JSON or CBOR format. Given <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/app_network.rs#L63-L75"
                    class="dk hw" rel="noopener nofollow">this input</a>…</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="7f84" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  … And depending on the selector “<code class="et jb jc jd je b">@json</code>” or “<code
                    class="et jb jc jd je b">@cbor</code>”, the CoAP Macro expands into the following code…</p>
                <ul class="">
                  <li id="0d4f"
                    class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/libapp-expanded-json.rs#L276-L385"
                      class="dk hw" rel="noopener nofollow">JSON Encoding</a></li>
                  <li id="dbf1"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/libapp-expanded-cbor.rs#L293-L497"
                      class="dk hw" rel="noopener nofollow">CBOR Encoding</a></li>
                </ul>
                <p id="904a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The CoAP Macro was adapted from the JSON parser in the <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://docs.serde.rs/serde_json/" class="dk hw" rel="noopener nofollow">serde_json</a></code>
                  crate.</p>
                <p id="5c8c" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The generated code uses a CoAP Context object to maintain the current JSON and CBOR encoding state:
                  <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/encoding/coap_context.rs" class="dk hw" rel="noopener nofollow">rust/mynewt/src/encoding/coap_context.rs</a></code>
                </p>
                <p id="49d0" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The JSON encoding code calls the <a
                    href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/json/json.html"
                    class="dk hw" rel="noopener nofollow">Mynewt JSON API</a> while the CBOR encoding code calls the <a
                    href="https://web.archive.org/web/20201025032303/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_oic.html"
                    class="dk hw" rel="noopener nofollow">Mynewt OIC API</a>.</p>
                <p id="2078" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Read more about <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&amp;sk=16a27a4b9910aadcfcb9881c02d84adc">Rust
                    Declarative Macros</a></p>
                <p id="d339" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Read more about <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/get-started-with-nb-iot-and-quectel-modules-6e7c581e0d61?source=friends_link&amp;sk=40ece196fc51f7a2903c9981f46efa46">CoAP
                    Encoding</a></p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="d1a4" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  💎 Advanced Topic: Hosting Rust on Mynewt</h1>
                <p id="f7ab" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  We use a custom <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd"
                    class="dk hw" rel="noopener nofollow">Build Script</a> to build the Rust application and link it
                  into the Mynewt firmware. (View the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/build-application.log"
                    class="dk hw" rel="noopener nofollow">Build Log</a>) The script does the following…</p>
                <ol class="">
                  <li id="d8a9"
                    class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu oc nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L51-L55"
                      class="dk hw" rel="noopener nofollow">Run </a><code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L51-L55" class="dk hw" rel="noopener nofollow">cargo build</a></code>
                    to build the Rust application into a library named <code class="et jb jc jd je b">libapp.rlib</code>
                  </li>
                  <li id="a7ac"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L73-L76"
                      class="dk hw" rel="noopener nofollow">Extract the </a><code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L73-L76" class="dk hw" rel="noopener nofollow">*.o</a></code><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L73-L76"
                      class="dk hw" rel="noopener nofollow"> object files</a> from <code
                      class="et jb jc jd je b">libapp.rlib</code> (including the <code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L46-L74" class="dk hw" rel="noopener nofollow">main</a>()</code>
                    function from Rust) and external crates. <a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L77-L81"
                      class="dk hw" rel="noopener nofollow">Combine the object files</a> into a new library <code
                      class="et jb jc jd je b">rustlib.a</code></li>
                  <li id="0fad"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L82-L93"
                      class="dk hw" rel="noopener nofollow">Copy </a><code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L82-L93" class="dk hw" rel="noopener nofollow">rustlib.a</a></code>
                    into the Mynewt build folder for custom library <code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/libs/rust_app" class="dk hw" rel="noopener nofollow">libs/rust_app</a></code>
                  </li>
                  <li id="c842"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L101-L122"
                      class="dk hw" rel="noopener nofollow">Copy the Rust Core Library</a> <code
                      class="et jb jc jd je b">libcore-*.rlib</code> from the Rust Compiler into the Mynewt build folder
                    for custom library <code class="et jb jc jd je b">libs/rust_libcore</code></li>
                  <li id="be59"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L128-L133"
                      class="dk hw" rel="noopener nofollow">Run </a><code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/build-app.cmd#L128-L133" class="dk hw" rel="noopener nofollow">newt build</a></code>
                    to build the Mynewt firmware, which includes <code class="et jb jc jd je b">rust_app</code> and
                    <code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust-nbiot/libs/rust_libcore" class="dk hw" rel="noopener nofollow">rust_libcore</a></code>
                  </li>
                  <li id="f268"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh">The
                    Mynewt firmware calls the <code
                      class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/app/src/lib.rs#L46-L74" class="dk hw" rel="noopener nofollow">main</a>()</code>
                    function defined in Rust, so the Rust application runs on startup</li>
                </ol>
                <p id="8e50" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The following files may be useful for reference…</p>
                <ul class="">
                  <li id="45f5"
                    class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://lupyuen.github.io/stm32bluepill-mynewt-sensor/rust/app/"
                      class="dk hw" rel="noopener nofollow">Rust Doc for the applicatio</a>n</li>
                  <li id="c623"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/libapp-demangle.S"
                      class="dk hw" rel="noopener nofollow">Disassembly of the Rust Application build</a></li>
                  <li id="2edd"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/rustlib-demangle.S"
                      class="dk hw" rel="noopener nofollow">Disassembly of the Rust Crates</a></li>
                  <li id="a740"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/my_sensor_app.elf.lst"
                      class="dk hw" rel="noopener nofollow">Disassembly of the entire firmware</a></li>
                  <li id="9b8b"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu nu nv nw dh"><a
                      href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/my_sensor_app.elf.map"
                      class="dk hw" rel="noopener nofollow">Memory map of the firmware</a></li>
                </ul>
                <p id="e555" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Read more about <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&amp;sk=f58f4cf6c608fded4b354063e474a93b">hosting
                    Rust applications on Mynewt</a></p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="4e2b" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  💎 Advanced Topic: Safe Wrappers for Mynewt</h1>
                <p id="861c" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  Although Rust can call C functions directly, it’s unpleasant to call the Mynewt API with unsafe code.
                  And we need to be very careful when converting pointers between Mynewt and C. Also all strings need to
                  be null-terminated when passing from Mynewt to Rust. That’s why we create Safe Wrappers for the Mynewt
                  API.</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="9e91" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Here’s a typical Mynewt API <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/kernel/os.rs#L1936-L1966" class="dk hw" rel="noopener nofollow">os_task_init()</a></code>
                  that has been imported into Rust with our <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh" class="dk hw" rel="noopener nofollow">gen-bindings.sh</a></code>
                  script, thanks to <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://rust-lang.github.io/rust-bindgen/" class="dk hw" rel="noopener nofollow">bindgen</a></code>...
                </p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv mj">
                      <div class="es w ab et">
                        <div class="mk ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1800" height="50" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*pmGFQ2cRpqypaNDM1UYwEw.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*pmGFQ2cRpqypaNDM1UYwEw.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*pmGFQ2cRpqypaNDM1UYwEw.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/1*pmGFQ2cRpqypaNDM1UYwEw.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <figure class="ez eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="b7ea" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  …And here’s the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/libmynewt-expanded.rs#L2379-L2437"
                    class="dk hw" rel="noopener nofollow">Safe Wrapper for that API</a>. Note the following…</p>
                <ol class="">
                  <li id="8322"
                    class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu oc nv nw dh">
                    Unsafe types like <code class="et jb jc jd je b">* const c_char</code> have been replaced by the
                    safer version <code class="et jb jc jd je b">Strn</code></li>
                  <li id="c63b"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh">We
                    validate all <code class="et jb jc jd je b">Strn</code> strings to confirm that they are
                    null-terminated before passing to Mynewt: <code class="et jb jc jd je b">arg2.validate()</code></li>
                  <li id="84f7"
                    class="hb hc ff hd b he nx hf hg hh ny hi hj hk nz hl hm hn oa ho hp hq ob hr hs hu oc nv nw dh">We
                    convert the Mynewt result code into the standard <code
                      class="et jb jc jd je b">MynewtResult&lt;()&gt; </code>type</li>
                </ol>
                <p id="8a36" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  How did we create the Safe Wrappers? They were automatically generated with a Rust Procedural Macro
                  named <code class="et jb jc jd je b">safe_wrap</code>. That’s why we see this annotation…</p>
                <pre
                  class="hy hz ia ib ic ll lm ln"><span id="5c1b" class="dh lo jm ff je b de lp lq w lr">#[mynewt_macros::safe_wrap(attr)]</span></pre>
                <p id="1047" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Here is the <a
                    href="https://web.archive.org/web/20201025032303/https://lupyuen.github.io/stm32bluepill-mynewt-sensor/rust/mynewt/"
                    class="dk hw" rel="noopener nofollow">Rust Doc for the Mynewt API</a></p>
                <p id="ee4f" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Read more about <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&amp;sk=16a27a4b9910aadcfcb9881c02d84adc">Safe
                    Wrappers</a></p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="82ea" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  💎 Advanced Topic: Auto-Generating Safe Wrappers</h1>
                <p id="69db" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  The Safe Wrappers were generated by our Rust Procedural Macro named <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/safe_wrap.rs" class="dk hw" rel="noopener nofollow">safe_wrap</a>()</code>.
                  If you look at the <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/safe_wrap.rs"
                    class="dk hw" rel="noopener nofollow">source code</a>, you’ll see that it’s actually another Rust
                  program, except that it’s invoked during the Rust build, not during runtime.</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="0e3e" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  <code class="et jb jc jd je b">safe_wrap()</code> takes an extern declaration like this…</p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv mj">
                      <div class="es w ab et">
                        <div class="mk ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1800" height="50" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*pmGFQ2cRpqypaNDM1UYwEw.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*pmGFQ2cRpqypaNDM1UYwEw.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*pmGFQ2cRpqypaNDM1UYwEw.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/1*pmGFQ2cRpqypaNDM1UYwEw.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <figure class="ez eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="c5aa" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  …And generates this Safe Wrapper.</p>
                <p id="7229" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  It calls the <a
                    href="https://web.archive.org/web/20201025032303/https://docs.rs/syn/0.15.38/syn/index.html"
                    class="dk hw" rel="noopener nofollow">syn crate</a> to parse the <code
                    class="et jb jc jd je b">extern</code> declaration, and calls the <a
                    href="https://web.archive.org/web/20201025032303/https://docs.rs/quote/0.6.12/quote/" class="dk hw"
                    rel="noopener nofollow">quote crate</a> to generate the Safe Wrapper code.</p>
                <p id="7e13" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Yes, <code class="et jb jc jd je b">safe_wrap()</code> is a Rust program that reads a Rust program and
                  generates another Rust program!</p>
                <p id="e1fc" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  We don’t generate wrappers yet for the entire Mynewt API. The whitelist of Mynewt APIs for generating
                  wrappers is <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/safe_wrap.rs#L43-L64"
                    class="dk hw" rel="noopener nofollow">specified here</a>.</p>
                <p id="b9d3" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  We also use <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/safe_wrap.rs#L43-L64"
                    class="dk hw" rel="noopener nofollow">fixed rules</a> to determine the namespace for each Mynewt
                  function. Given a Mynewt function like <code class="et jb jc jd je b">os_task_init()</code>, we use
                  the rules to deduce that <code class="et jb jc jd je b">os</code> is the namespace and <code
                    class="et jb jc jd je b">task_init()</code> should be name of the Rust Safe Wrapper.</p>
                <p id="8098" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  To test the macros, I created a <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/test-rust-macros" class="dk hw" rel="noopener nofollow">test-rust-macros</a></code>
                  project.</p>
                <p id="ea03" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Read more about <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&amp;sk=16a27a4b9910aadcfcb9881c02d84adc">Rust
                    Procedural Macros</a></p>
              </div>
            </div>
          </section>
          <div class="n p gb jf jg ik" role="separator"><span class="jh gm bk ji jj jk"></span><span
              class="jh gm bk ji jj jk"></span><span class="jh gm bk ji jj"></span></div>
          <section class="dc ed ee cx ef">
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <h1 id="e0b9" class="jl jm ff ap jn jo jp hf jq jr js hi jt ju jv jw jx jy jz ka kb kc kd ke kf kg dh">
                  💎 Advanced Topic: Generating Rust Bindings for Mynewt</h1>
                <p id="2451" class="hb hc ff hd b he kh hf hg hh ki hi hj hk kj hl hm hn kk ho hp hq kl hr hs hu dc dh">
                  The Mynewt API was imported into Rust using the <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh" class="dk hw" rel="noopener nofollow">gen-bindings.sh</a></code>
                  script. <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/gen-bindings.log"
                    class="dk hw" rel="noopener nofollow">Here is the log</a>.</p>
                <figure class="hy hz ia ib ic eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="019d" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  This script takes the preprocessed C header files from Mynewt and generates <code
                    class="et jb jc jd je b">extern</code> function declarations in Rust. The script calls <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://rust-lang.github.io/rust-bindgen/" class="dk hw" rel="noopener nofollow">bindgen</a></code>
                  to <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh#L54-L65"
                    class="dk hw" rel="noopener nofollow">create the declarations</a>.</p>
                <p id="1eff" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Given this C declaration…</p>
                <figure class="hy hz ia ib ic eg du dv paragraph-image">
                  <div class="ei ej ab ek t">
                    <div class="du dv mj">
                      <div class="es w ab et">
                        <div class="mk ev w">
                          <div class="el em dx en dy eo t ep eq er"><img alt="Image for post"
                              class="dx en dy eo t ew ex ey"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" /></div><img alt="Image for post" class="el em dx en dy eo t c"
                            width="1800" height="50" /><noscript><img alt="Image for post" class="dx en dy eo t"
                              src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50"
                              srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/552/1*pmGFQ2cRpqypaNDM1UYwEw.png 276w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1104/1*pmGFQ2cRpqypaNDM1UYwEw.png 552w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1280/1*pmGFQ2cRpqypaNDM1UYwEw.png 640w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/1400/1*pmGFQ2cRpqypaNDM1UYwEw.png 700w"
                              sizes="700px" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <figure class="ez eg id ie bi if ig ih ii ij bx ik iw ix iy iz ip">
                  <div class="es w ab">
                    <div class="ja ev w"></div>
                  </div>
                </figure>
                <p id="88eb" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  …The script generates this Rust <code class="et jb jc jd je b">extern</code> function declaration.</p>
                <p id="3041" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Only a <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh#L319-L327"
                    class="dk hw" rel="noopener nofollow">subset of the Mynewt API</a> is processed. Although <code
                    class="et jb jc jd je b">bindgen</code> can process <code class="et jb jc jd je b">*.h</code> header
                  files in selected <code class="et jb jc jd je b">include</code> directories, it doesn’t work for
                  Mynewt because of its complicated <code class="et jb jc jd je b">include</code> structure.</p>
                <p id="165c" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  I have chosen to let <code
                    class="et jb jc jd je b"><a href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh#L30-L53" class="dk hw" rel="noopener nofollow">gcc</a></code><a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh#L30-L53"
                    class="dk hw" rel="noopener nofollow"> create preprocessed versions</a> of each header file. The
                  <code class="et jb jc jd je b">gcc</code> options <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/gen-bindings.txt"
                    class="dk hw" rel="noopener nofollow">look like this</a>. The preprocessed header file <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/libs/sensor_coap-expanded.h"
                    class="dk hw" rel="noopener nofollow">looks like this</a>. The generated Rust declarations <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/mynewt/src/libs/sensor_coap.rs"
                    class="dk hw" rel="noopener nofollow">is here</a>.</p>
                <p id="aa6a" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  The script passes <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh#L247-L248"
                    class="dk hw" rel="noopener nofollow">blacklists</a> and <a
                    href="https://web.archive.org/web/20201025032303/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/scripts/gen-bindings.sh#L249-L255"
                    class="dk hw" rel="noopener nofollow">whitelists</a> to <code
                    class="et jb jc jd je b">bindgen</code> to ensure that there are no duplicate declarations.</p>
                <p id="cbd1" class="hb hc ff hd b he ir hf hg hh is hi hj hk it hl hm hn iu ho hp hq iv hr hs hu dc dh">
                  Read more about <a class="dk hw" rel="noopener"
                    href="/web/20201025032303/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&amp;sk=16a27a4b9910aadcfcb9881c02d84adc">generating
                    Rust bindings</a></p>
              </div>
            </div>
          </section>
        </div>
      </article>
      <div class="el ec oe od t ok oi ol" data-test-id="post-sidebar">
        <div class="n p">
          <div class="ae af ag ah ai aj ak t">
            <div class="om n x">
              <div class="ec">
                <div>
                  <div class="on u w">
                    <p class="ap b oo op oq br or">Written by</p>
                    <div class="mf mg w"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener"
                        href="/web/20201025032303/https://medium.com/@ly.lee?source=post_sidebar--------------------------post_sidebar-----------">
                        <h2 class="ap jn de ar da dh dc">Lup Yuen Lee 李立源</h2>
                      </a></div>
                    <div class="os w">
                      <h4 class="ap b aq ar br">Techie and Educator in IoT 物聯網教師</h4>
                    </div>
                    <div class="ot w"><span><button
                          class="ap b aq ar dh ou r au ov ow ox oy ba bb bc oz pa pb bg bh bi bj bk bl">Follow</button></span>
                    </div>
                  </div>
                  <div class="pc pd pe n">
                    <div class="n o">
                      <div class="w ab pf pg ph pi pj"><span><a
                            href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fvote%2Fp%2Fef62a7e28f7e&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_sidebar-----ef62a7e28f7e---------------------clap_sidebar-----------"
                            class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener">
                            <div class="bx pk pl pm pn po pp pq r pr ps"><svg width="29" height="29" aria-label="clap">
                                <g fill-rule="evenodd">
                                  <path
                                    d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z">
                                  </path>
                                </g>
                              </svg></div>
                          </a></span></div>
                      <div class="w pt pu pv pw px py pz">
                        <div class="qa">
                          <h4 class="ap b aq ar br"><button class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp">302
                              <!-- -->
                            </button></h4>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="pd w"><button class="pn pl bx">
                      <div class="qd n o am"><svg width="25" height="25" class="r" aria-label="responses">
                          <path
                            d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z"
                            fill-rule="evenodd"></path>
                        </svg>
                        <div class="w ab qe qf qg qh qi qj qk ql">
                          <h4 class="ap b aq ar br">3
                            <!-- -->
                          </h4>
                        </div>
                      </div>
                    </button></div>
                  <div class="gz"><span><a
                        href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fbookmark%2Fp%2Fef62a7e28f7e&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_sidebar-----ef62a7e28f7e---------------------bookmark_sidebar-----------"
                        class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener"><svg width="25" height="25"
                          viewbox="0 0 25 25">
                          <path
                            d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                            fill-rule="evenodd"></path>
                        </svg></a></span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="el ec od oe of gk og oh oi oj"></div>
      <div>
        <div class="cn eg n x p">
          <div class="n p">
            <div class="ae af ag ah ai fd ak t">
              <div class="n cm"></div>
              <div class="n o cm"></div>
              <div class="qm qn w">
                <div class="qn n cd gw">
                  <div class="n am">
                    <div class="qo w"><span class="w qp qq qr e d">
                        <div class="n o">
                          <div class="w ab pf pg ph pi pj"><span><a
                                href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fvote%2Fp%2Fef62a7e28f7e&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_actions_footer-----ef62a7e28f7e---------------------clap_footer-----------"
                                class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener">
                                <div class="bx pk pl pm pn po pp pq r pr ps"><svg width="25" height="25"
                                    viewbox="0 0 25 25" aria-label="clap">
                                    <g fill-rule="evenodd">
                                      <path
                                        d="M11.74 0l.76 2.97.76-2.97zM14.81 3.78l1.84-2.56-1.42-.47zM8.38 1.22l1.84 2.56L9.8.75zM20.38 21.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M7.1 21.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L4.1 14.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L4.4 10.26 3.22 9.08a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L9.96 13a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L6.43 8.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L18.63 14c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM11 5.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 21 22.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z">
                                      </path>
                                    </g>
                                  </svg></div>
                              </a></span></div>
                          <div class="w pt pu pv pw px py pz">
                            <div class="ab qs qa">
                              <h4 class="ap b aq ar dh"><button
                                  class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp">302<span
                                    class="w h g f qt qu"> </span></button><span class="w h g f qt qu"></span></h4>
                            </div>
                          </div>
                        </div>
                      </span><span class="w h g f qt qu">
                        <div class="n ci">
                          <div class="w ab pf pg"><span><a
                                href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fvote%2Fp%2Fef62a7e28f7e&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_actions_footer-----ef62a7e28f7e---------------------clap_footer-----------"
                                class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener">
                                <div class="bx pk pl pm pn po pp pq r pr ps"><svg width="33" height="33"
                                    viewbox="0 0 33 33" aria-label="clap">
                                    <path
                                      d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z"
                                      fill-rule="evenodd"></path>
                                  </svg></div>
                              </a></span></div>
                          <div class="w pt pu pv pw qv qw qx qy qz ra">
                            <div class="ab qs qa">
                              <h4 class="ap b aq ar dh"><button
                                  class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp">302<span
                                    class="w h g f qt qu"> </span></button><span class="w h g f qt qu"></span></h4>
                            </div>
                          </div>
                        </div>
                      </span></div>
                    <div class="w rb rc rd re rf"></div><button class="pn pl bx">
                      <div class="qd n o am">
                        <div>
                          <div class="bk" role="tooltip" aria-hidden="false"><span class="rg w h g f qt qu"><svg
                                width="33" height="33" viewbox="0 0 33 33" fill="none" class="r" aria-label="responses">
                                <path clip-rule="evenodd"
                                  d="M24.28 25.5l.32-.29c2.11-1.94 3.4-4.61 3.4-7.56C28 11.83 22.92 7 16.5 7S5 11.83 5 17.65s5.08 10.66 11.5 10.66c1.22 0 2.4-.18 3.5-.5l.5-.15.41.33a8.86 8.86 0 0 0 4.68 2.1 7.34 7.34 0 0 1-1.3-4.15v-.43zm1 .45c0 1.5.46 2.62 1.69 4.44.22.32.01.75-.38.75a9.69 9.69 0 0 1-6.31-2.37c-1.2.35-2.46.54-3.78.54C9.6 29.3 4 24.09 4 17.65 4 11.22 9.6 6 16.5 6S29 11.22 29 17.65c0 3.25-1.42 6.18-3.72 8.3z">
                                </path>
                              </svg></span><span class="rh w qp qq qr e d"><svg width="25" height="25" class="r"
                                aria-label="responses">
                                <path
                                  d="M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z"
                                  fill-rule="evenodd"></path>
                              </svg></span></div>
                        </div>
                        <div class="w ab ri qf rj qh rk qj rl rm rn ro">
                          <h4 class="ap b aq ar dh">3
                            <!-- -->
                          </h4>
                        </div>
                      </div>
                    </button>
                  </div>
                  <div class="n o">
                    <div class="gx w">
                      <div class="bk" aria-hidden="false"><button class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp"
                          aria-label="Share Post"><svg width="25" height="25" class="r">
                            <g fill-rule="evenodd">
                              <path
                                d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01">
                              </path>
                              <path
                                d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2">
                              </path>
                            </g>
                          </svg></button></div>
                    </div>
                    <div class="rp w dq">
                      <div class="gz"><span><a
                            href="https://web.archive.org/web/20201025032303/https://medium.com/m/signin?actionUrl=%2F_%2Fbookmark%2Fp%2Fef62a7e28f7e&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e&amp;source=post_actions_footer--------------------------bookmark_footer-----------"
                            class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener"><svg width="25"
                              height="25" viewbox="0 0 25 25">
                              <path
                                d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                fill-rule="evenodd"></path>
                            </svg></a></span></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="rq qn w">
                <ul class="bx by">
                  <li class="bk rr gy rs"><a href="/web/20201025032303/https://medium.com/tag/rust"
                      class="ap b nk rt br ru rv bl w lm">Rust</a></li>
                  <li class="bk rr gy rs"><a href="/web/20201025032303/https://medium.com/tag/internet-of-things"
                      class="ap b nk rt br ru rv bl w lm">Internet of Things</a></li>
                  <li class="bk rr gy rs"><a href="/web/20201025032303/https://medium.com/tag/stm32"
                      class="ap b nk rt br ru rv bl w lm">Stm32</a></li>
                  <li class="bk rr gy rs"><a href="/web/20201025032303/https://medium.com/tag/programming"
                      class="ap b nk rt br ru rv bl w lm">Programming</a></li>
                </ul>
              </div>
              <div class="rw w"></div>
            </div>
          </div>
          <div>
            <div class="n p">
              <div class="ae af ag ah ai fd ak t">
                <div class="w rx ry gw"></div>
              </div>
            </div>
            <div class="w gw">
              <div class="rz sa w sb">
                <div class="n p">
                  <div class="ae af ag ah ai fd ak t">
                    <div class="n o cd">
                      <h2
                        class="ap jn sc sd se jq sf sg sh jt si sj sk jx sl sm sn kb so sp sq kf ep nd ne sr ng nh dh">
                        <a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp" rel="noopener"
                          href="/web/20201025032303/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-----------">More
                          from Lup Yuen Lee 李立源</a></h2><span><button
                          class="ap b aq ar dh ou r au ov ow ox oy ba bb bc oz pa pb bg bh bi bj bk bl">Follow</button></span>
                    </div>
                    <div class="mg ss w">
                      <h4 class="ap b aq ar br">Techie and Educator in IoT 物聯網教師</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="st w sb gw">
              <div class="n p">
                <div class="km ko kq su sv nr ak t"></div>
              </div>
            </div>
            <div class="w id gw">
              <div class="n p">
                <div class="ae af ag ah ai aj ak t">
                  <div class="sw ht w">
                    <div class="sx u sy ht w sz ta">
                      <h2 class="ap jn tb tc jq td te jt tf tg jx th ti kb tj tk kf dh">More From Medium</h2>
                    </div>
                    <div class="ci n am cm tl tm tn to tp tq tr ts tt tu tv tw tx ty tz">
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/coinmonks/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=post_internal_links---------0----------------------------">STM32
                                      Blue Pill — Dissecting the WebUSB Bootloader for MakeCode</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@ly.lee?source=post_internal_links---------0----------------------------">Lup
                                                Yuen Lee 李立源</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="/web/20201025032303/https://medium.com/coinmonks?source=post_internal_links---------0----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp"
                                                  rel="noopener">Coinmonks</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/coinmonks/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=post_internal_links---------0----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*0P7BkmUox48Rak_cta48QA.png?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*0P7BkmUox48Rak_cta48QA.png"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/1*0P7BkmUox48Rak_cta48QA.png 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*0P7BkmUox48Rak_cta48QA.png 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a
                                      href="https://web.archive.org/web/20201025032303/https://blog.usejournal.com/visual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c?source=post_internal_links---------1----------------------------"
                                      rel="noopener nofollow">Visual Embedded Rust Programming with Visual Studio
                                      Code</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@ly.lee?source=post_internal_links---------1----------------------------">Lup
                                                Yuen Lee 李立源</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="https://web.archive.org/web/20201025032303/https://blog.usejournal.com/?source=post_internal_links---------1----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp"
                                                  rel="noopener nofollow">Noteworthy - The Journal Blog</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a
                                  href="https://web.archive.org/web/20201025032303/https://blog.usejournal.com/visual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c?source=post_internal_links---------1----------------------------"
                                  class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w" rel="noopener nofollow">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*cWkz4VgkkdnGOdTMoAxcmQ.png?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*cWkz4VgkkdnGOdTMoAxcmQ.png"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/1*cWkz4VgkkdnGOdTMoAxcmQ.png 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*cWkz4VgkkdnGOdTMoAxcmQ.png 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/@charlesbailey333/rust-fixes-c-s-worst-mistake-a19d93c8b35b?source=post_internal_links---------2----------------------------">Rust
                                      Fixes C++’s WORST Mistake</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@charlesbailey333?source=post_internal_links---------2----------------------------">Charles
                                                B</a></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/@charlesbailey333/rust-fixes-c-s-worst-mistake-a19d93c8b35b?source=post_internal_links---------2----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*MeXAYc_y6MgB1QnB?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/0*MeXAYc_y6MgB1QnB"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/0*MeXAYc_y6MgB1QnB 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/0*MeXAYc_y6MgB1QnB 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/the-innovation/create-a-rust-client-for-ros2-from-scratch-part-1-1-create-the-dynamic-library-via-cmake-empy-a93f78ae90d1?source=post_internal_links---------3----------------------------">Create
                                      a Rust Client for ROS2 from Scratch. Part 1.1: Create the Dynamic Library via
                                      CMake &amp; Empy</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@marshalshi?source=post_internal_links---------3----------------------------">Marshal
                                                SHI</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="/web/20201025032303/https://medium.com/the-innovation?source=post_internal_links---------3----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener">The
                                                  Innovation</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/the-innovation/create-a-rust-client-for-ros2-from-scratch-part-1-1-create-the-dynamic-library-via-cmake-empy-a93f78ae90d1?source=post_internal_links---------3----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*9iXFNBg4uL0HBgEF?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/0*9iXFNBg4uL0HBgEF"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/0*9iXFNBg4uL0HBgEF 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/0*9iXFNBg4uL0HBgEF 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/swlh/on-memoization-291fd1dd924?source=post_internal_links---------4----------------------------">On
                                      memoization</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@andrewjpritchard?source=post_internal_links---------4----------------------------">Andrew
                                                Pritchard</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="/web/20201025032303/https://medium.com/swlh?source=post_internal_links---------4----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener">The
                                                  Startup</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/swlh/on-memoization-291fd1dd924?source=post_internal_links---------4----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/0*OLFbLVmSQD3TAGdA.jpg?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/0*OLFbLVmSQD3TAGdA.jpg"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/0*OLFbLVmSQD3TAGdA.jpg 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/0*OLFbLVmSQD3TAGdA.jpg 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/better-programming/rust-enums-and-pattern-matching-177b03a4152?source=post_internal_links---------5----------------------------">Enums
                                      and Pattern Matching in Rust</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@abhishek1987?source=post_internal_links---------5----------------------------">Abhishek
                                                Gupta</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="/web/20201025032303/https://medium.com/better-programming?source=post_internal_links---------5----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp"
                                                  rel="noopener">Better Programming</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/better-programming/rust-enums-and-pattern-matching-177b03a4152?source=post_internal_links---------5----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*8_cv6T_EXcdgO62xA3TiaA.jpeg?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*8_cv6T_EXcdgO62xA3TiaA.jpeg"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/1*8_cv6T_EXcdgO62xA3TiaA.jpeg 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*8_cv6T_EXcdgO62xA3TiaA.jpeg 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/swlh/porting-apache-mynewt-os-to-gigadevice-gd32-vf103-on-risc-v-4054a5922493?source=post_internal_links---------6----------------------------">Porting
                                      Apache Mynewt OS to GigaDevice GD32 VF103 on RISC-V</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@ly.lee?source=post_internal_links---------6----------------------------">Lup
                                                Yuen Lee 李立源</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="/web/20201025032303/https://medium.com/swlh?source=post_internal_links---------6----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener">The
                                                  Startup</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/swlh/porting-apache-mynewt-os-to-gigadevice-gd32-vf103-on-risc-v-4054a5922493?source=post_internal_links---------6----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*-mTKOgeZ9rI52aFwlwqPVg.jpeg?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*-mTKOgeZ9rI52aFwlwqPVg.jpeg"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/1*-mTKOgeZ9rI52aFwlwqPVg.jpeg 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*-mTKOgeZ9rI52aFwlwqPVg.jpeg 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="ua ub uc kn ud ue uf kp ug uh ui uj uk ul um un uo up uq ur us">
                        <div class="ut mc w">
                          <div class="t eo">
                            <div class="n cd">
                              <div class="w uu uv uw ux">
                                <div class="uy w">
                                  <h2 class="ap jn sc sd jq sf sg jt uz va jx vb vc kb vd ve kf dh"><a rel="noopener"
                                      href="/web/20201025032303/https://medium.com/swlh/sneak-peek-of-pinetime-smart-watch-and-why-its-perfect-for-teaching-iot-81b74161c159?source=post_internal_links---------7----------------------------">Sneak
                                      Peek of PineTime Smart Watch… And why it’s perfect for teaching IoT</a></h2>
                                </div>
                                <div class="o n">
                                  <div></div>
                                  <div class="t w">
                                    <div class="n">
                                      <div style="flex:1"><span class="ap b aq ar dh">
                                          <div class="cj n o vf"><span class="ap b nk ar dh"><a
                                                class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener"
                                                href="/web/20201025032303/https://medium.com/@ly.lee?source=post_internal_links---------7----------------------------">Lup
                                                Yuen Lee 李立源</a><span>
                                                <!-- -->in
                                                <!-- --> <a
                                                  href="/web/20201025032303/https://medium.com/swlh?source=post_internal_links---------7----------------------------"
                                                  class="dk dl bs bt bu bv bw bx by ba vg bz do dp" rel="noopener">The
                                                  Startup</a>
                                              </span></span></div>
                                        </span></div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="di gy w vh vi"><a class="dk dl bs bt bu bv bw bx by ba dm dn bz do dp w"
                                  rel="noopener"
                                  href="/web/20201025032303/https://medium.com/swlh/sneak-peek-of-pinetime-smart-watch-and-why-its-perfect-for-teaching-iot-81b74161c159?source=post_internal_links---------7----------------------------">
                                  <div class="es w ab et">
                                    <div class="vj ev w">
                                      <div class="el em dx en dy eo t ep eq er"><img class="dx en dy eo t ew ex ey"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/60/1*1oFvRxqOf1kUmCAxPaJXpw.jpeg?q=20"
                                          width="70" height="70" role="presentation" /></div><img
                                        class="el em vk vl vm vn vo vp vq vr vs vt c" width="70" height="70"
                                        role="presentation" /><noscript><img class="vk vl vm vn vo vp vq vr vs vt"
                                          src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*1oFvRxqOf1kUmCAxPaJXpw.jpeg"
                                          width="70" height="70"
                                          srcset="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/96/140/1*1oFvRxqOf1kUmCAxPaJXpw.jpeg 48w, https://web.archive.org/web/20201025032303im_/https://miro.medium.com/fit/c/140/140/1*1oFvRxqOf1kUmCAxPaJXpw.jpeg 70w"
                                          sizes="70px" role="presentation" /></noscript>
                                    </div>
                                  </div>
                                </a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="vu w vv vw">
        <div class="n p">
          <div class="ae af ag ah ai aj ak t">
            <div class="n x">
              <div class="n o cd"><a aria-label="Go to homepage" class="dk dl bs bt bu bv bw bx by ba vx vy bz vz wa"
                  rel="noopener"
                  href="/web/20201025032303/https://medium.com/?source=post_page-----ef62a7e28f7e--------------------------------"><svg
                    viewbox="0 0 3940 610" class="wb wc">
                    <path
                      d="M594.79 308.2c0 163.76-131.85 296.52-294.5 296.52S5.8 472 5.8 308.2 137.65 11.69 300.29 11.69s294.5 132.75 294.5 296.51M917.86 308.2c0 154.16-65.93 279.12-147.25 279.12s-147.25-125-147.25-279.12S689.29 29.08 770.61 29.08s147.25 125 147.25 279.12M1050 308.2c0 138.12-23.19 250.08-51.79 250.08s-51.79-112-51.79-250.08 23.19-250.08 51.8-250.08S1050 170.09 1050 308.2M1862.77 37.4l.82-.18v-6.35h-167.48l-155.51 365.5-155.51-365.5h-180.48v6.35l.81.18c30.57 6.9 46.09 17.19 46.09 54.3v434.45c0 37.11-15.58 47.4-46.15 54.3l-.81.18V587H1327v-6.35l-.81-.18c-30.57-6.9-46.09-17.19-46.09-54.3V116.9L1479.87 587h11.33l205.59-483.21V536.9c-2.62 29.31-18 38.36-45.68 44.61l-.82.19v6.3h213.3v-6.3l-.82-.19c-27.71-6.25-43.46-15.3-46.08-44.61l-.14-445.2h.14c0-37.11 15.52-47.4 46.08-54.3m97.43 287.8c3.49-78.06 31.52-134.4 78.56-135.37 14.51.24 26.68 5 36.14 14.16 20.1 19.51 29.55 60.28 28.09 121.21zm-2.11 22h250v-1.05c-.71-59.69-18-106.12-51.34-138-28.82-27.55-71.49-42.71-116.31-42.71h-1c-23.26 0-51.79 5.64-72.09 15.86-23.11 10.7-43.49 26.7-60.45 47.7-27.3 33.83-43.84 79.55-47.86 130.93-.13 1.54-.24 3.08-.35 4.62s-.18 2.92-.25 4.39a332.64 332.64 0 0 0-.36 21.69C1860.79 507 1923.65 600 2035.3 600c98 0 155.07-71.64 169.3-167.8l-7.19-2.53c-25 51.68-69.9 83-121 79.18-69.76-5.22-123.2-75.95-118.35-161.63m532.69 157.68c-8.2 19.45-25.31 30.15-48.24 30.15s-43.89-15.74-58.78-44.34c-16-30.7-24.42-74.1-24.42-125.51 0-107 33.28-176.21 84.79-176.21 21.57 0 38.55 10.7 46.65 29.37zm165.84 76.28c-30.57-7.23-46.09-18-46.09-57V5.28L2424.77 60v6.7l1.14-.09c25.62-2.07 43 1.47 53.09 10.79 7.9 7.3 11.75 18.5 11.75 34.26v71.14c-18.31-11.69-40.09-17.38-66.52-17.38-53.6 0-102.59 22.57-137.92 63.56-36.83 42.72-56.3 101.1-56.3 168.81C2230 518.72 2289.53 600 2378.13 600c51.83 0 93.53-28.4 112.62-76.3V588h166.65v-6.66zm159.29-505.33c0-37.76-28.47-66.24-66.24-66.24-37.59 0-67 29.1-67 66.24s29.44 66.24 67 66.24c37.77 0 66.24-28.48 66.24-66.24m43.84 505.33c-30.57-7.23-46.09-18-46.09-57h-.13V166.65l-166.66 47.85v6.5l1 .09c36.06 3.21 45.93 15.63 45.93 57.77V588h166.8v-6.66zm427.05 0c-30.57-7.23-46.09-18-46.09-57V166.65L3082 212.92v6.52l.94.1c29.48 3.1 38 16.23 38 58.56v226c-9.83 19.45-28.27 31-50.61 31.78-36.23 0-56.18-24.47-56.18-68.9V166.66l-166.66 47.85V221l1 .09c36.06 3.2 45.94 15.62 45.94 57.77v191.27a214.48 214.48 0 0 0 3.47 39.82l3 13.05c14.11 50.56 51.08 77 109 77 49.06 0 92.06-30.37 111-77.89v66h166.66v-6.66zM3934.2 588v-6.67l-.81-.19c-33.17-7.65-46.09-22.07-46.09-51.43v-243.2c0-75.83-42.59-121.09-113.93-121.09-52 0-95.85 30.05-112.73 76.86-13.41-49.6-52-76.86-109.06-76.86-50.12 0-89.4 26.45-106.25 71.13v-69.87l-166.66 45.89v6.54l1 .09c35.63 3.16 45.93 15.94 45.93 57V588h155.5v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66V255.72c7-16.35 21.11-35.72 49-35.72 34.64 0 52.2 24 52.2 71.28V588h155.54v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66v-248a160.45 160.45 0 0 0-2.2-27.68c7.42-17.77 22.34-38.8 51.37-38.8 35.13 0 52.2 23.31 52.2 71.28V588z">
                    </path>
                  </svg></a>
                <h4 class="ap b aq ar wd">
                  <div class="s we n cd wf wg">
                    <h4 class="ap b de df wh"><a
                        href="https://web.archive.org/web/20201025032303/https://medium.com/about?autoplay=1&amp;source=post_page-----ef62a7e28f7e--------------------------------"
                        class="dk dl bs bt bu bv bw bx by ba vg bz vz wa" rel="noopener">About</a></h4>
                    <h4 class="ap b de df wh"><a
                        href="https://web.archive.org/web/20201025032303/https://help.medium.com/hc/en-us?source=post_page-----ef62a7e28f7e--------------------------------"
                        class="dk dl bs bt bu bv bw bx by ba vg bz vz wa" rel="noopener">Help</a></h4>
                    <h4 class="ap b de df wh"><a
                        href="https://web.archive.org/web/20201025032303/https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----ef62a7e28f7e--------------------------------"
                        class="dk dl bs bt bu bv bw bx by ba vg bz vz wa" rel="noopener">Legal</a></h4>
                  </div>
                </h4>
              </div>
              <div class="y wi wj wg">
                <h4 class="ap b de df wd">Get the Medium app</h4>
              </div>
              <div class="y wi wk wg wl">
                <div class="ao w"><a
                    href="https://web.archive.org/web/20201025032303/https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&amp;mt=8&amp;ct=post_page&amp;source=post_page-----ef62a7e28f7e--------------------------------"
                    class="dk dl bs bt bu bv bw bx by ba vx vy bz vz wa" rel="noopener nofollow"><img
                      alt="A button that says 'Download on the App Store', and if clicked it will lead you to the iOS App store"
                      class=""
                      src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/270/1*Crl55Tm6yDNMoucPo1tvDg.png"
                      width="135" height="41" /></a></div>
                <div class="w"><a
                    href="https://web.archive.org/web/20201025032303/https://play.google.com/store/apps/details?id=com.medium.reader&amp;source=post_page-----ef62a7e28f7e--------------------------------"
                    class="dk dl bs bt bu bv bw bx by ba vx vy bz vz wa" rel="noopener nofollow"><img
                      alt="A button that says 'Get it on, Google Play', and if clicked it will lead you to the Google Play store"
                      class=""
                      src="https://web.archive.org/web/20201025032303im_/https://miro.medium.com/max/270/1*W_RAPQ62h0em559zluJLdQ.png"
                      width="135" height="41" /></a></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>window.__BUILD_ID__ = "main-20201023-205554-7ce08a0ad2"</script>
  <script>window.__GRAPHQL_URI__ = "https://web.archive.org/web/20201025032303/https://medium.com/_/graphql"</script>
  <script>window.__PRELOADED_STATE__ = { "auroraPage": { "isAuroraPageEnabled": true }, "config": { "nodeEnv": "production", "version": "main-20201023-205554-7ce08a0ad2", "productName": "Medium", "publicUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fcdn-client.medium.com\u002Flite", "authDomain": "medium.com", "authGoogleClientId": "216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com", "favicon": "production", "glyphUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fglyph.medium.com", "branchKey": "key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm", "lightStep": { "name": "lite-web", "host": "lightstep.medium.systems", "token": "ce5be895bef60919541332990ac9fef2", "appVersion": "main-20201023-205554-7ce08a0ad2" }, "algolia": { "appId": "MQ57UUUQZ2", "apiKeySearch": "394474ced050e3911ae2249ecc774921", "indexPrefix": "medium_", "host": "-dsn.algolia.net" }, "recaptchaKey": "6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk", "recaptcha3Key": "6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5", "datadog": { "clientToken": "pub853ea8d17ad6821d9f8f11861d23dfed", "context": { "deployment": { "target": "production", "tag": "main-20201023-205554-7ce08a0ad2", "commit": "7ce08a0ad29052b8eb9570570475b1e66ce9b497" } }, "datacenter": "us" }, "isAmp": false, "googleAnalyticsCode": "UA-24232453-2", "signInWallCustomDomainCollectionIds": ["3a8144eabfe3", "336d898217ee", "61061eb0c96b", "138adf9c44c", "819cc2aaeee0"], "mediumOwnedAndOperatedCollectionIds": ["544c7006046e", "bcc38c8f6edf", "444d13b52878", "8d6b8a439e32", "92d2092dc598", "1285ba81cada", "cb8577c9149e", "8ccfed20cbb2", "ae2a65f35510", "3f6ecf56618", "7b6769f2748b", "fc8964313712", "ef8e90590e66", "191186aaafa0", "d944778ce714", "bdc4052bbdba", "88d9857e584e", "9dc80918cc93", "8a9336e5bb4", "cef6983b292", "54c98c43354d", "193b68bd4fba", "b7e45b22fec3"], "tierOneDomains": ["medium.com", "thebolditalic.com", "arcdigital.media", "towardsdatascience.com", "uxdesign.cc", "codeburst.io", "psiloveyou.xyz", "writingcooperative.com", "entrepreneurshandbook.co", "prototypr.io", "betterhumans.coach.me", "theascent.pub"], "topicsToFollow": ["d61cf867d93f", "8a146bc21b28", "1eca0103fff3", "4d562ee63426", "aef1078a3ef5", "e15e46793f8d", "6158eb913466", "55f1c20aba7a", "3d18b94f6858", "4861fee224fd", "63c6f1f93ee", "1d98b3a9a871", "decb52b64abf", "ae5d4995e225", "830cded25262"], "defaultImages": { "avatar": { "imageId": "1*dmbNkD5D-u45r44go_cf0g.png", "height": 150, "width": 150 }, "orgLogo": { "imageId": "1*OMF3fSqH8t4xBJ9-6oZDZw.png", "height": 106, "width": 545 }, "postLogo": { "imageId": "1*3sela1OADrJr7dJk_CXaEQ.png", "height": 810, "width": 1440 }, "postPreviewImage": { "imageId": "1*hn4v1tCaJy7cWMyb0bpNpQ.png", "height": 386, "width": 579 } }, "performanceTags": [], "collectionStructuredData": { "8d6b8a439e32": { "name": "Elemental", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png", "width": 980, "height": 159 } } }, "3f6ecf56618": { "name": "Forge", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png", "width": 596, "height": 183 } } }, "ae2a65f35510": { "name": "GEN", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png", "width": 264, "height": 140 } } }, "88d9857e584e": { "name": "LEVEL", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png", "width": 540, "height": 108 } } }, "7b6769f2748b": { "name": "Marker", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png", "width": 383, "height": 92 } } }, "444d13b52878": { "name": "OneZero", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png", "width": 540, "height": 123 } } }, "8ccfed20cbb2": { "name": "Zora", "data": { "@type": "NewsMediaOrganization", "ethicsPolicy": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473", "logo": { "@type": "ImageObject", "url": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png", "width": 540, "height": 106 } } } }, "embeddedPostIds": { "coronavirus": "cd3010f9d81f" }, "sharedCdcMessaging": { "COVID_APPLICABLE_TAG_SLUGS": ["pandemic", "epidemic", "coronavirus", "covid19", "co-vid-19", "containment", "self-care", "flatten-the-curve", "public-health", "virus", "public-health-crisis", "quarantine", "self-quarantine", "zika", "corona", "disease-prevention", "wuhan", "chinavirus", "outbreak", "influenza", "socialdistancing", "social-distance", "flu", "vaccines", "healthcare", "medicine", "conspiracy-theories", "conspiracy", "virality", "epidemia", "pandemia", "salud", "corona-e-virus", "coronavirus-covid19", "covid-19", "covid-19-symptoms", "covid-19-crisis", "covid-19-testing", "covid-19-treatment", "coronavirus-update", "coronavirus-diaries"], "COVID_APPLICABLE_TOPIC_NAMES": ["coronavirus"], "COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE": ["coronavirus", "health"], "COVID_MESSAGES": { "tierA": { "text": "For more information on the novel coronavirus and Covid-19, visit cdc.gov.", "markups": [{ "start": 66, "end": 73, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV" }] }, "tierB": { "text": "Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.", "markups": [{ "start": 37, "end": 45, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety" }, { "start": 125, "end": 132, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV" }] }, "paywall": { "text": "This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.", "markups": [{ "start": 56, "end": 70, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fmembership" }, { "start": 138, "end": 145, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV" }] }, "unbound": { "text": "This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.", "markups": [{ "start": 45, "end": 59, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fmembership" }, { "start": 127, "end": 134, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV" }] } }, "COVID_BANNER_POST_ID_OVERRIDE_WHITELIST": ["3b31a67bff4a"] }, "sharedVoteMessaging": { "TAGS": ["politics", "election-2020", "government", "us-politics", "election", "2020-presidential-race", "trump", "donald-trump", "democrats", "republicans", "congress", "republican-party", "democratic-party", "biden", "joe-biden", "maga"], "TOPICS": ["politics", "election"], "MESSAGE": { "text": "Check your U.S. voter registration status or register to vote here.", "markups": [{ "start": 62, "end": 66, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.vote.org\u002F" }] }, "EXCLUDE_POSTS": ["397ef29e3ca5"] }, "embedPostRules": [], "recircOptions": { "v1": { "limit": 3 }, "v2": { "limit": 8 } }, "braintreeClientKey": "production_zjkj96jm_m56f8fqpf7ngnrd4", "paypalClientId": "AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v" }, "debug": { "requestId": "a6532de8-aa7a-457d-857b-b48120c195c1", "originalSpanCarrier": { "ot-tracer-spanid": "5c64e76b27163605", "ot-tracer-traceid": "7014c9864551fe6f", "ot-tracer-sampled": "true" } }, "session": { "user": { "id": "lo_961dfe6f6760" }, "xsrf": "", "isSpoofed": false }, "stats": { "itemCount": 0, "sending": false, "timeout": null, "backup": {} }, "navigation": { "branch": { "show": null, "hasRendered": null, "blockedByCTA": false }, "hideGoogleOneTap": false, "hasRenderedGoogleOneTap": null, "hasRenderedAlternateUserBanner": null, "currentLocation": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e", "host": "medium.com", "hostname": "medium.com", "susiModal": { "step": null, "operation": "register" }, "postRead": false }, "client": { "isBot": false, "isEu": false, "isUs": true, "isNativeMedium": false, "isSafariMobile": false, "isSafari": false, "inAppBrowserName": "", "routingEntity": { "type": "DEFAULT", "explicit": false }, "supportsWebp": false }, "multiVote": { "clapsPerPost": {} }, "tracing": {} }</script>
  <script>window.__APOLLO_STATE__ = { "ROOT_QUERY": { "__typename": "Query", "viewer": null, "variantFlags": [{ "__typename": "VariantFlag", "name": "allow_access", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "allow_signup", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "allow_test_auth", "valueType": { "__typename": "VariantFlagString", "value": "disallow" } }, { "__typename": "VariantFlag", "name": "assign_default_topic_to_posts", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "available_annual_plan", "valueType": { "__typename": "VariantFlagString", "value": "2c754bcc2995" } }, { "__typename": "VariantFlag", "name": "available_monthly_plan", "valueType": { "__typename": "VariantFlagString", "value": "60e220181034" } }, { "__typename": "VariantFlag", "name": "bane_add_user", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "bane_verify_domain", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "branch_seo_metadata", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "browsable_stream_config_bucket", "valueType": { "__typename": "VariantFlagString", "value": "curated-topics" } }, { "__typename": "VariantFlag", "name": "coronavirus_topic_recirc", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "covid_19_cdc_banner", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "default_seo_post_titles", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "disable_android_subscription_activity_carousel", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "disable_ios_resume_reading_toast", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "disable_ios_subscription_activity_carousel", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "disable_mobile_featured_chunk", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "disable_post_recommended_from_friends_provider", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_add_membership_lock", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_admin_mark_as_paid", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_android_local_currency", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_annual_renewal_reminder_email", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_app_flirty_thirty", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_apple_sign_in", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_apple_webhook", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_apple_webhook_crossgrading", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_apple_webhook_renewal_failure", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_apple_webhook_renewal_status", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_about_page_routing", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_general_admission", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_profile_about_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_profile_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_profiles_for_all", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_recirc", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_aurora_tag_page_routing", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_auto_forfeit_earnings", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_automated_mission_control_triggers", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_avatar_component_in_newsletterv3_settings_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_braintree_integration", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_braintree_membership", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_braintree_paypal", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_braintree_webhook", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_branch_io", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_branch_text_me_the_app", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_branding", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_branding_fonts", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_cleansweep_double_writes", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_confirm_sign_in", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_creators_redirect", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_cta_meter", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_curation_priority_queue_experiment", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_dedicated_series_tab_api_ios", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_detailed_billing_history", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_different_grid", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_digest_feature_logging", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_digest_tagline", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_disregard_trunc_state_for_footer", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_earn_redirect", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_edit_alt_text", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_email_sign_in_captcha", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_embedding_based_diversification", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_end_of_post_cleanup", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_evhead_com_to_ev_medium_com_redirect", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_expanded_feature_chunk_pool", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_filter_by_resend_rules", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_filter_expire_processor", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_footer_app_buttons", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_free_corona_topic", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_global_susi_modal", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_google_one_tap", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_google_webhook", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_highlander_member_digest", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_ios_post_stats", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_janky_spam_rules", "valueType": { "__typename": "VariantFlagString", "value": "users,posts" } }, { "__typename": "VariantFlag", "name": "enable_json_logs_trained_ranker", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_kbfd_rex", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_kbfd_rex_app_highlights", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_kbfd_rex_daily_digest", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_homepage", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_homepage_feed", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_lo_homepage", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_notifications", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_pay_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_post", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_post_cd", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_post_highlights", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_post_highlights_view_only", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_profile", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_pub_header_menu", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_pub_homepage_for_selected_domains", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_server_upstream_deadlines", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_stories", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_topics", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lite_unread_notification_count_mutation", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_lock_responses", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_login_code_flow", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_marketing_emails", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_media_resource_try_catch", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_membership_redirect", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_membership_remove_section_a", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_meta_header_v2", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_miro_on_kubernetes", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_ml_rank_modules", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_ml_rank_rex_anno", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_more_on_coronavirus", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_mute", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_new_checkout_flow", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_new_collaborative_filtering_data", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_new_susi_modal", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_new_suspended_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_new_three_dot_menu", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_optimizely", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_parsely", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_patronus_on_kubernetes", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_popularity_feature", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_post_import", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_post_page_nav_stickiness_removal", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_post_seo_settings_screen", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_post_settings_screen", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_post_table_of_contents", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_primary_topic_for_mobile", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_profile_page_seo_titles", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_profile_subdomains", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_responses_2", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_responses_all", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_responses_edit_and_delete", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_responses_highlight", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_responses_moderation", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_rito_upstream_deadlines", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_rtr_channel", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_save_to_medium", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_scheduled_delivery_refactor", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_signup_friction", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_sohne", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_starspace", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_starspace_ranker_starspace", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_tick_landing_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_tipalti_onboarding", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_topic_lifecycle_email", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_trending_posts_diversification", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_tribute_landing_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_trumpland_landing_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "enable_unbound", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "filter_stripe_invoice_line_items", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "generate_pub_digest_on_digest_pipeline", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "glyph_embed_commands", "valueType": { "__typename": "VariantFlagString", "value": "control" } }, { "__typename": "VariantFlag", "name": "glyph_font_set", "valueType": { "__typename": "VariantFlagString", "value": "m2-unbound" } }, { "__typename": "VariantFlag", "name": "google_sign_in_android", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "ios_enable_generic_home_modules", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "ios_enable_iceland_paywall", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "ios_pub_follow_email_opt_in", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "is_not_medium_subscriber", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "kill_fastrak", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "kill_stripe_express", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "limit_post_referrers", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "make_nav_sticky", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "new_transition_page", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "pub_sidebar", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "remove_post_post_similarity", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "retrained_ranker", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "sign_up_with_email_button", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "signin_services", "valueType": { "__typename": "VariantFlagString", "value": "twitter,facebook,google,email,google-fastidv,google-one-tap,apple" } }, { "__typename": "VariantFlag", "name": "signup_services", "valueType": { "__typename": "VariantFlagString", "value": "twitter,facebook,google,email,google-fastidv,google-one-tap,apple" } }, { "__typename": "VariantFlag", "name": "skip_sign_in_recaptcha", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "use_new_admin_topic_backend", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "vote_banner", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }, { "__typename": "VariantFlag", "name": "xgboost_auto_suspend", "valueType": { "__typename": "VariantFlagBoolean", "value": true } }], "meterPost({\"postId\":\"ef62a7e28f7e\",\"postMeteringOptions\":{}})": { "__ref": "MeteringInfo:{}" }, "postResult({\"id\":\"ef62a7e28f7e\"})": { "__ref": "Post:ef62a7e28f7e" } }, "MeteringInfo:{}": { "__typename": "MeteringInfo", "postIds": [], "maxUnlockCount": 3, "unlocksRemaining": 3 }, "User:1da08193a324": { "id": "1da08193a324", "__typename": "User", "isSuspended": false, "name": "Lup Yuen Lee 李立源", "username": "ly.lee", "bio": "Techie and Educator in IoT 物聯網教師", "hasDomain": false, "customStyleSheet": null, "isAuroraVisible": true, "socialStats": { "__typename": "SocialStats", "followerCount": 955 }, "isBlocking": null, "imageId": "1*72qLH3RF4S4q2AcxlnIdSw.jpeg", "mediumMemberAt": 1571194811000, "isMuting": null, "isFollowing": null, "allowNotes": true, "twitterScreenName": "MisterTechBlog", "isPartnerProgramEnrolled": false }, "Paragraph:2e4d52ff0bcf_0": { "id": "2e4d52ff0bcf_0", "__typename": "Paragraph", "name": "0fa5", "text": "STM32 Blue Pill with Quectel BC95-G Global NB-IoT Module and 18650 lithium ion battery", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "__ref": "ImageMetadata:1*I2s4rSDpnbim1sOeMzFmIQ.jpeg" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_1": { "id": "2e4d52ff0bcf_1", "__typename": "Paragraph", "name": "9d4b", "text": "Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_2": { "id": "2e4d52ff0bcf_2", "__typename": "Paragraph", "name": "3a54", "text": "The year is 2029. Humans are populating the Moon, starting at Moon Base One. Two Moon Base Operators are about to commit another grave mistake in the crop garden of beautiful red tomatoes…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 62, "end": 75, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fcreate-your-iot-gadget-with-apache-mynewt-and-stm32-blue-pill-d689b3ca725", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 188, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_3": { "id": "2e4d52ff0bcf_3", "__typename": "Paragraph", "name": "081f", "text": "Tomato Crop and NB-IoT Sensors on Moon Base One", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:1*JW5WYNcBXvviXWg8mXxIbQ.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_4": { "id": "2e4d52ff0bcf_4", "__typename": "Paragraph", "name": "0078", "text": "Operator 1: After the last IoT calamity I’m glad we switched from MQTT to CoAP Servers connected by NB-IoT. Now that we have added many sensors to our crop garden, our NB-IoT Sensors need to transmit more efficiently. Can you change the CoAP payload from JSON to CBOR?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 22, "end": 39, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fget-started-with-nb-iot-and-quectel-modules-6e7c581e0d61", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 263, "end": 267, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FCBOR", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 74, "end": 106, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 237, "end": 267, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_5": { "id": "2e4d52ff0bcf_5", "__typename": "Paragraph", "name": "8e47", "text": "Operator 2: Sure thing! Lemme look at the specs of the CBOR binary format and program the CBOR encoder in C…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 42, "end": 73, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc7049", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 90, "end": 107, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Fintel\u002Ftinycbor", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 78, "end": 107, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_6": { "id": "2e4d52ff0bcf_6", "__typename": "Paragraph", "name": "3ca4", "text": "Operator 1: It’s already 2029! Why aren’t you using Rust? Just call the Rust Macro that encodes CoAP payloads into JSON and CBOR!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 72, "end": 82, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 31, "end": 57, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 72, "end": 82, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_7": { "id": "2e4d52ff0bcf_7", "__typename": "Paragraph", "name": "15c4", "text": "Encoding CoAP Payloads in JSON and CBOR with a Rust Macro. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:b3e2d3be1722636d446f08402e3ab11b" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 64, "end": 162, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_8": { "id": "2e4d52ff0bcf_8", "__typename": "Paragraph", "name": "a14f", "text": "Operator 2: Rust Macros can do so much? Wow I did not know that! Anyway I have finished the C programming for the new firmware. I’ll push the new firmware to 1,000 sensors now…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 38, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 12, "end": 39, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 128, "end": 175, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_9": { "id": "2e4d52ff0bcf_9", "__typename": "Paragraph", "name": "cabb", "text": "Operator 1: Great! Hold on… Our IoT Dashboards are going crazy… Temperature 80 degrees Celsius? Humidity 25 percent? WHAT HAPPENED??!!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 28, "end": 62, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 64, "end": 116, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_10": { "id": "2e4d52ff0bcf_10", "__typename": "Paragraph", "name": "db45", "text": "Operator 2: OOPS I think the pointers are corrupted in my C firmware… The Sensor Data was supposed to point to the string “TEMPERATURE”… But it got overwritten by “HUMIDITY”… Should have used safer, simpler Rust instead of C…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 123, "end": 134, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 164, "end": 172, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 29, "end": 51, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 192, "end": 211, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_11": { "id": "2e4d52ff0bcf_11", "__typename": "Paragraph", "name": "5a49", "text": "Operator 1: The Temperature and Humidity Sensor Data are ALL MIXED UP!!! The sprinklers are spraying water on our tomatoes! The ventilators are blowing cold air on them!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 57, "end": 69, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 92, "end": 106, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 144, "end": 160, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_12": { "id": "2e4d52ff0bcf_12", "__typename": "Paragraph", "name": "7451", "text": "Our beautiful tomatoes are turning into… ICED TOMATOES!!! NOOOOO…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 41, "end": 54, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_13": { "id": "2e4d52ff0bcf_13", "__typename": "Paragraph", "name": "3839", "text": "Why Embedded Rust instead of Embedded C?", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_14": { "id": "2e4d52ff0bcf_14", "__typename": "Paragraph", "name": "a517", "text": "We’re back in 2019… Hardly anyone writes embedded programs in Rust for microcontrollers (like STM32 Blue Pill), we all use C. But we really should switch to Rust! Moon Base One has given us 2 key reasons…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 163, "end": 176, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_15": { "id": "2e4d52ff0bcf_15", "__typename": "Paragraph", "name": "886f", "text": "1️⃣ Complexity: Our gadgets are more powerful than ever before. They can communicate via Bluetooth, WiFi, Zigbee, nRF, LoRa, Sigfox and now NB-IoT. Messaging formats are getting more complicated with CoAP and CBOR. Embedded C wasn’t meant for handling such complexity. Rust is!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 14, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 269, "end": 277, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 269, "end": 277, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_16": { "id": "2e4d52ff0bcf_16", "__typename": "Paragraph", "name": "d9a5", "text": "2️⃣ Safety: With great power comes great responsibility… says the Great Arachnid. How do we ensure that our complex gadgets run non-stop without crashing? We need something safer than Embedded C to prevent runaway pointers before they happen… Rust can!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 10, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 243, "end": 252, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 12, "end": 55, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 243, "end": 252, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_17": { "id": "2e4d52ff0bcf_17", "__typename": "Paragraph", "name": "8f73", "text": "But have our gadgets already become so complex and unsafe and affordable that we need Embedded Rust?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 100, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_18": { "id": "2e4d52ff0bcf_18", "__typename": "Paragraph", "name": "b509", "text": "Well, take a look at this video demo… https:\u002F\u002Fyoutu.be\u002FMgK72dqwDuM", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 38, "end": 66, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 38, "end": 66, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fyoutu.be\u002FMgK72dqwDuM", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_19": { "id": "2e4d52ff0bcf_19", "__typename": "Paragraph", "name": "b2a4", "text": "Demo of Embedded Rust on STM32 Blue Pill with Quectel BC95-G Global NB-IoT Module", "type": "IFRAME", "href": null, "layout": "OUTSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:6543045b00bbf8536b7f3da58a40f744" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_20": { "id": "2e4d52ff0bcf_20", "__typename": "Paragraph", "name": "cb91", "text": "STM32 Blue Pill with Quectel BC95-G Global NB-IoT Module… Runs a realtime operating system (Apache Mynewt) that polls the internal temperature sensor every 10 seconds concurrently while transmitting CoAP messages over NB-IoT… All built for under $10… And managed flawlessly by Embedded Rust!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 15, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fswlh\u002Fsuper-blue-pill-like-stm32-blue-pill-but-better-6d341d9347da?source=friends_link&sk=956087171b9b9efcc484ea60b9c78c16", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 21, "end": 35, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.quectel.com\u002Fproduct\u002Fbc95g.htm", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 92, "end": 105, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 122, "end": 149, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Flibs\u002Ftemp_stm32", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 199, "end": 203, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Frust-lang.github.io\u002Frust-bindgen\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 218, "end": 224, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Frust-lang.github.io\u002Frust-bindgen\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 277, "end": 290, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 15, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 21, "end": 35, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 92, "end": 105, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 122, "end": 150, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 155, "end": 166, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 167, "end": 179, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 199, "end": 203, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 218, "end": 224, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 240, "end": 249, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 251, "end": 290, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_21": { "id": "2e4d52ff0bcf_21", "__typename": "Paragraph", "name": "8e53", "text": "This article uncovers the secrets of the Embedded Rust program running on that Blue Pill… And how how you can do the same! If you’re new to Embedded Rust, no worries, this will be a friendly and gentle introduction to Embedded Rust… I promise!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 41, "end": 62, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 123, "end": 153, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_22": { "id": "2e4d52ff0bcf_22", "__typename": "Paragraph", "name": "bc24", "text": "Overall Program Flow", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_23": { "id": "2e4d52ff0bcf_23", "__typename": "Paragraph", "name": "185c", "text": "This diagram illustrates the overall flow of the Embedded Rust program. We’ll dive into each function now…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 49, "end": 70, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_24": { "id": "2e4d52ff0bcf_24", "__typename": "Paragraph", "name": "40d0", "text": "Overall flow of our Embedded Rust program", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "__ref": "ImageMetadata:1*i_HQIE8DZ50hbfLCUoWW4Q.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_25": { "id": "2e4d52ff0bcf_25", "__typename": "Paragraph", "name": "768c", "text": "Main Program: lib.rs", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_26": { "id": "2e4d52ff0bcf_26", "__typename": "Paragraph", "name": "bb17", "text": "Normally the Rust Compiler builds our Rust Programs starting at main.rs. In this case we’re building a Rust Library that will be linked into the Apache Mynewt firmware, so the Rust Compiler starts at lib.rs instead.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 64, "end": 71, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 200, "end": 206, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 200, "end": 206, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_27": { "id": "2e4d52ff0bcf_27", "__typename": "Paragraph", "name": "2dfe", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L24-L37", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:cfddb9751afb6c51524e99028f8c5cbc" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 103, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L24-L37", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_28": { "id": "2e4d52ff0bcf_28", "__typename": "Paragraph", "name": "d1af", "text": "First thing in lib.rs… #![no_std]. This is absolutely essential for Embedded Rust programs and libraries — it tells the Rust Compiler not to include the Rust Standard Library, which contains code that is unnecessary for embedded devices. Think of the Rust Standard Library as the C standard libraries stdio + stdlib + …", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 15, "end": 21, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 23, "end": 33, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 301, "end": 306, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 309, "end": 315, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 15, "end": 21, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 153, "end": 174, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fstd\u002Findex.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 153, "end": 174, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_29": { "id": "2e4d52ff0bcf_29", "__typename": "Paragraph", "name": "33d6", "text": "When we specify #![no_std], the Rust Compiler includes a lighter version of the standard library, known as the Rust Core Library. It contains the bare minimum needed to run Rust applications.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 26, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 111, "end": 128, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fcore\u002Findex.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 111, "end": 128, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_30": { "id": "2e4d52ff0bcf_30", "__typename": "Paragraph", "name": "f850", "text": "Rust Externs and Modules", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_31": { "id": "2e4d52ff0bcf_31", "__typename": "Paragraph", "name": "2c22", "text": "extern crate declares the external Rust Libraries (known as Crates) that we’ll be using. External Crates are declared in Cargo.toml and don’t need to be declared again here… Unless we’re using macros from these crates.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 12, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 121, "end": 131, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 121, "end": 131, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002FCargo.toml", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_32": { "id": "2e4d52ff0bcf_32", "__typename": "Paragraph", "name": "2a4f", "text": "mod app_sensor tells the Rust Compiler that we have a Rust module named app_sensor, and the module’s source code may be found in app_sensor.rs.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 14, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 72, "end": 82, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 129, "end": 142, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_33": { "id": "2e4d52ff0bcf_33", "__typename": "Paragraph", "name": "1e56", "text": "If you remember how namespace and #include “…” work in C++, mod app_sensor translates into something like this in C++…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 20, "end": 29, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 34, "end": 46, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 60, "end": 74, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_34": { "id": "2e4d52ff0bcf_34", "__typename": "Paragraph", "name": "1bf9", "text": "namespace app_sensor {\n    #include \"app_sensor.rs\"\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_35": { "id": "2e4d52ff0bcf_35", "__typename": "Paragraph", "name": "249f", "text": "Which means that the functions in app_sensor.rs will be imported in the module namespace app_sensor. (We’ll see this later when we study the macro expansions for our program.)", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 34, "end": 47, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 89, "end": 99, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_36": { "id": "2e4d52ff0bcf_36", "__typename": "Paragraph", "name": "0358", "text": "We’ll soon discover that in Rust we use mod often to pull in Rust source files, which may use mod to pull in other source files, … That’s how we assemble a Rust program from a tree of Rust source files, starting at lib.rs or main.rs.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 40, "end": 43, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 94, "end": 97, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 215, "end": 221, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 225, "end": 232, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_37": { "id": "2e4d52ff0bcf_37", "__typename": "Paragraph", "name": "ab6b", "text": "app_sensor and app_network will be covered in the subsequent sections.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 10, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 15, "end": 26, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_38": { "id": "2e4d52ff0bcf_38", "__typename": "Paragraph", "name": "3090", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L38-L45", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:0fb629e03dbcf98d69e1fcc4913f0163" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 103, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L38-L45", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_39": { "id": "2e4d52ff0bcf_39", "__typename": "Paragraph", "name": "7607", "text": "Next we tell the Rust Compiler which functions and types to import into this code file (lib.rs). We could write core::panic::PanicInfo in our code. But when we say use core::panic::PanicInfo, we can just refer to it later in our code as PanicInfo.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 112, "end": 134, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 164, "end": 190, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 237, "end": 246, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_40": { "id": "2e4d52ff0bcf_40", "__typename": "Paragraph", "name": "eedb", "text": "core refers to the Rust Core Library. cortex_m is an external crate that has useful functions for Arm Cortex-M processors, like triggering debugger breakpoints.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 4, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 38, "end": 46, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 38, "end": 46, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdocs.rs\u002Fcortex-m\u002F0.6.0\u002Fcortex_m\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_41": { "id": "2e4d52ff0bcf_41", "__typename": "Paragraph", "name": "f31b", "text": "mynewt is a crate that contains Rust wrappers for the Mynewt API. That means we can call the Mynewt system functions written in C — just use the Rust wrappers that have been provided. More about Rust safe wrappers in a while.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 6, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 6, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Frust\u002Fmynewt", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_42": { "id": "2e4d52ff0bcf_42", "__typename": "Paragraph", "name": "8e49", "text": "In lib.rs we’ll be calling some Mynewt kernel-level functions, as well as the debugging console and the Sensor Network Library that provides NB-IoT networking.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 9, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 104, "end": 126, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-your-iot-sensor-network-stm32-blue-pill-nrf24l01-esp8266-apache-mynewt-thethings-io-ca7486523f5d?source=friends_link&sk=e49514a7e616d4ff931dd24329a82ce0", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 104, "end": 126, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_43": { "id": "2e4d52ff0bcf_43", "__typename": "Paragraph", "name": "6938", "text": "Rust Main Function", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_44": { "id": "2e4d52ff0bcf_44", "__typename": "Paragraph", "name": "1211", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L46-L74", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:0856bdc55bdd31f84dd4cb97747b4132" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 103, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L46-L74", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_45": { "id": "2e4d52ff0bcf_45", "__typename": "Paragraph", "name": "6ac3", "text": "This is the main() function — it works just like C.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 18, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_46": { "id": "2e4d52ff0bcf_46", "__typename": "Paragraph", "name": "5a43", "text": "mynewt::sysinit() is called to start up the Mynewt OS system functions and drivers, like the driver for the Blue Pill internal temperature sensor.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 17, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 15, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Flib.rs#L36-L41", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_47": { "id": "2e4d52ff0bcf_47", "__typename": "Paragraph", "name": "a1ed", "text": "app_sensor::start_sensor_listener() is defined in the app_sensor module (explained below). This function tells Mynewt to poll the internal temperature sensor every 10 seconds.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 35, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 54, "end": 64, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_48": { "id": "2e4d52ff0bcf_48", "__typename": "Paragraph", "name": "d652", "text": "Quectel BC95-G driver sends AT commands to connect to NB-IoT. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log#L90-L100", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:9bcf96314d725aee9b28bd0cd1fd5397" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 67, "end": 171, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log#L90-L100", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_49": { "id": "2e4d52ff0bcf_49", "__typename": "Paragraph", "name": "7f94", "text": "sensor_network::start_server_transport() tells the Sensor Network Library to start the NB-IoT network.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 40, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 38, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flibs\u002Fsensor_network\u002Fsrc\u002Fsensor_network.c#L136-L143", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_50": { "id": "2e4d52ff0bcf_50", "__typename": "Paragraph", "name": "5576", "text": "The NB-IoT Driver starts sending AT commands to the NB-IoT Module (Quectel BC95-G), and waits for successful connection to the NB-IoT network.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 17, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Flibs\u002Fbc95g", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 33, "end": 44, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fget-started-with-nb-iot-and-quectel-modules-6e7c581e0d61?source=friends_link&sk=40ece196fc51f7a2903c9981f46efa46", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_51": { "id": "2e4d52ff0bcf_51", "__typename": "Paragraph", "name": "bc68", "text": "This happens in the background, so other functions may continue running, like polling the temperature sensor.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_52": { "id": "2e4d52ff0bcf_52", "__typename": "Paragraph", "name": "282f", "text": "Check Rust Errors with Expect", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_53": { "id": "2e4d52ff0bcf_53", "__typename": "Paragraph", "name": "8ed5", "text": "Note the curious way that we’re calling the functions followed by expect()…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 66, "end": 74, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 66, "end": 72, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Flearning-rust.github.io\u002Fdocs\u002Fe4.unwrap_and_expect.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_54": { "id": "2e4d52ff0bcf_54", "__typename": "Paragraph", "name": "0e2a", "text": "app_sensor::start_sensor_listener()\n    .expect(\"TMP fail\");", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_55": { "id": "2e4d52ff0bcf_55", "__typename": "Paragraph", "name": "c5ef", "text": "This actually means “call the function start_sensor_listener(), and if it FAILS, show the message TMP fail”. So it certainly doesn’t mean that we expect the function to fail!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 39, "end": 62, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 98, "end": 106, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 146, "end": 152, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 74, "end": 79, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 21, "end": 38, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 64, "end": 73, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 81, "end": 98, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_56": { "id": "2e4d52ff0bcf_56", "__typename": "Paragraph", "name": "4685", "text": "This is an unusual Rust coding convention. But thankfully we’ll see expect only in the main() function. In other functions we’ll use a simpler way to check for failures… the question-mark operator: ?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 68, "end": 74, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 87, "end": 93, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 198, "end": 199, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_57": { "id": "2e4d52ff0bcf_57", "__typename": "Paragraph", "name": "aff2", "text": "Sensor Functions: app_sensor.rs", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_58": { "id": "2e4d52ff0bcf_58", "__typename": "Paragraph", "name": "9347", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L37-L45", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:0426d15ce6efacb060d4c6b1d90c8151" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 110, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L37-L45", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_59": { "id": "2e4d52ff0bcf_59", "__typename": "Paragraph", "name": "0424", "text": "app_sensor.rs configures Mynewt to poll Blue Pill’s internal temperature sensor every 10 seconds. At the top we define the constants…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 13, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 13, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_60": { "id": "2e4d52ff0bcf_60", "__typename": "Paragraph", "name": "a325", "text": "▶️ SENSOR_DEVICE: Name of the sensor that we’ll be polling. Each sensor in Mynewt is assigned a name by the sensor’s driver. We’ll be using Blue Pill’s internal temperature sensor, named temp_stm32_0", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 16, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 187, "end": 199, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 187, "end": 199, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Flibs\u002Ftemp_stm32", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_61": { "id": "2e4d52ff0bcf_61", "__typename": "Paragraph", "name": "cf2a", "text": "Note that SENSOR_DEVICE has type Strn, which refers to a null-terminated string. Although Rust has two types of strings (str and String), I created Strn because it works more efficiently with Mynewt.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 10, "end": 23, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 33, "end": 37, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 121, "end": 124, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 129, "end": 135, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 148, "end": 152, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 33, "end": 37, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Flib.rs#L96-L206", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_62": { "id": "2e4d52ff0bcf_62", "__typename": "Paragraph", "name": "f373", "text": "Unlike Rust strings, Strn strings are always null-terminated. So we prevent excessive copying of strings when passing Strn to Mynewt and back. Strn may be passed directly into Mynewt APIs like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 21, "end": 25, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 118, "end": 122, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 143, "end": 147, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_63": { "id": "2e4d52ff0bcf_63", "__typename": "Paragraph", "name": "5fe0", "text": "\u002F\u002F  Set the sensor polling time to 10 seconds.\nsensor::set_poll_rate_ms(\n    &SENSOR_DEVICE, SENSOR_POLL_TIME) ? ;", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_64": { "id": "2e4d52ff0bcf_64", "__typename": "Paragraph", "name": "dd68", "text": "init_strn!() is a Rust Macro that initialises a Strn and terminates the string with null. How do we know it’s a Rust Macro? Because it has ! in its name. Rust Macros are similar to C Macros, but much more powerful.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 12, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 48, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 139, "end": 140, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 10, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmacros\u002Fsrc\u002Flib.rs#L121-L147", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_65": { "id": "2e4d52ff0bcf_65", "__typename": "Paragraph", "name": "07ce", "text": "▶️ SENSOR_POLL_TIME: How often Mynewt should poll the sensor, in milliseconds. We’ll be polling the temperature sensor every 10 seconds, so we set this value to 10,000.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 19, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_66": { "id": "2e4d52ff0bcf_66", "__typename": "Paragraph", "name": "e5b9", "text": "▶️ TEMP_SENSOR_KEY: When transmitting the temperature sensor value to the server, we’ll use t as the name of the sensor value.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 18, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 92, "end": 93, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_67": { "id": "2e4d52ff0bcf_67", "__typename": "Paragraph", "name": "9ffd", "text": "▶️ TEMP_SENSOR_TYPE: This declares the type of sensor data, which will be a raw temperature value. Although we could transmit the temperature as a decimal or floating-point number like 28.9 degrees Celsius, it’s more efficient to transmit the raw temperature as an integer like 1925.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 19, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 185, "end": 189, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 278, "end": 282, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_68": { "id": "2e4d52ff0bcf_68", "__typename": "Paragraph", "name": "8e02", "text": "This eliminates the need to install floating-point libraries on the device. We’ll convert the raw temperature into actual temperature at the CoAP Server.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_69": { "id": "2e4d52ff0bcf_69", "__typename": "Paragraph", "name": "fc3e", "text": "Poll The Sensor with Mynewt Sensor Framework", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_70": { "id": "2e4d52ff0bcf_70", "__typename": "Paragraph", "name": "1a45", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L46-L53", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:e7723c9945994b2cc8a2a1b5120aef1b" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 110, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L46-L53", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_71": { "id": "2e4d52ff0bcf_71", "__typename": "Paragraph", "name": "7686", "text": "Mynewt provides an elegant way to manage IoT sensors and it truly shines here. Recall that start_sensor_listener() is called by main() to poll the temperature sensor. How do we instruct Mynewt to poll our temperature sensor every 10 seconds? Easy — just call sensor::set_poll_rate_ms() like above.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 91, "end": 114, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 128, "end": 134, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 259, "end": 285, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 91, "end": 112, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L46-L71", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 259, "end": 283, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_mgr_api.html#c.sensor_set_poll_rate_ms", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_72": { "id": "2e4d52ff0bcf_72", "__typename": "Paragraph", "name": "fd82", "text": "In Mynewt’s Sensor Framework, Mynewt is aware of all sensors installed (like temp_stm32_0, our temperature sensor) and the type of sensor data each sensor will return (like raw temperature). So Mynewt is capable of polling sensors for sensor data on its own… But it needs to know what to do with the polled data.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 77, "end": 89, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 12, "end": 28, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_framework.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_73": { "id": "2e4d52ff0bcf_73", "__typename": "Paragraph", "name": "185a", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L54-L57", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:6f90da54b0ab0299487c36fc503911b7" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 110, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L54-L57", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_74": { "id": "2e4d52ff0bcf_74", "__typename": "Paragraph", "name": "1436", "text": "To answer that, we call sensor::mgr_find_next_bydevname() to fetch the sensor object for our temperature sensor. For safety, we check that returned sensor object pointer is not null.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 24, "end": 57, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 24, "end": 55, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_mgr_api.html#c.sensor_mgr_find_next_bydevname", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_75": { "id": "2e4d52ff0bcf_75", "__typename": "Paragraph", "name": "b758", "text": "Define Sensor Listener with Rust Struct", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_76": { "id": "2e4d52ff0bcf_76", "__typename": "Paragraph", "name": "5614", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L58-L64", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:d6e2d219c51254b184854225a5c5d607" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 110, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L58-L64", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_77": { "id": "2e4d52ff0bcf_77", "__typename": "Paragraph", "name": "09fe", "text": "Then we define a sensor_listener, the function that Mynewt will call whenever it has fetched the sensor data. We declare to Mynewt that the function (called the Listener Function) accepts temperature sensor values (TEMP_SENSOR_TYPE).", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 17, "end": 32, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 215, "end": 231, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 17, "end": 32, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#data-structures", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 161, "end": 178, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_78": { "id": "2e4d52ff0bcf_78", "__typename": "Paragraph", "name": "70d7", "text": "The Listener Function is named handle_sensor_data() and we’ll see it in a while. We call sensor::as_untyped() to do some translation from Rust to C, because callback functions like handle_sensor_data() are defined differently in Rust and C.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 31, "end": 51, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 89, "end": 109, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 181, "end": 201, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_79": { "id": "2e4d52ff0bcf_79", "__typename": "Paragraph", "name": "e224", "text": "If we look at the way listener is defined as a sensor_listener…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 22, "end": 30, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 47, "end": 62, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_80": { "id": "2e4d52ff0bcf_80", "__typename": "Paragraph", "name": "b925", "text": "let listener = sensor_listener { ... };", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 15, "end": 30, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_81": { "id": "2e4d52ff0bcf_81", "__typename": "Paragraph", "name": "915f", "text": "Looks familiar? sensor_listener is actually a struct type! In C++ we would write this as…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 31, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 46, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 46, "end": 52, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fbook\u002Fch05-01-defining-structs.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_82": { "id": "2e4d52ff0bcf_82", "__typename": "Paragraph", "name": "c999", "text": "sensor_listener listener = { ... };", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 15, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_83": { "id": "2e4d52ff0bcf_83", "__typename": "Paragraph", "name": "18de", "text": "structs in Rust work the same way as structs in C and C++. But unlike C and C++, Rust also supports this interesting construct…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 7, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 37, "end": 44, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_84": { "id": "2e4d52ff0bcf_84", "__typename": "Paragraph", "name": "2275", "text": "let listener = sensor_listener {\n    sl_sensor_type: ... ,\n    sl_func:        ... ,", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_85": { "id": "2e4d52ff0bcf_85", "__typename": "Paragraph", "name": "4a55", "text": "    \u002F\u002F  Set other fields to 0\n    ..fill_zero!(sensor_listener)\n};", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 34, "end": 63, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_86": { "id": "2e4d52ff0bcf_86", "__typename": "Paragraph", "name": "cf4e", "text": ".. means “copy the remaining fields from the following object”. The object after .. happens to be fill_zero!(sensor_listener), a Rust Macro that generates an empty sensor_listener with all fields zeroed out. So the result…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 2, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 81, "end": 83, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 98, "end": 125, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 164, "end": 179, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 10, "end": 61, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fbook\u002Fch05-01-defining-structs.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 98, "end": 108, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Futil\u002Fmacros.rs#L8-L49", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 10, "end": 61, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_87": { "id": "2e4d52ff0bcf_87", "__typename": "Paragraph", "name": "05b9", "text": "1️⃣ We set listener to an instance of sensor_listener…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 11, "end": 19, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 38, "end": 53, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_88": { "id": "2e4d52ff0bcf_88", "__typename": "Paragraph", "name": "1814", "text": "2️⃣ And we set in listener the sl_sensor_type and sl_func fields shown above…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 18, "end": 26, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 31, "end": 45, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 50, "end": 57, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_89": { "id": "2e4d52ff0bcf_89", "__typename": "Paragraph", "name": "576e", "text": "3️⃣ And we set the remaining fields of listener to 0", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 39, "end": 47, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 51, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_90": { "id": "2e4d52ff0bcf_90", "__typename": "Paragraph", "name": "0263", "text": "This is a handy construct (similar to JavaScript’s … operator) to assure ourselves that the remaining fields in the struct are initialised to some known value. Otherwise the remaining fields will become assigned to some unknown value from the stack and cause runtime errors. In fact, the Rust Compiler refuses to compile this code…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 116, "end": 122, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 38, "end": 61, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FOperators\u002FSpread_syntax", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_91": { "id": "2e4d52ff0bcf_91", "__typename": "Paragraph", "name": "ce3f", "text": "let listener = sensor_listener {\n    sl_sensor_type: ... ,\n    sl_func:        ... ,\n    \u002F\u002F  What about the other fields?\n};", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 89, "end": 121, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_92": { "id": "2e4d52ff0bcf_92", "__typename": "Paragraph", "name": "71aa", "text": "Because the compiler knows that sensor_listener contains other fields that we have not initialised. And that’s the really cool thing about Rust — it genuinely cares about our Safety and it will do anything it can to prevent our programs from crashing! We’ll see many examples of Safe Coding in Rust in a while.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 32, "end": 47, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 175, "end": 181, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 146, "end": 252, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_93": { "id": "2e4d52ff0bcf_93", "__typename": "Paragraph", "name": "a33e", "text": "Register Sensor Listener with Mynewt Sensor Framework", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_94": { "id": "2e4d52ff0bcf_94", "__typename": "Paragraph", "name": "fb2b", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L65-L71", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:5fc494148a4052d43eb74c794049003b" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 110, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L65-L71", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_95": { "id": "2e4d52ff0bcf_95", "__typename": "Paragraph", "name": "06d8", "text": "Finally we call sensor::register_listener() to register our Listener Function for the sensor. Mynewt will call our Listener Function handle_sensor_data() every 10 seconds after fetching the temperature sensor data.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 43, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 133, "end": 153, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 16, "end": 41, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_96": { "id": "2e4d52ff0bcf_96", "__typename": "Paragraph", "name": "a171", "text": "Return Result in Rust", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_97": { "id": "2e4d52ff0bcf_97", "__typename": "Paragraph", "name": "8018", "text": "In Rust, functions are expected to return the Result type which contains either a result value or a failure code. Hence start_sensor_listener() is declared as…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 46, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 120, "end": 143, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_98": { "id": "2e4d52ff0bcf_98", "__typename": "Paragraph", "name": "1cb5", "text": "pub fn start_sensor_listener() \n    -\u003E MynewtResult\u003C()\u003E  \n    { ... }", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 39, "end": 55, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_99": { "id": "2e4d52ff0bcf_99", "__typename": "Paragraph", "name": "f933", "text": "Which tells the Rust Compiler that start_sensor_listener() will return a MynewtResult type. What’s the result value for this function? start_sensor_listener() works like a void function in C… it doesn’t return any values. It returns nothing.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 35, "end": 58, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 73, "end": 85, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 135, "end": 158, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 172, "end": 176, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 73, "end": 85, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Flib.rs#L42-L95", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_100": { "id": "2e4d52ff0bcf_100", "__typename": "Paragraph", "name": "651b", "text": "In Rust we write “nothing” as (). Therefore the function returns MynewtResult\u003C()\u003E, a generic result that contains either “nothing” or an error code. How do we return “nothing” at the end of the function?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 30, "end": 32, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 65, "end": 81, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_101": { "id": "2e4d52ff0bcf_101", "__typename": "Paragraph", "name": "c8cc", "text": "pub fn start_sensor_listener() \n    -\u003E MynewtResult\u003C()\u003E {\n    ...\n    \u002F\u002F  Return `Ok()` to indicate success.  \n    \u002F\u002F  This line should not end with a semicolon (;).\n    Ok(())\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 39, "end": 55, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_102": { "id": "2e4d52ff0bcf_102", "__typename": "Paragraph", "name": "a01c", "text": "If this function is expected to return 123 we would write it as Ok(123). But since this function returns “nothing”, we write it as Ok(()). Which means “yes this function has completed successfully, but we don’t have a result value”.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 39, "end": 42, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 64, "end": 71, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 131, "end": 137, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 152, "end": 230, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_103": { "id": "2e4d52ff0bcf_103", "__typename": "Paragraph", "name": "e9ab", "text": "When we return Ok(...) at the end of a function, make sure that we don’t add a semicolon ;. That’s because the Rust Compiler treats a block of code like a sushi conveyor belt that unveils statement after statement… separated by a semicolon ;.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 15, "end": 22, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 89, "end": 90, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 240, "end": 241, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_104": { "id": "2e4d52ff0bcf_104", "__typename": "Paragraph", "name": "5ecd", "text": "The final statement Ok(...) is the result value for the entire sushi conveyor belt… er… function. In fact, returning Ok(...) like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 20, "end": 27, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 117, "end": 124, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_105": { "id": "2e4d52ff0bcf_105", "__typename": "Paragraph", "name": "3d2b", "text": "    ...\n    Ok(123)\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 19, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_106": { "id": "2e4d52ff0bcf_106", "__typename": "Paragraph", "name": "a252", "text": "…is actually equivalent to a return statement plus semicolon…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_107": { "id": "2e4d52ff0bcf_107", "__typename": "Paragraph", "name": "aeb5", "text": "    ...\n    return Ok(123);\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 27, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_108": { "id": "2e4d52ff0bcf_108", "__typename": "Paragraph", "name": "a335", "text": "Both are perfectly valid in Rust. But of course I’ll choose the shorter version. When we call functions that return Result, we add a question mark ? like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 116, "end": 122, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 147, "end": 148, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_109": { "id": "2e4d52ff0bcf_109", "__typename": "Paragraph", "name": "d310", "text": "\u002F\u002F  Set the sensor polling time to 10 seconds\nsensor::set_poll_rate_ms(&SENSOR_DEVICE, SENSOR_POLL_TIME) ? ;", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 105, "end": 106, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_110": { "id": "2e4d52ff0bcf_110", "__typename": "Paragraph", "name": "7234", "text": "This means “check the result of sensor::set_poll_rate_ms() and if it’s an error, stop the current function and return the error code to the caller”. It’s easy to miss the question mark ? so I make it highly conspicuous by surrounding it with spaces.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 32, "end": 58, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 185, "end": 186, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 12, "end": 31, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 59, "end": 146, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_111": { "id": "2e4d52ff0bcf_111", "__typename": "Paragraph", "name": "c048", "text": "Handle Sensor Data with Rust Pattern Matching", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_112": { "id": "2e4d52ff0bcf_112", "__typename": "Paragraph", "name": "06f6", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L72-L103", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:1ba4f609813e50149a09b71fc5090750" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 111, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L72-L103", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_113": { "id": "2e4d52ff0bcf_113", "__typename": "Paragraph", "name": "5fd1", "text": "handle_sensor_data() is the Listener Function that’s called by Mynewt after it has polled the temperature sensor. It calls convert_sensor_data() to convert the sensor data from Mynewt’s format to our own transmission format. More about this in a while.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 20, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 123, "end": 144, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 18, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L72-L103", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_114": { "id": "2e4d52ff0bcf_114", "__typename": "Paragraph", "name": "4345", "text": "Then it calls send_sensor_data() to transmit the converted sensor data. (We’ll learn more in the next section.) send_sensor_data() is called like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 14, "end": 32, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 112, "end": 130, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_115": { "id": "2e4d52ff0bcf_115", "__typename": "Paragraph", "name": "f5ae", "text": "let result = send_sensor_data(&sensor_value);", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_116": { "id": "2e4d52ff0bcf_116", "__typename": "Paragraph", "name": "1ee6", "text": "\u002F\u002F  `if let` will assign `error_code` to\n\u002F\u002F  the error code inside `result`\nif let Err(error_code) = result {", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 26, "end": 36, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 87, "end": 97, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 76, "end": 107, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_117": { "id": "2e4d52ff0bcf_117", "__typename": "Paragraph", "name": "80f5", "text": "    \u002F\u002F  Check the error code\n    if error_code == MynewtError::SYS_EAGAIN {\n        ...\n    }\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 36, "end": 46, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_118": { "id": "2e4d52ff0bcf_118", "__typename": "Paragraph", "name": "1248", "text": "send_sensor_data() returns the MynewtResult\u003C()\u003E type, which contains…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 18, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 31, "end": 47, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_119": { "id": "2e4d52ff0bcf_119", "__typename": "Paragraph", "name": "c530", "text": "1️⃣ Either Ok(()), which means no error and nothing to return…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 11, "end": 17, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_120": { "id": "2e4d52ff0bcf_120", "__typename": "Paragraph", "name": "4ba2", "text": "2️⃣ Or Err(error_code), which is an error code", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 7, "end": 22, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_121": { "id": "2e4d52ff0bcf_121", "__typename": "Paragraph", "name": "21a4", "text": "Which is it? Let’s use Rust Pattern Matching! This if let condition…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 51, "end": 57, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 28, "end": 44, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fbook\u002Fch06-03-if-let.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 23, "end": 44, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_122": { "id": "2e4d52ff0bcf_122", "__typename": "Paragraph", "name": "8738", "text": "if let Err(error_code) = result { ... }", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 11, "end": 21, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 7, "end": 31, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_123": { "id": "2e4d52ff0bcf_123", "__typename": "Paragraph", "name": "1f6e", "text": "…will fail if the result is Ok(()). So that eliminates option 1️⃣. What about the error code for option 2️⃣?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 18, "end": 24, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 28, "end": 34, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_124": { "id": "2e4d52ff0bcf_124", "__typename": "Paragraph", "name": "adfb", "text": "When we match the pattern Err(error_code) with result, we actually bind error_code to the error code inside result.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 26, "end": 41, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 47, "end": 53, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 72, "end": 82, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 108, "end": 114, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_125": { "id": "2e4d52ff0bcf_125", "__typename": "Paragraph", "name": "7aa1", "text": "So subsequently we may check the value of error_code like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 42, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_126": { "id": "2e4d52ff0bcf_126", "__typename": "Paragraph", "name": "57e5", "text": "if error_code == MynewtError::SYS_EAGAIN { ... }", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 13, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 3, "end": 13, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_127": { "id": "2e4d52ff0bcf_127", "__typename": "Paragraph", "name": "b2d4", "text": "That’s how we use Rust Pattern Matching to check error codes in Results! If we’re not really interested in the error code, just use the question mark ? to check for success or failure.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 64, "end": 71, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 150, "end": 151, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_128": { "id": "2e4d52ff0bcf_128", "__typename": "Paragraph", "name": "062e", "text": "Convert Sensor Data with Rust Pattern Matching", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_129": { "id": "2e4d52ff0bcf_129", "__typename": "Paragraph", "name": "4a9c", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L104-L127", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:4f1d541381ea1bbd9ba8259c037c422e" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 112, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L104-L127", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_130": { "id": "2e4d52ff0bcf_130", "__typename": "Paragraph", "name": "3670", "text": "convert_sensor_data() is a beautiful function that could only happen in Rust, not C. Recall that it converts sensor data from Mynewt’s format to our own transmission format. The structure of the function looks interesting…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 21, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 19, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L104-L127", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_131": { "id": "2e4d52ff0bcf_131", "__typename": "Paragraph", "name": "c04c", "text": "fn convert_sensor_data(...) -\u003E SensorValue {", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_132": { "id": "2e4d52ff0bcf_132", "__typename": "Paragraph", "name": "1c94", "text": "    \u002F\u002F  Construct and return a new `SensorValue` (without semicolon)\n    SensorValue {\n        key: \"t\",\n        val: ...\n    }\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_133": { "id": "2e4d52ff0bcf_133", "__typename": "Paragraph", "name": "125a", "text": "Remember the Ok(...) trick for returning things without semicolon from the sushi conveyor belt… er… function? We’re using it here! We construct a struct with SensorValue { ... }. Then we return the struct, semicolon-less!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 13, "end": 20, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 146, "end": 152, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 158, "end": 177, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 198, "end": 204, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 158, "end": 169, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Fhw\u002Fsensor.rs#L146-L175", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 31, "end": 65, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_134": { "id": "2e4d52ff0bcf_134", "__typename": "Paragraph", "name": "5111", "text": "Now look closely what’s inside val…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 31, "end": 34, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_135": { "id": "2e4d52ff0bcf_135", "__typename": "Paragraph", "name": "1a97", "text": "\u002F\u002F  Construct and return a new `SensorValue` (without semicolon)\nSensorValue {\n    key: \"t\",\n    val: match sensor_type {\n        \u002F\u002F  If this is raw temperature...\n        SENSOR_TYPE_AMBIENT_TEMPERATURE_RAW =\u003E {  \n            \u002F\u002F  Get the raw temperature\n            let mut raw = fill_zero!(sensor_temp_raw_data);\n            let rc = unsafe { \n                sensor::get_temp_raw_data(\n                    sensor_data, &mut raw) \n            };\n            \u002F\u002F  Return the raw temperature\n            SensorValueType::Uint( raw.strd_temp_raw )\n        }\n        \u002F\u002F  Unknown type of sensor value\n        \u002F\u002F  _ =\u003E { assert!(false, \"sensor type\"); ... } \n    }\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 97, "end": 119, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 503, "end": 545, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_136": { "id": "2e4d52ff0bcf_136", "__typename": "Paragraph", "name": "b27a", "text": "Does match look familiar? Yes it looks like switch ... case in C! But in Rust, match can return values like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 10, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 44, "end": 59, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 79, "end": 84, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_137": { "id": "2e4d52ff0bcf_137", "__typename": "Paragraph", "name": "c9da", "text": "    ...\n    \u002F\u002F  Return the raw temperature\n    SensorValueType::Uint( raw.strd_temp_raw )\n}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_138": { "id": "2e4d52ff0bcf_138", "__typename": "Paragraph", "name": "e0b5", "text": "Again we used the disappearing semicolon trick to return a value inside match.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 72, "end": 77, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 18, "end": 46, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_139": { "id": "2e4d52ff0bcf_139", "__typename": "Paragraph", "name": "af75", "text": "What’s SensorValueType::Uint? That’s an enum. And as expected, Rust enums are more powerful than enums in C… Rust enums can contain values (like raw.strd_temp_raw)!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 7, "end": 28, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 40, "end": 44, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 68, "end": 73, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 97, "end": 102, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 114, "end": 119, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 145, "end": 162, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 40, "end": 44, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fbook\u002Fch06-01-defining-an-enum.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 109, "end": 138, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_140": { "id": "2e4d52ff0bcf_140", "__typename": "Paragraph", "name": "0afe", "text": "Remember our friends Ok(...) and Err(...)? They are enums too! Yes enums are shockingly powerful in Rust. (Then again, everything in Rust is shockingly powerful!)", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 21, "end": 28, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 33, "end": 41, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 52, "end": 57, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 67, "end": 72, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_141": { "id": "2e4d52ff0bcf_141", "__typename": "Paragraph", "name": "27c2", "text": "The pattern _ =\u003E ... at the end of match is identical to the default construct in C’s switch ... case statement (it matches everything else).", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 20, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 35, "end": 40, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 61, "end": 68, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 86, "end": 101, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_142": { "id": "2e4d52ff0bcf_142", "__typename": "Paragraph", "name": "10b9", "text": "But the Rust Compiler is super intelligent in deducing that sensor_type has one and only one possible pattern: SENSOR_TYPE_AMBIENT_TEMPERATURE_RAW. So the Rust Compiler refuses to accept the default pattern _. (And hence I have commented it out.)", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 60, "end": 71, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 111, "end": 146, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 207, "end": 208, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_143": { "id": "2e4d52ff0bcf_143", "__typename": "Paragraph", "name": "c537", "text": "Code Safety in Rust", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_144": { "id": "2e4d52ff0bcf_144", "__typename": "Paragraph", "name": "2675", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L114-L121", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:7c025ec9a1efc11efaa6d2c2cc3fbb36" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 112, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L114-L121", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_145": { "id": "2e4d52ff0bcf_145", "__typename": "Paragraph", "name": "b538", "text": "More reminders from convert_sensor_data() that the Rust Compiler really cares about our Safety…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 20, "end": 41, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 20, "end": 39, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs#L104-L127", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_146": { "id": "2e4d52ff0bcf_146", "__typename": "Paragraph", "name": "1cc0", "text": "let mut raw = ...", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 7, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_147": { "id": "2e4d52ff0bcf_147", "__typename": "Paragraph", "name": "c3ae", "text": "mut (mutable) declares to the Rust Compiler that raw is a variable that will be changed. The Rust Compiler assumes that all variables are const and will not be changed, unless we declare them as mut.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 3, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 49, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 138, "end": 143, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 195, "end": 198, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 119, "end": 167, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_148": { "id": "2e4d52ff0bcf_148", "__typename": "Paragraph", "name": "d241", "text": "sensor::get_temp_raw_data(sensor_data, &mut raw)", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 39, "end": 43, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_149": { "id": "2e4d52ff0bcf_149", "__typename": "Paragraph", "name": "854b", "text": "We write &mut to pass a variable to a function that’s expected to change the variable. So sensor::get_temp_raw_data() is expected to change the value of raw above.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 9, "end": 13, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 90, "end": 117, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 153, "end": 156, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_150": { "id": "2e4d52ff0bcf_150", "__typename": "Paragraph", "name": "596f", "text": "let rc = unsafe { \n    sensor::get_temp_raw_data( ... ) \n};", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 9, "end": 15, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_151": { "id": "2e4d52ff0bcf_151", "__typename": "Paragraph", "name": "9ba7", "text": "This ought to alarm us… We are calling a function sensor::get_temp_raw_data() that’s Unsafe! This function is declared unsafe because it’s a C function that could cause our program to crash.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 50, "end": 77, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 119, "end": 125, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 85, "end": 91, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_152": { "id": "2e4d52ff0bcf_152", "__typename": "Paragraph", "name": "9bf4", "text": "Unlike the other Mynewt C functions, I haven’t constructed a Safe Wrapper yet for sensor::get_temp_raw_data(), so we have to call it the Unsafe way. unsafe is a good way to tag C functions that require closer inspection before calling them.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 82, "end": 109, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 149, "end": 155, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_153": { "id": "2e4d52ff0bcf_153", "__typename": "Paragraph", "name": "1cfc", "text": "Network Functions: app_network.rs", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_154": { "id": "2e4d52ff0bcf_154", "__typename": "Paragraph", "name": "843c", "text": "app_network.rs contains the functions for transmitting sensor data to the CoAP Server over NB-IoT. We’re using the CoAP Server hosted at thethings.io.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 14, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 14, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 74, "end": 85, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fget-started-with-nb-iot-and-quectel-modules-6e7c581e0d61?source=friends_link&sk=40ece196fc51f7a2903c9981f46efa46", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_155": { "id": "2e4d52ff0bcf_155", "__typename": "Paragraph", "name": "3d3b", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L39-L62", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:5f3c950720c6ea699e865ed26932ecde" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 111, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L39-L62", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_156": { "id": "2e4d52ff0bcf_156", "__typename": "Paragraph", "name": "2910", "text": "send_sensor_data() is called by handle_sensor_data() to transmit the polled sensor data from the temperature sensor.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 18, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 32, "end": 52, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_157": { "id": "2e4d52ff0bcf_157", "__typename": "Paragraph", "name": "57d7", "text": "It calls sensor_network::get_device_id() to fetch the randomly-generated device ID. This device ID changes each time we restart the device. We’ll transmit the device ID to thethings.io so that we can see the sensor data for our device.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 9, "end": 40, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 9, "end": 38, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flibs\u002Fsensor_network\u002Fsrc\u002Fsensor_network.c#L385-L402", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_158": { "id": "2e4d52ff0bcf_158", "__typename": "Paragraph", "name": "5c38", "text": "sensor_network::init_server_post() prepares the memory buffers to compose a new CoAP message. In embedded devices like Blue Pill, we have limited RAM so we can’t compose two CoAP messages at the same time. Hence init_server_post() uses a locking Mynewt semaphore to ensure that only one task is composing a CoAP message at any time.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 34, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 212, "end": 230, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 32, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flibs\u002Fsensor_network\u002Fsrc\u002Fsensor_network.c#L241-L250", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_159": { "id": "2e4d52ff0bcf_159", "__typename": "Paragraph", "name": "c4ad", "text": "Remember that the connection to NB-IoT is established by a background task. There’s a chance that the connection isn’t ready yet. If it’s not ready, we return Err( MynewtError::SYS_EAGAIN ) to ask the Listener Function to retry later. That’s how we return an error code SYS_EAGAIN as a Result type in Rust.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 159, "end": 189, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 270, "end": 280, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 286, "end": 292, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_160": { "id": "2e4d52ff0bcf_160", "__typename": "Paragraph", "name": "c74b", "text": "Here comes the magical part of the entire program… How we actually compose a CoAP Message containing the sensor data… And how we manage Intent vs Implementation…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 136, "end": 160, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_161": { "id": "2e4d52ff0bcf_161", "__typename": "Paragraph", "name": "aaac", "text": "CoAP Intent vs Implementation", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_162": { "id": "2e4d52ff0bcf_162", "__typename": "Paragraph", "name": "0d68", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L63-L76", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:04f8027ab85404a2a2901f1e4c11b81f" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 111, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L63-L76", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_163": { "id": "2e4d52ff0bcf_163", "__typename": "Paragraph", "name": "aef5", "text": "The above Rust code shows our Intent clearly… We just want to transmit 2 items of data to the server:", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 30, "end": 36, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_164": { "id": "2e4d52ff0bcf_164", "__typename": "Paragraph", "name": "d579", "text": "1️⃣ Device ID, which we’ll be using to view our sensor data. (In case there are other devices transmitting at the same time)", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 13, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_165": { "id": "2e4d52ff0bcf_165", "__typename": "Paragraph", "name": "ec51", "text": "2️⃣ Raw Temperature, which is a whole number from 0 to 4095", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 19, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_166": { "id": "2e4d52ff0bcf_166", "__typename": "Paragraph", "name": "b0cb", "text": "What about the Implementation? Well that depends which server we’ll be transmitting the message to. For thethings.io, the server expects a JSON Payload in the CoAP Message like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 15, "end": 29, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 139, "end": 151, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_167": { "id": "2e4d52ff0bcf_167", "__typename": "Paragraph", "name": "00dd", "text": "{\"values\":[\n    {\"key\":\"device\",\n         \"value\":\"010203\"},\n    {\"key\":\"t\",   \n         \"value\":1715}\n]}", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_168": { "id": "2e4d52ff0bcf_168", "__typename": "Paragraph", "name": "ccdd", "text": "It’s similar to our Intent, just that the Implementation is different. And the above Rust code handles that! coap!() is a Rust Macro I have written that generates the above JSON Payload given the device_id and val values.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 109, "end": 116, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 196, "end": 205, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 210, "end": 213, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 109, "end": 114, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 5, "end": 26, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 41, "end": 69, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_169": { "id": "2e4d52ff0bcf_169", "__typename": "Paragraph", "name": "36f5", "text": "Why is this Intent vs Implementation distinction important?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 59, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_170": { "id": "2e4d52ff0bcf_170", "__typename": "Paragraph", "name": "8cee", "text": "As I’m writing this, thethings.io is preparing to launch CBOR support for their CoAP Server. As we have seen on Moon Base One, CBOR promises to shrink our CoAP Messages because we will no longer use inefficient JSON Payload encoding… we will use compressed, binary CBOR Payload encoding instead!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 57, "end": 61, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FCBOR", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 112, "end": 125, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_171": { "id": "2e4d52ff0bcf_171", "__typename": "Paragraph", "name": "407a", "text": "Guess What? The coap!() macro is ready to generate CBOR Payloads based on the same code! All we need to do is to replace “@json” by “@cbor” and the rest happens like magic!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 23, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 122, "end": 127, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 133, "end": 138, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_172": { "id": "2e4d52ff0bcf_172", "__typename": "Paragraph", "name": "6fb8", "text": "Same for your own CoAP Server — you should be able to tweak the coap!() macro to support the encoding format required by your server. This level of Intent vs Implementation separation is not possible with C Macros, only with Rust Macros.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 64, "end": 71, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_173": { "id": "2e4d52ff0bcf_173", "__typename": "Paragraph", "name": "b7dc", "text": "Multitasking with Mynewt", "type": "PQ", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_174": { "id": "2e4d52ff0bcf_174", "__typename": "Paragraph", "name": "212f", "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L77-L88", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:5a1da750de1fcc65e08a33f012d9a9fc" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 111, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L77-L88", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_175": { "id": "2e4d52ff0bcf_175", "__typename": "Paragraph", "name": "21f5", "text": "Finally we call sensor_network::do_server_post() to transmit our CoAP Message. The actual transmission is done by a background task so that the we won’t get stuck waiting for the transmission to complete. We display the URL for viewing the sensor data. And we return Ok(()) semicolon-lessly.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 48, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 267, "end": 273, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 16, "end": 46, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flibs\u002Fsensor_network\u002Fsrc\u002Fsensor_network.c#L307-L316", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_176": { "id": "2e4d52ff0bcf_176", "__typename": "Paragraph", "name": "7847", "text": "Our Rust program reads the sensor and transmits the sensor data concurrently, managed by Mynewt. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log#L128-L148", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:edf03a6b0752fe9910d3f03956d0117d" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 102, "end": 207, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log#L128-L148", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_177": { "id": "2e4d52ff0bcf_177", "__typename": "Paragraph", "name": "127f", "text": "We can see that Mynewt plays an important role in managing the realtime tasks on our Blue Pill…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_178": { "id": "2e4d52ff0bcf_178", "__typename": "Paragraph", "name": "e130", "text": "1️⃣ The temperature sensor is polled automatically by Mynewt according to a timer (every 10 seconds)", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 30, "end": 50, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_179": { "id": "2e4d52ff0bcf_179", "__typename": "Paragraph", "name": "3f11", "text": "2️⃣ CoAP Messages are transmitted by Mynewt in a background task", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 49, "end": 64, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_180": { "id": "2e4d52ff0bcf_180", "__typename": "Paragraph", "name": "7842", "text": "This is possible only because Mynewt is a realtime operating system. It would be very difficult for Rust to do this on bare metal.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 42, "end": 67, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_181": { "id": "2e4d52ff0bcf_181", "__typename": "Paragraph", "name": "0c66", "text": "Install Embedded Rust and Mynewt", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_182": { "id": "2e4d52ff0bcf_182", "__typename": "Paragraph", "name": "14d6", "text": "Ready to try out the Embedded Rust code for yourself? Follow the instructions below to install the Embedded Rust + Mynewt build and application files on Windows…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_183": { "id": "2e4d52ff0bcf_183", "__typename": "Paragraph", "name": "2acc", "text": "“Install Embedded Rust and Apache Mynewt \nfor Visual Studio Code on Windows”", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 1, "end": 75, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Finstall-embedded-rust-and-apache-mynewt-for-visual-studio-code-on-windows-533ac87b35ad?source=friends_link&sk=f3c23859d1b27372d41c7e9b7913a6e8", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 76, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 76, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_184": { "id": "2e4d52ff0bcf_184", "__typename": "Paragraph", "name": "c3fc", "text": "🛈 What is VSCode? Is it related to Visual Studio? How is Microsoft involved? Read this", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 3, "end": 87, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgist.github.com\u002Flupyuen\u002F08e383845d68d3337747e8eb59d0f624", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 3, "end": 87, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_185": { "id": "2e4d52ff0bcf_185", "__typename": "Paragraph", "name": "b136", "text": "Hardware Required", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_186": { "id": "2e4d52ff0bcf_186", "__typename": "Paragraph", "name": "7549", "text": "STM32 Blue Pill, ST-Link V2, Quectel BC95-G breakout board with antenna, NB-IoT SIM", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:0*Txoz218gp-m-TUBo.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_187": { "id": "2e4d52ff0bcf_187", "__typename": "Paragraph", "name": "5da9", "text": "To run the Embedded Rust program and send sensor data over NB-IoT, we’ll need the following hardware…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_188": { "id": "2e4d52ff0bcf_188", "__typename": "Paragraph", "name": "ad3b", "text": "1️⃣ STM32 Blue Pill", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 19, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20180924131057&SearchText=stm32f103c8t6+development+board", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 4, "end": 19, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_189": { "id": "2e4d52ff0bcf_189", "__typename": "Paragraph", "name": "27f5", "text": "2️⃣ ST-Link V2 USB Adapter", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 26, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20180924134644&SearchText=st-link+v2", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 4, "end": 26, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_190": { "id": "2e4d52ff0bcf_190", "__typename": "Paragraph", "name": "4881", "text": "3️⃣ Quectel BC95-G Global NB-IoT Module (breakout board with antenna). I ordered mine here. The manual in Chinese is here.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 39, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20190725022150&SearchText=bc95-g+nb101&switch_new_app=y", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 86, "end": 90, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fitem.taobao.com\u002Fitem.htm?id=577310122904", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 117, "end": 121, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttp:\u002F\u002Frs.iotxx.com\u002Fuploads\u002Fdoc\u002F%E8%B0%B7%E9%9B%A8NB10x%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E%E4%B9%A6-V1.3.pdf", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 4, "end": 39, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_191": { "id": "2e4d52ff0bcf_191", "__typename": "Paragraph", "name": "f24b", "text": "4️⃣ NB-IoT SIM from your local NB-IoT network operator", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 14, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_192": { "id": "2e4d52ff0bcf_192", "__typename": "Paragraph", "name": "a2f6", "text": "Many thanks to StarHub for sponsoring the NB-IoT SIM that I used for this tutorial!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 15, "end": 22, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.starhub.com\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 15, "end": 22, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_193": { "id": "2e4d52ff0bcf_193", "__typename": "Paragraph", "name": "631d", "text": "Connect The Hardware", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_194": { "id": "2e4d52ff0bcf_194", "__typename": "Paragraph", "name": "d19f", "text": "To connect Blue Pill to Quectel BC95-G and ST-Link, follow the instructions here", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 52, "end": 80, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fconnect-the-nb-iot-hardware-stm32-blue-pill-and-quectel-bc95-g-module-978920c964b1", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_195": { "id": "2e4d52ff0bcf_195", "__typename": "Paragraph", "name": "3eec", "text": "Blue Pill connected to Quectel BC95-G and ST-Link", "type": "IMG", "href": null, "layout": "OUTSET_CENTER", "metadata": { "__ref": "ImageMetadata:0*mXSaar7zA66oGDii.jpeg" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_196": { "id": "2e4d52ff0bcf_196", "__typename": "Paragraph", "name": "cf92", "text": "Flash The Firmware To Blue Pill", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_197": { "id": "2e4d52ff0bcf_197", "__typename": "Paragraph", "name": "8bcd", "text": "The next step is to flash the firmware into Blue Pill’s ROM. We’ll need to connect the Blue Pill to the USB port of our computer via an ST-Link V2 adapter.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 136, "end": 154, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20180924134644&SearchText=st-link+v2&switch_new_app=y", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_198": { "id": "2e4d52ff0bcf_198", "__typename": "Paragraph", "name": "e252", "text": "Blue Pill and ST-Link connected to USB port", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_199": { "id": "2e4d52ff0bcf_199", "__typename": "Paragraph", "name": "dee2", "text": "1️⃣ Check that the Blue Pill is connected to ST-Link…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_200": { "id": "2e4d52ff0bcf_200", "__typename": "Paragraph", "name": "7b56", "text": "And the ST-Link is connected to your computer’s USB port.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_201": { "id": "2e4d52ff0bcf_201", "__typename": "Paragraph", "name": "e455", "text": "Now let’s head back to Visual Studio Code…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_202": { "id": "2e4d52ff0bcf_202", "__typename": "Paragraph", "name": "5793", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_203": { "id": "2e4d52ff0bcf_203", "__typename": "Paragraph", "name": "b3c2", "text": "2️⃣ Click Terminal → Run Task → [4] Load bluepill_boot", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 10, "end": 54, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_204": { "id": "2e4d52ff0bcf_204", "__typename": "Paragraph", "name": "a933", "text": "This flashes the bootloader to Blue Pill, to start the Apache Mynewt operating system upon startup. If it shows errors, compare with this flash log.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 133, "end": 147, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fload-bootloader.log", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_205": { "id": "2e4d52ff0bcf_205", "__typename": "Paragraph", "name": "4a5f", "text": "3️⃣ Click Terminal → Run Task → [5] Load bluepill_my_sensor", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 10, "end": 59, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_206": { "id": "2e4d52ff0bcf_206", "__typename": "Paragraph", "name": "6784", "text": "This flashes the firmware (containing our Visual Program) to Blue Pill. If it shows errors, compare with this flash log.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 105, "end": 119, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fload-application.log", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_207": { "id": "2e4d52ff0bcf_207", "__typename": "Paragraph", "name": "bb03", "text": "Run The Program", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_208": { "id": "2e4d52ff0bcf_208", "__typename": "Paragraph", "name": "aaf6", "text": "1️⃣ Click Debug → Start Debugging", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 10, "end": 33, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_209": { "id": "2e4d52ff0bcf_209", "__typename": "Paragraph", "name": "5d41", "text": "", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:0*Mp3PwMWgGLnJfB2X.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_210": { "id": "2e4d52ff0bcf_210", "__typename": "Paragraph", "name": "05eb", "text": "2️⃣ Click View → Output", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 10, "end": 23, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_211": { "id": "2e4d52ff0bcf_211", "__typename": "Paragraph", "name": "5ec5", "text": "Select Adapter Output to see the Blue Pill log", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 7, "end": 21, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_212": { "id": "2e4d52ff0bcf_212", "__typename": "Paragraph", "name": "4aea", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:0*90lBQnZsntBt5ohv.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_213": { "id": "2e4d52ff0bcf_213", "__typename": "Paragraph", "name": "6e9b", "text": "", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:0*ttNb9ISrhaD4j6lb.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_214": { "id": "2e4d52ff0bcf_214", "__typename": "Paragraph", "name": "91cc", "text": "3️⃣ The debugger pauses at the line with LoopCopyDataInit", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 41, "end": 57, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_215": { "id": "2e4d52ff0bcf_215", "__typename": "Paragraph", "name": "2598", "text": "Click Continue or press F5", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 6, "end": 14, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 24, "end": 26, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_216": { "id": "2e4d52ff0bcf_216", "__typename": "Paragraph", "name": "d043", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:0*CRD7qSOItwVYR7pt.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_217": { "id": "2e4d52ff0bcf_217", "__typename": "Paragraph", "name": "313d", "text": "", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:1*XpPw1ohylYFVuqFOJ92H9g.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_218": { "id": "2e4d52ff0bcf_218", "__typename": "Paragraph", "name": "cc81", "text": "4️⃣ The debugger pauses next at the main() function.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 36, "end": 42, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_219": { "id": "2e4d52ff0bcf_219", "__typename": "Paragraph", "name": "1590", "text": "Click Continue or press F5", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 6, "end": 14, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 24, "end": 26, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_220": { "id": "2e4d52ff0bcf_220", "__typename": "Paragraph", "name": "709c", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:0*7f4oCaOs-O_xaLQG.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_221": { "id": "2e4d52ff0bcf_221", "__typename": "Paragraph", "name": "3fbf", "text": "The program should now poll the internal temperature sensor every 10 seconds and transmit to thethings.io. Let’s study the Blue Pill execution log…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_222": { "id": "2e4d52ff0bcf_222", "__typename": "Paragraph", "name": "57b6", "text": "Check The Log", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_223": { "id": "2e4d52ff0bcf_223", "__typename": "Paragraph", "name": "00a9", "text": "Excerpt from the Blue Pill log: Reading the sensor and transmitting the sensor data over NB-IoT. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log#L128-L148", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:edf03a6b0752fe9910d3f03956d0117d" } }, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 102, "end": 207, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log#L128-L148", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_224": { "id": "2e4d52ff0bcf_224", "__typename": "Paragraph", "name": "5887", "text": "The log from our Blue Pill should look like this.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 34, "end": 48, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fstandalone-node.log", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_225": { "id": "2e4d52ff0bcf_225", "__typename": "Paragraph", "name": "c976", "text": "The contents of the log should be similar to the previous article. To understand the log messages, refer to the section “Check The Log” of this article.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 49, "end": 65, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fconnect-stm32-blue-pill-to-nb-iot-with-quectel-bc95-g-and-apache-mynewt-c99a9d8417a9?source=friends_link&sk=34fb9befbea42e98cb5942d66f594027", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 139, "end": 151, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fconnect-stm32-blue-pill-to-nb-iot-with-quectel-bc95-g-and-apache-mynewt-c99a9d8417a9?source=friends_link&sk=34fb9befbea42e98cb5942d66f594027", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 120, "end": 135, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_226": { "id": "2e4d52ff0bcf_226", "__typename": "Paragraph", "name": "b374", "text": "When we Ctrl-Click the URL in the log…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_227": { "id": "2e4d52ff0bcf_227", "__typename": "Paragraph", "name": "901e", "text": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fblue-pill-geolocate.appspot.com?device=ac913c…", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 53, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fblue-pill-geolocate.appspot.com\u002F?device=ac913c504b27e00bc8b68dfe843b297c", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_228": { "id": "2e4d52ff0bcf_228", "__typename": "Paragraph", "name": "21c8", "text": "Web page with computed temperature", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "__ref": "ImageMetadata:0*d0FLvDkcIx-J66EY.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_229": { "id": "2e4d52ff0bcf_229", "__typename": "Paragraph", "name": "f123", "text": "…We see a web page with the computed temperature value of our temperature sensor in degrees Celsius.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_230": { "id": "2e4d52ff0bcf_230", "__typename": "Paragraph", "name": "1d89", "text": "That’s because thethings.io has converted the raw temperature into the actual temperature (in degrees Celsius).", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 15, "end": 89, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_231": { "id": "2e4d52ff0bcf_231", "__typename": "Paragraph", "name": "bbda", "text": "We have installed a script at thethings.io that pushes the computed temperature to blue-pill-geolocate.appspot.com, so that we could see the computed temperature.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 83, "end": 114, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 20, "end": 42, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fthethingsio-wifi-geolocation", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_232": { "id": "2e4d52ff0bcf_232", "__typename": "Paragraph", "name": "db40", "text": "The URL (and the random number) changes each time we restart the program. More details about the setup for thethings.io may be found in an earlier article.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 139, "end": 154, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fget-started-with-nb-iot-and-quectel-modules-6e7c581e0d61", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 32, "end": 72, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_233": { "id": "2e4d52ff0bcf_233", "__typename": "Paragraph", "name": "e655", "text": "What’s Next?", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_234": { "id": "2e4d52ff0bcf_234", "__typename": "Paragraph", "name": "ca66", "text": "Visual Rust, of course! We’ll soon be able to generate the Embedded Rust program in this article by simply dragging and dropping blocks around. Check out the article here…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 11, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fvisual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c?source=friends_link&sk=222de63e45993aacd0db5a2e4b1f33c7", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_235": { "id": "2e4d52ff0bcf_235", "__typename": "Paragraph", "name": "82a6", "text": "Visual Embedded Rust Programming with Visual Studio Code\nCreate and edit Embedded Rust programs for STM32 Blue Pill and Apache Mynewt… By dragging and dropping blocks!medium.com", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": { "__typename": "MixtapeMetadata", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fvisual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c", "thumbnailImageId": "1*cWkz4VgkkdnGOdTMoAxcmQ.png" }, "markups": [{ "__typename": "Markup", "start": 0, "end": 177, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fvisual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 56, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 57, "end": 167, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_236": { "id": "2e4d52ff0bcf_236", "__typename": "Paragraph", "name": "6500", "text": "I have extended the Rust Code Generator for Google Blockly to generate Rust code that’s fairly close to the code that we see in this article.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 20, "end": 39, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fblockly-mynewt-rust", "anchorType": "LINK", "userId": "", "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_237": { "id": "2e4d52ff0bcf_237", "__typename": "Paragraph", "name": "d055", "text": "Embedded Rust can clearly harness our powerful gadgets… It handles complex embedded programs well. And it prevents bugs from crashing our gadgets.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_238": { "id": "2e4d52ff0bcf_238", "__typename": "Paragraph", "name": "1e43", "text": "But will we know how to harness the power of Rust?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 50, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_239": { "id": "2e4d52ff0bcf_239", "__typename": "Paragraph", "name": "ed2a", "text": "With great power comes great… Teaching! (That’s where I fit in…)", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 30, "end": 38, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 41, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_240": { "id": "2e4d52ff0bcf_240", "__typename": "Paragraph", "name": "924d", "text": "Could Rust harness its own power, like with auto-generated Safe Wrappers?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_241": { "id": "2e4d52ff0bcf_241", "__typename": "Paragraph", "name": "488b", "text": "Or could we do it Visually… so we can see in a single glance how Rust is controlling our gadgets?", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_242": { "id": "2e4d52ff0bcf_242", "__typename": "Paragraph", "name": "82b6", "text": "I’m about to find out… Stay tuned!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_243": { "id": "2e4d52ff0bcf_243", "__typename": "Paragraph", "name": "22e5", "text": "UPDATE: I have a new article that explains how to reduce the power consumption of our device…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 6, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_244": { "id": "2e4d52ff0bcf_244", "__typename": "Paragraph", "name": "c2df", "text": "Low Power NB-IoT on STM32 Blue Pill with Apache Mynewt and Embedded Rust\nHow much power do Quectel NB-IoT modules consume? Let’s find out with the RuiDeng DPS 3005medium.com", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": { "__typename": "MixtapeMetadata", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Flow-power-nb-iot-on-stm32-blue-pill-with-apache-mynewt-and-embedded-rust-cef5a3ecdd90", "thumbnailImageId": "1*kEsNkF1AtQAE8J5ggHDH8w.png" }, "markups": [{ "__typename": "Markup", "start": 0, "end": 173, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Flow-power-nb-iot-on-stm32-blue-pill-with-apache-mynewt-and-embedded-rust-cef5a3ecdd90", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 72, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 73, "end": 163, "type": "EM", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_245": { "id": "2e4d52ff0bcf_245", "__typename": "Paragraph", "name": "21b4", "text": "", "type": "IFRAME", "href": null, "layout": "FULL_WIDTH", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:cfd43d1720900d781a080e0728789fa4" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_246": { "id": "2e4d52ff0bcf_246", "__typename": "Paragraph", "name": "3501", "text": "Under Development: Visual Studio Code Extension for Visual Embedded Rust", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "__ref": "ImageMetadata:1*UcILlk-C-XtzwRlKd8S1Mg.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_247": { "id": "2e4d52ff0bcf_247", "__typename": "Paragraph", "name": "1642", "text": "💎 Advanced Topic: CoAP Macro", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_248": { "id": "2e4d52ff0bcf_248", "__typename": "Paragraph", "name": "58f3", "text": "The CoAP Macro is defined in rust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 29, "end": 63, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 29, "end": 63, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_249": { "id": "2e4d52ff0bcf_249", "__typename": "Paragraph", "name": "59c3", "text": "It’s a Rust Declarative Macro that parses the JSON-like input (sensor data fields) and generates Rust code to encode the sensor data in JSON or CBOR format. Given this input…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 7, "end": 29, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdanielkeep.github.io\u002Ftlborm\u002Fbook\u002Fmbe-README.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 163, "end": 173, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs#L63-L75", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 7, "end": 29, "type": "STRONG", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_250": { "id": "2e4d52ff0bcf_250", "__typename": "Paragraph", "name": "4285", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:2223dac97b12d9c207224dbcac3e0221" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_251": { "id": "2e4d52ff0bcf_251", "__typename": "Paragraph", "name": "7f84", "text": "… And depending on the selector “@json” or “@cbor”, the CoAP Macro expands into the following code…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 33, "end": 38, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 44, "end": 49, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_252": { "id": "2e4d52ff0bcf_252", "__typename": "Paragraph", "name": "0d4f", "text": "JSON Encoding", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 13, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Flibapp-expanded-json.rs#L276-L385", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_253": { "id": "2e4d52ff0bcf_253", "__typename": "Paragraph", "name": "dbf1", "text": "CBOR Encoding", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 13, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Flibapp-expanded-cbor.rs#L293-L497", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_254": { "id": "2e4d52ff0bcf_254", "__typename": "Paragraph", "name": "904a", "text": "The CoAP Macro was adapted from the JSON parser in the serde_json crate.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 55, "end": 65, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 55, "end": 65, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdocs.serde.rs\u002Fserde_json\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_255": { "id": "2e4d52ff0bcf_255", "__typename": "Paragraph", "name": "5c8c", "text": "The generated code uses a CoAP Context object to maintain the current JSON and CBOR encoding state: rust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fcoap_context.rs", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 100, "end": 140, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 100, "end": 140, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fcoap_context.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_256": { "id": "2e4d52ff0bcf_256", "__typename": "Paragraph", "name": "49d0", "text": "The JSON encoding code calls the Mynewt JSON API while the CBOR encoding code calls the Mynewt OIC API.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 33, "end": 48, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fjson\u002Fjson.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 88, "end": 102, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_oic.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_257": { "id": "2e4d52ff0bcf_257", "__typename": "Paragraph", "name": "2078", "text": "Read more about Rust Declarative Macros", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 39, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&sk=16a27a4b9910aadcfcb9881c02d84adc", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_258": { "id": "2e4d52ff0bcf_258", "__typename": "Paragraph", "name": "d339", "text": "Read more about CoAP Encoding", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 29, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fget-started-with-nb-iot-and-quectel-modules-6e7c581e0d61?source=friends_link&sk=40ece196fc51f7a2903c9981f46efa46", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_259": { "id": "2e4d52ff0bcf_259", "__typename": "Paragraph", "name": "d1a4", "text": "💎 Advanced Topic: Hosting Rust on Mynewt", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_260": { "id": "2e4d52ff0bcf_260", "__typename": "Paragraph", "name": "f7ab", "text": "We use a custom Build Script to build the Rust application and link it into the Mynewt firmware. (View the Build Log) The script does the following…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 28, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 107, "end": 116, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fbuild-application.log", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_261": { "id": "2e4d52ff0bcf_261", "__typename": "Paragraph", "name": "d8a9", "text": "Run cargo build to build the Rust application into a library named libapp.rlib", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 15, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 67, "end": 78, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 15, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd#L51-L55", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_262": { "id": "2e4d52ff0bcf_262", "__typename": "Paragraph", "name": "a7ac", "text": "Extract the *.o object files from libapp.rlib (including the main() function from Rust) and external crates. Combine the object files into a new library rustlib.a", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 15, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 34, "end": 45, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 61, "end": 67, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 153, "end": 162, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 28, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd#L73-L76", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 61, "end": 65, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L46-L74", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 109, "end": 133, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd#L77-L81", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_263": { "id": "2e4d52ff0bcf_263", "__typename": "Paragraph", "name": "0fad", "text": "Copy rustlib.a into the Mynewt build folder for custom library libs\u002Frust_app", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 14, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 63, "end": 76, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 14, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd#L82-L93", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 63, "end": 76, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Flibs\u002Frust_app", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_264": { "id": "2e4d52ff0bcf_264", "__typename": "Paragraph", "name": "c842", "text": "Copy the Rust Core Library libcore-*.rlib from the Rust Compiler into the Mynewt build folder for custom library libs\u002Frust_libcore", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 27, "end": 41, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 113, "end": 130, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 26, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd#L101-L122", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_265": { "id": "2e4d52ff0bcf_265", "__typename": "Paragraph", "name": "be59", "text": "Run newt build to build the Mynewt firmware, which includes rust_app and rust_libcore", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 4, "end": 14, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 60, "end": 68, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 73, "end": 85, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 0, "end": 14, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fbuild-app.cmd#L128-L133", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 73, "end": 85, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust-nbiot\u002Flibs\u002Frust_libcore", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_266": { "id": "2e4d52ff0bcf_266", "__typename": "Paragraph", "name": "f268", "text": "The Mynewt firmware calls the main() function defined in Rust, so the Rust application runs on startup", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 30, "end": 36, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 30, "end": 34, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs#L46-L74", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_267": { "id": "2e4d52ff0bcf_267", "__typename": "Paragraph", "name": "8e50", "text": "The following files may be useful for reference…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_268": { "id": "2e4d52ff0bcf_268", "__typename": "Paragraph", "name": "45f5", "text": "Rust Doc for the application", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 27, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Flupyuen.github.io\u002Fstm32bluepill-mynewt-sensor\u002Frust\u002Fapp\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_269": { "id": "2e4d52ff0bcf_269", "__typename": "Paragraph", "name": "c623", "text": "Disassembly of the Rust Application build", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 41, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Flibapp-demangle.S", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_270": { "id": "2e4d52ff0bcf_270", "__typename": "Paragraph", "name": "2edd", "text": "Disassembly of the Rust Crates", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 30, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Frustlib-demangle.S", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_271": { "id": "2e4d52ff0bcf_271", "__typename": "Paragraph", "name": "a740", "text": "Disassembly of the entire firmware", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 34, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fmy_sensor_app.elf.lst", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_272": { "id": "2e4d52ff0bcf_272", "__typename": "Paragraph", "name": "9b8b", "text": "Memory map of the firmware", "type": "ULI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 26, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fmy_sensor_app.elf.map", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_273": { "id": "2e4d52ff0bcf_273", "__typename": "Paragraph", "name": "e555", "text": "Read more about hosting Rust applications on Mynewt", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 51, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&sk=f58f4cf6c608fded4b354063e474a93b", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_274": { "id": "2e4d52ff0bcf_274", "__typename": "Paragraph", "name": "4e2b", "text": "💎 Advanced Topic: Safe Wrappers for Mynewt", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_275": { "id": "2e4d52ff0bcf_275", "__typename": "Paragraph", "name": "861c", "text": "Although Rust can call C functions directly, it’s unpleasant to call the Mynewt API with unsafe code. And we need to be very careful when converting pointers between Mynewt and C. Also all strings need to be null-terminated when passing from Mynewt to Rust. That’s why we create Safe Wrappers for the Mynewt API.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_276": { "id": "2e4d52ff0bcf_276", "__typename": "Paragraph", "name": "4426", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:0877b048b9bafda1cdbd721b32c54546" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_277": { "id": "2e4d52ff0bcf_277", "__typename": "Paragraph", "name": "9e91", "text": "Here’s a typical Mynewt API os_task_init() that has been imported into Rust with our gen-bindings.sh script, thanks to bindgen...", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 28, "end": 42, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 85, "end": 100, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 119, "end": 126, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 28, "end": 42, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Fkernel\u002Fos.rs#L1936-L1966", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 85, "end": 100, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 119, "end": 126, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Frust-lang.github.io\u002Frust-bindgen\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_278": { "id": "2e4d52ff0bcf_278", "__typename": "Paragraph", "name": "c668", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_279": { "id": "2e4d52ff0bcf_279", "__typename": "Paragraph", "name": "66eb", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:2a95be1778989fb3aa14a7693b7a2569" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_280": { "id": "2e4d52ff0bcf_280", "__typename": "Paragraph", "name": "b7ea", "text": "…And here’s the Safe Wrapper for that API. Note the following…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 41, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Flibmynewt-expanded.rs#L2379-L2437", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_281": { "id": "2e4d52ff0bcf_281", "__typename": "Paragraph", "name": "8322", "text": "Unsafe types like * const c_char have been replaced by the safer version Strn", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 18, "end": 32, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 73, "end": 77, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_282": { "id": "2e4d52ff0bcf_282", "__typename": "Paragraph", "name": "c63b", "text": "We validate all Strn strings to confirm that they are null-terminated before passing to Mynewt: arg2.validate()", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 20, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 96, "end": 111, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_283": { "id": "2e4d52ff0bcf_283", "__typename": "Paragraph", "name": "84f7", "text": "We convert the Mynewt result code into the standard MynewtResult\u003C()\u003E type", "type": "OLI", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 52, "end": 69, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_284": { "id": "2e4d52ff0bcf_284", "__typename": "Paragraph", "name": "8a36", "text": "How did we create the Safe Wrappers? They were automatically generated with a Rust Procedural Macro named safe_wrap. That’s why we see this annotation…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 106, "end": 115, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_285": { "id": "2e4d52ff0bcf_285", "__typename": "Paragraph", "name": "5c1b", "text": "#[mynewt_macros::safe_wrap(attr)]", "type": "PRE", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_286": { "id": "2e4d52ff0bcf_286", "__typename": "Paragraph", "name": "1047", "text": "Here is the Rust Doc for the Mynewt API", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 12, "end": 39, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Flupyuen.github.io\u002Fstm32bluepill-mynewt-sensor\u002Frust\u002Fmynewt\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_287": { "id": "2e4d52ff0bcf_287", "__typename": "Paragraph", "name": "ee4f", "text": "Read more about Safe Wrappers", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 29, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&sk=16a27a4b9910aadcfcb9881c02d84adc", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_288": { "id": "2e4d52ff0bcf_288", "__typename": "Paragraph", "name": "82ea", "text": "💎 Advanced Topic: Auto-Generating Safe Wrappers", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_289": { "id": "2e4d52ff0bcf_289", "__typename": "Paragraph", "name": "69db", "text": "The Safe Wrappers were generated by our Rust Procedural Macro named safe_wrap(). If you look at the source code, you’ll see that it’s actually another Rust program, except that it’s invoked during the Rust build, not during runtime.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 68, "end": 79, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 68, "end": 77, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmacros\u002Fsrc\u002Fsafe_wrap.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 100, "end": 111, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmacros\u002Fsrc\u002Fsafe_wrap.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_290": { "id": "2e4d52ff0bcf_290", "__typename": "Paragraph", "name": "007c", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:0877b048b9bafda1cdbd721b32c54546" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_291": { "id": "2e4d52ff0bcf_291", "__typename": "Paragraph", "name": "0e3e", "text": "safe_wrap() takes an extern declaration like this…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 0, "end": 11, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_292": { "id": "2e4d52ff0bcf_292", "__typename": "Paragraph", "name": "5a96", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_293": { "id": "2e4d52ff0bcf_293", "__typename": "Paragraph", "name": "f017", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:2a95be1778989fb3aa14a7693b7a2569" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_294": { "id": "2e4d52ff0bcf_294", "__typename": "Paragraph", "name": "c5aa", "text": "…And generates this Safe Wrapper.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_295": { "id": "2e4d52ff0bcf_295", "__typename": "Paragraph", "name": "7229", "text": "It calls the syn crate to parse the extern declaration, and calls the quote crate to generate the Safe Wrapper code.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 36, "end": 42, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 13, "end": 22, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdocs.rs\u002Fsyn\u002F0.15.38\u002Fsyn\u002Findex.html", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 70, "end": 81, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fdocs.rs\u002Fquote\u002F0.6.12\u002Fquote\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_296": { "id": "2e4d52ff0bcf_296", "__typename": "Paragraph", "name": "7e13", "text": "Yes, safe_wrap() is a Rust program that reads a Rust program and generates another Rust program!", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 5, "end": 16, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_297": { "id": "2e4d52ff0bcf_297", "__typename": "Paragraph", "name": "e1fc", "text": "We don’t generate wrappers yet for the entire Mynewt API. The whitelist of Mynewt APIs for generating wrappers is specified here.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 114, "end": 128, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmacros\u002Fsrc\u002Fsafe_wrap.rs#L43-L64", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_298": { "id": "2e4d52ff0bcf_298", "__typename": "Paragraph", "name": "b9d3", "text": "We also use fixed rules to determine the namespace for each Mynewt function. Given a Mynewt function like os_task_init(), we use the rules to deduce that os is the namespace and task_init() should be name of the Rust Safe Wrapper.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 106, "end": 120, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 154, "end": 156, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 178, "end": 189, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 12, "end": 23, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmacros\u002Fsrc\u002Fsafe_wrap.rs#L43-L64", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_299": { "id": "2e4d52ff0bcf_299", "__typename": "Paragraph", "name": "8098", "text": "To test the macros, I created a test-rust-macros project.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 32, "end": 48, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 32, "end": 48, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Ftest-rust-macros", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_300": { "id": "2e4d52ff0bcf_300", "__typename": "Paragraph", "name": "ea03", "text": "Read more about Rust Procedural Macros", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 38, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&sk=16a27a4b9910aadcfcb9881c02d84adc", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_301": { "id": "2e4d52ff0bcf_301", "__typename": "Paragraph", "name": "e0b9", "text": "💎 Advanced Topic: Generating Rust Bindings for Mynewt", "type": "H3", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_302": { "id": "2e4d52ff0bcf_302", "__typename": "Paragraph", "name": "2451", "text": "The Mynewt API was imported into Rust using the gen-bindings.sh script. Here is the log.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 48, "end": 63, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 48, "end": 63, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 72, "end": 87, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fgen-bindings.log", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_303": { "id": "2e4d52ff0bcf_303", "__typename": "Paragraph", "name": "c6c3", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:68e7a0664d8693ccc9ac08f0b230488a" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_304": { "id": "2e4d52ff0bcf_304", "__typename": "Paragraph", "name": "019d", "text": "This script takes the preprocessed C header files from Mynewt and generates extern function declarations in Rust. The script calls bindgen to create the declarations.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 76, "end": 82, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 131, "end": 138, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 131, "end": 138, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Frust-lang.github.io\u002Frust-bindgen\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 142, "end": 165, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh#L54-L65", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_305": { "id": "2e4d52ff0bcf_305", "__typename": "Paragraph", "name": "1eff", "text": "Given this C declaration…", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_306": { "id": "2e4d52ff0bcf_306", "__typename": "Paragraph", "name": "235a", "text": "", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "__ref": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png" }, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_307": { "id": "2e4d52ff0bcf_307", "__typename": "Paragraph", "name": "d494", "text": "", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "hasDropCap": null, "iframe": { "__typename": "Iframe", "mediaResource": { "__ref": "MediaResource:0877b048b9bafda1cdbd721b32c54546" } }, "mixtapeMetadata": null, "markups": [], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_308": { "id": "2e4d52ff0bcf_308", "__typename": "Paragraph", "name": "88eb", "text": "…The script generates this Rust extern function declaration.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 32, "end": 38, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_309": { "id": "2e4d52ff0bcf_309", "__typename": "Paragraph", "name": "3041", "text": "Only a subset of the Mynewt API is processed. Although bindgen can process *.h header files in selected include directories, it doesn’t work for Mynewt because of its complicated include structure.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 55, "end": 62, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 75, "end": 78, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 104, "end": 111, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 179, "end": 186, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 7, "end": 31, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh#L319-L327", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_310": { "id": "2e4d52ff0bcf_310", "__typename": "Paragraph", "name": "165c", "text": "I have chosen to let gcc create preprocessed versions of each header file. The gcc options look like this. The preprocessed header file looks like this. The generated Rust declarations is here.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 21, "end": 24, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 79, "end": 82, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 21, "end": 53, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh#L30-L53", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 91, "end": 105, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Fgen-bindings.txt", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 136, "end": 151, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Flogs\u002Flibs\u002Fsensor_coap-expanded.h", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 185, "end": 192, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Frust\u002Fmynewt\u002Fsrc\u002Flibs\u002Fsensor_coap.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_311": { "id": "2e4d52ff0bcf_311", "__typename": "Paragraph", "name": "aa6a", "text": "The script passes blacklists and whitelists to bindgen to ensure that there are no duplicate declarations.", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 47, "end": 54, "type": "CODE", "href": null, "anchorType": null, "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 18, "end": 28, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh#L247-L248", "anchorType": "LINK", "userId": null, "linkMetadata": null }, { "__typename": "Markup", "start": 33, "end": 43, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust-nbiot\u002Fscripts\u002Fgen-bindings.sh#L249-L255", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "Paragraph:2e4d52ff0bcf_312": { "id": "2e4d52ff0bcf_312", "__typename": "Paragraph", "name": "cbd1", "text": "Read more about generating Rust bindings", "type": "P", "href": null, "layout": null, "metadata": null, "hasDropCap": null, "iframe": null, "mixtapeMetadata": null, "markups": [{ "__typename": "Markup", "start": 16, "end": 40, "type": "A", "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac?source=friends_link&sk=16a27a4b9910aadcfcb9881c02d84adc", "anchorType": "LINK", "userId": null, "linkMetadata": null }], "dropCapImage": null }, "ImageMetadata:1*I2s4rSDpnbim1sOeMzFmIQ.jpeg": { "id": "1*I2s4rSDpnbim1sOeMzFmIQ.jpeg", "__typename": "ImageMetadata", "originalHeight": 2076, "originalWidth": 3264, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:1*JW5WYNcBXvviXWg8mXxIbQ.png": { "id": "1*JW5WYNcBXvviXWg8mXxIbQ.png", "__typename": "ImageMetadata", "originalHeight": 3113, "originalWidth": 2549, "focusPercentX": null, "focusPercentY": null, "alt": null }, "MediaResource:b3e2d3be1722636d446f08402e3ab11b": { "id": "b3e2d3be1722636d446f08402e3ab11b", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "rust-coap.rs" }, "MediaResource:6543045b00bbf8536b7f3da58a40f744": { "id": "6543045b00bbf8536b7f3da58a40f744", "__typename": "MediaResource", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FMgK72dqwDuM%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DMgK72dqwDuM&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FMgK72dqwDuM%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 640, "title": "NB-IoT on STM32 Blue Pill with Embedded Rust" }, "ImageMetadata:1*i_HQIE8DZ50hbfLCUoWW4Q.png": { "id": "1*i_HQIE8DZ50hbfLCUoWW4Q.png", "__typename": "ImageMetadata", "originalHeight": 1547, "originalWidth": 2780, "focusPercentX": null, "focusPercentY": null, "alt": null }, "MediaResource:cfddb9751afb6c51524e99028f8c5cbc": { "id": "cfddb9751afb6c51524e99028f8c5cbc", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "main1.rs" }, "MediaResource:0fb629e03dbcf98d69e1fcc4913f0163": { "id": "0fb629e03dbcf98d69e1fcc4913f0163", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "main2.rs" }, "MediaResource:0856bdc55bdd31f84dd4cb97747b4132": { "id": "0856bdc55bdd31f84dd4cb97747b4132", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "main3.rs" }, "MediaResource:9bcf96314d725aee9b28bd0cd1fd5397": { "id": "9bcf96314d725aee9b28bd0cd1fd5397", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "rust-nbiot-at.log" }, "MediaResource:0426d15ce6efacb060d4c6b1d90c8151": { "id": "0426d15ce6efacb060d4c6b1d90c8151", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor1.rs" }, "MediaResource:e7723c9945994b2cc8a2a1b5120aef1b": { "id": "e7723c9945994b2cc8a2a1b5120aef1b", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor2.rs" }, "MediaResource:6f90da54b0ab0299487c36fc503911b7": { "id": "6f90da54b0ab0299487c36fc503911b7", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor2a.rs" }, "MediaResource:d6e2d219c51254b184854225a5c5d607": { "id": "d6e2d219c51254b184854225a5c5d607", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor2b.rs" }, "MediaResource:5fc494148a4052d43eb74c794049003b": { "id": "5fc494148a4052d43eb74c794049003b", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor2c.rs" }, "MediaResource:1ba4f609813e50149a09b71fc5090750": { "id": "1ba4f609813e50149a09b71fc5090750", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor3.rs" }, "MediaResource:4f1d541381ea1bbd9ba8259c037c422e": { "id": "4f1d541381ea1bbd9ba8259c037c422e", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor4.rs" }, "MediaResource:7c025ec9a1efc11efaa6d2c2cc3fbb36": { "id": "7c025ec9a1efc11efaa6d2c2cc3fbb36", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_sensor5.rs" }, "MediaResource:5f3c950720c6ea699e865ed26932ecde": { "id": "5f3c950720c6ea699e865ed26932ecde", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_network1.rs" }, "MediaResource:04f8027ab85404a2a2901f1e4c11b81f": { "id": "04f8027ab85404a2a2901f1e4c11b81f", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_network2.rs" }, "MediaResource:5a1da750de1fcc65e08a33f012d9a9fc": { "id": "5a1da750de1fcc65e08a33f012d9a9fc", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "app_network3.rs" }, "MediaResource:edf03a6b0752fe9910d3f03956d0117d": { "id": "edf03a6b0752fe9910d3f03956d0117d", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "rust-nbiot.log" }, "ImageMetadata:0*Txoz218gp-m-TUBo.png": { "id": "0*Txoz218gp-m-TUBo.png", "__typename": "ImageMetadata", "originalHeight": 695, "originalWidth": 500, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*mXSaar7zA66oGDii.jpeg": { "id": "0*mXSaar7zA66oGDii.jpeg", "__typename": "ImageMetadata", "originalHeight": 900, "originalWidth": 1200, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg": { "id": "1*lpV6FH9Y_nnmdipPGxL-eQ.jpeg", "__typename": "ImageMetadata", "originalHeight": 1380, "originalWidth": 2071, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png": { "id": "1*pmGFQ2cRpqypaNDM1UYwEw.png", "__typename": "ImageMetadata", "originalHeight": 50, "originalWidth": 1800, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*Mp3PwMWgGLnJfB2X.png": { "id": "0*Mp3PwMWgGLnJfB2X.png", "__typename": "ImageMetadata", "originalHeight": 285, "originalWidth": 500, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*90lBQnZsntBt5ohv.png": { "id": "0*90lBQnZsntBt5ohv.png", "__typename": "ImageMetadata", "originalHeight": 33, "originalWidth": 1200, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*ttNb9ISrhaD4j6lb.png": { "id": "0*ttNb9ISrhaD4j6lb.png", "__typename": "ImageMetadata", "originalHeight": 289, "originalWidth": 450, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*CRD7qSOItwVYR7pt.png": { "id": "0*CRD7qSOItwVYR7pt.png", "__typename": "ImageMetadata", "originalHeight": 33, "originalWidth": 1200, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:1*XpPw1ohylYFVuqFOJ92H9g.png": { "id": "1*XpPw1ohylYFVuqFOJ92H9g.png", "__typename": "ImageMetadata", "originalHeight": 341, "originalWidth": 551, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*7f4oCaOs-O_xaLQG.png": { "id": "0*7f4oCaOs-O_xaLQG.png", "__typename": "ImageMetadata", "originalHeight": 33, "originalWidth": 1200, "focusPercentX": null, "focusPercentY": null, "alt": null }, "ImageMetadata:0*d0FLvDkcIx-J66EY.png": { "id": "0*d0FLvDkcIx-J66EY.png", "__typename": "ImageMetadata", "originalHeight": 427, "originalWidth": 500, "focusPercentX": null, "focusPercentY": null, "alt": null }, "MediaResource:cfd43d1720900d781a080e0728789fa4": { "id": "cfd43d1720900d781a080e0728789fa4", "__typename": "MediaResource", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FjYo8B8c7T3Y%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DjYo8B8c7T3Y&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FjYo8B8c7T3Y%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 640, "title": "Visual Studio Code Extension for Visual Embedded Rust" }, "ImageMetadata:1*UcILlk-C-XtzwRlKd8S1Mg.png": { "id": "1*UcILlk-C-XtzwRlKd8S1Mg.png", "__typename": "ImageMetadata", "originalHeight": 1127, "originalWidth": 1862, "focusPercentX": null, "focusPercentY": null, "alt": null }, "MediaResource:2223dac97b12d9c207224dbcac3e0221": { "id": "2223dac97b12d9c207224dbcac3e0221", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "coap-input.rs" }, "MediaResource:0877b048b9bafda1cdbd721b32c54546": { "id": "0877b048b9bafda1cdbd721b32c54546", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "os-task-init-decl2.rs" }, "MediaResource:2a95be1778989fb3aa14a7693b7a2569": { "id": "2a95be1778989fb3aa14a7693b7a2569", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "os-task-init-wrap.rs" }, "MediaResource:68e7a0664d8693ccc9ac08f0b230488a": { "id": "68e7a0664d8693ccc9ac08f0b230488a", "__typename": "MediaResource", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "os-task-init.c" }, "Tag:rust": { "id": "rust", "__typename": "Tag", "displayTitle": "Rust" }, "Tag:internet-of-things": { "id": "internet-of-things", "__typename": "Tag", "displayTitle": "Internet of Things" }, "Tag:stm32": { "id": "stm32", "__typename": "Tag", "displayTitle": "Stm32" }, "Tag:programming": { "id": "programming", "__typename": "Tag", "displayTitle": "Programming" }, "ImageMetadata:1*0P7BkmUox48Rak_cta48QA.png": { "id": "1*0P7BkmUox48Rak_cta48QA.png", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Collection:721b17443fd5": { "id": "721b17443fd5", "__typename": "Collection", "name": "Coinmonks", "slug": "coinmonks", "domain": null }, "Post:b7f1a1508e89": { "id": "b7f1a1508e89", "__typename": "Post", "title": "STM32 Blue Pill — Dissecting the WebUSB Bootloader for MakeCode", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89", "previewImage": { "__ref": "ImageMetadata:1*0P7BkmUox48Rak_cta48QA.png" }, "isPublished": true, "firstPublishedAt": 1550250106544, "readingTime": 12.382389937106918, "statusForCollection": "APPROVED", "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": { "__ref": "Collection:721b17443fd5" }, "creator": { "__ref": "User:1da08193a324" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:1*cWkz4VgkkdnGOdTMoAxcmQ.png": { "id": "1*cWkz4VgkkdnGOdTMoAxcmQ.png", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Collection:7b837cf1fd73": { "id": "7b837cf1fd73", "__typename": "Collection", "name": "Noteworthy - The Journal Blog", "slug": "did-you-know-the-journal-blog", "domain": "blog.usejournal.com" }, "Post:1bc1262e398c": { "id": "1bc1262e398c", "__typename": "Post", "title": "Visual Embedded Rust Programming with Visual Studio Code", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fblog.usejournal.com\u002Fvisual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c", "previewImage": { "__ref": "ImageMetadata:1*cWkz4VgkkdnGOdTMoAxcmQ.png" }, "isPublished": true, "firstPublishedAt": 1566020733104, "readingTime": 12.829245283018869, "statusForCollection": "APPROVED", "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": { "__ref": "Collection:7b837cf1fd73" }, "creator": { "__ref": "User:1da08193a324" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:0*MeXAYc_y6MgB1QnB": { "id": "0*MeXAYc_y6MgB1QnB", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "User:60b2314badb3": { "id": "60b2314badb3", "__typename": "User", "name": "Charles B", "username": "charlesbailey333", "bio": "Problem Solver, Ex. Microsoft Intern", "isFollowing": null, "imageId": "0*2HXX7CVzYwG3T2kg", "mediumMemberAt": 0, "hasDomain": false }, "Post:a19d93c8b35b": { "id": "a19d93c8b35b", "__typename": "Post", "title": "Rust Fixes C++’s WORST Mistake", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@charlesbailey333\u002Frust-fixes-c-s-worst-mistake-a19d93c8b35b", "previewImage": { "__ref": "ImageMetadata:0*MeXAYc_y6MgB1QnB" }, "isPublished": true, "firstPublishedAt": 1597077866619, "readingTime": 1.7622641509433963, "statusForCollection": null, "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": null, "creator": { "__ref": "User:60b2314badb3" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:0*9iXFNBg4uL0HBgEF": { "id": "0*9iXFNBg4uL0HBgEF", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Collection:8e221a9247df": { "id": "8e221a9247df", "__typename": "Collection", "name": "The Innovation", "slug": "the-innovation", "domain": null }, "User:5ce09724b131": { "id": "5ce09724b131", "__typename": "User", "name": "Marshal SHI", "username": "marshalshi", "bio": "Robots make our life easier | Robotics, Reinforcement Learning, Web, Python, Rust & Life Hacking", "isFollowing": null, "imageId": "1*txw-PcNnio1Fm7ZbXMJk2w.jpeg", "mediumMemberAt": 1590291032228, "hasDomain": false }, "Post:a93f78ae90d1": { "id": "a93f78ae90d1", "__typename": "Post", "title": "Create a Rust Client for ROS2 from Scratch. Part 1.1: Create the Dynamic Library via CMake & Empy", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fthe-innovation\u002Fcreate-a-rust-client-for-ros2-from-scratch-part-1-1-create-the-dynamic-library-via-cmake-empy-a93f78ae90d1", "previewImage": { "__ref": "ImageMetadata:0*9iXFNBg4uL0HBgEF" }, "isPublished": true, "firstPublishedAt": 1603120383906, "readingTime": 7.9418238993710695, "statusForCollection": "APPROVED", "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": { "__ref": "Collection:8e221a9247df" }, "creator": { "__ref": "User:5ce09724b131" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:0*OLFbLVmSQD3TAGdA.jpg": { "id": "0*OLFbLVmSQD3TAGdA.jpg", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Collection:f5af2b715248": { "id": "f5af2b715248", "__typename": "Collection", "name": "The Startup", "slug": "swlh", "domain": null }, "User:961017da2439": { "id": "961017da2439", "__typename": "User", "name": "Andrew Pritchard", "username": "andrewjpritchard", "bio": "The stories I write are a part of a learning journey through life, logic and programming. Share this journey with me.", "isFollowing": null, "imageId": "2*nxNLtlUzwlel-LCtvSXcKQ.jpeg", "mediumMemberAt": 0, "hasDomain": false }, "Post:291fd1dd924": { "id": "291fd1dd924", "__typename": "Post", "title": "On memoization", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fswlh\u002Fon-memoization-291fd1dd924", "previewImage": { "__ref": "ImageMetadata:0*OLFbLVmSQD3TAGdA.jpg" }, "isPublished": true, "firstPublishedAt": 1560774614793, "readingTime": 5.266981132075472, "statusForCollection": "APPROVED", "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": { "__ref": "Collection:f5af2b715248" }, "creator": { "__ref": "User:961017da2439" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:1*8_cv6T_EXcdgO62xA3TiaA.jpeg": { "id": "1*8_cv6T_EXcdgO62xA3TiaA.jpeg", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Collection:d0b105d10f0a": { "id": "d0b105d10f0a", "__typename": "Collection", "name": "Better Programming", "slug": "better-programming", "domain": null }, "User:47a6bae243a3": { "id": "47a6bae243a3", "__typename": "User", "name": "Abhishek Gupta", "username": "abhishek1987", "bio": "Currently working with Kafka, Databases, Azure, Kubernetes and related open source projects | Confluent Community Catalyst (for Kafka)", "isFollowing": null, "imageId": "1*ZdSjzBPYoAeJU5cB5f2_xA.jpeg", "mediumMemberAt": 0, "hasDomain": false }, "Post:177b03a4152": { "id": "177b03a4152", "__typename": "Post", "title": "Enums and Pattern Matching in Rust", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fbetter-programming\u002Frust-enums-and-pattern-matching-177b03a4152", "previewImage": { "__ref": "ImageMetadata:1*8_cv6T_EXcdgO62xA3TiaA.jpeg" }, "isPublished": true, "firstPublishedAt": 1582988864046, "readingTime": 4.237735849056604, "statusForCollection": "APPROVED", "isLocked": false, "isShortform": false, "visibility": "PUBLIC", "collection": { "__ref": "Collection:d0b105d10f0a" }, "creator": { "__ref": "User:47a6bae243a3" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:1*-mTKOgeZ9rI52aFwlwqPVg.jpeg": { "id": "1*-mTKOgeZ9rI52aFwlwqPVg.jpeg", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Post:4054a5922493": { "id": "4054a5922493", "__typename": "Post", "title": "Porting Apache Mynewt OS to GigaDevice GD32 VF103 on RISC-V", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fswlh\u002Fporting-apache-mynewt-os-to-gigadevice-gd32-vf103-on-risc-v-4054a5922493", "previewImage": { "__ref": "ImageMetadata:1*-mTKOgeZ9rI52aFwlwqPVg.jpeg" }, "isPublished": true, "firstPublishedAt": 1572370263288, "readingTime": 10.85943396226415, "statusForCollection": "APPROVED", "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": { "__ref": "Collection:f5af2b715248" }, "creator": { "__ref": "User:1da08193a324" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "ImageMetadata:1*1oFvRxqOf1kUmCAxPaJXpw.jpeg": { "id": "1*1oFvRxqOf1kUmCAxPaJXpw.jpeg", "__typename": "ImageMetadata", "focusPercentX": null, "focusPercentY": null }, "Post:81b74161c159": { "id": "81b74161c159", "__typename": "Post", "title": "Sneak Peek of PineTime Smart Watch… And why it’s perfect for teaching IoT", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002Fswlh\u002Fsneak-peek-of-pinetime-smart-watch-and-why-its-perfect-for-teaching-iot-81b74161c159", "previewImage": { "__ref": "ImageMetadata:1*1oFvRxqOf1kUmCAxPaJXpw.jpeg" }, "isPublished": true, "firstPublishedAt": 1573777723672, "readingTime": 14.87547169811321, "statusForCollection": "APPROVED", "isLocked": true, "isShortform": false, "visibility": "LOCKED", "collection": { "__ref": "Collection:f5af2b715248" }, "creator": { "__ref": "User:1da08193a324" }, "previewContent": { "__typename": "PreviewContent", "isFullContent": false } }, "Post:ef62a7e28f7e": { "id": "ef62a7e28f7e", "__typename": "Post", "canonicalUrl": "", "collection": null, "content({\"postMeteringOptions\":{}})": { "__typename": "PostContent", "isLockedPreviewOnly": false, "validatedShareKey": "", "bodyModel": { "__typename": "RichText", "paragraphs": [{ "__ref": "Paragraph:2e4d52ff0bcf_0" }, { "__ref": "Paragraph:2e4d52ff0bcf_1" }, { "__ref": "Paragraph:2e4d52ff0bcf_2" }, { "__ref": "Paragraph:2e4d52ff0bcf_3" }, { "__ref": "Paragraph:2e4d52ff0bcf_4" }, { "__ref": "Paragraph:2e4d52ff0bcf_5" }, { "__ref": "Paragraph:2e4d52ff0bcf_6" }, { "__ref": "Paragraph:2e4d52ff0bcf_7" }, { "__ref": "Paragraph:2e4d52ff0bcf_8" }, { "__ref": "Paragraph:2e4d52ff0bcf_9" }, { "__ref": "Paragraph:2e4d52ff0bcf_10" }, { "__ref": "Paragraph:2e4d52ff0bcf_11" }, { "__ref": "Paragraph:2e4d52ff0bcf_12" }, { "__ref": "Paragraph:2e4d52ff0bcf_13" }, { "__ref": "Paragraph:2e4d52ff0bcf_14" }, { "__ref": "Paragraph:2e4d52ff0bcf_15" }, { "__ref": "Paragraph:2e4d52ff0bcf_16" }, { "__ref": "Paragraph:2e4d52ff0bcf_17" }, { "__ref": "Paragraph:2e4d52ff0bcf_18" }, { "__ref": "Paragraph:2e4d52ff0bcf_19" }, { "__ref": "Paragraph:2e4d52ff0bcf_20" }, { "__ref": "Paragraph:2e4d52ff0bcf_21" }, { "__ref": "Paragraph:2e4d52ff0bcf_22" }, { "__ref": "Paragraph:2e4d52ff0bcf_23" }, { "__ref": "Paragraph:2e4d52ff0bcf_24" }, { "__ref": "Paragraph:2e4d52ff0bcf_25" }, { "__ref": "Paragraph:2e4d52ff0bcf_26" }, { "__ref": "Paragraph:2e4d52ff0bcf_27" }, { "__ref": "Paragraph:2e4d52ff0bcf_28" }, { "__ref": "Paragraph:2e4d52ff0bcf_29" }, { "__ref": "Paragraph:2e4d52ff0bcf_30" }, { "__ref": "Paragraph:2e4d52ff0bcf_31" }, { "__ref": "Paragraph:2e4d52ff0bcf_32" }, { "__ref": "Paragraph:2e4d52ff0bcf_33" }, { "__ref": "Paragraph:2e4d52ff0bcf_34" }, { "__ref": "Paragraph:2e4d52ff0bcf_35" }, { "__ref": "Paragraph:2e4d52ff0bcf_36" }, { "__ref": "Paragraph:2e4d52ff0bcf_37" }, { "__ref": "Paragraph:2e4d52ff0bcf_38" }, { "__ref": "Paragraph:2e4d52ff0bcf_39" }, { "__ref": "Paragraph:2e4d52ff0bcf_40" }, { "__ref": "Paragraph:2e4d52ff0bcf_41" }, { "__ref": "Paragraph:2e4d52ff0bcf_42" }, { "__ref": "Paragraph:2e4d52ff0bcf_43" }, { "__ref": "Paragraph:2e4d52ff0bcf_44" }, { "__ref": "Paragraph:2e4d52ff0bcf_45" }, { "__ref": "Paragraph:2e4d52ff0bcf_46" }, { "__ref": "Paragraph:2e4d52ff0bcf_47" }, { "__ref": "Paragraph:2e4d52ff0bcf_48" }, { "__ref": "Paragraph:2e4d52ff0bcf_49" }, { "__ref": "Paragraph:2e4d52ff0bcf_50" }, { "__ref": "Paragraph:2e4d52ff0bcf_51" }, { "__ref": "Paragraph:2e4d52ff0bcf_52" }, { "__ref": "Paragraph:2e4d52ff0bcf_53" }, { "__ref": "Paragraph:2e4d52ff0bcf_54" }, { "__ref": "Paragraph:2e4d52ff0bcf_55" }, { "__ref": "Paragraph:2e4d52ff0bcf_56" }, { "__ref": "Paragraph:2e4d52ff0bcf_57" }, { "__ref": "Paragraph:2e4d52ff0bcf_58" }, { "__ref": "Paragraph:2e4d52ff0bcf_59" }, { "__ref": "Paragraph:2e4d52ff0bcf_60" }, { "__ref": "Paragraph:2e4d52ff0bcf_61" }, { "__ref": "Paragraph:2e4d52ff0bcf_62" }, { "__ref": "Paragraph:2e4d52ff0bcf_63" }, { "__ref": "Paragraph:2e4d52ff0bcf_64" }, { "__ref": "Paragraph:2e4d52ff0bcf_65" }, { "__ref": "Paragraph:2e4d52ff0bcf_66" }, { "__ref": "Paragraph:2e4d52ff0bcf_67" }, { "__ref": "Paragraph:2e4d52ff0bcf_68" }, { "__ref": "Paragraph:2e4d52ff0bcf_69" }, { "__ref": "Paragraph:2e4d52ff0bcf_70" }, { "__ref": "Paragraph:2e4d52ff0bcf_71" }, { "__ref": "Paragraph:2e4d52ff0bcf_72" }, { "__ref": "Paragraph:2e4d52ff0bcf_73" }, { "__ref": "Paragraph:2e4d52ff0bcf_74" }, { "__ref": "Paragraph:2e4d52ff0bcf_75" }, { "__ref": "Paragraph:2e4d52ff0bcf_76" }, { "__ref": "Paragraph:2e4d52ff0bcf_77" }, { "__ref": "Paragraph:2e4d52ff0bcf_78" }, { "__ref": "Paragraph:2e4d52ff0bcf_79" }, { "__ref": "Paragraph:2e4d52ff0bcf_80" }, { "__ref": "Paragraph:2e4d52ff0bcf_81" }, { "__ref": "Paragraph:2e4d52ff0bcf_82" }, { "__ref": "Paragraph:2e4d52ff0bcf_83" }, { "__ref": "Paragraph:2e4d52ff0bcf_84" }, { "__ref": "Paragraph:2e4d52ff0bcf_85" }, { "__ref": "Paragraph:2e4d52ff0bcf_86" }, { "__ref": "Paragraph:2e4d52ff0bcf_87" }, { "__ref": "Paragraph:2e4d52ff0bcf_88" }, { "__ref": "Paragraph:2e4d52ff0bcf_89" }, { "__ref": "Paragraph:2e4d52ff0bcf_90" }, { "__ref": "Paragraph:2e4d52ff0bcf_91" }, { "__ref": "Paragraph:2e4d52ff0bcf_92" }, { "__ref": "Paragraph:2e4d52ff0bcf_93" }, { "__ref": "Paragraph:2e4d52ff0bcf_94" }, { "__ref": "Paragraph:2e4d52ff0bcf_95" }, { "__ref": "Paragraph:2e4d52ff0bcf_96" }, { "__ref": "Paragraph:2e4d52ff0bcf_97" }, { "__ref": "Paragraph:2e4d52ff0bcf_98" }, { "__ref": "Paragraph:2e4d52ff0bcf_99" }, { "__ref": "Paragraph:2e4d52ff0bcf_100" }, { "__ref": "Paragraph:2e4d52ff0bcf_101" }, { "__ref": "Paragraph:2e4d52ff0bcf_102" }, { "__ref": "Paragraph:2e4d52ff0bcf_103" }, { "__ref": "Paragraph:2e4d52ff0bcf_104" }, { "__ref": "Paragraph:2e4d52ff0bcf_105" }, { "__ref": "Paragraph:2e4d52ff0bcf_106" }, { "__ref": "Paragraph:2e4d52ff0bcf_107" }, { "__ref": "Paragraph:2e4d52ff0bcf_108" }, { "__ref": "Paragraph:2e4d52ff0bcf_109" }, { "__ref": "Paragraph:2e4d52ff0bcf_110" }, { "__ref": "Paragraph:2e4d52ff0bcf_111" }, { "__ref": "Paragraph:2e4d52ff0bcf_112" }, { "__ref": "Paragraph:2e4d52ff0bcf_113" }, { "__ref": "Paragraph:2e4d52ff0bcf_114" }, { "__ref": "Paragraph:2e4d52ff0bcf_115" }, { "__ref": "Paragraph:2e4d52ff0bcf_116" }, { "__ref": "Paragraph:2e4d52ff0bcf_117" }, { "__ref": "Paragraph:2e4d52ff0bcf_118" }, { "__ref": "Paragraph:2e4d52ff0bcf_119" }, { "__ref": "Paragraph:2e4d52ff0bcf_120" }, { "__ref": "Paragraph:2e4d52ff0bcf_121" }, { "__ref": "Paragraph:2e4d52ff0bcf_122" }, { "__ref": "Paragraph:2e4d52ff0bcf_123" }, { "__ref": "Paragraph:2e4d52ff0bcf_124" }, { "__ref": "Paragraph:2e4d52ff0bcf_125" }, { "__ref": "Paragraph:2e4d52ff0bcf_126" }, { "__ref": "Paragraph:2e4d52ff0bcf_127" }, { "__ref": "Paragraph:2e4d52ff0bcf_128" }, { "__ref": "Paragraph:2e4d52ff0bcf_129" }, { "__ref": "Paragraph:2e4d52ff0bcf_130" }, { "__ref": "Paragraph:2e4d52ff0bcf_131" }, { "__ref": "Paragraph:2e4d52ff0bcf_132" }, { "__ref": "Paragraph:2e4d52ff0bcf_133" }, { "__ref": "Paragraph:2e4d52ff0bcf_134" }, { "__ref": "Paragraph:2e4d52ff0bcf_135" }, { "__ref": "Paragraph:2e4d52ff0bcf_136" }, { "__ref": "Paragraph:2e4d52ff0bcf_137" }, { "__ref": "Paragraph:2e4d52ff0bcf_138" }, { "__ref": "Paragraph:2e4d52ff0bcf_139" }, { "__ref": "Paragraph:2e4d52ff0bcf_140" }, { "__ref": "Paragraph:2e4d52ff0bcf_141" }, { "__ref": "Paragraph:2e4d52ff0bcf_142" }, { "__ref": "Paragraph:2e4d52ff0bcf_143" }, { "__ref": "Paragraph:2e4d52ff0bcf_144" }, { "__ref": "Paragraph:2e4d52ff0bcf_145" }, { "__ref": "Paragraph:2e4d52ff0bcf_146" }, { "__ref": "Paragraph:2e4d52ff0bcf_147" }, { "__ref": "Paragraph:2e4d52ff0bcf_148" }, { "__ref": "Paragraph:2e4d52ff0bcf_149" }, { "__ref": "Paragraph:2e4d52ff0bcf_150" }, { "__ref": "Paragraph:2e4d52ff0bcf_151" }, { "__ref": "Paragraph:2e4d52ff0bcf_152" }, { "__ref": "Paragraph:2e4d52ff0bcf_153" }, { "__ref": "Paragraph:2e4d52ff0bcf_154" }, { "__ref": "Paragraph:2e4d52ff0bcf_155" }, { "__ref": "Paragraph:2e4d52ff0bcf_156" }, { "__ref": "Paragraph:2e4d52ff0bcf_157" }, { "__ref": "Paragraph:2e4d52ff0bcf_158" }, { "__ref": "Paragraph:2e4d52ff0bcf_159" }, { "__ref": "Paragraph:2e4d52ff0bcf_160" }, { "__ref": "Paragraph:2e4d52ff0bcf_161" }, { "__ref": "Paragraph:2e4d52ff0bcf_162" }, { "__ref": "Paragraph:2e4d52ff0bcf_163" }, { "__ref": "Paragraph:2e4d52ff0bcf_164" }, { "__ref": "Paragraph:2e4d52ff0bcf_165" }, { "__ref": "Paragraph:2e4d52ff0bcf_166" }, { "__ref": "Paragraph:2e4d52ff0bcf_167" }, { "__ref": "Paragraph:2e4d52ff0bcf_168" }, { "__ref": "Paragraph:2e4d52ff0bcf_169" }, { "__ref": "Paragraph:2e4d52ff0bcf_170" }, { "__ref": "Paragraph:2e4d52ff0bcf_171" }, { "__ref": "Paragraph:2e4d52ff0bcf_172" }, { "__ref": "Paragraph:2e4d52ff0bcf_173" }, { "__ref": "Paragraph:2e4d52ff0bcf_174" }, { "__ref": "Paragraph:2e4d52ff0bcf_175" }, { "__ref": "Paragraph:2e4d52ff0bcf_176" }, { "__ref": "Paragraph:2e4d52ff0bcf_177" }, { "__ref": "Paragraph:2e4d52ff0bcf_178" }, { "__ref": "Paragraph:2e4d52ff0bcf_179" }, { "__ref": "Paragraph:2e4d52ff0bcf_180" }, { "__ref": "Paragraph:2e4d52ff0bcf_181" }, { "__ref": "Paragraph:2e4d52ff0bcf_182" }, { "__ref": "Paragraph:2e4d52ff0bcf_183" }, { "__ref": "Paragraph:2e4d52ff0bcf_184" }, { "__ref": "Paragraph:2e4d52ff0bcf_185" }, { "__ref": "Paragraph:2e4d52ff0bcf_186" }, { "__ref": "Paragraph:2e4d52ff0bcf_187" }, { "__ref": "Paragraph:2e4d52ff0bcf_188" }, { "__ref": "Paragraph:2e4d52ff0bcf_189" }, { "__ref": "Paragraph:2e4d52ff0bcf_190" }, { "__ref": "Paragraph:2e4d52ff0bcf_191" }, { "__ref": "Paragraph:2e4d52ff0bcf_192" }, { "__ref": "Paragraph:2e4d52ff0bcf_193" }, { "__ref": "Paragraph:2e4d52ff0bcf_194" }, { "__ref": "Paragraph:2e4d52ff0bcf_195" }, { "__ref": "Paragraph:2e4d52ff0bcf_196" }, { "__ref": "Paragraph:2e4d52ff0bcf_197" }, { "__ref": "Paragraph:2e4d52ff0bcf_198" }, { "__ref": "Paragraph:2e4d52ff0bcf_199" }, { "__ref": "Paragraph:2e4d52ff0bcf_200" }, { "__ref": "Paragraph:2e4d52ff0bcf_201" }, { "__ref": "Paragraph:2e4d52ff0bcf_202" }, { "__ref": "Paragraph:2e4d52ff0bcf_203" }, { "__ref": "Paragraph:2e4d52ff0bcf_204" }, { "__ref": "Paragraph:2e4d52ff0bcf_205" }, { "__ref": "Paragraph:2e4d52ff0bcf_206" }, { "__ref": "Paragraph:2e4d52ff0bcf_207" }, { "__ref": "Paragraph:2e4d52ff0bcf_208" }, { "__ref": "Paragraph:2e4d52ff0bcf_209" }, { "__ref": "Paragraph:2e4d52ff0bcf_210" }, { "__ref": "Paragraph:2e4d52ff0bcf_211" }, { "__ref": "Paragraph:2e4d52ff0bcf_212" }, { "__ref": "Paragraph:2e4d52ff0bcf_213" }, { "__ref": "Paragraph:2e4d52ff0bcf_214" }, { "__ref": "Paragraph:2e4d52ff0bcf_215" }, { "__ref": "Paragraph:2e4d52ff0bcf_216" }, { "__ref": "Paragraph:2e4d52ff0bcf_217" }, { "__ref": "Paragraph:2e4d52ff0bcf_218" }, { "__ref": "Paragraph:2e4d52ff0bcf_219" }, { "__ref": "Paragraph:2e4d52ff0bcf_220" }, { "__ref": "Paragraph:2e4d52ff0bcf_221" }, { "__ref": "Paragraph:2e4d52ff0bcf_222" }, { "__ref": "Paragraph:2e4d52ff0bcf_223" }, { "__ref": "Paragraph:2e4d52ff0bcf_224" }, { "__ref": "Paragraph:2e4d52ff0bcf_225" }, { "__ref": "Paragraph:2e4d52ff0bcf_226" }, { "__ref": "Paragraph:2e4d52ff0bcf_227" }, { "__ref": "Paragraph:2e4d52ff0bcf_228" }, { "__ref": "Paragraph:2e4d52ff0bcf_229" }, { "__ref": "Paragraph:2e4d52ff0bcf_230" }, { "__ref": "Paragraph:2e4d52ff0bcf_231" }, { "__ref": "Paragraph:2e4d52ff0bcf_232" }, { "__ref": "Paragraph:2e4d52ff0bcf_233" }, { "__ref": "Paragraph:2e4d52ff0bcf_234" }, { "__ref": "Paragraph:2e4d52ff0bcf_235" }, { "__ref": "Paragraph:2e4d52ff0bcf_236" }, { "__ref": "Paragraph:2e4d52ff0bcf_237" }, { "__ref": "Paragraph:2e4d52ff0bcf_238" }, { "__ref": "Paragraph:2e4d52ff0bcf_239" }, { "__ref": "Paragraph:2e4d52ff0bcf_240" }, { "__ref": "Paragraph:2e4d52ff0bcf_241" }, { "__ref": "Paragraph:2e4d52ff0bcf_242" }, { "__ref": "Paragraph:2e4d52ff0bcf_243" }, { "__ref": "Paragraph:2e4d52ff0bcf_244" }, { "__ref": "Paragraph:2e4d52ff0bcf_245" }, { "__ref": "Paragraph:2e4d52ff0bcf_246" }, { "__ref": "Paragraph:2e4d52ff0bcf_247" }, { "__ref": "Paragraph:2e4d52ff0bcf_248" }, { "__ref": "Paragraph:2e4d52ff0bcf_249" }, { "__ref": "Paragraph:2e4d52ff0bcf_250" }, { "__ref": "Paragraph:2e4d52ff0bcf_251" }, { "__ref": "Paragraph:2e4d52ff0bcf_252" }, { "__ref": "Paragraph:2e4d52ff0bcf_253" }, { "__ref": "Paragraph:2e4d52ff0bcf_254" }, { "__ref": "Paragraph:2e4d52ff0bcf_255" }, { "__ref": "Paragraph:2e4d52ff0bcf_256" }, { "__ref": "Paragraph:2e4d52ff0bcf_257" }, { "__ref": "Paragraph:2e4d52ff0bcf_258" }, { "__ref": "Paragraph:2e4d52ff0bcf_259" }, { "__ref": "Paragraph:2e4d52ff0bcf_260" }, { "__ref": "Paragraph:2e4d52ff0bcf_261" }, { "__ref": "Paragraph:2e4d52ff0bcf_262" }, { "__ref": "Paragraph:2e4d52ff0bcf_263" }, { "__ref": "Paragraph:2e4d52ff0bcf_264" }, { "__ref": "Paragraph:2e4d52ff0bcf_265" }, { "__ref": "Paragraph:2e4d52ff0bcf_266" }, { "__ref": "Paragraph:2e4d52ff0bcf_267" }, { "__ref": "Paragraph:2e4d52ff0bcf_268" }, { "__ref": "Paragraph:2e4d52ff0bcf_269" }, { "__ref": "Paragraph:2e4d52ff0bcf_270" }, { "__ref": "Paragraph:2e4d52ff0bcf_271" }, { "__ref": "Paragraph:2e4d52ff0bcf_272" }, { "__ref": "Paragraph:2e4d52ff0bcf_273" }, { "__ref": "Paragraph:2e4d52ff0bcf_274" }, { "__ref": "Paragraph:2e4d52ff0bcf_275" }, { "__ref": "Paragraph:2e4d52ff0bcf_276" }, { "__ref": "Paragraph:2e4d52ff0bcf_277" }, { "__ref": "Paragraph:2e4d52ff0bcf_278" }, { "__ref": "Paragraph:2e4d52ff0bcf_279" }, { "__ref": "Paragraph:2e4d52ff0bcf_280" }, { "__ref": "Paragraph:2e4d52ff0bcf_281" }, { "__ref": "Paragraph:2e4d52ff0bcf_282" }, { "__ref": "Paragraph:2e4d52ff0bcf_283" }, { "__ref": "Paragraph:2e4d52ff0bcf_284" }, { "__ref": "Paragraph:2e4d52ff0bcf_285" }, { "__ref": "Paragraph:2e4d52ff0bcf_286" }, { "__ref": "Paragraph:2e4d52ff0bcf_287" }, { "__ref": "Paragraph:2e4d52ff0bcf_288" }, { "__ref": "Paragraph:2e4d52ff0bcf_289" }, { "__ref": "Paragraph:2e4d52ff0bcf_290" }, { "__ref": "Paragraph:2e4d52ff0bcf_291" }, { "__ref": "Paragraph:2e4d52ff0bcf_292" }, { "__ref": "Paragraph:2e4d52ff0bcf_293" }, { "__ref": "Paragraph:2e4d52ff0bcf_294" }, { "__ref": "Paragraph:2e4d52ff0bcf_295" }, { "__ref": "Paragraph:2e4d52ff0bcf_296" }, { "__ref": "Paragraph:2e4d52ff0bcf_297" }, { "__ref": "Paragraph:2e4d52ff0bcf_298" }, { "__ref": "Paragraph:2e4d52ff0bcf_299" }, { "__ref": "Paragraph:2e4d52ff0bcf_300" }, { "__ref": "Paragraph:2e4d52ff0bcf_301" }, { "__ref": "Paragraph:2e4d52ff0bcf_302" }, { "__ref": "Paragraph:2e4d52ff0bcf_303" }, { "__ref": "Paragraph:2e4d52ff0bcf_304" }, { "__ref": "Paragraph:2e4d52ff0bcf_305" }, { "__ref": "Paragraph:2e4d52ff0bcf_306" }, { "__ref": "Paragraph:2e4d52ff0bcf_307" }, { "__ref": "Paragraph:2e4d52ff0bcf_308" }, { "__ref": "Paragraph:2e4d52ff0bcf_309" }, { "__ref": "Paragraph:2e4d52ff0bcf_310" }, { "__ref": "Paragraph:2e4d52ff0bcf_311" }, { "__ref": "Paragraph:2e4d52ff0bcf_312" }], "sections": [{ "__typename": "Section", "name": "54bb", "startIndex": 0, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "7c8a", "startIndex": 13, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "cf5d", "startIndex": 22, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "675e", "startIndex": 25, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "f07f", "startIndex": 57, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "075a", "startIndex": 153, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "6df3", "startIndex": 181, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "d6c6", "startIndex": 185, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "dc86", "startIndex": 193, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "6763", "startIndex": 196, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "770a", "startIndex": 207, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "44ca", "startIndex": 222, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "67ff", "startIndex": 233, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "a3bd", "startIndex": 247, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "8505", "startIndex": 259, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "b569", "startIndex": 274, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "dc42", "startIndex": 288, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }, { "__typename": "Section", "name": "0faf", "startIndex": 301, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null }] } }, "creator": { "__ref": "User:1da08193a324" }, "customStyleSheet": null, "firstPublishedAt": 1564933197759, "isLocked": false, "isPublished": true, "isShortform": false, "isEmail": false, "layerCake": 0, "primaryTopic": null, "title": "Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt", "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20201025032303\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e", "isLimitedState": false, "visibility": "PUBLIC", "license": "ALL_RIGHTS_RESERVED", "allowResponses": true, "newsletterId": "", "sequence": null, "tags": [{ "__ref": "Tag:rust" }, { "__ref": "Tag:internet-of-things" }, { "__ref": "Tag:stm32" }, { "__ref": "Tag:programming" }], "topics": [], "viewerClapCount": 0, "inResponseToPostResult": null, "socialTitle": "", "socialDek": "", "metaDescription": "Safer, simpler NB-IoT coding with Embedded Rust and Visual Studio Code", "latestPublishedAt": 1580634034688, "readingTime": 21.099056603773583, "previewContent": { "__typename": "PreviewContent", "subtitle": "Safer, simpler NB-IoT coding with Embedded Rust and Visual Studio Code" }, "previewImage": { "__ref": "ImageMetadata:1*I2s4rSDpnbim1sOeMzFmIQ.jpeg" }, "creatorPartnerProgramEnrollmentStatus": "PERMISSION_DENIED", "clapCount": 302, "lockedSource": "LOCKED_POST_SOURCE_NONE", "isSuspended": false, "pendingCollection": null, "statusForCollection": null, "pinnedAt": 0, "pinnedByCreatorAt": 0, "curationEligibleAt": 1564933196113, "shareKey": null, "responsesCount": 3, "internalLinks({\"paging\":{\"limit\":8}})": { "__typename": "InternalLinksConnection", "items": [{ "__ref": "Post:b7f1a1508e89" }, { "__ref": "Post:1bc1262e398c" }, { "__ref": "Post:a19d93c8b35b" }, { "__ref": "Post:a93f78ae90d1" }, { "__ref": "Post:291fd1dd924" }, { "__ref": "Post:177b03a4152" }, { "__ref": "Post:4054a5922493" }, { "__ref": "Post:81b74161c159" }] }, "collaborators": [], "translationSourcePost": null, "inResponseToMediaResource": null, "isDistributionAlertDismissed": true, "audioVersionUrl": "", "seoTitle": "", "updatedAt": 1580634035203, "shortformType": "SHORTFORM_TYPE_LINK", "structuredData": "", "seoDescription": "", "postResponses": { "__typename": "PostResponses", "count": 3 }, "latestPublishedVersion": "2e4d52ff0bcf", "readingList": "READING_LIST_NONE", "voterCount": 27, "recommenders": [] } }</script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/manifest.5594cd5b.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/vendors~main.cba54eba.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/main.88024a24.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/vendors~instrumentation.937ef40a.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/instrumentation.1a5d8d0b.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/reporting.cb7b50b3.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/vendors~AMPPost~CollectionAbout~CollectionHomepage~CollectionHomepagePreview~CollectionNewShortformE~74d53cd4.ee0a8adb.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/vendors~AMPPost~CollectionHomepage~CollectionHomepagePreview~CollectionStyleEditor~CollectionTagged~~42f7530a.0dd746e8.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/vendors~AMPPost~CollectionNewShortformEditor~CollectionPostShortformEditor~DebugCachedPost~Post~Sequ~19f09bd3.1bf7a765.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/AMPPost~CollectionHomepage~CollectionHomepagePreview~CollectionNewShortformEditor~CollectionPostShor~250d4f3e.058a6b0f.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20201025032303js_/https://cdn-client.medium.com/lite/static/js/Post.6a773d4e.chunk.js"></script>
  <script>window.main();</script>
</body>

</html>
<!--
     FILE ARCHIVED ON 03:23:03 Oct 25, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 01:36:55 Feb 23, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  exclusion.robots: 0.382
  captures_list: 72.888
  esindex: 0.013
  CDXLines.iter: 22.873 (3)
  PetaboxLoader3.resolve: 1119.699
  LoadShardBlock: 45.488 (3)
  load_resource: 1162.518
  exclusion.robots.policy: 0.366
  PetaboxLoader3.datanode: 46.311 (4)
  RedisCDXSource: 0.681
-->