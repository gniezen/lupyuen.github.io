<!doctype html>
<html lang="en">

<head>
  <script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
  <script
    type="text/javascript">window.addEventListener('DOMContentLoaded', function () { var v = archive_analytics.values; v.service = 'wb'; v.server_name = 'wwwb-app31.us.archive.org'; v.server_ms = 289; archive_analytics.send_pageview({}); });</script>
  <script type="text/javascript" src="/_static/js/playback.bundle.js?v=bQvHU8mx" charset="utf-8"></script>
  <script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
  <script type="text/javascript">
    __wm.init("https://web.archive.org/web");
    __wm.wombat("https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&sk=f58f4cf6c608fded4b354063e474a93b", "20191204194225", "https://web.archive.org/", "web", "/_static/",
      "1575488545");
  </script>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <!-- End Wayback Rewrite JS Include -->
  <script>!function (c, f) { var t, o, i, e = [], r = { passive: !0, capture: !0 }, n = new Date, a = "pointerup", u = "pointercancel"; function p(n, e) { t || (t = e, o = n, i = new Date, w(f), s()) } function s() { 0 <= o && o < i - n && (e.forEach(function (n) { n(o, t) }), e = []) } function l(n) { if (n.cancelable) { var e = (1e12 < n.timeStamp ? new Date : performance.now()) - n.timeStamp; "pointerdown" == n.type ? function (n, e) { function t() { p(n, e), i() } function o() { i() } function i() { f(a, t, r), f(u, o, r) } c(a, t, r), c(u, o, r) }(e, n) : p(e, n) } } function w(e) { ["click", "mousedown", "keydown", "touchstart", "pointerdown"].forEach(function (n) { e(n, l, r) }) } w(c), self.perfMetrics = self.perfMetrics || {}, self.perfMetrics.onFirstInputDelay = function (n) { e.push(n), s() } }(addEventListener, removeEventListener)</script>
  <title data-rh="true">Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" name="twitter:app:name:iphone" content="Medium" />
  <meta data-rh="true" name="twitter:app:id:iphone" content="828256236" />
  <meta data-rh="true" property="al:ios:app_name" content="Medium" />
  <meta data-rh="true" property="al:ios:app_store_id" content="828256236" />
  <meta data-rh="true" property="al:android:package" content="com.medium.reader" />
  <meta data-rh="true" property="fb:app_id" content="542599432471018" />
  <meta data-rh="true" property="og:site_name" content="Medium" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2019-08-17T17:17:23.538Z" />
  <meta data-rh="true" name="title" content="Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill" />
  <meta data-rh="true" property="og:title" content="Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill" />
  <meta data-rh="true" property="twitter:title"
    content="Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill" />
  <meta data-rh="true" name="twitter:site" content="@Medium" />
  <meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/c86b119fe5f" />
  <meta data-rh="true" property="al:android:url" content="medium://p/c86b119fe5f" />
  <meta data-rh="true" property="al:ios:url" content="medium://p/c86b119fe5f" />
  <meta data-rh="true" property="al:android:app_name" content="Medium" />
  <meta data-rh="true" name="description"
    content="Build IoT devices the smarter, safer way with Rust and Apache Mynewt" />
  <meta data-rh="true" property="og:description"
    content="Build IoT devices the smarter, safer way with Rust and Apache Mynewt" />
  <meta data-rh="true" property="twitter:description"
    content="Build IoT devices the smarter, safer way with Rust and Apache Mynewt" />
  <meta data-rh="true" property="og:url"
    content="https://web.archive.org/web/20191204194225/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f" />
  <meta data-rh="true" property="al:web:url"
    content="https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f" />
  <meta data-rh="true" property="og:image"
    content="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/1200/1*fyYjlV_EPqraAEYuRbst1A.png" />
  <meta data-rh="true" name="twitter:image:src"
    content="https://miro.medium.com/max/1200/1*fyYjlV_EPqraAEYuRbst1A.png" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" property="article:author" content="https://medium.com/@ly.lee" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="19 min read" />
  <meta data-rh="true" name="parsely-post-id" content="c86b119fe5f" />
  <link data-rh="true" rel="publisher" href="https://plus.google.com/103654360130207659246" />
  <link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium"
    href="/web/20191204194225/https://medium.com/osd.xml" />
  <link data-rh="true" rel="apple-touch-icon" sizes="152x152"
    href="https://web.archive.org/web/20191204194225im_/https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="120x120"
    href="https://web.archive.org/web/20191204194225im_/https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="76x76"
    href="https://web.archive.org/web/20191204194225im_/https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="60x60"
    href="https://web.archive.org/web/20191204194225im_/https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="mask-icon"
    href="https://web.archive.org/web/20191204194225im_/https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg"
    color="#171717" />
  <link data-rh="true" rel="icon"
    href="https://web.archive.org/web/20191204194225im_/https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" />
  <link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css"
    href="https://web.archive.org/web/20191204194225cs_/https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css" />
  <link data-rh="true" rel="author" href="https://medium.com/@ly.lee" />
  <link data-rh="true" rel="canonical"
    href="https://web.archive.org/web/20191204194225/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f" />
  <link data-rh="true" rel="alternate"
    href="https://web.archive.org/web/20191204194225/android-app://com.medium.reader/https/medium.com/p/c86b119fe5f" />
  <script data-rh="true"
    type="application/ld+json">{"@context":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttp:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*fyYjlV_EPqraAEYuRbst1A.png"],"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f","dateCreated":"2019-06-09T14:47:44.025Z","datePublished":"2019-06-09T14:47:44.025Z","dateModified":"2019-08-17T17:17:23.969Z","headline":"Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill","name":"Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill","description":"Build IoT devices the smarter, safer way with Rust and Apache Mynewt","identifier":"c86b119fe5f","keywords":["Lite:true","Tag:Programming","Tag:Internet of Things","Tag:Embedded Systems","Tag:Rust","Tag:Stm32","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:0"],"author":{"@type":"Person","name":"Lup Yuen Lee 李立源","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee"},"creator":["Lup Yuen Lee 李立源"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f"}</script>
  <script data-rh="true">(function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://web.archive.org/web/20191204194225/https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-24232453-2', 'auto');
    ga('send', 'pageview');</script>
  <link rel="preload" href="https://web.archive.org/web/20191204194225/https://cdn.optimizely.com/js/16180790160.js"
    as="script">
  <style type="text/css" data-fela-rehydration="498" data-fela-type="STATIC">
    html {
      box-sizing: border-box
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit
    }

    body {
      margin: 0;
      padding: 0;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      color: rgba(0, 0, 0, 0.8);
      position: relative;
      min-height: 100vh
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    dl,
    dd,
    ol,
    ul,
    menu,
    figure,
    blockquote,
    p,
    pre,
    form {
      margin: 0
    }

    menu,
    ol,
    ul {
      padding: 0;
      list-style: none;
      list-style-image: none
    }

    main {
      display: block
    }

    a {
      color: inherit;
      text-decoration: none
    }

    a,
    button,
    input {
      -webkit-tap-highlight-color: transparent
    }

    img,
    svg {
      vertical-align: middle
    }

    button {
      background: transparent;
      overflow: visible
    }

    button,
    input,
    optgroup,
    select,
    textarea {
      margin: 0
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="KEYFRAME">
    @-webkit-keyframes k1 {
      0% {
        transform: scale(1);
        opacity: 1
      }

      70% {
        transform: scale(1.4);
        opacity: 0
      }

      100% {
        opacity: 0
      }
    }

    @-moz-keyframes k1 {
      0% {
        transform: scale(1);
        opacity: 1
      }

      70% {
        transform: scale(1.4);
        opacity: 0
      }

      100% {
        opacity: 0
      }
    }

    @keyframes k1 {
      0% {
        transform: scale(1);
        opacity: 1
      }

      70% {
        transform: scale(1.4);
        opacity: 0
      }

      100% {
        opacity: 0
      }
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE">
    .a {
      font-family: medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif
    }

    .b {
      font-weight: 400
    }

    .c {
      background-color: rgba(255, 255, 255, 1)
    }

    .l {
      height: 100vh
    }

    .m {
      width: 100vw
    }

    .n {
      display: flex
    }

    .o {
      align-items: center
    }

    .p {
      justify-content: center
    }

    .q {
      fill: rgba(0, 0, 0, 0.84)
    }

    .r {
      display: block
    }

    .s {
      position: fixed
    }

    .t {
      top: 0
    }

    .u {
      left: 0
    }

    .v {
      right: 0
    }

    .w {
      z-index: 500
    }

    .x {
      box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05)
    }

    .ai {
      max-width: 1192px
    }

    .aj {
      min-width: 0
    }

    .ak {
      width: 100%
    }

    .al {
      height: 65px
    }

    .ao {
      flex: 1 0 auto
    }

    .ap {
      display: none
    }

    .ar {
      flex: 0 0 auto
    }

    .as {
      visibility: hidden
    }

    .at {
      color: inherit
    }

    .au {
      fill: inherit
    }

    .av {
      font-size: inherit
    }

    .aw {
      border: inherit
    }

    .ax {
      font-family: inherit
    }

    .ay {
      letter-spacing: inherit
    }

    .az {
      font-weight: inherit
    }

    .ba {
      padding: 0
    }

    .bb {
      margin: 0
    }

    .bc:hover {
      cursor: pointer
    }

    .bd:hover {
      color: rgba(0, 0, 0, 0.9)
    }

    .be:hover {
      fill: rgba(0, 0, 0, 0.9)
    }

    .bf:focus {
      outline: none
    }

    .bg:disabled {
      cursor: default
    }

    .bh:disabled {
      color: rgba(0, 0, 0, 0.54)
    }

    .bi:disabled {
      fill: rgba(0, 0, 0, 0.54)
    }

    .bj {
      font-family: medium-content-sans-serif-font, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif
    }

    .bk {
      font-style: normal
    }

    .bl {
      line-height: 20px
    }

    .bm {
      font-size: 15.8px
    }

    .bn {
      letter-spacing: 0px
    }

    .bo {
      color: rgba(0, 0, 0, 0.54)
    }

    .bp {
      fill: rgba(0, 0, 0, 0.54)
    }

    .bq {
      margin-left: 16px
    }

    .br {
      color: rgba(2, 158, 116, 1)
    }

    .bs {
      fill: rgba(3, 168, 124, 1)
    }

    .bt:hover {
      color: rgba(1, 143, 105, 1)
    }

    .bu:hover {
      fill: rgba(2, 158, 116, 1)
    }

    .bv:disabled {
      color: rgba(3, 168, 124, 0.5)
    }

    .bw:disabled {
      fill: rgba(3, 168, 124, 0.5)
    }

    .bx {
      padding: 8px 16px
    }

    .by {
      background: 0
    }

    .bz {
      border-color: rgba(3, 168, 124, 1)
    }

    .ca:hover {
      border-color: rgba(2, 158, 116, 1)
    }

    .cb {
      border-radius: 4px
    }

    .cc {
      border-width: 1px
    }

    .cd {
      border-style: solid
    }

    .ce {
      box-sizing: border-box
    }

    .cf {
      display: inline-block
    }

    .cg {
      text-decoration: none
    }

    .ch {
      margin-bottom: 0px
    }

    .cj {
      padding-left: 24px
    }

    .ck {
      padding-right: 24px
    }

    .cl {
      margin-left: auto
    }

    .cm {
      margin-right: auto
    }

    .cn {
      max-width: 728px
    }

    .co {
      flex-direction: column
    }

    .cp {
      position: absolute
    }

    .cq {
      top: calc(100vh + 100px)
    }

    .cr {
      bottom: calc(100vh + 100px)
    }

    .cs {
      width: 10px
    }

    .ct {
      pointer-events: none
    }

    .cu {
      word-break: break-word
    }

    .cv {
      word-wrap: break-word
    }

    .cw:after {
      display: block
    }

    .cx:after {
      content: ""
    }

    .cy:after {
      clear: both
    }

    .cz {
      clear: both
    }

    .da {
      margin-top: 0px
    }

    .db {
      transition: transform 300ms cubic-bezier(0.2, 0, 0.2, 1)
    }

    .dc {
      cursor: zoom-in
    }

    .dd {
      position: relative
    }

    .de {
      z-index: auto
    }

    .df {
      opacity: 0
    }

    .dg {
      transition: opacity 100ms 400ms
    }

    .dh {
      height: 100%
    }

    .di {
      overflow: hidden
    }

    .dj {
      will-change: transform
    }

    .dk {
      transform: translateZ(0)
    }

    .dl {
      margin: auto
    }

    .dm {
      background-color: rgba(0, 0, 0, 0.05)
    }

    .dn {
      padding-bottom: 37.07403055229142%
    }

    .do {
      filter: blur(20px)
    }

    .dp {
      transform: scale(1.1)
    }

    .dq {
      visibility: visible
    }

    .dr {
      background: rgba(255, 255, 255, 1)
    }

    .ds {
      font-size: 16px
    }

    .dt {
      line-height: 1.4
    }

    .du {
      margin-top: 10px
    }

    .dv {
      text-align: center
    }

    .dy {
      font-weight: 300
    }

    .dz {
      max-width: 680px
    }

    .ea {
      line-height: 1.23
    }

    .eb {
      letter-spacing: 0
    }

    .ec {
      color: rgba(0, 0, 0, 0.84)
    }

    .ed {
      font-family: medium-content-title-font, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .ee {
      font-size: 40px
    }

    .ek {
      margin-bottom: -0.27em
    }

    .el {
      line-height: 48px
    }

    .em {
      margin-top: 32px
    }

    .en {
      justify-content: space-between
    }

    .er {
      width: 48px
    }

    .es {
      height: 48px
    }

    .et {
      flex-direction: row
    }

    .eu {
      width: calc(100% + 25px)
    }

    .ev {
      height: calc(100% + 25px)
    }

    .ew {
      top: 50%
    }

    .ex {
      left: 50%
    }

    .ey {
      transform: translateX(-50%) translateY(-50%)
    }

    .ez {
      border-radius: 50%
    }

    .fa {
      margin-left: 12px
    }

    .fb {
      margin-bottom: 2px
    }

    .fd {
      max-height: 20px
    }

    .fe {
      text-overflow: ellipsis
    }

    .ff {
      display: -webkit-box
    }

    .fg {
      -webkit-line-clamp: 1
    }

    .fh {
      -webkit-box-orient: vertical
    }

    .fi:hover {
      text-decoration: underline
    }

    .fj {
      margin-left: 8px
    }

    .fk {
      padding: 0px 8px
    }

    .fl {
      border-color: rgba(0, 0, 0, 0.54)
    }

    .fm:hover {
      color: rgba(0, 0, 0, 0.97)
    }

    .fn:hover {
      fill: rgba(0, 0, 0, 0.97)
    }

    .fo:hover {
      border-color: rgba(0, 0, 0, 0.84)
    }

    .fp:disabled {
      fill: rgba(0, 0, 0, 0.76)
    }

    .fq:disabled {
      border-color: rgba(0, 0, 0, 0.2)
    }

    .fr:disabled {
      cursor: inherit
    }

    .fs:disabled:hover {
      color: rgba(0, 0, 0, 0.54)
    }

    .ft:disabled:hover {
      fill: rgba(0, 0, 0, 0.76)
    }

    .fu:disabled:hover {
      border-color: rgba(0, 0, 0, 0.2)
    }

    .fv {
      line-height: 18px
    }

    .fw {
      font-size: 15px
    }

    .fx {
      align-items: flex-end
    }

    .gf {
      padding-right: 8px
    }

    .gg {
      margin-right: -6px
    }

    .gh {
      line-height: 1.58
    }

    .gi {
      letter-spacing: -0.004em
    }

    .gj {
      font-family: medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .gu {
      margin-bottom: -0.46em
    }

    .gv {
      background-repeat: repeat-x
    }

    .gw {
      background-image: linear-gradient(to right, rgba(0, 0, 0, 0.84) 100%, rgba(0, 0, 0, 0.84) 0);
      background-image: url('data:image/svg+xml;utf8,<svg preserveAspectRatio="none" viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="0" x2="1" y2="1" stroke="rgba(0, 0, 0, 0.84)" /></svg>')
    }

    .gx {
      background-size: 1px 1px
    }

    .gy {
      background-position: 0 1.05em;
      background-position: 0 calc(1em + 1px)
    }

    .gz {
      font-weight: 700
    }

    .ha {
      max-width: 1857px
    }

    .hg {
      border-width: 2px
    }

    .hh {
      border-color: rgba(255, 255, 255, 1)
    }

    .hi {
      float: left
    }

    .hj {
      margin-left: -150px
    }

    .hk {
      margin-right: 30px
    }

    .hl {
      width: 75%
    }

    .hm {
      padding-bottom: 10px
    }

    .hr {
      margin-bottom: 16px
    }

    .hs {
      padding-bottom: 46.418955304254176%
    }

    .ht {
      font-style: italic
    }

    .hu {
      max-width: 1674px
    }

    .hv {
      padding-bottom: 98.805256869773%
    }

    .ie {
      padding-bottom: 75%
    }

    .ik {
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(0, 0, 0, 0.1)
    }

    .il {
      max-height: 40px
    }

    .im {
      -webkit-line-clamp: 2
    }

    .in {
      padding: 0px
    }

    .jd {
      padding: 16px 20px
    }

    .je {
      flex: 1 1 auto
    }

    .jg {
      font-weight: 600
    }

    .jh {
      font-size: 18px
    }

    .ji {
      margin-top: 8px
    }

    .jj {
      margin-top: 12px
    }

    .jk {
      width: 160px
    }

    .jl {
      background-image: url(https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/320/0*RtBilOEcQNTqjjkc)
    }

    .jm {
      background-origin: border-box
    }

    .jn {
      background-size: cover
    }

    .jo {
      height: 167px
    }

    .jp {
      background-position: 50% 50%
    }

    .jq {
      max-width: 100%
    }

    .jr {
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1)
    }

    .js {
      box-shadow: inset 3px 0 0 0 rgba(0, 0, 0, 0.84)
    }

    .jt {
      padding-left: 23px
    }

    .ju {
      margin-left: -20px
    }

    .jv {
      font-family: medium-content-slab-serif-font, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .jw {
      font-size: 28px
    }

    .jx {
      border: none
    }

    .jy {
      margin-top: 30px
    }

    .jz:before {
      content: "..."
    }

    .ka:before {
      letter-spacing: 0.6em
    }

    .kb:before {
      text-indent: 0.6em
    }

    .kc:before {
      font-style: italic
    }

    .kd:before {
      line-height: 1.4
    }

    .ke {
      line-height: 1.12
    }

    .kf {
      letter-spacing: -0.022em
    }

    .kq {
      margin-bottom: -0.28em
    }

    .kw {
      padding-left: 30px
    }

    .kx {
      line-height: 1.48
    }

    .ky {
      letter-spacing: -0.014em
    }

    .kz {
      color: rgba(0, 0, 0, 0.76)
    }

    .la {
      font-size: 24px
    }

    .lg {
      font-size: 30px
    }

    .lh {
      line-height: 44px
    }

    .ln {
      padding: 2px 4px
    }

    .lo {
      font-size: 75%
    }

    .lp>strong {
      font-family: inherit
    }

    .lq {
      font-family: Menlo, Monaco, "Courier New", Courier, monospace
    }

    .lw {
      background-image: url(https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/320/1*dLyvwt8-rJsY40s5iztZhg.jpeg)
    }

    .lx {
      background-image: url(https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/320/1*xeCclbFhRhjQkny5E3WOsg.jpeg)
    }

    .ly {
      max-width: 1419px
    }

    .lz {
      padding-bottom: 99.92952783650458%
    }

    .ma {
      max-width: 1910px
    }

    .mb {
      padding-bottom: 59.16230366492147%
    }

    .mg {
      padding-bottom: NaN%
    }

    .mh {
      max-width: 2152px
    }

    .mi {
      padding-bottom: 68.21561338289962%
    }

    .mj {
      max-width: 226px
    }

    .mk {
      padding-bottom: 447.78761061946904%
    }

    .ml {
      max-width: 1800px
    }

    .mm {
      padding-bottom: 2.7777777777777777%
    }

    .mn {
      max-width: 1080px
    }

    .mo {
      padding-bottom: 41.2962962962963%
    }

    .mp {
      max-width: 349px
    }

    .mq {
      padding-bottom: 150.7163323782235%
    }

    .mr {
      max-width: 1395px
    }

    .ms {
      padding-bottom: 118.35125448028674%
    }

    .mt {
      padding-bottom: 5px
    }

    .mu {
      padding-top: 5px
    }

    .mv {
      max-width: 2493px
    }

    .mw {
      padding-bottom: 58.72442839951866%
    }

    .nc {
      max-width: 254px
    }

    .nd {
      padding-bottom: 330.70866141732284%
    }

    .ne {
      padding-bottom: 58.675000000000004%
    }

    .nf {
      max-width: 344px
    }

    .ng {
      padding-bottom: 299.4186046511628%
    }

    .nh {
      max-width: 660px
    }

    .ni {
      padding-bottom: 85.75757575757575%
    }

    .nj {
      padding: 20px
    }

    .nk {
      background: rgba(0, 0, 0, 0.05)
    }

    .nl {
      overflow-x: auto
    }

    .nm {
      line-height: 1.18
    }

    .nn {
      margin-top: -0.09em
    }

    .no {
      margin-bottom: -0.09em
    }

    .np {
      white-space: pre-wrap
    }

    .nq {
      background-image: url(https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/320/1*cWkz4VgkkdnGOdTMoAxcmQ.png)
    }

    .nr {
      font-style: inherit
    }

    .ns {
      list-style-type: disc
    }

    .nt {
      margin-left: 30px
    }

    .nu {
      padding-left: 0px
    }

    .oa {
      list-style-type: decimal
    }

    .ob {
      padding-bottom: 65.03567787971458%
    }

    .oc {
      will-change: opacity
    }

    .od {
      top: calc(65px + 54px + 40px)
    }

    .og {
      width: 131px
    }

    .oh {
      padding-top: 28px
    }

    .oi {
      margin-bottom: 19px
    }

    .oj {
      margin-left: -5px
    }

    .ok {
      margin-right: 5px
    }

    .ol {
      outline: 0
    }

    .om {
      border: 0
    }

    .on {
      user-select: none
    }

    .oo {
      cursor: pointer
    }

    .op>svg {
      pointer-events: none
    }

    .oq:active {
      border-style: none
    }

    .or {
      -webkit-user-select: none
    }

    .os {
      fill: rgba(0, 0, 0, 0.76)
    }

    .ot:focus {
      fill: rgba(0, 0, 0, 0.54)
    }

    .ou:hover {
      fill: rgba(0, 0, 0, 0.54)
    }

    .ov {
      margin-top: 5px
    }

    .ow button {
      text-align: left
    }

    .ox {
      width: 188px
    }

    .oy {
      transform: translateX(406px)
    }

    .oz {
      top: calc(65px + 54px + 14px)
    }

    .pb {
      margin-top: 40px
    }

    .pc {
      flex-wrap: wrap
    }

    .pd {
      margin-top: 25px
    }

    .pe {
      list-style-type: none
    }

    .pf {
      margin-right: 8px
    }

    .pg {
      margin-bottom: 8px
    }

    .ph {
      border-radius: 3px
    }

    .pi {
      padding: 5px 10px
    }

    .pj {
      line-height: 22px
    }

    .pk {
      margin-top: 15px
    }

    .pl {
      margin-right: 16px
    }

    .pm {
      border: 1px solid rgba(0, 0, 0, 0.1)
    }

    .pn {
      height: 60px
    }

    .po {
      width: 60px
    }

    .qb:hover {
      border-color: rgba(0, 0, 0, 0.54)
    }

    .qc:active {
      border-style: solid
    }

    .qd {
      z-index: 2
    }

    .qf {
      padding-top: 32px
    }

    .qg {
      border-top: 1px solid rgba(0, 0, 0, 0.1)
    }

    .qh {
      margin-bottom: 25px
    }

    .qi {
      margin-bottom: 32px
    }

    .qj {
      min-height: 80px
    }

    .qo {
      width: 80px
    }

    .qp {
      height: 80px
    }

    .qq {
      padding-left: 102px
    }

    .qs {
      text-transform: uppercase
    }

    .qt {
      letter-spacing: 0.05em
    }

    .qu {
      margin-bottom: 6px
    }

    .qv {
      line-height: 36px
    }

    .qw {
      padding: 4px 12px
    }

    .qx {
      max-width: 555px
    }

    .qy {
      max-width: 450px
    }

    .qz {
      line-height: 24px
    }

    .rb {
      padding-top: 25px
    }

    .rc {
      opacity: 1
    }

    .rd {
      border: 1px solid rgba(3, 168, 124, 1)
    }

    .re {
      margin-top: 64px
    }

    .rf {
      background-color: rgba(0, 0, 0, 0.02)
    }

    .rg {
      padding: 60px 0
    }

    .rh {
      background-color: rgba(0, 0, 0, 0.9)
    }

    .rj {
      padding-bottom: 48px
    }

    .rk {
      border-bottom: 1px solid rgba(255, 255, 255, 0.54)
    }

    .rl {
      margin: 0 -12px
    }

    .rm {
      margin: 0 12px
    }

    .rn {
      flex: 1 1 0
    }

    .ro {
      padding-bottom: 12px
    }

    .rp:hover {
      color: rgba(255, 255, 255, 0.99)
    }

    .rq:hover {
      fill: rgba(255, 255, 255, 0.99)
    }

    .rr:disabled {
      color: rgba(255, 255, 255, 0.7)
    }

    .rs:disabled {
      fill: rgba(255, 255, 255, 0.7)
    }

    .rt {
      color: rgba(255, 255, 255, 0.98)
    }

    .ru {
      fill: rgba(255, 255, 255, 0.98)
    }

    .rv {
      text-align: inherit
    }

    .rw {
      font-size: 21.6px
    }

    .rx {
      letter-spacing: -0.32px
    }

    .ry {
      color: rgba(255, 255, 255, 0.7)
    }

    .rz {
      fill: rgba(255, 255, 255, 0.7)
    }

    .sa {
      text-decoration: underline
    }

    .sb {
      padding-bottom: 8px
    }

    .sc {
      padding-top: 8px
    }

    .sd {
      width: 200px
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (min-width: 1080px)">
    .d {
      display: none
    }

    .ah {
      margin: 0 64px
    }

    .ej {
      margin-top: 0.78em
    }

    .ge {
      margin-left: 30px
    }

    .gs {
      font-size: 21px
    }

    .gt {
      margin-top: 2em
    }

    .hf {
      margin-top: 56px
    }

    .id {
      max-width: 1192px
    }

    .ij {
      margin-top: 32px
    }

    .ja {
      padding-left: 64px
    }

    .jb {
      padding-right: 64px
    }

    .jc {
      max-width: 1320px
    }

    .ko {
      font-size: 34px
    }

    .kp {
      margin-top: 1.25em
    }

    .kv {
      margin-top: 0.86em
    }

    .lf {
      margin-top: 2.75em
    }

    .lm {
      margin-top: 3.14em
    }

    .lv {
      margin-top: 80px
    }

    .nb {
      margin-top: 1.95em
    }

    .nz {
      margin-top: 1.05em
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (max-width: 1079.98px)">
    .e {
      display: none
    }

    .dw {
      margin-left: auto
    }

    .dx {
      text-align: center
    }

    .gd {
      margin-left: 30px
    }

    .hn {
      float: none
    }

    .ho {
      margin-left: 0
    }

    .hp {
      margin-right: 0
    }

    .hq {
      width: 100%
    }

    .ix {
      padding-left: 64px
    }

    .iy {
      padding-right: 64px
    }

    .iz {
      max-width: 1080px
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (max-width: 903.98px)">
    .f {
      display: none
    }

    .gc {
      margin-left: 30px
    }

    .iu {
      padding-left: 48px
    }

    .iv {
      padding-right: 48px
    }

    .iw {
      max-width: 904px
    }

    .mc {
      float: none
    }

    .md {
      margin-left: 0
    }

    .me {
      margin-right: 0
    }

    .mf {
      width: 100%
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (max-width: 727.98px)">
    .g {
      display: none
    }

    .am {
      height: 56px
    }

    .an {
      display: flex
    }

    .aq {
      display: block
    }

    .ci {
      margin-bottom: 0px
    }

    .ep {
      margin-top: 32px
    }

    .eq {
      flex-direction: column-reverse
    }

    .ga {
      margin-bottom: 30px
    }

    .gb {
      margin-left: 0px
    }

    .ir {
      padding-left: 24px
    }

    .is {
      padding-right: 24px
    }

    .it {
      max-width: 728px
    }

    .jf {
      padding: 10px 12px 10px
    }

    .qk {
      margin-bottom: 24px
    }

    .ql {
      align-items: center
    }

    .qm {
      width: 102px
    }

    .qn {
      position: relative
    }

    .qr {
      padding-left: 0
    }

    .ra {
      margin-top: 24px
    }

    .ri {
      padding: 32px 0
    }

    .se {
      width: 140px
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (max-width: 551.98px)">
    .h {
      display: none
    }

    .ac {
      margin: 0 24px
    }

    .ef {
      margin-top: 0.39em
    }

    .eo {
      margin-top: 32px
    }

    .fc {
      margin-bottom: 0px
    }

    .fy {
      margin-bottom: 30px
    }

    .fz {
      margin-left: 0px
    }

    .gk {
      font-size: 18px
    }

    .gl {
      margin-top: 1.56em
    }

    .hb {
      margin-top: 40px
    }

    .hw {
      margin: 0
    }

    .hx {
      max-width: 100%
    }

    .if {
      margin-top: 24px
    }

    .io {
      padding-left: 24px
    }

    .ip {
      padding-right: 24px
    }

    .iq {
      max-width: 552px
    }

    .kg {
      font-size: 30px
    }

    .kh {
      margin-top: 0.93em
    }

    .kr {
      margin-top: 0.67em
    }

    .lb {
      margin-top: 1.42em
    }

    .li {
      margin-top: 2em
    }

    .lr {
      margin-top: 48px
    }

    .mx {
      margin-top: 1.2em
    }

    .nv {
      margin-top: 1.34em
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE"
    media="all and (min-width: 904px) and (max-width: 1079.98px)">
    .i {
      display: none
    }

    .ag {
      margin: 0 64px
    }

    .ei {
      margin-top: 0.78em
    }

    .gq {
      font-size: 21px
    }

    .gr {
      margin-top: 2em
    }

    .he {
      margin-top: 56px
    }

    .ic {
      max-width: 1192px
    }

    .ii {
      margin-top: 32px
    }

    .km {
      font-size: 34px
    }

    .kn {
      margin-top: 1.25em
    }

    .ku {
      margin-top: 0.86em
    }

    .le {
      margin-top: 2.75em
    }

    .ll {
      margin-top: 3.14em
    }

    .lu {
      margin-top: 80px
    }

    .na {
      margin-top: 1.95em
    }

    .ny {
      margin-top: 1.05em
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE"
    media="all and (min-width: 728px) and (max-width: 903.98px)">
    .j {
      display: none
    }

    .af {
      margin: 0 48px
    }

    .eh {
      margin-top: 0.78em
    }

    .go {
      font-size: 21px
    }

    .gp {
      margin-top: 2em
    }

    .hd {
      margin-top: 56px
    }

    .ia {
      margin: 0
    }

    .ib {
      max-width: 100%
    }

    .ih {
      margin-top: 32px
    }

    .kk {
      font-size: 34px
    }

    .kl {
      margin-top: 1.25em
    }

    .kt {
      margin-top: 0.86em
    }

    .ld {
      margin-top: 2.75em
    }

    .lk {
      margin-top: 3.14em
    }

    .lt {
      margin-top: 80px
    }

    .mz {
      margin-top: 1.95em
    }

    .nx {
      margin-top: 1.05em
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE"
    media="all and (min-width: 552px) and (max-width: 727.98px)">
    .k {
      display: none
    }

    .ae {
      margin: 0 24px
    }

    .eg {
      margin-top: 0.39em
    }

    .gm {
      font-size: 18px
    }

    .gn {
      margin-top: 1.56em
    }

    .hc {
      margin-top: 40px
    }

    .hy {
      margin: 0
    }

    .hz {
      max-width: 100%
    }

    .ig {
      margin-top: 24px
    }

    .ki {
      font-size: 30px
    }

    .kj {
      margin-top: 0.93em
    }

    .ks {
      margin-top: 0.67em
    }

    .lc {
      margin-top: 1.42em
    }

    .lj {
      margin-top: 2em
    }

    .ls {
      margin-top: 48px
    }

    .my {
      margin-top: 1.2em
    }

    .nw {
      margin-top: 1.34em
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="print">
    .ab {
      display: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE"
    media="(prefers-reduced-motion: no-preference)">
    .y {
      transition: transform 300ms ease
    }

    .z {
      will-change: transform
    }

    .oe {
      transition: opacity 200ms
    }

    .pp {
      transition: border-color 150ms ease
    }

    .pq::before {
      background:
        radial-gradient(circle, rgba(0, 0, 0, 0.84) 60%, transparent 70%)
    }

    .pr::before {
      border-radius: 50%
    }

    .ps::before {
      content: ""
    }

    .pt::before {
      display: block
    }

    .pu::before {
      z-index: 0
    }

    .pv::before {
      left: 0
    }

    .pw::before {
      height: 100%
    }

    .px::before {
      position: absolute
    }

    .py::before {
      top: 0
    }

    .pz::before {
      width: 100%
    }

    .qa:hover::before {
      animation: k1 2000ms infinite cubic-bezier(.1, .12, .25, 1)
    }

    .qe {
      transition: fill 200ms ease
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (max-width: 1198px)">
    .of {
      display: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="498" data-fela-type="RULE" media="all and (max-width: 1230px)">
    .pa {
      display: none
    }
  </style>
</head>

<body>
  <!-- BEGIN WAYBACK TOOLBAR INSERT -->
  <style type="text/css">
    body {
      margin-top: 0 !important;
      padding-top: 0 !important;
      /*min-width:800px !important;*/
    }
  </style>
  <script>__wm.rw(0);</script>
  <div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
    <div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
      <div id="wm-ipp-inside">
        <div style="position:relative;">
          <div id="wm-logo" style="float:left;width:110px;padding-top:12px;">
            <a href="/web/" title="Wayback Machine home page"><img
                src="/_static/images/toolbar/wayback-toolbar-logo-200.png"
                srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x"
                alt="Wayback Machine" style="width:100px" border="0" /></a>
          </div>
          <div class="r" style="float:right;">
            <div id="wm-btns" style="text-align:right;height:25px;">
              <div id="wm-save-snapshot-success">success</div>
              <div id="wm-save-snapshot-fail">fail</div>
              <a id="wm-save-snapshot-open" href="#" title="Share via My Web Archive">
                <span class="iconochive-web"></span>
              </a>
              <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in">
                <span class="iconochive-person"></span>
              </a>
              <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
              <a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine"
                style="top:-6px;"><span class="iconochive-question"
                  style="color:rgb(87,186,244);font-size:160%;"></span></a>
              <a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;"
                title="Close the toolbar"><span class="iconochive-remove-circle"
                  style="color:#888888;font-size:240%;"></span></a>
            </div>
            <div id="wm-share">
              <a href="/web/20191204194225/http://web.archive.org/screenshot/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&sk=f58f4cf6c608fded4b354063e474a93b"
                id="wm-screenshot" title="screenshot">
                <span class="wm-icon-screen-shot"></span>
              </a>
              <a id="wm-share-facebook" href="#"
                data-url="https://web.archive.org/web/20191204194225/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&amp;sk=f58f4cf6c608fded4b354063e474a93b"
                title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook"
                  style="color:#3b5998;font-size:160%;"></span></a>
              <a id="wm-share-twitter" href="#"
                data-url="https://web.archive.org/web/20191204194225/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&amp;sk=f58f4cf6c608fded4b354063e474a93b"
                title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter"
                  style="color:#1dcaff;font-size:160%;"></span></a>
            </div>
          </div>
          <table class="c" style="">
            <tbody>
              <tr>
                <td class="u" colspan="2">
                  <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text"
                      name="url" id="wmtbURL"
                      value="https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&sk=f58f4cf6c608fded4b354063e474a93b"
                      onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input
                      type="hidden" name="date" value="20191204194225" /><input type="submit" value="Go" /></form>
                </td>
                <td class="n" rowspan="2" style="width:110px;">
                  <table>
                    <tbody>
                      <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
                      <tr class="m">
                        <td class="b" nowrap="nowrap">Nov</td>
                        <td class="c" id="displayMonthEl" title="You are here: 19:42:25 Dec 04, 2019">DEC</td>
                        <td class="f" nowrap="nowrap">Jan</td>
                      </tr>
                      <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
                      <tr class="d">
                        <td class="b" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_prv_off.png"
                            alt="Previous capture" width="14" height="16" border="0" /></td>
                        <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;"
                          title="You are here: 19:42:25 Dec 04, 2019">04</td>
                        <td class="f" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_nxt_off.png"
                            alt="Next capture" width="14" height="16" border="0" /></td>
                      </tr>
                      <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
                      <tr class="y">
                        <td class="b" nowrap="nowrap">2018</td>
                        <td class="c" id="displayYearEl" title="You are here: 19:42:25 Dec 04, 2019">2019</td>
                        <td class="f" nowrap="nowrap">2020</td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td class="s">
                  <div id="wm-nav-captures">
                    <a class="t"
                      href="/web/20191204194225*/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&sk=f58f4cf6c608fded4b354063e474a93b"
                      title="See a list of every capture for this URL">1 capture</a>
                    <div class="r" title="Timespan for captures of this URL">04 Dec 2019</div>
                  </div>
                </td>
                <td class="k">
                  <a href="" id="wm-graph-anchor">
                    <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
                      <canvas id="wm-sparkline-canvas" width="650" height="27" border="0"></canvas>
                    </div>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="position:absolute;bottom:0;right:2px;text-align:right;">
            <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span
                id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this
                capture</span></a>
          </div>
        </div>
        <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
          <div id="wm-capinfo-collected-by">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
            <div style="padding:3px;position:relative" id="wm-collected-by-content">
              <div style="display:inline-block;vertical-align:top;width:50%;">
                <span class="c-logo"
                  style="background-image:url(https://archive.org/services/img/ArchiveIt-Partner-1028);"></span>
                Organization: <a style="color:#33f;" href="https://archive.org/details/ArchiveIt-Partner-1028"
                  target="_new"><span class="wm-title">Mark Graham&#39;s Archive-IT Collections</span></a>
                <div style="max-height:75px;overflow:hidden;position:relative;">
                  <div
                    style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);">
                  </div>
                  This is a set of web collections curated by Mark Graham using the <a
                    href="http://archive-it.org">Archive-IT</a> service of the <a href="http//archive.org">Internet
                    Archive.</a>
                  <br>
                  <br>
                  They include web captures of the ISKME.org website as well as captures from sites hosted by IGC.org.
                  <br>
                  <br>
                  <br><br>
                  These web captures are available to the general public.
                  <br>
                  <br>
                  For more information about this collection please feel free to contact Mark via <a
                    href="mailto:mark@archive.org?Subject=Question%20about%20you%20Archive-IT%20Collection"
                    target="_top">Send Mail</a>
                </div>
              </div>
              <div style="display:inline-block;vertical-align:top;width:49%;">
                <span class="c-logo"
                  style="background-image:url(https://archive.org/services/img/ArchiveIt-Collection-8332)"></span>
                <div>Collection: <a style="color:#33f;" href="https://archive.org/details/ArchiveIt-Collection-8332"
                    target="_new"><span class="wm-title">General Crawls</span></a></div>
                <div style="max-height:75px;overflow:hidden;position:relative;">
                  <div
                    style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);">
                  </div>
                  Archive-It Partner 1028: Mark Graham - Collection 8332: General Crawls
                </div>
              </div>
            </div>
          </div>
          <div id="wm-capinfo-timestamps">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center"
              title="Timestamps for the elements of this page">TIMESTAMPS</div>
            <div>
              <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important">
              </div>
              <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img
                  src="/_static/images/loading.gif" alt="loading" /></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="donato" style="position:relative;width:100%;">
    <div id="donato-base">
      <iframe id="donato-if"
        src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20191204194225/https%3A//medium.com/%2540ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f%3Fsource%3Dfriends_link%26sk%3Df58f4cf6c608fded4b354063e474a93b"
        scrolling="no" frameborder="0" style="width:100%; height:100%">
      </iframe>
    </div>
  </div>
  <script type="text/javascript">
    __wm.bt(650, 27, 25, 2, "web", "https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=friends_link&sk=f58f4cf6c608fded4b354063e474a93b", "20191204194225", 1996, "/_static/", ["/_static/css/banner-styles.css?v=bsmaklHF", "/_static/css/iconochive.css?v=qtvMKcIJ"]);
    __wm.rw(1);
  </script>
  <!-- END WAYBACK TOOLBAR INSERT -->
  <div id="root">
    <div class="a b c">
      <div class="d e f g h i j k"></div>
      <script>document.domain = document.domain;</script>
      <script>window.PARSELY = window.PARSELY || { autotrack: false }</script>
      <nav class="r s t u v c w x y z ab">
        <div class="branch-journeys-top">
          <div class="n p">
            <div class="ac ae af ag ah ai aj ak">
              <div class="al n o am an">
                <div class="r ao w">
                  <div class="n o"><a aria-label="Homepage" rel="noopener"
                      href="/web/20191204194225/https://medium.com/?source=post_page-----c86b119fe5f----------------------">
                      <div class="ap g"><svg height="22" width="112" viewbox="0 0 111.5 22" class="q">
                          <path
                            d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z">
                          </path>
                        </svg></div>
                      <div class="r aq"><svg width="35" height="35" viewbox="5 5 35 35" class="q">
                          <path
                            d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z">
                          </path>
                        </svg></div>
                    </a></div>
                </div>
                <div class="r ar w">
                  <div class="n o">
                    <div class="n g">
                      <div class="as" id="lo-post-page-navbar-upsell-button">
                        <div><a
                            href="https://web.archive.org/web/20191204194225/https://medium.com/membership?source=upgrade_membership---nav_full------------------------"
                            class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><span
                              class="bj b bk bl bm bn r bo bp">Become a member</span></a></div>
                      </div>
                      <div class="as" id="lo-post-page-navbar-sign-in-link">
                        <div class="bq r"><span class="bj b bk bl bm bn r bo bp"><a
                              href="https://web.archive.org/web/20191204194225/https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f&amp;source=post_page-----c86b119fe5f---------------------nav_reg-"
                              class="br bs av aw ax ay az ba bb bc bt bu bf bg bv bw" rel="noopener">Sign in</a></span>
                        </div>
                      </div>
                    </div>
                    <div class="as" id="lo-post-page-navbar-get-started-button">
                      <div class="bq r"><button
                          class="bx by br bs bz bt bu ca bc cb bj b bk bl bm bn cc cd ce cf cg bf">Get started</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div class="ch al r ci am"></div>
      <article>
        <section class="cj ck cl cm ak cn ce n co"></section><span class="r"></span>
        <div>
          <div class="cp u cq cr cs ct"></div>
          <section class="cu cv cw cx cy">
            <div class="cz ak">
              <figure class="da cz ak paragraph-image">
                <div class="db dc dd de ak">
                  <div class="dl r dd dm">
                    <div class="dn r">
                      <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                          src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*fyYjlV_EPqraAEYuRbst1A.png?q=20"
                          width="3404" height="1262" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                        width="3404" height="1262" role="presentation" /><noscript><img class="cp t u dh ak"
                          src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/6808/1*fyYjlV_EPqraAEYuRbst1A.png"
                          width="3404" height="1262" role="presentation" /></noscript>
                    </div>
                  </div>
                </div>
                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">What keeps me awake at night? Wondering why our
                  microcontrollers (like STM32 Blue Pill above) have become so powerful… that we can’t write powerful
                  programs to exploit them</figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <div>
                  <div id="3c0a" class="ea eb ec bk ed b ee ef eg eh ei ej ek">
                    <h1 class="ed b ee el ec">Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill</h1>
                  </div>
                  <div class="em">
                    <div class="n en eo ep eq">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="/web/20191204194225/https://medium.com/@ly.lee?source=post_page-----c86b119fe5f----------------------">
                            <div class="dd er es">
                              <div class="bs n et o p cp eu ev ew ex ey ct"><svg width="57" height="57"
                                  viewbox="0 0 57 57">
                                  <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M28.5 1.2A27.45 27.45 0 0 0 4.06 15.82L3 15.27A28.65 28.65 0 0 1 28.5 0C39.64 0 49.29 6.2 54 15.27l-1.06.55A27.45 27.45 0 0 0 28.5 1.2zM4.06 41.18A27.45 27.45 0 0 0 28.5 55.8a27.45 27.45 0 0 0 24.44-14.62l1.06.55A28.65 28.65 0 0 1 28.5 57 28.65 28.65 0 0 1 3 41.73l1.06-.55z">
                                  </path>
                                </svg></div><img alt="Lup Yuen Lee 李立源" class="r ez es er"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/fit/c/96/96/1*KGohS3sQaUnr58gc0BIfoQ.jpeg"
                                width="48" height="48" />
                            </div>
                          </a></div>
                        <div class="fa ak r">
                          <div class="n">
                            <div style="flex:1"><span class="bj b bk bl bm bn r ec q">
                                <div class="fb n o fc"><span class="bj dy ds bl di fd fe ff fg fh ec"><a
                                      class="at au av aw ax ay az ba bb bc fi bf bg bh bi" rel="noopener"
                                      href="/web/20191204194225/https://medium.com/@ly.lee?source=post_page-----c86b119fe5f----------------------">Lup
                                      Yuen Lee 李立源</a></span>
                                  <div class="fj r ar h"><button
                                      class="fk ec q by fl fm fn fo bc bh fp fq fr fs ft fu cb bj b bk fv fw bn cc cd ce cf cg bf">Follow</button>
                                  </div>
                                </div>
                              </span></div>
                          </div><span class="bj b bk bl bm bn r bo bp"><span class="bj dy ds bl di fd fe ff fg fh bo">
                              <div><a class="at au av aw ax ay az ba bb bc fi bf bg bh bi" rel="noopener"
                                  href="/web/20191204194225/https://medium.com/@ly.lee/hosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f?source=post_page-----c86b119fe5f----------------------">Jun
                                  9</a> <!-- -->·
                                <!-- -->
                                <!-- -->19
                                <!-- --> min read
                              </div>
                            </span></span>
                        </div>
                      </div>
                      <div class="n fx fy fz ga gb gc gd ge ab">
                        <div class="n o">
                          <div class="gf r ar"><a
                              href="//web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/share/twitter?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener"><svg width="29" height="29" class="q">
                                <path
                                  d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                                </path>
                              </svg></a></div>
                          <div class="gf r ar"><a
                              href="//web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/share/linkedIn?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener"><svg width="29" height="29" viewbox="0 0 29 29" fill="none" class="q">
                                <path
                                  d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z"
                                  fill="#fff"></path>
                              </svg></a></div>
                          <div class="gf r ar"><a
                              href="//web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/share/facebook?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener"><svg width="29" height="29" class="q">
                                <path
                                  d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                                </path>
                              </svg></a></div>
                          <div class="gg r ao">
                            <div>
                              <div class="cf"><a
                                  href="https://web.archive.org/web/20191204194225/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f&amp;source=post_actions_header--------------------------bookmark_sidebar-"
                                  class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25"
                                    height="25" viewbox="0 0 25 25">
                                    <path
                                      d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                      fill-rule="evenodd"></path>
                                  </svg></a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="ea07" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Today’s microcontrollers (like
                  the <a
                    href="https://web.archive.org/web/20191204194225/http://wiki.stm32duino.com/index.php?title=Blue_Pill"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">STM32 Blue Pill</a>) pack so many
                  features in a tiny package… yet few embedded programmers are capable of exploiting the <strong
                    class="gj gz">full potential of modern microcontrollers</strong>. Many of us (my IoT students
                  included) seem to be stuck in the 1980s —<strong class="gj gz"> painstakingly writing C programs for
                    small computers.</strong></p>
                <p id="6d9c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">It’s time to drop our legacy
                  programming practices and adopt smarter, safer ways to exploit these microcontrollers… starting with
                  <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/index.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">Apache
                      Mynewt</strong></a><strong class="gj gz"> and </strong><a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/stable/book/"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong
                      class="gj gz">Rust</strong></a><strong class="gj gz">.</strong></p>
                <p id="a684" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Mynewt is a <strong
                    class="gj gz">modern realtime operating system</strong> that runs on many microcontroller platforms,
                  even on devices with little RAM and ROM like Blue Pill. It has an excellent <a
                    href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_framework.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">Sensor
                      Framework</strong></a> for creating IoT devices.</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ha">
                      <div class="dl r dd dm">
                        <div class="hs r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*UJcsPIo5wIcT43KZFz1tLw.png?q=20"
                              width="1857" height="862" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1857" height="862" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3714/1*UJcsPIo5wIcT43KZFz1tLw.png"
                              width="1857" height="862" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Sensor Network with Blue Pill, ESP8266,
                    nRF24L01 and Mynewt</figcaption>
                </figure>
                <p id="57a2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Stretching Mynewt on Blue Pill to
                  the limit, I have created <a class="at cg gv gw gx gy" target="_blank" rel="noopener"
                    href="/web/20191204194225/https://medium.com/@ly.lee/build-your-iot-sensor-network-stm32-blue-pill-nrf24l01-esp8266-apache-mynewt-thethings-io-ca7486523f5d">sophisticated
                    sensor networks</a> with <a
                    href="https://web.archive.org/web/20191204194225/https://en.wikipedia.org/wiki/Constrained_Application_Protocol"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">CoAP encoding</a> (JSON and <a
                    href="https://web.archive.org/web/20191204194225/https://en.wikipedia.org/wiki/CBOR"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">CBOR</a>), transmitting and
                  receiving simultaneously on both ESP8266 and nRF24L01 modules.</p>
                <p id="bbb5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Sadly, Mynewt only supports
                  <strong class="gj gz">applications developed in C</strong>, consistent with its frugal origins. But C
                  programming is a rare skill today (and C frustrates my IoT students too). What about other languages?
                  <a href="https://web.archive.org/web/20191204194225/https://en.wikipedia.org/wiki/MicroPython"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">MicroPython</a> and <a
                    class="at cg gv gw gx gy" target="_blank" rel="noopener"
                    href="/web/20191204194225/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89">JavaScript</a>
                  seem too heavy for a lightweight Mynewt device… <em class="ht">perhaps Rust?</em></p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm hu">
                      <div class="dl r dd dm">
                        <div class="hv r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*MzU5MyKDu4gJwkgv56tSwQ.png?q=20"
                              width="1674" height="1654" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1674" height="1654" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3348/1*MzU5MyKDu4gJwkgv56tSwQ.png"
                              width="1674" height="1654" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Mynewt and Rust: The Perfect Match
                  </figcaption>
                </figure>
                <p id="05d4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In my <a
                    class="at cg gv gw gx gy" target="_blank" rel="noopener"
                    href="/web/20191204194225/https://medium.com/coinmonks/coding-the-stm32-blue-pill-with-rust-and-visual-studio-code-b21615d8a20">previous
                    experiments</a> with Embedded Rust (<a class="at cg gv gw gx gy" target="_blank" rel="noopener"
                    href="/web/20191204194225/https://medium.com/coinmonks/running-rust-and-freertos-on-the-padi-iot-stamp-fb36c5ef4844">including
                    this one</a>), I know that Rust flies <strong class="gj gz">light and fast</strong> just like C.
                  Rust has <strong class="gj gz">great support in coding tools</strong> like Visual Studio Code, which
                  makes it easier to code for newbies.</p>
                <p id="d118" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Rust advocates <strong
                    class="gj gz">“Safe Coding”</strong>. Rust<strong class="gj gz"> </strong>disallows bad code that
                  may cause our device to crash. <em class="ht">Rust could be the perfect match for Mynewt!</em></p>
                <p id="762a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In this article we’ll mix Mynewt
                  with Rust and learn…</p>
                <p id="3f03" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ Why is <strong
                    class="gj gz">Rust better than C</strong> for embedded programming</p>
                <p id="fd10" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ How to <strong
                    class="gj gz">call C functions from Rust</strong> and vice versa</p>
                <p id="1f26" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ What’s <strong
                    class="gj gz">Unsafe Coding</strong> and how to make coding safer</p>
                <p id="2d1e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">4️⃣ How <strong
                    class="gj gz">Rust compiles programs</strong></p>
                <p id="fad9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">5️⃣ How to <strong
                    class="gj gz">inject Rust code</strong> into the Mynewt build</p>
                <p id="3f3b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">6️⃣ How to <strong
                    class="gj gz">install and configure</strong> the Rust and Mynewt code</p>
                <p id="23ff" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">7️⃣ And finally we’ll see an
                  actual <strong class="gj gz">Rust application running on Mynewt</strong> with Blue Pill</p>
                <p id="d3b1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s the <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/src"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Rust application code</a> that
                  we’ll be running: A sensor application that <strong class="gj gz">polls Blue Pill’s internal
                    temperature sensor every 10 seconds</strong> and displays the result…</p>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz">
                    <div class="dl r dd">
                      <div class="ie r"><iframe
                          src="https://web.archive.org/web/20191204194225if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FXeRKRI8JYQE%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DXeRKRI8JYQE&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FXeRKRI8JYQE%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="640"
                          title="Hosting Rust Applications on Apache Mynewt - Code" class="cp t u dh ak"
                          scrolling="auto"></iframe></div>
                    </div>
                    <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Walkthrough of the Rust application code
                    </figcaption>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <p id="5ed5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The complete Rust and Mynewt code
                  may be found here…</p>
                <div class="if ig ih ii ij ik"><a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust?source=post_page-----c86b119fe5f----------------------"
                    rel="noopener nofollow">
                    <section class="in cl cm ak ce n ar io ip iq ir is it iu iv iw ix iy iz ja jb jc">
                      <div class="jd n co p je jf">
                        <h2 class="bj jg jh bl ec">
                          <div class="di il fe ff im fh">lupyuen/stm32bluepill-mynewt-sensor</div>
                        </h2>
                        <div class="ji r">
                          <h3 class="bj dy ds bl bo">
                            <div class="di il fe ff im fh">Apache Mynewt Sensor Network Application for STM32 Blue Pill
                              with ESP8266 and nRF24L01 (includes Geolocation) …</div>
                          </h3>
                        </div>
                        <div class="jj r">
                          <h4 class="bj dy fw bl bo">
                            <div class="di il fe ff im fh">github.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="jk r">
                        <div class="jl r jm jn jo jk jp jq jr"></div>
                      </div>
                    </section>
                  </a></div>
                <blockquote class="js jt ju">
                  <p id="7296" class="gh gi ec ht gj b gk gl gm gn go gp gq gr gs gt gu"><em class="bk">💎 </em>Sections
                    marked with a diamond are meant for advanced developers. If you’re new to embedded programming, you
                    may skip these sections</p>
                </blockquote>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="6a01" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Embedded Programming in Rust vs
                  C</h1>
                <p id="cc7d" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">Why is Rust better than C for
                  Embedded Programming? Here’s what I think…</p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="hb hc hd he hf cz ak paragraph-image">
                <div class="dl r dd dm">
                  <div class="dn r">
                    <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                        src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*dlVQOI-V3lBUbc8ImToEsw.png?q=20"
                        width="1702" height="631" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                      width="1702" height="631" role="presentation" /><noscript><img class="cp t u dh ak"
                        src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3404/1*dlVQOI-V3lBUbc8ImToEsw.png"
                        width="1702" height="631" role="presentation" /></noscript>
                  </div>
                </div>
                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Calling the Mynewt Sensor Listener API: Rust
                  Code (left) vs C Code (right)</figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="kw">
                  <div id="476c" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Rust is Strict and Stubborn</p>
                  </div>
                </blockquote>
                <p id="1df5" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">Rust syntax is highly similar to
                  C. If you’re looking at Rust code for the first time, you may think that Rust is an untyped language
                  (like JavaScript) that doesn’t care about the precise types of each variable…</p>
                <p id="b997" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Why would Rust allow <code
                    class="dm ln lo lp lq b">let rc = ...</code> without forcing us to declare <code
                    class="dm ln lo lp lq b">rc</code> as an <code class="dm ln lo lp lq b">int</code> like in C? Does
                  it mean that <code class="dm ln lo lp lq b">rc</code> can change its type from <code
                    class="dm ln lo lp lq b">int</code> to <code class="dm ln lo lp lq b">char*</code>?</p>
                <p id="5c81" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Nope, that’s because Rust has <a
                    href="https://web.archive.org/web/20191204194225/https://en.wikipedia.org/wiki/Type_inference"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">Type
                      Inference</strong></a> — the Rust compiler analyses our source code and deduces that <code
                    class="dm ln lo lp lq b">rc</code> must be an <code class="dm ln lo lp lq b">int</code> (which is
                  named <code class="dm ln lo lp lq b">i32</code> in Rust). Why? Because <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_mgr_api.html#c.sensor_set_poll_rate_ms" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor_set_poll_rate_ms</a>()</code>
                  returns an <code class="dm ln lo lp lq b">i32</code> (32-bit integer). So Rust enforces variable types
                  as strongly as C, just smarter.</p>
                <p id="a496" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Rust is actually<em class="ht">
                    stricter than C</em> — All Rust variables are <a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/stable/book/ch03-01-variables-and-mutability.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">assumed to be constant,
                    unchanging, <strong class="gj gz">immutable</strong></a> (<em class="ht">“stubborn”</em>) unless we
                  declare the variable as <code class="dm ln lo lp lq b"><strong class="gj gz">mut</strong></code>
                  (mutable). Check out the two examples of <code class="dm ln lo lp lq b">mut</code> in the Rust code
                  above.</p>
                <p id="2717" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">C is the opposite<em class="ht">
                    (“loose and relaxed”). </em>All C variables are mutable unless you declare the variable as <code
                    class="dm ln lo lp lq b">const</code>.</p>
                <p id="d797" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Check “<a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/stable/book/"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><em class="ht">The Rust
                      Programming Language</em></a>” for details.</p>
                <blockquote class="kw">
                  <div id="4f66" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Rust is Lean and Lightweight</p>
                  </div>
                </blockquote>
                <p id="1a4f" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">According to <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/logs/build-application.log#L628-L668"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">this actual build log</a> of our
                  combined Rust and Mynewt Sensor application, the entire compiled executable fits into 56 KB of ROM.
                  The compiled Rust application and Rust libraries occupy <strong class="gj gz">under 4 KB of
                    ROM</strong>. (Most of the ROM space was taken up by the ESP8266 and nRF24L01 drivers written in C.)
                </p>
                <p id="dda4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The <strong
                    class="gj gz">lightweight nature</strong> of Rust makes it an excellent replacement for embedded C
                  programming on devices with constrained resources. Like Blue Pill!</p>
                <blockquote class="kw">
                  <div id="5aa3" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Rust Plays Nice with C</p>
                  </div>
                </blockquote>
                <p id="6f23" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">Rust was designed for <strong
                    class="gj gz">low-level systems programming</strong>, like for coding an operating system or web
                  browser (<a class="at cg gv gw gx gy" target="_blank" rel="noopener"
                    href="/web/20191204194225/https://medium.com/mozilla-tech/a-quantum-leap-for-the-web-a3b7174b3c12">Mozilla
                    Firefox</a>). Just like C, Rust is used for bare-metal programming, so it makes sense for <strong
                    class="gj gz">Rust and C functions to be interoperable</strong> — We may call C functions from Rust,
                  and Rust functions from C. Even pass the same <code class="dm ln lo lp lq b">structs</code> from Rust
                  to C and back!</p>
                <p id="03f1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We’ll cover the Rust and C
                  interoperability in a while.</p>
                <blockquote class="kw">
                  <div id="1341" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Rust is Smarter than C</p>
                  </div>
                </blockquote>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="lr ls lt lu lv cz">
                    <div class="dl r dd">
                      <div class="ie r"><iframe
                          src="https://web.archive.org/web/20191204194225if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FeGHxTuRWswY%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DeGHxTuRWswY&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FeGHxTuRWswY%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="640" title="Rust vs C coding"
                          class="cp t u dh ak" scrolling="auto"></iframe></div>
                    </div>
                    <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Visual Studio Code: Rust vs C coding
                    </figcaption>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <p id="4b92" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Check out this comparison of Rust
                  vs C coding in Visual Studio Code. <em class="ht">Why is Rust better than C for coding embedded
                    applications?</em></p>
                <p id="daae" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Remember that Rust supports Type
                  Inference. The Rust compiler keeps deducing all the types of the variables as we type. So Rust
                  provides more helpful <strong class="gj gz">code completion and error highlighting</strong> than C.
                  Rust <a
                    href="https://web.archive.org/web/20191204194225/https://lupyuen.github.io/stm32bluepill-mynewt-sensor/rust/mylib/"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">generates documentation</a> for
                  our functions too.</p>
                <p id="c8b2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This is great for preventing
                  programming errors in Rust, especially for beginners. Often in embedded programs we make undocumented
                  assumptions and take shortcuts to make the programs run on tiny devices. With Type Inference, Rust can
                  <strong class="gj gz">warn new embedded developers about these traps.</strong></p>
                <blockquote class="kw">
                  <div id="f7ea" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Rust is Safer than C</p>
                  </div>
                </blockquote>
                <p id="7042" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">Helping us to write <strong
                    class="gj gz">safer, crash-proof programs</strong> is a key feature of Rust, that’s why we see <code
                    class="dm ln lo lp lq b">unsafe</code> keywords in the Rust code above. We’ll cover <code
                    class="dm ln lo lp lq b">unsafe</code> in a while…</p>
                <blockquote class="kw">
                  <div id="9e1d" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">But…</p>
                  </div>
                </blockquote>
                <p id="02dc" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">Rust is <strong
                    class="gj gz">evolving rapidly</strong>, especially for embedded platforms like Blue Pill. A year
                  ago I wrote two tutorials on Rust embedded programming…</p>
                <div class="if ig ih ii ij ik"><a rel="noopener"
                    href="/web/20191204194225/https://medium.com/coinmonks/coding-the-stm32-blue-pill-with-rust-and-visual-studio-code-b21615d8a20?source=post_page-----c86b119fe5f----------------------">
                    <section class="in cl cm ak ce n ar io ip iq ir is it iu iv iw ix iy iz ja jb jc">
                      <div class="jd n co p je jf">
                        <h2 class="bj jg jh bl ec">
                          <div class="di il fe ff im fh">Coding the STM32 Blue Pill with Rust and Visual Studio Code
                          </div>
                        </h2>
                        <div class="ji r">
                          <h3 class="bj dy ds bl bo">
                            <div class="di il fe ff im fh">[UPDATE — I have written a new tutorial on STM32 Blue Pill
                              coding with C++, libopencm3 and Visual Studio Code, click…</div>
                          </h3>
                        </div>
                        <div class="jj r">
                          <h4 class="bj dy fw bl bo">
                            <div class="di il fe ff im fh">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="jk r">
                        <div class="lw r jm jn jo jk jp jq jr"></div>
                      </div>
                    </section>
                  </a></div>
                <div class="if ig ih ii ij ik"><a rel="noopener"
                    href="/web/20191204194225/https://medium.com/coinmonks/running-rust-and-freertos-on-the-padi-iot-stamp-fb36c5ef4844?source=post_page-----c86b119fe5f----------------------">
                    <section class="in cl cm ak ce n ar io ip iq ir is it iu iv iw ix iy iz ja jb jc">
                      <div class="jd n co p je jf">
                        <h2 class="bj jg jh bl ec">
                          <div class="di il fe ff im fh">Running Rust and FreeRTOS on the PADI IoT Stamp</div>
                        </h2>
                        <div class="ji r">
                          <h3 class="bj dy ds bl bo">
                            <div class="di il fe ff im fh">Now is the best time to experiment with low-cost, low-power
                              IoT microcontrollers.</div>
                          </h3>
                        </div>
                        <div class="jj r">
                          <h4 class="bj dy fw bl bo">
                            <div class="di il fe ff im fh">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="jk r">
                        <div class="lx r jm jn jo jk jp jq jr"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="aa17" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">…And they have already become
                  obsolete.</p>
                <p id="0e43" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="ht">Be very patient if
                    things don’t work quite right in Rust.</em> I may not have the answer for some deep issues, but I’m
                  confident that Rust maintainers will have the answer for us someday.</p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="af57" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Mixing Mynewt and Rust</h1>
                <p id="b102" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">Built in C, Mynewt is a modern,
                  well-designed operating system for microcontrollers. Rust is a modern, smarter, safer programming
                  language for embedded systems. <em class="ht">How shall we enjoy the best of both worlds — Mynewt and
                    Rust? </em>I propose to…</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ly">
                      <div class="dl r dd dm">
                        <div class="lz r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*IJLPy3mlSQ588F4WB0heUg.png?q=20"
                              width="1419" height="1418" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1419" height="1418" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/2838/1*IJLPy3mlSQ588F4WB0heUg.png"
                              width="1419" height="1418" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Layering Rust above Mynewt</figcaption>
                </figure>
                <p id="1dc3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <strong class="gj gz">Leave
                    the Mynewt operating system untouched</strong>, in C. Same goes for Mynewt drivers and libraries,
                  since they were coded by experienced C programmers.</p>
                <p id="ef35" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <strong class="gj gz">Expose
                    the popular Mynewt APIs </strong>through safe Rust interop libraries</p>
                <p id="3f78" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <strong class="gj gz">Allow
                    Rust applications to be hosted</strong> on Mynewt with these exposed APIs</p>
                <p id="de5e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">So new embedded developers (and
                  my IoT students) can start <strong class="gj gz">coding Mynewt applications in Rust, the smarter,
                    safer way</strong>. <em class="ht">No more crashing pointers. Yay!</em></p>
                <p id="8979" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To host a Rust application on
                  Mynewt, we need to be sure that C and Rust can really call each other seamlessly…</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ma">
                      <div class="dl r dd dm">
                        <div class="mb r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*9nwqk1KOG--TCU0inIG2Xw.png?q=20"
                              width="1910" height="1130" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1910" height="1130" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3820/1*9nwqk1KOG--TCU0inIG2Xw.png"
                              width="1910" height="1130" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust and C interoperability</figcaption>
                </figure>
                <p id="768d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ Rust must allow <strong
                    class="gj gz">importing of Mynewt’s C API.</strong> So Rust functions must be able to call C
                  functions: <br /><strong class="gj gz">Rust ⟶ C</strong></p>
                <p id="1449" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ Rust must allow <strong
                    class="gj gz">callbacks from Mynewt’s C API</strong>. So Rust must allow its functions to be called
                  from C functions: <br /><strong class="gj gz">Rust ⟵ C</strong></p>
                <p id="3055" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ Rust must allow <code
                    class="dm ln lo lp lq b"><strong class="gj gz">structs</strong></code><strong class="gj gz"> to be
                    passed from Rust to C and back</strong>: <br /><strong class="gj gz">Rust ⟵📦⟶ C</strong></p>
                <p id="e1b7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Fortunately, Rust fulfils all the
                  criteria above. For example, to import the following <a
                    href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_api.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Mynewt Sensor API </a>functions
                  into our Rust application…</p>
                <p id="4020" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">int <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_mgr_api.html#c.sensor_set_poll_rate_ms" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">sensor_set_poll_rate_ms</strong></a>(const char *<em class="ht"> devname</em>, uint32_t<em class="ht"> poll_rate</em>)</code>
                </p>
                <p id="a29b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">struct <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_api.html#c.sensor" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor</a>* <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_mgr_api.html#c.sensor_mgr_find_next_bydevname" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">sensor_mgr_find_next_bydevname</strong></a>(const char *<em class="ht"> devname</em>, struct <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_api.html#c.sensor" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor</a>*<em class="ht"> prev_cursor</em>)</code>
                </p>
                <p id="381c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">int <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">sensor_register_listener</strong></a>(struct <a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_api.html#c.sensor" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor</a> *<em class="ht"> sensor</em>, struct sensor_listener *<em class="ht"> listener</em>)</code>
                </p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm mc md me mf hr">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/5237f77b26c945c31dec99f5e0db845b"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="import-sensor-api.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust code to import Mynewt Sensor API. From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L35-L62"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L35-L62</a>
                  </figcaption>
                </figure>
                <p id="556a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">…We just compile this Rust code
                  with our Rust application, then we can call the Mynewt functions as though they were Rust functions!
                </p>
                <p id="c970" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">💎 <em class="ht">How did we
                    derive the Rust import declarations above from the Mynewt C declarations? This is explained in the
                    section “Calling C from Rust and back” below.</em></p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="f557" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Is This Code Unsafe?</h1>
                <p id="8911" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu"><em class="ht">Question</em>:
                  What’s wrong with this C function that calls the Mynewt API <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor_register_listener</a>()</code>?
                </p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/f653cac09197a56bd3022011c1144798"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="start_sensor_listener_unsafe.c"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                </figure>
                <p id="dfc3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="ht">Answer</em>: <code
                    class="dm ln lo lp lq b">listener</code> is a variable created on the stack frame for <code
                    class="dm ln lo lp lq b">start_sensor_listener()</code>. When passed to <code
                    class="dm ln lo lp lq b">sensor_register_listener()</code>, the <code
                    class="dm ln lo lp lq b">listener</code> is appended directly to the global list of sensor
                  listeners, without copying.</p>
                <p id="1ea7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">When <code
                    class="dm ln lo lp lq b">start_sensor_listener()</code> returns, the stack frame is reused by other
                  functions and the <code class="dm ln lo lp lq b">listener</code> may contain garbage. When the sensor
                  is polled 10 seconds later, Mynewt fetches the garbled <code class="dm ln lo lp lq b">listener</code>
                  to call the listener function. Which results in a catastrophic device failure. <em class="ht">One IoT
                    Device Down!</em></p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm mh">
                      <div class="dl r dd dm">
                        <div class="mi r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*wb5rYBsYtVbf_ePZ7sjyeA.png?q=20"
                              width="2152" height="1468" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="2152" height="1468" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/4304/1*wb5rYBsYtVbf_ePZ7sjyeA.png"
                              width="2152" height="1468" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Bewildering variable choices for the C
                    programmer</figcaption>
                </figure>
                <p id="8b23" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This is one key reason why my IoT
                  students find C programming so hard…<em class="ht"> Every time we define a variable in C, we need to
                    pick wisely whether it should be a</em> 1️⃣ <strong class="gj gz">Static Variable, 2️⃣ Stack
                    Variable or 3️⃣ Heap Variable.</strong></p>
                <p id="e960" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Choosing the wrong one will have
                  <em class="ht">dire consequences</em>… that’s why Rust calls this “<strong
                    class="gj gz">Unsafe</strong>” code.</p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="385c" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Unsafe Coding in Rust</h1>
                <p id="c688" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">Rust doesn’t prevent us from
                  writing unsafe code though — it requires us to flag the code as unsafe using the <code
                    class="dm ln lo lp lq b">unsafe</code> keyword. Otherwise the Rust compiler politely terminates and
                  refuses to generate any unsafe executables, for our safety.</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/58db0866498d3375aa6b983a91771dcb"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="start_sensor_listener_unsafe.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                </figure>
                <p id="6f51" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In the Rust code above we are
                  required to ring the alarm bells and flag as <code class="dm ln lo lp lq b">unsafe</code> the call to
                  <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor_register_listener</a>()</code>
                  because…</p>
                <p id="3d0e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ We are <strong
                    class="gj gz">passing the address</strong> of the <code class="dm ln lo lp lq b">listener</code> to
                  a function <code class="dm ln lo lp lq b">sensor_register_listener()</code>. Which may cause problems
                  if the <code class="dm ln lo lp lq b">listener</code> was allocated incorrectly (like on the stack).
                  <code class="dm ln lo lp lq b">&amp;mut listener</code> is equivalent to <code
                    class="dm ln lo lp lq b">&amp;listener</code> in C, just that it also declares to Rust that the
                  <code class="dm ln lo lp lq b">listener</code> contents may change (mutable).</p>
                <p id="e237" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code
                    class="dm ln lo lp lq b">sensor_register_listener()</code> is a C function defined by Mynewt, that
                  we have imported into Rust. <strong class="gj gz">All imported functions must be flagged as
                  </strong><code class="dm ln lo lp lq b"><strong class="gj gz">unsafe</strong></code> because, as we
                  know, C functions are capable of doing really weird things.</p>
                <p id="08c0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">But we don’t really want <code
                    class="dm ln lo lp lq b">unsafe</code> alarm bells to ring in our heads every time we call the
                  Mynewt API. <em class="ht">Is there a safer way to silence the alarms?</em></p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="ba09" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Safer Coding in Rust</h1>
                <p id="7fa9" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">The safer way to call <code
                    class="dm ln lo lp lq b">unsafe</code> Mynewt APIs in Rust is to <a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/1.6.0/book/ffi.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">create
                      wrapper functions</strong></a> to check the parameters and the return values.</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/a5917598c04b186cb08a0a1e409a010d"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="start_sensor_listener_safe.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs</a>
                  </figcaption>
                </figure>
                <p id="30e3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Check this out… we can now
                  register a sensor listener without flagging as <code class="dm ln lo lp lq b">unsafe</code>! And the
                  listener was allocated on the stack!</p>
                <p id="2453" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This is the <em
                    class="ht">perfect kind of API</em> that my IoT students should be calling, without fear of <em
                    class="ht">crashing their devices</em>. What is the magic that makes this happen?</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/f0854fab2a0aef8f916735fa39c4e10b"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="register_listener.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy"><a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs</a>
                  </figcaption>
                </figure>
                <p id="0404" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s how we created <code
                    class="dm ln lo lp lq b">register_listener()</code> as the safe version of the <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor_register_listener</a>()</code>
                  API in Mynewt… <code class="dm ln lo lp lq b">register_listener()</code> makes a <strong
                    class="gj gz">local static copy of the listener</strong>, and passes the local copy to the unsafe
                  <code class="dm ln lo lp lq b">sensor_register_listener()</code>. So even if the listener was created
                  on the stack, we are actually passing a static copy to the Mynewt API. Which won’t crash the device.
                </p>
                <p id="620f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We have created a simple Rust
                  wrapper that reuses the same types used by the Mynewt API. (That’s why <code
                    class="dm ln lo lp lq b">register_listener()</code> returns an integer as the result code.) But Rust
                  APIs generally use a different convention to return results — <a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">the </a><code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Result</a></code><a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"> type</a>. We’ll cover this in the
                  next article.</p>
                <blockquote class="js jt ju">
                  <p id="a898" class="gh gi ec ht gj b gk gl gm gn go gp gq gr gs gt gu"><em class="bk">💎 </em>This
                    implementation looks simplistic… what if we need more sensor listeners? But in reality our device
                    RAM is highly constrained and we should plan in advance how many sensor listeners we really need
                    (and set it as a <code class="dm ln lo lp lq b">#define</code>). Then we create an array of
                    listeners that’s allocated by <code class="dm ln lo lp lq b">register_listener()</code>.</p>
                  <p id="bbc0" class="gh gi ec ht gj b gk gl gm gn go gp gq gr gs gt gu">What about allocating listeners
                    on the heap? That could be a good solution but I’m not keen on using the heap on constrained devices
                    (because we never know when we’ll run out of heap space). The <code
                      class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://docs.rust-embedded.org/book/collections/" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">alloc</a></code><a
                      href="https://web.archive.org/web/20191204194225/https://docs.rust-embedded.org/book/collections/"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"> heap allocator</a> needs to be
                    implemented for our Rust environment.</p>
                </blockquote>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="99fb" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">The Typical Rust Build</h1>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm mj">
                      <div class="dl r dd dm">
                        <div class="mk r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/14/1*lDTTuwNPViPIkzKrlYFWOw.png?q=20"
                              width="226" height="1012" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="226" height="1012" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/452/1*lDTTuwNPViPIkzKrlYFWOw.png"
                              width="226" height="1012" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Files involved in the Rust build</figcaption>
                </figure>
                <p id="9c3d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To understand how we merged the
                  Rust build with Mynewt, let’s look at the typical Rust build process.</p>
                <p id="f8d6" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The following files are present
                  in a standard Rust build. You can find them in your <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">stm32bluepill-mynewt-sensor</a></code>
                  folder too…</p>
                <p id="9187" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/Cargo.toml" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">Cargo.toml</strong></a></code>:
                  Just like building a typical Rust application, in Mynewt we run the command <code
                    class="dm ln lo lp lq b">cargo build</code> to build our embedded Rust application.</p>
                <p id="76ed" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">cargo</code> performs the build according to the settings file <code
                    class="dm ln lo lp lq b">Cargo.toml</code>. This file must be present at the root of the workspace
                  folder.</p>
                <p id="41d0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We’ll check the contents of <code
                    class="dm ln lo lp lq b">Cargo.toml</code> in a while.</p>
                <p id="5e65" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/.cargo/config" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">.cargo/config</strong></a></code>:
                  Our Rust build is for an embedded platform: STM32 Blue Pill. The target platform is specified in this
                  file.</p>
                <p id="9a91" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We’ll check the contents of <code
                    class="dm ln lo lp lq b"><strong class="gj gz">.cargo/config</strong></code> in a while.</p>
                <p id="f7eb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/src" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">src</strong></a></code>:
                  This folder contains the Rust source code. <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/lib.rs" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">lib.rs</strong></a></code>
                  is the main Rust module that pulls in the other Rust files for the build (via the <code
                    class="dm ln lo lp lq b">mod</code> declaration).</p>
                <p id="7fc2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">4️⃣ <code
                    class="dm ln lo lp lq b"><strong class="gj gz">target/thumbv7m-none-eabi/debug</strong></code>: The
                  <code class="dm ln lo lp lq b">cargo build</code> command compiles the <code
                    class="dm ln lo lp lq b">src</code> files and generates in this <code
                    class="dm ln lo lp lq b">debug</code> folder the Rust executable or library (according to <code
                    class="dm ln lo lp lq b">Cargo.toml</code>).</p>
                <figure class="hb hc hd he hf cz cl cm paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ml">
                      <div class="dl r dd dm">
                        <div class="mm r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <figure class="du cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm mn">
                      <div class="dl r dd dm">
                        <div class="mo r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*T6yHd_9UythCkdUZK_W2cw.png?q=20"
                              width="1080" height="446" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1080" height="446" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/2160/1*T6yHd_9UythCkdUZK_W2cw.png"
                              width="1080" height="446" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Compiled Rust code in <code
                      class="dm ln lo lp lq b">libmylib.rlib</code></figcaption>
                </figure>
                <p id="dad5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In our build, <code
                    class="dm ln lo lp lq b">cargo</code> generates a library archive file <code
                    class="dm ln lo lp lq b">libmylib.rlib</code>. If we peek at the contents of the archive file
                  …<br /> <code
                    class="dm ln lo lp lq b">arm-none-eabi-ar t target/thumbv7m-none-eabi/debug/libmylib.rlib</code><br />…we’ll
                  see that it contains <code class="dm ln lo lp lq b">*.o</code> object files, the compiled Rust code.
                </p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="cl cm mp">
                    <div class="dl r dd dm">
                      <div class="mq r">
                        <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/40/1*gZKgb2lBLeA3a9b-urKDow.png?q=20"
                            width="349" height="526" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                          width="349" height="526" role="presentation" /><noscript><img class="cp t u dh ak"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/698/1*gZKgb2lBLeA3a9b-urKDow.png"
                            width="349" height="526" role="presentation" /></noscript>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="4a06" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">But the files in this <code
                    class="dm ln lo lp lq b">debug</code> folder exclude the external Rust libraries called by our
                  application (like <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://crates.io/crates/cty" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">cty</a></code>
                  and <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://crates.io/crates/cstr_core" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">cstr_core</a></code>).
                </p>
                <p id="53d4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To include the external Rust
                  libraries for the Mynewt build, we need to look one level deeper: <code
                    class="dm ln lo lp lq b"><strong class="gj gz">debug/deps</strong></code></p>
                <p id="3421" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This folder contains the compiled
                  <code class="dm ln lo lp lq b">*.rlib</code> archive files for our Rust application (<code
                    class="dm ln lo lp lq b">libmylib-*.rlib</code>) as well as external Rust libraries.</p>
                <p id="fbb9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">As we’ll see later, all the <code
                    class="dm ln lo lp lq b">*.rlib</code> files in <code
                    class="dm ln lo lp lq b"><strong class="gj gz">debug/deps</strong></code> will be injected into the
                  Mynewt build.</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm mr">
                      <div class="dl r dd dm">
                        <div class="ms r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/50/1*xtPtQvUH_Jf3Wv85PpmlVA.png?q=20"
                              width="1395" height="1651" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1395" height="1651" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/2790/1*xtPtQvUH_Jf3Wv85PpmlVA.png"
                              width="1395" height="1651" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Typical Rust Build</figcaption>
                </figure>
                <p id="70d3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">5️⃣ <strong class="gj gz">Rust
                    Core Library </strong><code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/edition-guide/rust-2018/platform-and-target-support/libcore-for-low-level-rust.html" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">libcore</strong></a></code>:
                  There’s one important Rust library that’s missing — the Rust Core Library <code
                    class="dm ln lo lp lq b">libcore</code>. This library contains the fundamental code needed to
                  implement the <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/logs/libcore.S"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">core Rust functions</a>: data
                  structures, math, panicking, text formatting, …</p>
                <p id="5627" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">libcore</code> is automatically included during the <code
                    class="dm ln lo lp lq b">cargo</code> build if we use <code class="dm ln lo lp lq b">cargo</code> to
                  generate the executable. But here we are using Mynewt to generate the executable, so we need to add
                  <code class="dm ln lo lp lq b">libcore</code> ourselves.</p>
                <p id="e182" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Where is <code
                    class="dm ln lo lp lq b">libcore</code> located? It’s actually located together with the Rust
                  compiler (not with the <code class="dm ln lo lp lq b">cargo</code> installation). <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L91-L109"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Our build script</a> runs this
                  command to get the location…</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/a0051b05c607a5b6689432fd0fe729e0"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="build-app-libcore.sh"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Locating the Rust Core Library libcore. From
                    <a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L91-L109"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L91-L109</a>
                  </figcaption>
                </figure>
                <p id="7220" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">On my Mac, <code
                    class="dm ln lo lp lq b">libcore</code> is located at <code
                    class="dm ln lo lp lq b">/Users/Luppy/.rustup/toolchains/nightly-2019–05–22-x86_64-apple-darwin/lib/rustlib/thumbv7m-none-eabi/lib/libcore-e6b0ad9835323d10.rlib</code>
                </p>
                <p id="c6ac" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Note that <code
                    class="dm ln lo lp lq b">libcore</code> is specific to the target platform (Blue Pill is <code
                    class="dm ln lo lp lq b">thumbv7m-none-eabi</code>). We’ll link the <code
                    class="dm ln lo lp lq b">libcore</code> library in the Mynewt build.</p>
                <blockquote class="js jt ju">
                  <p id="968c" class="gh gi ec ht gj b gk gl gm gn go gp gq gr gs gt gu"><em class="bk">💎 </em>The
                    disassembled code for our Rust application is <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/logs/libmylib-demangle.S"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">available here</a>. The
                    disassembled code for <code class="dm ln lo lp lq b">libcore</code> is <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/logs/libcore.S"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">available here</a>.</p>
                </blockquote>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="a9a7" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Rust Build Settings</h1>
                <p id="c42e" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">Let’s look at the simple Rust
                  build settings for our project (which was inspired by <a
                    href="https://web.archive.org/web/20191204194225/https://rust-embedded.github.io/book/start/qemu.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">this sample</a>)…</p>
                <blockquote class="kw">
                  <div id="9f39" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo"><a
                        href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/Cargo.toml"
                        class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong
                          class="az">Cargo.toml</strong></a></p>
                  </div>
                </blockquote>
                <figure class="lr ls lt lu lv cz dr hg cd hh hi hj hk hl ba hm mc md me mf hr">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/ecd5d24c360dd2190548b3605b26d0fa"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="Cargo.toml" class="cp t u dh ak"
                        scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust build settings. From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/Cargo.toml"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/Cargo.toml</a>
                  </figcaption>
                </figure>
                <p id="74f7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here we indicate to <code
                    class="dm ln lo lp lq b">cargo</code> that we’re generating a library <code
                    class="dm ln lo lp lq b">[lib]</code> (instead of an executable <code
                    class="dm ln lo lp lq b">[bin]</code>).</p>
                <p id="acaf" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To keep the ROM size small, we
                  have included only a few small libraries.</p>
                <p id="a5f0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This <code
                    class="dm ln lo lp lq b">Cargo.toml</code><strong class="gj gz"> </strong>produces the compiled Rust
                  library <code class="dm ln lo lp lq b">libmylib.rlib</code> that we’ll link with Mynewt.</p>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz mt mu paragraph-image">
                    <div class="db dc dd de ak">
                      <div class="cl cm ml">
                        <div class="dl r dd dm">
                          <div class="mm r">
                            <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*NXF9cW-NQS7kcd8d1huhAQ.png?q=20"
                                width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                              width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*NXF9cW-NQS7kcd8d1huhAQ.png"
                                width="1800" height="50" role="presentation" /></noscript>
                          </div>
                        </div>
                      </div>
                    </div>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="kw">
                  <div id="bef0" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo"><code
                        class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/.cargo/config" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="az">.cargo/config</strong></a></code>
                    </p>
                  </div>
                </blockquote>
                <figure class="lr ls lt lu lv cz dr hg cd hh hi hj hk hl ba hm mc md me mf hr">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/1db5330afa7f88b5fc53b805b3234d2a"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="cargo-config.toml"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust target settings. From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/.cargo/config"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/.cargo/config</a>
                  </figcaption>
                </figure>
                <p id="a604" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here we select the target
                  platform for the Rust compiler.</p>
                <p id="ce0d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">STM32 Blue Pill runs on an Arm
                  Cortex-M3 processor (which is based on the <a
                    href="https://web.archive.org/web/20191204194225/https://en.wikipedia.org/wiki/ARM_Cortex-M#Cortex-M3"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">ARMv7-M architecture</a>), so we
                  have chosen the target <code class="dm ln lo lp lq b">thumbv7m-none-eabi</code></p>
                <p id="7f6b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">cargo build</code> will then generate compiled code in <code
                    class="dm ln lo lp lq b">libmylib.rlib </code>that will run on our Blue Pill.</p>
                <figure class="hb hc hd he hf cz cl cm paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ml">
                      <div class="dl r dd dm">
                        <div class="mm r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="00e2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">As we have seen, <strong
                    class="gj gz">we haven’t changed anything in the Rust </strong><code
                    class="dm ln lo lp lq b"><strong class="gj gz">cargo build</strong></code><strong class="gj gz">
                    process</strong>. We used the standard <code class="dm ln lo lp lq b">cargo build</code> command to
                  generate a Rust library <code class="dm ln lo lp lq b">libmylib.rlib</code> for our Rust application.
                </p>
                <p id="24e5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The integration of Rust with
                  Mynewt is actually done by <strong class="gj gz">our custom build script that injects the compiled
                    Rust files into the Mynewt build</strong>. Before going into the integration details, let’s learn
                  about the Mynewt build…</p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <figure class="hb hc hd he hf cz cl cm paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm mv">
                      <div class="dl r dd dm">
                        <div class="mw r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*PafibhSo-rVT1RddaVomuA.png?q=20"
                              width="2493" height="1464" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="2493" height="1464" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/4986/1*PafibhSo-rVT1RddaVomuA.png"
                              width="2493" height="1464" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Typical Mynewt Build</figcaption>
                </figure>
                <h1 id="01cf" class="ke kf ec bk bj jg kg mx ki my kk mz km na ko nb kq">The Typical Mynewt Build</h1>
                <p id="9661" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">The normal Mynewt build command
                  <code class="dm ln lo lp lq b">newt build</code> compiles some C and assembly files from these
                  folders…</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="cl cm nc">
                    <div class="dl r dd dm">
                      <div class="nd r">
                        <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/18/1*OYkrzDkVIYxktW05cwiBBA.png?q=20"
                            width="254" height="840" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                          width="254" height="840" role="presentation" /><noscript><img class="cp t u dh ak"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/508/1*OYkrzDkVIYxktW05cwiBBA.png"
                            width="254" height="840" role="presentation" /></noscript>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Libraries generated by newt build</figcaption>
                </figure>
                <p id="abf0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/apps/my_sensor_app" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">apps/my_sensor_app</strong></a></code>:
                  Our custom C application for Mynewt</p>
                <p id="fb5a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/libs" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">libs</strong></a></code>:
                  Custom drivers (e.g. ESP8266) and libraries (e.g. Sensor Network) for Mynewt</p>
                <p id="dff8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <code
                    class="dm ln lo lp lq b"><strong class="gj gz">repos</strong></code>: Mynewt OS source code</p>
                <p id="a9a1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">newt build</code> compiles each source module (e.g. <code
                    class="dm ln lo lp lq b">my_sensor_app</code>, <code class="dm ln lo lp lq b">esp8266</code>) into a
                  separate <code class="dm ln lo lp lq b">*.a</code> library (e.g. <code
                    class="dm ln lo lp lq b">apps_my_sensor_app.a</code>, <code
                    class="dm ln lo lp lq b">libs_esp8266.a</code>), located at <code
                    class="dm ln lo lp lq b">bin/targets/bluepill_my_sensor</code></p>
                <p id="f3cb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">newt build</code> links the <code class="dm ln lo lp lq b">*.a</code>
                  libraries together to create the Blue Pill executable image <code
                    class="dm ln lo lp lq b">/bin/targets/bluepill_my_sensor/app/apps/my_sensor_app/my_sensor_app.elf</code>
                </p>
                <p id="c250" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This is the image that get
                  flashed into the Blue Pill ROM.</p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="cz ak">
              <figure class="hb hc hd he hf cz ak paragraph-image">
                <div class="db dc dd de ak">
                  <div class="dl r dd dm">
                    <div class="ne r">
                      <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                          src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*i8iXOjGKYidtuosPekWVGQ.png?q=20"
                          width="4000" height="2347" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                        width="4000" height="2347" role="presentation" /><noscript><img class="cp t u dh ak"
                          src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/8000/1*i8iXOjGKYidtuosPekWVGQ.png"
                          width="4000" height="2347" role="presentation" /></noscript>
                    </div>
                  </div>
                </div>
                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Combined build with Rust and Mynewt: <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L1"
                    class="at cg gv gw gx gy" target="_blank"
                    rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh</a>
                </figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="0623" class="ke kf ec bk bj jg kg mx ki my kk mz km na ko nb kq">Merging the Rust build with
                  Mynewt</h1>
                <p id="a00c" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">To host a Rust application on
                  Mynewt, we just need to inject three pieces of compiled code into the Mynewt build…</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="cl cm nf">
                    <div class="dl r dd dm">
                      <div class="ng r">
                        <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/20/1*qnsoPxdBv5z_qXuJehQeYA.png?q=20"
                            width="344" height="1030" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                          width="344" height="1030" role="presentation" /><noscript><img class="cp t u dh ak"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/688/1*qnsoPxdBv5z_qXuJehQeYA.png"
                            width="344" height="1030" role="presentation" /></noscript>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Overwriting libs_rust_app.a by the compiled
                    Rust application and libraries</figcaption>
                </figure>
                <p id="6fb8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <strong
                    class="gj gz">Compiled Rust application</strong>: <code
                    class="dm ln lo lp lq b">libmylib.rlib</code></p>
                <p id="ec2d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <strong
                    class="gj gz">Compiled external Rust libraries</strong>: <code
                    class="dm ln lo lp lq b">target/thumbv7m-none-eabi/debug/deps/*.rlib.</code> This folder also
                  contains <code class="dm ln lo lp lq b">libmylib.rlib</code></p>
                <p id="1973" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <strong class="gj gz">Rust
                    Core Library </strong><code class="dm ln lo lp lq b"><strong class="gj gz">libcore</strong></code>:
                  <code
                    class="dm ln lo lp lq b">~/.rustup/toolchains/nightly-*/lib/rustlib/thumbv7m-none-eabi/lib/libcore-*.rlib</code>
                </p>
                <p id="57fb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To do that, we have a super build
                  script <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">scripts/build-app.sh</strong></a></code>
                  that runs the Rust <code class="dm ln lo lp lq b">cargo build</code> command and injects the above
                  files at these Mynewt build locations…</p>
                <p id="c88e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <strong class="gj gz">Rust
                    application and external Rust libraries</strong>: Copy and overwrite <code
                    class="dm ln lo lp lq b">bin/targets/bluepill_my_sensor/app/libs/rust_app/libs_rust_app.a</code></p>
                <p id="8472" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <strong class="gj gz">Rust
                  </strong><code class="dm ln lo lp lq b"><strong class="gj gz">libcore</strong></code>: Copy and
                  overwrite <code
                    class="dm ln lo lp lq b">bin/targets/bluepill_my_sensor/app/libs/rust_libcore/libs_rust_libcore.a</code>
                </p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm hn ho hp hq hr paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm nh">
                      <div class="dl r dd dm">
                        <div class="ni r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*1BKmKJu6oxhhr8nvsCsITg.png?q=20"
                              width="660" height="566" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="660" height="566" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/1320/1*1BKmKJu6oxhhr8nvsCsITg.png"
                              width="660" height="566" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">rust_app and rust_libcore are empty stub
                    libraries</figcaption>
                </figure>
                <p id="4f1a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">What are <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/libs/rust_app" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">rust_app</strong></a></code>
                  and <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/libs/rust_libcore" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">rust_libcore</strong></a></code>?
                  These are custom stub libraries that we added to Mynewt at <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/libs/rust_app" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">libs/rust_app</a></code>
                  and <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/libs/rust_libcore" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">libs/rust_libcore</a></code>.
                  No meaningful code inside, just stubs.</p>
                <p id="9cc2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">But because we instructed Mynewt
                  to <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/apps/my_sensor_app/pkg.yml#L17-L21"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">include them as part of the Mynewt
                    build</a>, Mynewt compiles them and generates the tiny libraries <code
                    class="dm ln lo lp lq b">libs_rust_app.a</code> and <code
                    class="dm ln lo lp lq b">libs_rust_libcore.a</code></p>
                <p id="0d39" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Which gives us the perfect
                  opportunity to substitute <code class="dm ln lo lp lq b">libs_rust_app.a</code> and <code
                    class="dm ln lo lp lq b">libs_rust_libcore.a</code> with our compiled Rust code.</p>
                <p id="3e22" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Our super build script <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L77-L83"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">overwrites </a><code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L77-L83" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">libs_rust_app.a</a></code>
                  with the compiled Rust application and libraries, and <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L91-L109"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">overwrites </a><code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L91-L109" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">libs_rust_libcore.a</a></code>
                  with the Rust <code class="dm ln lo lp lq b">libcore</code> library. So when <code
                    class="dm ln lo lp lq b">newt build</code> links all the <code class="dm ln lo lp lq b">*.a</code>
                  libraries, the <strong class="gj gz">Rust code gets injected into </strong><code
                    class="dm ln lo lp lq b"><strong class="gj gz">my_sensor_app.elf</strong></code>, which will be
                  flashed into the Blue Pill ROM. Sneaky!</p>
                <figure class="hb hc hd he hf cz dr hg cd hh hi hj hk hl ba hm mc md me mf hr">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/ece08a9309fa020dea9113c7fb7173b4"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="rustlib.sh" class="cp t u dh ak"
                        scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L51-L83"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L51-L83</a>
                  </figcaption>
                </figure>
                <p id="c238" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">But how do we replace <code
                    class="dm ln lo lp lq b">libs_rust_app.a</code> by multiple <code
                    class="dm ln lo lp lq b">*.rlib</code> libraries: <code
                    class="dm ln lo lp lq b">libmylib.rlib</code> + <code class="dm ln lo lp lq b">libcty.rlib</code> +
                  <code class="dm ln lo lp lq b">libcstr_core.rlib</code> + ...?</p>
                <p id="fa2a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Our <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/scripts/build-app.sh#L51-L83"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">super build script</a> extracts
                  the <code class="dm ln lo lp lq b">*.o</code> object files from every <code
                    class="dm ln lo lp lq b">*.rlib</code> file and archives them into a single <code
                    class="dm ln lo lp lq b">rustlib.a</code> library.</p>
                <p id="fceb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">That’s how we create the Mynewt
                  ROM for Blue Pill that includes the Rust application and libraries!</p>
                <figure class="hb hc hd he hf cz cl cm paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ml">
                      <div class="dl r dd dm">
                        <div class="mm r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
                <p id="6338" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This video explains the combined
                  Rust and Mynewt build…</p>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz">
                    <div class="dl r dd">
                      <div class="ie r"><iframe
                          src="https://web.archive.org/web/20191204194225if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FQTTqRlsiBfk%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DQTTqRlsiBfk&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FQTTqRlsiBfk%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="640"
                          title="Hosting Rust Applications on Apache Mynewt - Build" class="cp t u dh ak"
                          scrolling="auto"></iframe></div>
                    </div>
                    <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Building the combined Rust and Mynewt code
                    </figcaption>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="js jt ju">
                  <p id="83a9" class="gh gi ec ht gj b gk gl gm gn go gp gq gr gs gt gu"><em class="bk">💎 </em>The
                    complete Rust and Mynewt build log is <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/logs/build-application.log#L1"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">available here</a>. The
                    disassembled code for our Mynewt ROM image is <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/logs/my_sensor_app.elf.lst"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">available here</a>.</p>
                </blockquote>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="48c2" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Installation and Configuration
                </h1>
                <p id="b392" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">If you have the <a
                    href="https://web.archive.org/web/20191204194225/http://wiki.stm32duino.com/index.php?title=Blue_Pill"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">STM32 Blue Pill</a> or <a
                    class="at cg gv gw gx gy" target="_blank" rel="noopener"
                    href="/web/20191204194225/https://medium.com/swlh/super-blue-pill-like-stm32-blue-pill-but-better-6d341d9347da">Super
                    Blue Pill</a> and you wish to install and configure the Rust and Mynewt demo code, <a
                    href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/README.md"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">follow the instructions here</a>.
                  The steps are quite lengthy and you may run into hiccups, so I don’t recommend this if you’re new to
                  embedded development.</p>
                <p id="878e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Make sure that you’re using the
                  <code class="dm ln lo lp lq b">rust</code> branch of the code, not the <code
                    class="dm ln lo lp lq b">master</code> branch (that was used in previous articles)…</p>
                <p id="3b88" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/<strong class="gj gz">rust</strong></a></code>
                </p>
                <p id="64a9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Verify that the <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/README.md" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">README.md</a></code>
                  says…</p>
                <pre
                  class="hb hc hd he hf nj nk nl"><span id="8033" class="nm kf ec bk lq b ds nn no r np">Note: This is the rust branch that contains a Rust application hosted on Mynewt</span></pre>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="afdc" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Conclusion</h1>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz">
                    <div class="dl r dd">
                      <div class="ie r"><iframe
                          src="https://web.archive.org/web/20191204194225if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FPj3pl6GaztU%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DPj3pl6GaztU&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FPj3pl6GaztU%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="640"
                          title="Hosting Rust Applications on Apache Mynewt - Run" class="cp t u dh ak"
                          scrolling="auto"></iframe></div>
                    </div>
                    <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Running our Rust application on Mynewt
                    </figcaption>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <p id="51c3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s a video of our Rust
                  application, hosted on Mynewt, running on an actual Blue Pill. It works as expected: Reading the Blue
                  Pill’s internal temperature sensor every 10 seconds and displaying the results— <em
                    class="ht">Yay!</em></p>
                <p id="683e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">With some simple build
                  integration, we have proven that it’s indeed possible to <strong class="gj gz">host Rust applications
                    on Mynewt</strong> (and probably other embedded operating systems too). And it requires <strong
                    class="gj gz">very little RAM and ROM to support embedded Rust.</strong></p>
                <p id="12b7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Perhaps the bigger challenge is
                  to <strong class="gj gz">design a Rust API for Mynewt that’s safe and easy to use.</strong></p>
                <p id="a0cf" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In the meantime, what we have
                  created is probably sufficient for new embedded developers (and my students) to <strong
                    class="gj gz">create IoT devices in Rust and Mynewt without fear of memory corruption</strong>. <em
                    class="ht">Saving the world from unsafe embedded C programming… one microstep at a time!</em></p>
                <p id="e064" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Check out the latest article on
                  Visual Embedded Rust…</p>
                <div class="if ig ih ii ij ik"><a rel="noopener"
                    href="/web/20191204194225/https://medium.com/@ly.lee/visual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c?source=post_page-----c86b119fe5f----------------------">
                    <section class="in cl cm ak ce n ar io ip iq ir is it iu iv iw ix iy iz ja jb jc">
                      <div class="jd n co p je jf">
                        <h2 class="bj jg jh bl ec">
                          <div class="di il fe ff im fh">Visual Embedded Rust Programming with Visual Studio Code</div>
                        </h2>
                        <div class="ji r">
                          <h3 class="bj dy ds bl bo">
                            <div class="di il fe ff im fh">Create and edit Embedded Rust programs for STM32 Blue Pill
                              and Apache Mynewt… By dragging and dropping blocks!</div>
                          </h3>
                        </div>
                        <div class="jj r">
                          <h4 class="bj dy fw bl bo">
                            <div class="di il fe ff im fh">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="jk r">
                        <div class="nq r jm jn jo jk jp jq jr"></div>
                      </div>
                    </section>
                  </a></div>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="68b3" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq">Further Reading for Embedded
                  Rust</h1>
                <p id="2b19" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">1️⃣ <strong class="gj gz"><em
                      class="ht">“</em></strong><a
                    href="https://web.archive.org/web/20191204194225/https://rust-embedded.github.io/book/"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz"><em
                        class="ht">The Embedded Rust Book</em></strong></a><strong class="gj gz"><em
                      class="ht">”</em></strong> was highly informative for embedded Rust programming on Arm Cortex M3
                </p>
                <p id="5798" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <em class="ht">“</em><a
                    href="https://web.archive.org/web/20191204194225/https://os.phil-opp.com/" class="at cg gv gw gx gy"
                    target="_blank" rel="noopener nofollow"><strong class="gj gz"><em class="ht">Writing an OS in
                        Rust</em></strong></a><strong class="gj gz">” </strong>has plenty of tips for coding operating
                  systems in Rust</p>
                <p id="d525" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://github.com/hashmismatch/freertos.rs" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow"><strong class="gj gz">freertos.rs</strong></a></code>
                  (Rust wrapper for <a href="https://web.archive.org/web/20191204194225/https://www.freertos.org/"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">FreeRTOS</a>) was the original
                  inspiration for creating a safe Rust wrapper around an embedded operating system</p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="js jt ju">
                  <p id="634a" class="gh gi ec ht gj b gk gl gm gn go gp gq gr gs gt gu"><em class="bk">💎 </em>The
                    following Advanced Topic sections are for advanced developers. If you’re new to embedded
                    programming, you may stop here.</p>
                </blockquote>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="34b5" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq"><em class="nr">💎 </em>Advanced
                  Topic: Calling C from Rust and back</h1>
                <p id="55a6" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">In this section we go into detail
                  to see how C functions and <code class="dm ln lo lp lq b">structs</code> are imported into Rust, and
                  how to export Rust functions to C.</p>
                <blockquote class="kw">
                  <div id="494a" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Import C Functions into Rust: Rust ⟶ C</p>
                  </div>
                </blockquote>
                <p id="1ebd" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">For our demo Rust application, we
                  shall be calling the <a
                    href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_api.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Mynewt Sensor API</a> to configure
                  the onboard temperature sensor to be polled every 10 seconds. After polling the sensor, Mynewt should
                  call a Listener Function (defined in Rust) to display the result.</p>
                <p id="dfbc" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To import the Mynewt Sensor API
                  functions into our Rust application, we should include this code…</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/5237f77b26c945c31dec99f5e0db845b"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="import-sensor-api.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust code to import Mynewt Sensor API. From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L35-L62"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L35-L62</a>
                  </figcaption>
                </figure>
                <p id="4a5c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">How did we derive the Rust import
                  declarations above? Let’s look at the C declarations for the three Mynewt functions (right column) and
                  see how they map to the Rust import declaration (left column)…</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/712b9b8a1c7590aa2be05bbdf01b81aa"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="import-sensor-api.md"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust vs C declarations for Mynewt Sensor API.
                    From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L35-L62"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L35-L62</a>
                    and <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/apache/mynewt-core/blob/master/hw/sensor/include/sensor/sensor.h#L278-L296"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/apache/mynewt-core/blob/master/hw/sensor/include/sensor/sensor.h</a>
                  </figcaption>
                </figure>
                <ul class="">
                  <li id="69c8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu ns nt nu"><code
                      class="dm ln lo lp lq b">#[link(name = “hw_sensor”)]</code> declares to Rust that the C functions
                    to be imported will be located in the compiled C library archive <code
                      class="dm ln lo lp lq b">hw_sensor.a</code> (which will be generated by the Mynewt build)</li>
                  <li id="47cf" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">i32</code> in Rust is equivalent to <code
                      class="dm ln lo lp lq b">int</code> in C (signed 32-bit integer)</li>
                  <li id="9360" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">u32</code> in Rust is equivalent to <code
                      class="dm ln lo lp lq b">uint32_t</code> in C (unsigned 32-bit integer)</li>
                  <li id="b689" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">u8</code> in Rust is equivalent to <code
                      class="dm ln lo lp lq b">uint8_t</code> in C (unsigned byte)</li>
                  <li id="835b" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">*const u8</code> in Rust is equivalent to <code
                      class="dm ln lo lp lq b">const uint8_t *</code> in C. We use this to pass <code
                      class="dm ln lo lp lq b">devname</code> because <code
                      class="dm ln lo lp lq b">const uint8_t *</code> has the same size as <code
                      class="dm ln lo lp lq b">const char *</code></li>
                  <li id="1d4c" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">SensorListener</code> is a <code class="dm ln lo lp lq b">struct</code>
                    we imported from Mynewt to pass the listener info from Rust to C (to be explained in a while)</li>
                  <li id="1368" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">*mut SensorListener</code> in Rust is equivalent to <code
                      class="dm ln lo lp lq b">struct SensorListener *</code> in C</li>
                  <li id="19e8" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu">Why <code
                      class="dm ln lo lp lq b">*mut SensorListener</code> and not <code
                      class="dm ln lo lp lq b">*const SensorListener</code>? Because <code
                      class="dm ln lo lp lq b">SensorListener</code> will be stored and updated by Mynewt.</li>
                  <li id="752f" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu">We define <code
                      class="dm ln lo lp lq b">SensorPtr</code> as follows…</li>
                </ul>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/a22041785ee1e66d1f2ee9d87e31d8ad"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="sensor-types.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust code to import Mynewt Sensor API Types.
                    From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L101-L120"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L101-L120</a>
                  </figcaption>
                </figure>
                <ul class="">
                  <li id="9b5f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu ns nt nu"><code
                      class="dm ln lo lp lq b">SensorPtr</code> represents a pointer to a Mynewt <code
                      class="dm ln lo lp lq b">sensor</code> <code class="dm ln lo lp lq b">struct</code>. Since we are
                    just passing the pointer through from Rust to Mynewt, without touching its contents, we declare
                    <code class="dm ln lo lp lq b">SensorPtr</code> as a <code class="dm ln lo lp lq b">void *</code>
                    type, which is <code class="dm ln lo lp lq b">*const CVoid</code> in Rust.</li>
                  <li id="a9fe" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">CVoid</code> is our Rust equivalent of <code
                      class="dm ln lo lp lq b">void</code> in C</li>
                </ul>
                <figure class="hb hc hd he hf cz cl cm paragraph-image">
                  <div class="db dc dd de ak">
                    <div class="cl cm ml">
                      <div class="dl r dd dm">
                        <div class="mm r">
                          <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20"
                              width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                            width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                              src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png"
                              width="1800" height="50" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                </figure>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz mt mu paragraph-image">
                    <div class="db dc dd de ak">
                      <div class="cl cm ml">
                        <div class="dl r dd dm">
                          <div class="mm r">
                            <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*NXF9cW-NQS7kcd8d1huhAQ.png?q=20"
                                width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                              width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*NXF9cW-NQS7kcd8d1huhAQ.png"
                                width="1800" height="50" role="presentation" /></noscript>
                          </div>
                        </div>
                      </div>
                    </div>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="kw">
                  <div id="d786" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Import C Structs into Rust: Rust ⟵📦⟶ C</p>
                  </div>
                </blockquote>
                <figure class="lr ls lt lu lv cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/2102dad3e88e2f38055aa863bb06f0eb"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="import-sensor-struct.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust code to import Mynewt SensorListener
                    struct. From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L63-L82"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L63-L82</a>
                  </figcaption>
                </figure>
                <p id="31a0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The Rust code above should be
                  included into our Rust application so that the <code class="dm ln lo lp lq b">SensorListener</code>
                  <code class="dm ln lo lp lq b">struct</code> may be passed through <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor_register_listener</a>()</code>.
                  To understand how the Rust import declaration was derived, let’s compare the Rust import declaration
                  with the Mynewt declaration in C…</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/847ea88839d1cd9acc856ab451807a35"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="import-sensor-struct.md"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust vs C declarations for Mynewt
                    SensorListener struct. From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L63-L82"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L63-L82</a>
                    and <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/apache/mynewt-core/blob/master/hw/sensor/include/sensor/sensor.h#L278-L296"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/apache/mynewt-core/blob/master/hw/sensor/include/sensor/sensor.h#L278-L296</a>
                  </figcaption>
                </figure>
                <ul class="">
                  <li id="0936" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu ns nt nu"><code
                      class="dm ln lo lp lq b">#[repr(C)]</code> tells Rust that this <code
                      class="dm ln lo lp lq b">struct</code> is used by both Rust and C functions. The <code
                      class="dm ln lo lp lq b">struct</code> memory layout shall be fixed according to the C convention.
                  </li>
                  <li id="5656" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">#[repr(C, packed)]</code> is used for C <code
                      class="dm ln lo lp lq b">structs</code> that are <code class="dm ln lo lp lq b">packed</code></li>
                  <li id="aa74" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">SensorType</code>, <code class="dm ln lo lp lq b">SensorArg</code>, <code
                      class="dm ln lo lp lq b">SensorDataFunc</code> are defined in the Sensor Types Definition code
                    above</li>
                  <li id="f67a" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">SensorDataFunc</code> is a pointer to a callback function in Rust that
                    Mynewt will call from a C function. This is explained below.</li>
                  <li id="79e3" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu ns nt nu"><code
                      class="dm ln lo lp lq b">sl_next</code> is defined as <code class="dm ln lo lp lq b">u32</code>
                    (32-bit unsigned integer) because we should initialise the field to <code
                      class="dm ln lo lp lq b">0</code> in our Rust code. <code class="dm ln lo lp lq b">sl_next</code>
                    is updated by Mynewt to store the pointer to the next <code
                      class="dm ln lo lp lq b">SensorListener</code> in the linked list</li>
                </ul>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz mt mu paragraph-image">
                    <div class="db dc dd de ak">
                      <div class="cl cm ml">
                        <div class="dl r dd dm">
                          <div class="mm r">
                            <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*NXF9cW-NQS7kcd8d1huhAQ.png?q=20"
                                width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                              width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*NXF9cW-NQS7kcd8d1huhAQ.png"
                                width="1800" height="50" role="presentation" /></noscript>
                          </div>
                        </div>
                      </div>
                    </div>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="kw">
                  <div id="1864" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Export Rust Functions to C (Callback): Rust ⟵ C</p>
                  </div>
                </blockquote>
                <p id="a1cd" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">We have seen how C functions and
                  structs may be imported into Rust. Now let’s see how Rust functions may be called from C.</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/8a17b5bae4c3848db71a0152cfcde8a6"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="read-temp1.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs#L20-L56"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs#L20-L56</a>
                  </figcaption>
                </figure>
                <p id="12f8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Recall that <code
                    class="dm ln lo lp lq b"><a href="https://web.archive.org/web/20191204194225/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_listener_api.html#c.sensor_register_listener" class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">sensor_register_listener</a>()</code>
                  registers a Listener Function (defined in Rust) that will be called by Mynewt when the temperature
                  sensor has been polled. <code class="dm ln lo lp lq b">sensor_register_listener()</code> accepts a
                  <code class="dm ln lo lp lq b">SensorListener</code> <code class="dm ln lo lp lq b">struct</code>
                  (named <code class="dm ln lo lp lq b">LISTENER</code> here) as a parameter. The <code
                    class="dm ln lo lp lq b">SensorListener</code> <code class="dm ln lo lp lq b">struct</code> includes
                  <code class="dm ln lo lp lq b">sl_func</code>, the pointer to the Listener Function.</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/ad7734150261a84bcf5d684b2a469b38"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="read-temp2.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs#L41-L48"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs#L41-L48</a>
                  </figcaption>
                </figure>
                <p id="d4de" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here we pass the Rust function
                  <code class="dm ln lo lp lq b">read_temperature()</code> as the Listener Function.</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/5154c96d30dba489ace51d0b2252993e"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="read-temp.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy"><a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs#L62-L108"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/listen_sensor.rs#L62-L108</a>
                  </figcaption>
                </figure>
                <p id="7cc4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm ln lo lp lq b">read_temperature()</code> is declared as <code
                    class="dm ln lo lp lq b">extern</code> so that it may be called from C as a callback function
                  (instead of calling by function name). Note that <code
                    class="dm ln lo lp lq b">read_temperature()</code> has the same function signature as <code
                    class="dm ln lo lp lq b">sl_func</code> (which has type <code
                    class="dm ln lo lp lq b">SensorDataFunc</code>)…</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/6708dcc424b17ee3f7be8f7a05547c6c"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="sensor-data-func.rs"
                        class="cp t u dh ak" scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L63-L109"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/sensor.rs#L63-L109</a>
                  </figcaption>
                </figure>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="hw hx hy hz ia ib ag ic ah id aj ak">
                  <figure class="hb hc hd he hf cz mt mu paragraph-image">
                    <div class="db dc dd de ak">
                      <div class="cl cm ml">
                        <div class="dl r dd dm">
                          <div class="mm r">
                            <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*NXF9cW-NQS7kcd8d1huhAQ.png?q=20"
                                width="1800" height="50" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                              width="1800" height="50" role="presentation" /><noscript><img class="cp t u dh ak"
                                src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3600/1*NXF9cW-NQS7kcd8d1huhAQ.png"
                                width="1800" height="50" role="presentation" /></noscript>
                          </div>
                        </div>
                      </div>
                    </div>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <blockquote class="kw">
                  <div id="c159" class="kx ky kz bk ed b la lb lc ld le lf gu">
                    <p class="ed b lg lh bo">Export Rust Functions to C (Call By Name): Rust ⟵ C</p>
                  </div>
                </blockquote>
                <p id="dc5c" class="gh gi ec bk gj b gk li gm lj go lk gq ll gs lm gu">Previously we have seen how C may
                  call a Rust function <em class="ht">via callback</em> (i.e. the Rust function is passed to C as a
                  pointer). What if our C function wishes to call a Rust function <em class="ht">by its function
                    name?</em></p>
                <p id="d304" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Normally the Rust compiler
                  converts Rust function names into a “mangled” format that includes the function signature. So the
                  <code class="dm ln lo lp lq b">read_temperature()</code> function would be compiled and renamed as:
                  <code class="dm ln lo lp lq b">_ZN5mylib13listen_sensor16read_temperature17h318673dbfba97d4bE()</code>
                </p>
                <p id="6b12" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">But if we are calling <code
                    class="dm ln lo lp lq b">read_temperature()</code> from C, this becomes a problem because the
                  function name has changed. To prevent the mangling of the Rust function name, use the <code
                    class="dm ln lo lp lq b">#[no_mangle]</code> directive like this:</p>
                <figure class="hb hc hd he hf cz">
                  <div class="dl r dd">
                    <div class="mg r"><iframe
                        src="https://web.archive.org/web/20191204194225if_/https://medium.com/media/4a996a89f0db98d2025aa2f02ac8f754"
                        allowfullscreen="" frameborder="0" height="0" width="0" title="main.rs" class="cp t u dh ak"
                        scrolling="auto"></iframe></div>
                  </div>
                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/lib.rs#L21-L48"
                      class="at cg gv gw gx gy" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust/src/lib.rs#L21-L48</a>
                  </figcaption>
                </figure>
                <p id="1dfa" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">So in the above code, the
                  function <code class="dm ln lo lp lq b">main()</code> will not be renamed by the Rust compiler. The
                  <code class="dm ln lo lp lq b">pub extern “C”</code> directive tells the Rust compiler to export the
                  Rust function <code class="dm ln lo lp lq b">main()</code> to C functions.</p>
                <p id="66c1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">From a C function, we may now
                  call the function by its Rust name, <code class="dm ln lo lp lq b">main()</code>. In fact that’s how
                  Mynewt starts our Rust application.</p>
                <p id="d404" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This interoperability of Rust and
                  C is known as the <strong class="gj gz">Foreign Function Interface</strong>. <a
                    href="https://web.archive.org/web/20191204194225/https://doc.rust-lang.org/1.6.0/book/ffi.html"
                    class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Read the details here</a>.</p>
              </div>
            </div>
          </section>
          <hr class="jv dy jw jx jy dv jz ka kb kc kd" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="074d" class="ke kf ec bk bj jg kg kh ki kj kk kl km kn ko kp kq"><em class="nr">💎 </em>Advanced
                  Topic: Enhancements</h1>
                <p id="c64c" class="gh gi ec bk gj b gk kr gm ks go kt gq ku gs kv gu">Although we have done a lot in
                  this article, we haven’t provided a <strong class="gj gz">comprehensive and maintainable
                    environment</strong> in Mynewt for hosting all kinds of Embedded Rust applications.</p>
                <p id="d143" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here are my suggestions for
                  <strong class="gj gz">improving the integration</strong> of Rust with Mynewt. <em class="ht">If you’re
                    keen to work on the integration of Rust with Mynewt, lemme know!</em></p>
                <ol class="">
                  <li id="68eb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu oa nt nu">Rust folders should
                    <strong class="gj gz">follow the Mynewt folder structure</strong>:<br />Move Rust source files from
                    <code class="dm ln lo lp lq b">src</code> to <code
                      class="dm ln lo lp lq b">apps/my_sensor_app/src</code><br />Generate compiled Rust object files in
                    <code class="dm ln lo lp lq b">bin</code> instead of <code class="dm ln lo lp lq b">target</code>
                  </li>
                  <li id="08e7" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu"><strong
                      class="gj gz">Auto-generate the Rust code for importing Mynewt C functions and </strong><code
                      class="dm ln lo lp lq b"><strong class="gj gz">structs</strong></code>. <code
                      class="dm ln lo lp lq b">bindgen</code> is a tool that we could use to generate the Rust import
                    declarations by feeding in the Mynewt header files. <a class="at cg gv gw gx gy" target="_blank"
                      rel="noopener"
                      href="/web/20191204194225/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac">Already
                      done here</a>.</li>
                  <li id="fd1b" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu">Create <strong
                      class="gj gz">safe Rust wrappers for the complete Mynewt API</strong>. We may need lots of
                    thinking to create a safe Rust API for Mynewt that’s easy to use and error-proof. <a
                      class="at cg gv gw gx gy" target="_blank" rel="noopener"
                      href="/web/20191204194225/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac">Already
                      done here</a>.</li>
                  <li id="36ea" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu">Rust wrappers for
                    Mynewt should return <code
                      class="dm ln lo lp lq b"><strong class="gj gz">Result</strong></code><strong class="gj gz"> type
                      instead of integers</strong> (thanks to <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/issues/3"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Marcel Hellwig</a>). <a
                      class="at cg gv gw gx gy" target="_blank" rel="noopener"
                      href="/web/20191204194225/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac">Already
                      done here</a>.</li>
                  <li id="b578" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu"><strong
                      class="gj gz">CoAP (JSON and CBOR) API</strong> for Rust, similar to the network-agnostic <a
                      href="https://web.archive.org/web/20191204194225/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/rust/libs/sensor_network"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">Sensor Network API</a>. <a
                      class="at cg gv gw gx gy" target="_blank" rel="noopener"
                      href="/web/20191204194225/https://medium.com/@ly.lee/safer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac">Already
                      done here</a>.</li>
                  <li id="7cda" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu">Allow Mynewt <strong
                      class="gj gz">drivers and libraries to be created with Rust</strong></li>
                  <li id="0a9a" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu"><strong
                      class="gj gz">Support other microcontroller platforms</strong> besides Blue Pill</li>
                  <li id="9fcd" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu">Support <strong
                      class="gj gz">text formatting and heap allocator</strong> in Rust. While keeping RAM and ROM usage
                    low.</li>
                  <li id="e9c8" class="gh gi ec bk gj b gk nv gm nw go nx gq ny gs nz gu oa nt nu">Keep <strong
                      class="gj gz">monitoring for RAM and ROM bloat</strong> as we implement enhancements. For example,
                    the ROM size dropped from 73 KB to 55 KB after removing the <code
                      class="dm ln lo lp lq b">unwrap() / panic()</code> error checking. Check the memory map <a
                      href="https://web.archive.org/web/20191204194225/https://docs.google.com/spreadsheets/d/1yep-QaAoaxrBz8tpYZ2TMo1xWNDaKCaFCGS-kON1Rt0/edit#gid=381366828&amp;fvid=1643056349"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">before</a> and <a
                      href="https://web.archive.org/web/20191204194225/https://docs.google.com/spreadsheets/d/1tWbH8MMZE5_2NsaWs1qNHDC6V8iR8Hx-Le95gHS69fo/edit#gid=381366828&amp;fvid=1643056349"
                      class="at cg gv gw gx gy" target="_blank" rel="noopener nofollow">after</a>. <em
                      class="ht">(</em><a class="at cg gv gw gx gy" target="_blank" rel="noopener"
                      href="/web/20191204194225/https://medium.com/@ly.lee/stm32-blue-pill-analyse-and-optimise-your-ram-and-rom-9fc805e16ed7"><em
                        class="ht">Learn more about memory maps</em></a><em class="ht">)</em></li>
                </ol>
              </div>
            </div>
            <div class="cz ak">
              <figure class="hb hc hd he hf cz ak paragraph-image">
                <div class="dl r dd dm">
                  <div class="ob r">
                    <div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq"
                        src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/60/1*eLgNIm7M8o5YiwPKoJoopg.png?q=20"
                        width="1962" height="1276" role="presentation" /></div><img class="df dg cp t u dh ak dr"
                      width="1962" height="1276" role="presentation" /><noscript><img class="cp t u dh ak"
                        src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/max/3924/1*eLgNIm7M8o5YiwPKoJoopg.png"
                        width="1962" height="1276" role="presentation" /></noscript>
                  </div>
                </div>
                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">ROM usage before and after removing <code
                    class="dm ln lo lp lq b">unwrap() / panic()</code> error checking. From <a
                    href="https://web.archive.org/web/20191204194225/https://docs.google.com/spreadsheets/d/1yep-QaAoaxrBz8tpYZ2TMo1xWNDaKCaFCGS-kON1Rt0/edit#gid=381366828"
                    class="at cg gv gw gx gy" target="_blank"
                    rel="noopener nofollow">https://docs.google.com/spreadsheets/d/1yep-QaAoaxrBz8tpYZ2TMo1xWNDaKCaFCGS-kON1Rt0/edit#gid=381366828</a>
                  and <a
                    href="https://web.archive.org/web/20191204194225/https://docs.google.com/spreadsheets/d/1tWbH8MMZE5_2NsaWs1qNHDC6V8iR8Hx-Le95gHS69fo/edit#gid=381366828&amp;fvid=1643056349"
                    class="at cg gv gw gx gy" target="_blank"
                    rel="noopener nofollow">https://docs.google.com/spreadsheets/d/1tWbH8MMZE5_2NsaWs1qNHDC6V8iR8Hx-Le95gHS69fo/edit#gid=381366828&amp;fvid=1643056349</a>
                </figcaption>
              </figure>
            </div>
          </section>
        </div>
      </article>
      <div class="df ct oc s ak od oe of" data-test-id="post-sidebar">
        <div class="n p">
          <div class="ac ae af ag ah ai aj ak">
            <div class="og n co">
              <div class="ct">
                <div class="oh oi oj n">
                  <div class="n o">
                    <div class="ok r dd"><a
                        href="https://web.archive.org/web/20191204194225/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f&amp;source=post_sidebar-----c86b119fe5f---------------------clap_sidebar-"
                        class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener">
                        <div class="ba ol om on oo op oq or os ot ou"><svg width="29" height="29">
                            <g fill-rule="evenodd">
                              <path
                                d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z">
                              </path>
                            </g>
                          </svg></div>
                      </a></div>
                    <div class="ov r">
                      <div class="ow">
                        <h4 class="bj dy ds bl bo"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi">71
                          </button></h4>
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="cf"><a
                      href="https://web.archive.org/web/20191204194225/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f&amp;source=post_sidebar--------------------------bookmark_sidebar-"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25" height="25"
                        viewbox="0 0 25 25">
                        <path
                          d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                          fill-rule="evenodd"></path>
                      </svg></a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="df ct oc s ox ex oy oz oe pa"></div>
      <div>
        <div class="pb cz n co p">
          <div class="n p">
            <div class="ac ae af ag ah dz aj ak">
              <div class="n pc"></div>
              <div class="n o pc"></div>
              <div class="pd r">
                <ul class="ba bb">
                  <li class="cf pe pf pg"><a href="/web/20191204194225/https://medium.com/tag/programming"
                      class="ph pi cg bo r nk pj a b fw">Programming</a></li>
                  <li class="cf pe pf pg"><a href="/web/20191204194225/https://medium.com/tag/internet-of-things"
                      class="ph pi cg bo r nk pj a b fw">Internet of Things</a></li>
                  <li class="cf pe pf pg"><a href="/web/20191204194225/https://medium.com/tag/embedded-systems"
                      class="ph pi cg bo r nk pj a b fw">Embedded Systems</a></li>
                  <li class="cf pe pf pg"><a href="/web/20191204194225/https://medium.com/tag/rust"
                      class="ph pi cg bo r nk pj a b fw">Rust</a></li>
                  <li class="cf pe pf pg"><a href="/web/20191204194225/https://medium.com/tag/stm32"
                      class="ph pi cg bo r nk pj a b fw">Stm32</a></li>
                </ul>
              </div>
              <div class="pk n en ab">
                <div class="n o">
                  <div class="pl r dd"><a
                      href="https://web.archive.org/web/20191204194225/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f&amp;source=post_actions_footer-----c86b119fe5f---------------------clap_footer-"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener">
                      <div class="c pm ez n o pn dd po pp pq pr ps pt pu pv pw px py pz qa qb">
                        <div class="ba ol om on oo op qc or o dr ez n p qd u dh cp t ak os ot ou qe"><svg width="33"
                            height="33" viewbox="0 0 33 33">
                            <path
                              d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z"
                              fill-rule="evenodd"></path>
                          </svg></div>
                      </div>
                    </a></div>
                  <div class="ov r">
                    <div class="ow">
                      <h4 class="bj dy ds bl ec"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi">71
                          claps</button></h4>
                    </div>
                  </div>
                </div>
                <div class="n o">
                  <div class="gf r ar"><a
                      href="//web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/share/twitter?source=post_actions_footer---------------------------"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg
                        width="29" height="29" class="q">
                        <path
                          d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                        </path>
                      </svg></a></div>
                  <div class="gf r ar"><a
                      href="//web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/share/linkedIn?source=post_actions_footer---------------------------"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg
                        width="29" height="29" viewbox="0 0 29 29" fill="none" class="q">
                        <path
                          d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z">
                        </path>
                        <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z"
                          fill="#fff"></path>
                      </svg></a></div>
                  <div class="gf r ar"><a
                      href="//web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/share/facebook?source=post_actions_footer---------------------------"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg
                        width="29" height="29" class="q">
                        <path
                          d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                        </path>
                      </svg></a></div>
                  <div class="gf r ar">
                    <div>
                      <div class="cf"><a
                          href="https://web.archive.org/web/20191204194225/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f&amp;source=post_actions_footer--------------------------bookmark_sidebar-"
                          class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25"
                            height="25" viewbox="0 0 25 25">
                            <path
                              d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                              fill-rule="evenodd"></path>
                          </svg></a></div>
                    </div>
                  </div>
                  <div class="cf">
                    <div class="r ar"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi"><svg width="25"
                          height="25" viewbox="-480.5 272.5 21 21" class="q">
                          <path
                            d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z">
                          </path>
                        </svg></button></div>
                  </div>
                </div>
              </div>
              <div class="qf qg qh pd r ab">
                <div class="qi qj r dd"><span class="r qk an ql">
                    <div class="r cp qm qn"><a rel="noopener"
                        href="/web/20191204194225/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-">
                        <div class="dd qo qp">
                          <div class="bs n et o p cp eu ev ew ex ey ct"><svg width="91" height="91" viewbox="0 0 91 91">
                              <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M45.5 1.4c-17.14 0-32 9.95-39.25 24.5L5 25.28C12.47 10.28 27.8 0 45.5 0S78.53 10.29 86 25.28l-1.25.62C77.5 11.35 62.65 1.4 45.5 1.4zM6.25 65.1c7.25 14.55 22.1 24.5 39.25 24.5 17.14 0 32-9.95 39.25-24.5l1.25.62C78.53 80.72 63.2 91 45.5 91S12.47 80.71 5 65.72l1.25-.62z">
                              </path>
                            </svg></div><img alt="Lup Yuen Lee 李立源" class="r ez qp qo"
                            src="https://web.archive.org/web/20191204194225im_/https://miro.medium.com/fit/c/160/160/1*KGohS3sQaUnr58gc0BIfoQ.jpeg"
                            width="80" height="80" />
                        </div>
                      </a></div><span class="r">
                      <div class="qq r qr">
                        <p class="bj dy fw bl bo qs qt">Written by</p>
                      </div>
                      <div class="qq qu n qr">
                        <div class="ak n o en">
                          <h2 class="bj jg jw qv ec"><a class="at au av aw ax ay az ba bb bc bd be bf bg bh bi"
                              rel="noopener"
                              href="/web/20191204194225/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-">Lup
                              Yuen Lee 李立源</a></h2>
                          <div class="r g"><button
                              class="qw ec q by fl fm fn fo bc bh fp fq fr fs ft fu cb bj b bk bl bm bn cc cd ce cf cg bf">Follow</button>
                          </div>
                        </div>
                      </div>
                    </span>
                  </span>
                  <div class="qq qx r qr aq">
                    <div class="qy r">
                      <h4 class="bj dy jh qz bo">Techie and Educator in IoT 物聯網教師</h4>
                    </div>
                    <div class="ap ra aq"><button
                        class="qw ec q by fl fm fn fo bc bh fp fq fr fs ft fu cb bj b bk bl bm bn cc cd ce cf cg bf">Follow</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="rb qg r ab"><a
                  href="https://web.archive.org/web/20191204194225/https://medium.com/p/c86b119fe5f/responses/show?source=follow_footer--------------------------follow_footer-"
                  class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><span class="kz rc oo">
                    <div class="nj rd cb r dv g"><span class="br">Write the first response</span></div>
                  </span></a></div>
            </div>
          </div>
          <div class="re r rf ab">
            <div class="n p">
              <div class="ac ae af ag ah ai aj ak"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="rg r rh ri">
        <section class="cl cm ak ce r io ip iq ir is it iu iv iw ix iy iz ja jb jc">
          <div class="rj rk qi n en g">
            <div class="rl n en">
              <div class="rm r rn">
                <div class="ro r"><a
                    href="https://web.archive.org/web/20191204194225/https://medium.com/about?autoplay=1&amp;source=post_page-----c86b119fe5f----------------------"
                    class="at au av aw ax ay az ba bb bc rp rq bf bg rr rs" rel="noopener">
                    <h4 class="rt ru rv bj jg bk qz rw rx r">Discover
                      <!-- -->Medium
                    </h4>
                  </a></div><span class="bj b bk bl bm bn r ry rz">Welcome to a place where words matter. On
                  <!-- -->Medium
                  <!-- -->, smart voices and original ideas take center stage - with no ads in sight.
                  <!-- --> <a
                    href="https://web.archive.org/web/20191204194225/https://medium.com/about?autoplay=1&amp;source=post_page-----c86b119fe5f----------------------"
                    class="at au av aw ax ay az ba bb bc bf bg rr rs sa" rel="noopener">Watch</a>
                </span>
              </div>
              <div class="rm r rn">
                <div class="sb r"><a
                    href="https://web.archive.org/web/20191204194225/https://medium.com/topics?source=post_page-----c86b119fe5f----------------------"
                    class="at au av aw ax ay az ba bb bc rp rq bf bg rr rs" rel="noopener">
                    <h4 class="rt ru rv bj jg bk qz rw rx r">Make
                      <!-- -->Medium
                      <!-- --> yours
                    </h4>
                  </a></div><span class="bj b bk bl bm bn r ry rz">Follow all the topics you care about, and we’ll
                  deliver the best stories for you to your homepage and inbox.
                  <!-- --> <a
                    href="https://web.archive.org/web/20191204194225/https://medium.com/topics?source=post_page-----c86b119fe5f----------------------"
                    class="at au av aw ax ay az ba bb bc bf bg rr rs sa" rel="noopener">Explore</a>
                </span>
              </div>
              <div class="rm r rn">
                <div class="ro r"><a
                    href="https://web.archive.org/web/20191204194225/https://medium.com/membership?source=post_page-----c86b119fe5f----------------------"
                    class="at au av aw ax ay az ba bb bc rp rq bf bg rr rs" rel="noopener">
                    <h4 class="rt ru rv bj jg bk qz rw rx r">Become a member</h4>
                  </a></div><span class="bj b bk bl bm bn r ry rz">Get unlimited access to the best stories on
                  <!-- -->Medium
                  <!-- --> — and support writers while you’re at it. Just $5/month.
                  <!-- --> <a
                    href="https://web.archive.org/web/20191204194225/https://medium.com/membership?source=post_page-----c86b119fe5f----------------------"
                    class="at au av aw ax ay az ba bb bc bf bg rr rs sa" rel="noopener">Upgrade</a>
                </span>
              </div>
            </div>
          </div>
          <div class="n o en"><a class="at au av aw ax ay az ba bb bc rp rq bf bg rr rs" rel="noopener"
              href="/web/20191204194225/https://medium.com/?source=post_page-----c86b119fe5f----------------------"><svg
                height="22" width="112" viewbox="0 0 111.5 22" class="ru">
                <path
                  d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z">
                </path>
              </svg></a><span class="bj b bk bl bm bn r ry rz">
              <div class="sc sd n en se an"><a
                  href="https://web.archive.org/web/20191204194225/https://medium.com/about?autoplay=1&amp;source=post_page-----c86b119fe5f----------------------"
                  class="at au av aw ax ay az ba bb bc fi bf bg rr rs" rel="noopener">About</a><a
                  href="https://web.archive.org/web/20191204194225/https://help.medium.com/?source=post_page-----c86b119fe5f----------------------"
                  class="at au av aw ax ay az ba bb bc fi bf bg rr rs" rel="noopener">Help</a><a
                  class="at au av aw ax ay az ba bb bc fi bf bg rr rs" rel="noopener"
                  href="/web/20191204194225/https://medium.com/policy/9db0094a1e0f?source=post_page-----c86b119fe5f----------------------">Legal</a>
              </div>
            </span></div>
        </section>
      </div>
    </div>
  </div>
  <script src="https://web.archive.org/web/20191204194225js_/https://cdn.optimizely.com/js/16180790160.js"></script>
  <script>window.__BUILD_ID__ = "development"</script>
  <script>window.__GRAPHQL_URI__ = "https://web.archive.org/web/20191204194225/https://medium.com/_/graphql"</script>
  <script>window.__PRELOADED_STATE__ = { "config": { "nodeEnv": "production", "version": "master-20191204-181919-f1d0be3b6c", "productName": "Medium", "publicUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcdn-client.medium.com\u002Flite", "authDomain": "medium.com", "authGoogleClientId": "216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com", "favicon": "production", "glyphUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fglyph.medium.com", "branchKey": "key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm", "lightStep": { "name": "lite-web", "host": "collector-medium.lightstep.com", "token": "ce5be895bef60919541332990ac9fef2", "appVersion": "master-20191204-181919-f1d0be3b6c" }, "algolia": { "appId": "MQ57UUUQZ2", "apiKeySearch": "394474ced050e3911ae2249ecc774921", "indexPrefix": "medium_", "host": "-dsn.algolia.net" }, "recaptchaKey": "6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk", "sentry": { "dsn": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002F589e367c28ca47b195ce200d1507d18b@sentry.io\u002F1423575", "environment": "production" }, "isAmp": false, "googleAnalyticsCode": "UA-24232453-2", "signInWallCustomDomainCollectionIds": ["3a8144eabfe3", "336d898217ee", "61061eb0c96b", "138adf9c44c", "819cc2aaeee0"], "mediumOwnedAndOperatedCollectionIds": ["544c7006046e", "bcc38c8f6edf", "444d13b52878", "8d6b8a439e32", "92d2092dc598", "1285ba81cada", "cb8577c9149e", "8ccfed20cbb2", "ae2a65f35510", "3f6ecf56618", "7b6769f2748b", "fc8964313712", "ef8e90590e66", "191186aaafa0", "d944778ce714", "bdc4052bbdba", "88d9857e584e"], "tierOneDomains": ["medium.com", "thebolditalic.com", "arcdigital.media", "towardsdatascience.com", "uxdesign.cc", "codeburst.io", "psiloveyou.xyz", "writingcooperative.com", "entrepreneurshandbook.co", "prototypr.io", "betterhumans.coach.me", "theascent.pub"] }, "debug": { "requestId": "26439a83-9364-4549-9fb1-6ae28a95c0ed", "originalSpanCarrier": { "ot-tracer-spanid": "3a1d77320a2f970d", "ot-tracer-traceid": "6a1075857b2a3429", "ot-tracer-sampled": "true" } }, "session": { "user": { "id": "lo_L1RlAi6bSrw1" }, "xsrf": "" }, "stats": { "itemCount": 0, "sending": false, "timeout": null, "backup": {} }, "navigation": { "showBranchBanner": null, "hasRenderedBranchBanner": null, "hideGoogleOneTap": false, "hideAlternateUser": false, "branchData": { "loaded": false }, "shareKey": "f58f4cf6c608fded4b354063e474a93b", "referrerSource": "friends_link", "currentLocation": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f", "host": "medium.com", "hostname": "medium.com", "referrer": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Ftag\u002Frust", "susiModal": { "step": null, "operation": "register", "reportEventInfo": { "eventName": "", "data": {} } } }, "client": { "isBot": false, "isEu": false, "isNativeMedium": false, "isCustomDomain": false }, "multiVote": { "clapsPerPost": {} }, "metadata": { "faviconImageId": null } }</script>
  <script>window.__APOLLO_STATE__ = { "ROOT_QUERY": { "viewer": null, "meterPost({\"postId\":\"c86b119fe5f\",\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}})": { "type": "id", "generated": false, "id": "MeteringInfo:singleton", "typename": "MeteringInfo" }, "postResult({\"id\":\"c86b119fe5f\"})": { "type": "id", "generated": false, "id": "Post:c86b119fe5f", "typename": "Post" }, "variantFlags": [{ "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.0", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.1", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.2", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.3", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.4", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.5", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.6", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.7", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.8", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.9", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.10", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.11", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.12", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.13", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.14", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.15", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.16", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.17", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.18", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.19", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.20", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.21", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.22", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.23", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.24", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.25", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.26", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.27", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.28", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.29", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.30", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.31", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.32", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.33", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.34", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.35", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.36", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.37", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.38", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.39", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.40", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.41", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.42", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.43", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.44", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.45", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.46", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.47", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.48", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.49", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.50", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.51", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.52", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.53", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.54", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.55", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.56", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.57", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.58", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.59", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.60", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.61", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.62", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.63", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.64", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.65", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.66", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.67", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.68", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.69", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.70", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.71", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.72", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.73", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.74", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.75", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.76", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.77", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.78", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.79", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.80", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.81", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.82", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.83", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.84", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.85", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.86", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.87", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.88", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.89", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.90", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.91", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.92", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.93", "typename": "VariantFlag" }] }, "MeteringInfo:singleton": { "__typename": "MeteringInfo", "postIds": { "type": "json", "json": [] }, "maxUnlockCount": 3, "unlocksRemaining": 3 }, "Post:c86b119fe5f": { "__typename": "Post", "visibility": "PUBLIC", "latestPublishedVersion": "315911fa6d1f", "collection": null, "id": "c86b119fe5f", "creator": { "type": "id", "generated": false, "id": "User:1da08193a324", "typename": "User" }, "isLocked": false, "lockedSource": "LOCKED_POST_SOURCE_NONE", "sequence": null, "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fhosting-embedded-rust-apps-on-apache-mynewt-with-stm32-blue-pill-c86b119fe5f", "canonicalUrl": "", "content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}})": { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}})", "typename": "PostContent" }, "firstPublishedAt": 1560091664025, "isPublished": true, "layerCake": 0, "primaryTopic": null, "title": "Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill", "isLimitedState": false, "pendingCollection": null, "shareKey": null, "statusForCollection": null, "readingTime": 18.62264150943396, "readingList": "READING_LIST_NONE", "license": "ALL_RIGHTS_RESERVED", "allowResponses": true, "tags": [{ "type": "id", "generated": false, "id": "Tag:programming", "typename": "Tag" }, { "type": "id", "generated": false, "id": "Tag:internet-of-things", "typename": "Tag" }, { "type": "id", "generated": false, "id": "Tag:embedded-systems", "typename": "Tag" }, { "type": "id", "generated": false, "id": "Tag:rust", "typename": "Tag" }, { "type": "id", "generated": false, "id": "Tag:stm32", "typename": "Tag" }], "viewerClapCount": 0, "clapCount": 71, "voterCount": 31, "recommenders": [], "responsesCount": 0, "collaborators": [], "translationSourcePost": null, "newsletterId": "", "inResponseToPostResult": null, "inResponseToMediaResource": null, "curationEligibleAt": 1560091662833, "audioVersionUrl": "", "seoTitle": "", "socialTitle": "", "socialDek": "", "metaDescription": "Build IoT devices the smarter, safer way with Rust and Apache Mynewt", "latestPublishedAt": 1566062243538, "wordCount": 4405, "previewContent": { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.previewContent", "typename": "PreviewContent" }, "previewImage": { "type": "id", "generated": false, "id": "ImageMetadata:1*fyYjlV_EPqraAEYuRbst1A.png", "typename": "ImageMetadata" }, "updatedAt": 1566062243969, "topics": [], "seoDescription": "", "isSuspended": false }, "User:1da08193a324": { "id": "1da08193a324", "__typename": "User", "isSuspended": false, "allowNotes": true, "name": "Lup Yuen Lee 李立源", "isFollowing": false, "username": "ly.lee", "bio": "Techie and Educator in IoT 物聯網教師", "imageId": "1*KGohS3sQaUnr58gc0BIfoQ.jpeg", "mediumMemberAt": 1571194811000, "isBlocking": false, "isPartnerProgramEnrolled": false, "twitterScreenName": "MisterTechBlog" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}})": { "isLockedPreviewOnly": false, "validatedShareKey": "f58f4cf6c608fded4b354063e474a93b", "__typename": "PostContent", "bodyModel": { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel", "typename": "RichText" } }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.0": { "name": "27cd", "startIndex": 0, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.1": { "name": "5433", "startIndex": 24, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.2": { "name": "e552", "startIndex": 53, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.3": { "name": "7698", "startIndex": 72, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.4": { "name": "b61d", "startIndex": 80, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.5": { "name": "1ced", "startIndex": 87, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.6": { "name": "9d82", "startIndex": 97, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.7": { "name": "f0cc", "startIndex": 124, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.8": { "name": "7439", "startIndex": 140, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.9": { "name": "837e", "startIndex": 150, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.10": { "name": "e6ee", "startIndex": 173, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.11": { "name": "a462", "startIndex": 179, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.12": { "name": "a85d", "startIndex": 187, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.13": { "name": "0445", "startIndex": 191, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.14": { "name": "ef15", "startIndex": 192, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.15": { "name": "1a18", "startIndex": 242, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel": { "sections": [{ "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.0", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.1", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.2", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.3", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.4", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.5", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.6", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.7", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.8", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.9", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.10", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.11", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.12", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.13", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.14", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:c86b119fe5f.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f58f4cf6c608fded4b354063e474a93b\",\"source\":\"friends_link\"}}).bodyModel.sections.15", "typename": "Section" }], "paragraphs": [{ "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_0", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_1", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_2", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_3", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_4", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_5", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_6", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_7", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_8", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_9", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_10", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_11", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_12", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_13", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_14", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_15", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_16", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_17", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_18", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_19", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_20", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_21", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_22", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_23", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_24", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_25", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_26", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_27", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_28", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_29", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_30", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_31", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_32", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_33", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_34", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_35", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_36", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_37", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_38", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_39", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_40", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_41", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_42", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_43", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_44", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_45", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_46", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_47", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_48", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_49", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_50", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_51", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_52", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_53", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_54", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_55", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_56", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_57", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_58", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_59", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_60", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_61", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_62", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_63", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_64", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_65", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_66", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_67", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_68", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_69", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_70", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_71", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_72", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_73", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_74", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_75", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_76", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_77", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_78", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_79", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_80", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_81", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_82", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_83", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_84", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_85", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_86", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_87", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_88", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_89", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_90", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_91", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_92", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_93", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_94", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_95", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_96", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_97", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_98", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_99", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_100", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_101", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_102", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_103", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_104", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_105", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_106", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_107", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_108", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_109", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_110", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_111", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_112", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_113", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_114", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_115", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_116", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_117", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_118", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_119", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_120", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_121", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_122", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_123", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_124", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_125", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_126", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_127", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_128", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_129", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_130", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_131", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_132", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_133", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_134", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_135", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_136", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_137", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_138", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_139", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_140", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_141", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_142", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_143", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_144", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_145", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_146", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_147", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_148", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_149", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_150", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_151", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_152", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_153", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_154", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_155", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_156", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_157", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_158", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_159", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_160", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_161", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_162", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_163", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_164", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_165", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_166", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_167", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_168", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_169", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_170", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_171", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_172", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_173", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_174", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_175", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_176", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_177", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_178", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_179", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_180", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_181", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_182", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_183", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_184", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_185", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_186", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_187", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_188", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_189", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_190", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_191", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_192", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_193", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_194", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_195", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_196", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_197", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_198", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_199", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_200", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_201", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_202", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_203", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_204", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_205", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_206", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_207", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_208", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_209", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_210", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_211", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_212", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_213", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_214", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_215", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_216", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_217", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_218", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_219", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_220", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_221", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_222", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_223", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_224", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_225", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_226", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_227", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_228", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_229", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_230", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_231", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_232", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_233", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_234", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_235", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_236", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_237", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_238", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_239", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_240", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_241", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_242", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_243", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_244", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_245", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_246", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_247", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_248", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_249", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_250", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_251", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_252", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_253", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:315911fa6d1f_254", "typename": "Paragraph" }], "__typename": "RichText" }, "Paragraph:315911fa6d1f_0": { "id": "315911fa6d1f_0", "name": "c591", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*fyYjlV_EPqraAEYuRbst1A.png", "typename": "ImageMetadata" }, "text": "What keeps me awake at night? Wondering why our microcontrollers (like STM32 Blue Pill above) have become so powerful… that we can’t write powerful programs to exploit them", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*fyYjlV_EPqraAEYuRbst1A.png": { "id": "1*fyYjlV_EPqraAEYuRbst1A.png", "originalHeight": 1262, "originalWidth": 3404, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_1": { "id": "315911fa6d1f_1", "name": "3c0a", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Hosting Embedded Rust apps on Apache Mynewt with STM32 Blue Pill", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_2": { "id": "315911fa6d1f_2", "name": "ea07", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Today’s microcontrollers (like the STM32 Blue Pill) pack so many features in a tiny package… yet few embedded programmers are capable of exploiting the full potential of modern microcontrollers. Many of us (my IoT students included) seem to be stuck in the 1980s — painstakingly writing C programs for small computers.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_2.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_2.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_2.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_2.markups.0": { "type": "A", "start": 35, "end": 50, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttp:\u002F\u002Fwiki.stm32duino.com\u002Findex.php?title=Blue_Pill", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_2.markups.1": { "type": "STRONG", "start": 152, "end": 193, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_2.markups.2": { "type": "STRONG", "start": 264, "end": 318, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_3": { "id": "315911fa6d1f_3", "name": "6d9c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "It’s time to drop our legacy programming practices and adopt smarter, safer ways to exploit these microcontrollers… starting with Apache Mynewt and Rust.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_3.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_3.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_3.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_3.markups.0": { "type": "A", "start": 130, "end": 143, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Findex.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_3.markups.1": { "type": "A", "start": 148, "end": 152, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fstable\u002Fbook\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_3.markups.2": { "type": "STRONG", "start": 130, "end": 153, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_4": { "id": "315911fa6d1f_4", "name": "a684", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Mynewt is a modern realtime operating system that runs on many microcontroller platforms, even on devices with little RAM and ROM like Blue Pill. It has an excellent Sensor Framework for creating IoT devices.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_4.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_4.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_4.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_4.markups.0": { "type": "A", "start": 166, "end": 182, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_framework.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_4.markups.1": { "type": "STRONG", "start": 12, "end": 44, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_4.markups.2": { "type": "STRONG", "start": 166, "end": 182, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_5": { "id": "315911fa6d1f_5", "name": "24cf", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*UJcsPIo5wIcT43KZFz1tLw.png", "typename": "ImageMetadata" }, "text": "Sensor Network with Blue Pill, ESP8266, nRF24L01 and Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*UJcsPIo5wIcT43KZFz1tLw.png": { "id": "1*UJcsPIo5wIcT43KZFz1tLw.png", "originalHeight": 862, "originalWidth": 1857, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_6": { "id": "315911fa6d1f_6", "name": "57a2", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Stretching Mynewt on Blue Pill to the limit, I have created sophisticated sensor networks with CoAP encoding (JSON and CBOR), transmitting and receiving simultaneously on both ESP8266 and nRF24L01 modules.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_6.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_6.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_6.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_6.markups.0": { "type": "A", "start": 60, "end": 89, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-your-iot-sensor-network-stm32-blue-pill-nrf24l01-esp8266-apache-mynewt-thethings-io-ca7486523f5d", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_6.markups.1": { "type": "A", "start": 95, "end": 108, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FConstrained_Application_Protocol", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_6.markups.2": { "type": "A", "start": 119, "end": 123, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FCBOR", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_7": { "id": "315911fa6d1f_7", "name": "bbb5", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Sadly, Mynewt only supports applications developed in C, consistent with its frugal origins. But C programming is a rare skill today (and C frustrates my IoT students too). What about other languages? MicroPython and JavaScript seem too heavy for a lightweight Mynewt device… perhaps Rust?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_7.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_7.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_7.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_7.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_7.markups.0": { "type": "A", "start": 201, "end": 212, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMicroPython", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_7.markups.1": { "type": "A", "start": 217, "end": 227, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_7.markups.2": { "type": "STRONG", "start": 28, "end": 55, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_7.markups.3": { "type": "EM", "start": 276, "end": 289, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_8": { "id": "315911fa6d1f_8", "name": "f43e", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*MzU5MyKDu4gJwkgv56tSwQ.png", "typename": "ImageMetadata" }, "text": "Mynewt and Rust: The Perfect Match", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*MzU5MyKDu4gJwkgv56tSwQ.png": { "id": "1*MzU5MyKDu4gJwkgv56tSwQ.png", "originalHeight": 1654, "originalWidth": 1674, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_9": { "id": "315911fa6d1f_9", "name": "05d4", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In my previous experiments with Embedded Rust (including this one), I know that Rust flies light and fast just like C. Rust has great support in coding tools like Visual Studio Code, which makes it easier to code for newbies.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_9.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_9.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_9.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_9.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_9.markups.0": { "type": "A", "start": 6, "end": 26, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Fcoding-the-stm32-blue-pill-with-rust-and-visual-studio-code-b21615d8a20", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_9.markups.1": { "type": "A", "start": 47, "end": 65, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Frunning-rust-and-freertos-on-the-padi-iot-stamp-fb36c5ef4844", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_9.markups.2": { "type": "STRONG", "start": 91, "end": 105, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_9.markups.3": { "type": "STRONG", "start": 128, "end": 157, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_10": { "id": "315911fa6d1f_10", "name": "d118", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Rust advocates “Safe Coding”. Rust disallows bad code that may cause our device to crash. Rust could be the perfect match for Mynewt!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_10.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_10.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_10.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_10.markups.0": { "type": "STRONG", "start": 15, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_10.markups.1": { "type": "STRONG", "start": 34, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_10.markups.2": { "type": "EM", "start": 90, "end": 133, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_11": { "id": "315911fa6d1f_11", "name": "762a", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In this article we’ll mix Mynewt with Rust and learn…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_12": { "id": "315911fa6d1f_12", "name": "3f03", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Why is Rust better than C for embedded programming", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_12.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_12.markups.0": { "type": "STRONG", "start": 11, "end": 29, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_13": { "id": "315911fa6d1f_13", "name": "fd10", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ How to call C functions from Rust and vice versa", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_13.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_13.markups.0": { "type": "STRONG", "start": 11, "end": 37, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_14": { "id": "315911fa6d1f_14", "name": "1f26", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ What’s Unsafe Coding and how to make coding safer", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_14.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_14.markups.0": { "type": "STRONG", "start": 11, "end": 24, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_15": { "id": "315911fa6d1f_15", "name": "2d1e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "4️⃣ How Rust compiles programs", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_15.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_15.markups.0": { "type": "STRONG", "start": 8, "end": 30, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_16": { "id": "315911fa6d1f_16", "name": "fad9", "type": "P", "href": null, "layout": null, "metadata": null, "text": "5️⃣ How to inject Rust code into the Mynewt build", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_16.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_16.markups.0": { "type": "STRONG", "start": 11, "end": 27, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_17": { "id": "315911fa6d1f_17", "name": "3f3b", "type": "P", "href": null, "layout": null, "metadata": null, "text": "6️⃣ How to install and configure the Rust and Mynewt code", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_17.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_17.markups.0": { "type": "STRONG", "start": 11, "end": 32, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_18": { "id": "315911fa6d1f_18", "name": "23ff", "type": "P", "href": null, "layout": null, "metadata": null, "text": "7️⃣ And finally we’ll see an actual Rust application running on Mynewt with Blue Pill", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_18.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_18.markups.0": { "type": "STRONG", "start": 36, "end": 70, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_19": { "id": "315911fa6d1f_19", "name": "d3b1", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here’s the Rust application code that we’ll be running: A sensor application that polls Blue Pill’s internal temperature sensor every 10 seconds and displays the result…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_19.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_19.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_19.markups.0": { "type": "A", "start": 11, "end": 32, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Fsrc", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_19.markups.1": { "type": "STRONG", "start": 82, "end": 144, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_20": { "id": "315911fa6d1f_20", "name": "4fcd", "type": "IFRAME", "href": null, "layout": "OUTSET_CENTER", "metadata": null, "text": "Walkthrough of the Rust application code", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_20.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:77426bda822e8a67b9e6dbf0ec0066b1": { "id": "77426bda822e8a67b9e6dbf0ec0066b1", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FXeRKRI8JYQE%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DXeRKRI8JYQE&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FXeRKRI8JYQE%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 640, "title": "Hosting Rust Applications on Apache Mynewt - Code", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_20.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:77426bda822e8a67b9e6dbf0ec0066b1", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_21": { "id": "315911fa6d1f_21", "name": "5ed5", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The complete Rust and Mynewt code may be found here…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_22": { "id": "315911fa6d1f_22", "name": "94ef", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "lupyuen\u002Fstm32bluepill-mynewt-sensor\nApache Mynewt Sensor Network Application for STM32 Blue Pill with ESP8266 and nRF24L01 (includes Geolocation) …github.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_22.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_22.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_22.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_22.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:315911fa6d1f_22.markups.0": { "type": "A", "start": 0, "end": 157, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_22.markups.1": { "type": "STRONG", "start": 0, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_22.markups.2": { "type": "EM", "start": 36, "end": 147, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:315911fa6d1f_22.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust", "thumbnailImageId": "0*RtBilOEcQNTqjjkc", "mediaResourceId": "0*RtBilOEcQNTqjjkc", "__typename": "MixtapeMetadata" }, "Paragraph:315911fa6d1f_23": { "id": "315911fa6d1f_23", "name": "7296", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "💎 Sections marked with a diamond are meant for advanced developers. If you’re new to embedded programming, you may skip these sections", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_23.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_23.markups.0": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_24": { "id": "315911fa6d1f_24", "name": "6a01", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Embedded Programming in Rust vs C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_25": { "id": "315911fa6d1f_25", "name": "cc7d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Why is Rust better than C for Embedded Programming? Here’s what I think…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_26": { "id": "315911fa6d1f_26", "name": "e29c", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*dlVQOI-V3lBUbc8ImToEsw.png", "typename": "ImageMetadata" }, "text": "Calling the Mynewt Sensor Listener API: Rust Code (left) vs C Code (right)", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*dlVQOI-V3lBUbc8ImToEsw.png": { "id": "1*dlVQOI-V3lBUbc8ImToEsw.png", "originalHeight": 631, "originalWidth": 1702, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_27": { "id": "315911fa6d1f_27", "name": "476c", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Rust is Strict and Stubborn", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_28": { "id": "315911fa6d1f_28", "name": "1df5", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Rust syntax is highly similar to C. If you’re looking at Rust code for the first time, you may think that Rust is an untyped language (like JavaScript) that doesn’t care about the precise types of each variable…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_29": { "id": "315911fa6d1f_29", "name": "b997", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Why would Rust allow let rc = ... without forcing us to declare rc as an int like in C? Does it mean that rc can change its type from int to char*?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_29.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_29.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_29.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_29.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_29.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_29.markups.5", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_29.markups.0": { "type": "CODE", "start": 21, "end": 33, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_29.markups.1": { "type": "CODE", "start": 64, "end": 66, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_29.markups.2": { "type": "CODE", "start": 73, "end": 76, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_29.markups.3": { "type": "CODE", "start": 106, "end": 108, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_29.markups.4": { "type": "CODE", "start": 134, "end": 137, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_29.markups.5": { "type": "CODE", "start": 141, "end": 146, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30": { "id": "315911fa6d1f_30", "name": "5c81", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Nope, that’s because Rust has Type Inference — the Rust compiler analyses our source code and deduces that rc must be an int (which is named i32 in Rust). Why? Because sensor_set_poll_rate_ms() returns an i32 (32-bit integer). So Rust enforces variable types as strongly as C, just smarter.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.6", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_30.markups.7", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_30.markups.0": { "type": "CODE", "start": 107, "end": 109, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.1": { "type": "CODE", "start": 121, "end": 124, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.2": { "type": "CODE", "start": 141, "end": 144, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.3": { "type": "CODE", "start": 168, "end": 193, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.4": { "type": "CODE", "start": 205, "end": 208, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.5": { "type": "A", "start": 30, "end": 44, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FType_inference", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.6": { "type": "A", "start": 168, "end": 191, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_mgr_api.html#c.sensor_set_poll_rate_ms", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_30.markups.7": { "type": "STRONG", "start": 30, "end": 44, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31": { "id": "315911fa6d1f_31", "name": "a496", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Rust is actually stricter than C — All Rust variables are assumed to be constant, unchanging, immutable (“stubborn”) unless we declare the variable as mut (mutable). Check out the two examples of mut in the Rust code above.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_31.markups.6", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_31.markups.0": { "type": "CODE", "start": 151, "end": 154, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31.markups.1": { "type": "CODE", "start": 196, "end": 199, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31.markups.2": { "type": "A", "start": 58, "end": 103, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fstable\u002Fbook\u002Fch03-01-variables-and-mutability.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31.markups.3": { "type": "STRONG", "start": 94, "end": 103, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31.markups.4": { "type": "STRONG", "start": 151, "end": 154, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31.markups.5": { "type": "EM", "start": 16, "end": 32, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_31.markups.6": { "type": "EM", "start": 105, "end": 115, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_32": { "id": "315911fa6d1f_32", "name": "2717", "type": "P", "href": null, "layout": null, "metadata": null, "text": "C is the opposite (“loose and relaxed”). All C variables are mutable unless you declare the variable as const.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_32.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_32.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_32.markups.0": { "type": "CODE", "start": 104, "end": 109, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_32.markups.1": { "type": "EM", "start": 17, "end": 41, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_33": { "id": "315911fa6d1f_33", "name": "d797", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Check “The Rust Programming Language” for details.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_33.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_33.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_33.markups.0": { "type": "A", "start": 7, "end": 36, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fstable\u002Fbook\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_33.markups.1": { "type": "EM", "start": 7, "end": 36, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_34": { "id": "315911fa6d1f_34", "name": "4f66", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Rust is Lean and Lightweight", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_35": { "id": "315911fa6d1f_35", "name": "1a4f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "According to this actual build log of our combined Rust and Mynewt Sensor application, the entire compiled executable fits into 56 KB of ROM. The compiled Rust application and Rust libraries occupy under 4 KB of ROM. (Most of the ROM space was taken up by the ESP8266 and nRF24L01 drivers written in C.)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_35.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_35.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_35.markups.0": { "type": "A", "start": 13, "end": 34, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Flogs\u002Fbuild-application.log#L628-L668", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_35.markups.1": { "type": "STRONG", "start": 198, "end": 215, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_36": { "id": "315911fa6d1f_36", "name": "dda4", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The lightweight nature of Rust makes it an excellent replacement for embedded C programming on devices with constrained resources. Like Blue Pill!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_36.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_36.markups.0": { "type": "STRONG", "start": 4, "end": 22, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_37": { "id": "315911fa6d1f_37", "name": "5aa3", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Rust Plays Nice with C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_38": { "id": "315911fa6d1f_38", "name": "6f23", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Rust was designed for low-level systems programming, like for coding an operating system or web browser (Mozilla Firefox). Just like C, Rust is used for bare-metal programming, so it makes sense for Rust and C functions to be interoperable — We may call C functions from Rust, and Rust functions from C. Even pass the same structs from Rust to C and back!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_38.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_38.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_38.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_38.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_38.markups.0": { "type": "CODE", "start": 323, "end": 330, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_38.markups.1": { "type": "A", "start": 105, "end": 120, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fmozilla-tech\u002Fa-quantum-leap-for-the-web-a3b7174b3c12", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_38.markups.2": { "type": "STRONG", "start": 22, "end": 51, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_38.markups.3": { "type": "STRONG", "start": 199, "end": 239, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_39": { "id": "315911fa6d1f_39", "name": "03f1", "type": "P", "href": null, "layout": null, "metadata": null, "text": "We’ll cover the Rust and C interoperability in a while.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_40": { "id": "315911fa6d1f_40", "name": "1341", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Rust is Smarter than C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_41": { "id": "315911fa6d1f_41", "name": "f731", "type": "IFRAME", "href": null, "layout": "OUTSET_CENTER", "metadata": null, "text": "Visual Studio Code: Rust vs C coding", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_41.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:4535c4009eb4dac2b1d41bb17fb4a674": { "id": "4535c4009eb4dac2b1d41bb17fb4a674", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FeGHxTuRWswY%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DeGHxTuRWswY&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FeGHxTuRWswY%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 640, "title": "Rust vs C coding", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_41.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:4535c4009eb4dac2b1d41bb17fb4a674", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_42": { "id": "315911fa6d1f_42", "name": "4b92", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Check out this comparison of Rust vs C coding in Visual Studio Code. Why is Rust better than C for coding embedded applications?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_42.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_42.markups.0": { "type": "EM", "start": 69, "end": 128, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_43": { "id": "315911fa6d1f_43", "name": "daae", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Remember that Rust supports Type Inference. The Rust compiler keeps deducing all the types of the variables as we type. So Rust provides more helpful code completion and error highlighting than C. Rust generates documentation for our functions too.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_43.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_43.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_43.markups.0": { "type": "A", "start": 202, "end": 225, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Flupyuen.github.io\u002Fstm32bluepill-mynewt-sensor\u002Frust\u002Fmylib\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_43.markups.1": { "type": "STRONG", "start": 150, "end": 188, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_44": { "id": "315911fa6d1f_44", "name": "c8b2", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This is great for preventing programming errors in Rust, especially for beginners. Often in embedded programs we make undocumented assumptions and take shortcuts to make the programs run on tiny devices. With Type Inference, Rust can warn new embedded developers about these traps.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_44.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_44.markups.0": { "type": "STRONG", "start": 234, "end": 281, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_45": { "id": "315911fa6d1f_45", "name": "f7ea", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Rust is Safer than C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_46": { "id": "315911fa6d1f_46", "name": "7042", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Helping us to write safer, crash-proof programs is a key feature of Rust, that’s why we see unsafe keywords in the Rust code above. We’ll cover unsafe in a while…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_46.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_46.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_46.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_46.markups.0": { "type": "CODE", "start": 92, "end": 98, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_46.markups.1": { "type": "CODE", "start": 144, "end": 150, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_46.markups.2": { "type": "STRONG", "start": 20, "end": 47, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_47": { "id": "315911fa6d1f_47", "name": "9e1d", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "But…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_48": { "id": "315911fa6d1f_48", "name": "02dc", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Rust is evolving rapidly, especially for embedded platforms like Blue Pill. A year ago I wrote two tutorials on Rust embedded programming…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_48.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_48.markups.0": { "type": "STRONG", "start": 8, "end": 24, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_49": { "id": "315911fa6d1f_49", "name": "1c86", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "Coding the STM32 Blue Pill with Rust and Visual Studio Code\n[UPDATE — I have written a new tutorial on STM32 Blue Pill coding with C++, libopencm3 and Visual Studio Code, click…medium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_49.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_49.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_49.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_49.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:315911fa6d1f_49.markups.0": { "type": "A", "start": 0, "end": 187, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Fcoding-the-stm32-blue-pill-with-rust-and-visual-studio-code-b21615d8a20", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_49.markups.1": { "type": "STRONG", "start": 0, "end": 59, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_49.markups.2": { "type": "EM", "start": 60, "end": 177, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:315911fa6d1f_49.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Fcoding-the-stm32-blue-pill-with-rust-and-visual-studio-code-b21615d8a20", "thumbnailImageId": "1*dLyvwt8-rJsY40s5iztZhg.jpeg", "mediaResourceId": "1*dLyvwt8-rJsY40s5iztZhg.jpeg", "__typename": "MixtapeMetadata" }, "Paragraph:315911fa6d1f_50": { "id": "315911fa6d1f_50", "name": "6e83", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "Running Rust and FreeRTOS on the PADI IoT Stamp\nNow is the best time to experiment with low-cost, low-power IoT microcontrollers.medium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_50.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_50.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_50.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_50.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:315911fa6d1f_50.markups.0": { "type": "A", "start": 0, "end": 139, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Frunning-rust-and-freertos-on-the-padi-iot-stamp-fb36c5ef4844", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_50.markups.1": { "type": "STRONG", "start": 0, "end": 47, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_50.markups.2": { "type": "EM", "start": 48, "end": 129, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:315911fa6d1f_50.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fcoinmonks\u002Frunning-rust-and-freertos-on-the-padi-iot-stamp-fb36c5ef4844", "thumbnailImageId": "1*xeCclbFhRhjQkny5E3WOsg.jpeg", "mediaResourceId": "1*xeCclbFhRhjQkny5E3WOsg.jpeg", "__typename": "MixtapeMetadata" }, "Paragraph:315911fa6d1f_51": { "id": "315911fa6d1f_51", "name": "aa17", "type": "P", "href": null, "layout": null, "metadata": null, "text": "…And they have already become obsolete.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_52": { "id": "315911fa6d1f_52", "name": "0e43", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Be very patient if things don’t work quite right in Rust. I may not have the answer for some deep issues, but I’m confident that Rust maintainers will have the answer for us someday.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_52.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_52.markups.0": { "type": "EM", "start": 0, "end": 57, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_53": { "id": "315911fa6d1f_53", "name": "af57", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Mixing Mynewt and Rust", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_54": { "id": "315911fa6d1f_54", "name": "b102", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Built in C, Mynewt is a modern, well-designed operating system for microcontrollers. Rust is a modern, smarter, safer programming language for embedded systems. How shall we enjoy the best of both worlds — Mynewt and Rust? I propose to…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_54.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_54.markups.0": { "type": "EM", "start": 161, "end": 223, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_55": { "id": "315911fa6d1f_55", "name": "c968", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*IJLPy3mlSQ588F4WB0heUg.png", "typename": "ImageMetadata" }, "text": "Layering Rust above Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*IJLPy3mlSQ588F4WB0heUg.png": { "id": "1*IJLPy3mlSQ588F4WB0heUg.png", "originalHeight": 1418, "originalWidth": 1419, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_56": { "id": "315911fa6d1f_56", "name": "1dc3", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Leave the Mynewt operating system untouched, in C. Same goes for Mynewt drivers and libraries, since they were coded by experienced C programmers.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_56.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_56.markups.0": { "type": "STRONG", "start": 4, "end": 47, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_57": { "id": "315911fa6d1f_57", "name": "ef35", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ Expose the popular Mynewt APIs through safe Rust interop libraries", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_57.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_57.markups.0": { "type": "STRONG", "start": 4, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_58": { "id": "315911fa6d1f_58", "name": "3f78", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ Allow Rust applications to be hosted on Mynewt with these exposed APIs", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_58.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_58.markups.0": { "type": "STRONG", "start": 4, "end": 40, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_59": { "id": "315911fa6d1f_59", "name": "de5e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "So new embedded developers (and my IoT students) can start coding Mynewt applications in Rust, the smarter, safer way. No more crashing pointers. Yay!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_59.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_59.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_59.markups.0": { "type": "STRONG", "start": 59, "end": 117, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_59.markups.1": { "type": "EM", "start": 119, "end": 150, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_60": { "id": "315911fa6d1f_60", "name": "8979", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To host a Rust application on Mynewt, we need to be sure that C and Rust can really call each other seamlessly…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_61": { "id": "315911fa6d1f_61", "name": "dd40", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*9nwqk1KOG--TCU0inIG2Xw.png", "typename": "ImageMetadata" }, "text": "Rust and C interoperability", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*9nwqk1KOG--TCU0inIG2Xw.png": { "id": "1*9nwqk1KOG--TCU0inIG2Xw.png", "originalHeight": 1130, "originalWidth": 1910, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_62": { "id": "315911fa6d1f_62", "name": "768d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Rust must allow importing of Mynewt’s C API. So Rust functions must be able to call C functions: \nRust ⟶ C", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_62.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_62.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_62.markups.0": { "type": "STRONG", "start": 20, "end": 48, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_62.markups.1": { "type": "STRONG", "start": 102, "end": 110, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_63": { "id": "315911fa6d1f_63", "name": "1449", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ Rust must allow callbacks from Mynewt’s C API. So Rust must allow its functions to be called from C functions: \nRust ⟵ C", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_63.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_63.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_63.markups.0": { "type": "STRONG", "start": 20, "end": 49, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_63.markups.1": { "type": "STRONG", "start": 116, "end": 124, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_64": { "id": "315911fa6d1f_64", "name": "3055", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ Rust must allow structs to be passed from Rust to C and back: \nRust ⟵📦⟶ C", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_64.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_64.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_64.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_64.markups.0": { "type": "CODE", "start": 20, "end": 27, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_64.markups.1": { "type": "STRONG", "start": 20, "end": 64, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_64.markups.2": { "type": "STRONG", "start": 67, "end": 78, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_65": { "id": "315911fa6d1f_65", "name": "e1b7", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Fortunately, Rust fulfils all the criteria above. For example, to import the following Mynewt Sensor API functions into our Rust application…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_65.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_65.markups.0": { "type": "A", "start": 87, "end": 105, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_api.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_66": { "id": "315911fa6d1f_66", "name": "4020", "type": "P", "href": null, "layout": null, "metadata": null, "text": "int sensor_set_poll_rate_ms(const char * devname, uint32_t poll_rate)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_66.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_66.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_66.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_66.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_66.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_66.markups.0": { "type": "CODE", "start": 0, "end": 69, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_66.markups.1": { "type": "A", "start": 4, "end": 27, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_mgr_api.html#c.sensor_set_poll_rate_ms", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_66.markups.2": { "type": "STRONG", "start": 4, "end": 27, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_66.markups.3": { "type": "EM", "start": 40, "end": 48, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_66.markups.4": { "type": "EM", "start": 58, "end": 68, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67": { "id": "315911fa6d1f_67", "name": "a29b", "type": "P", "href": null, "layout": null, "metadata": null, "text": "struct sensor* sensor_mgr_find_next_bydevname(const char * devname, struct sensor* prev_cursor)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_67.markups.6", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_67.markups.0": { "type": "CODE", "start": 0, "end": 95, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67.markups.1": { "type": "A", "start": 7, "end": 13, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_api.html#c.sensor", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67.markups.2": { "type": "A", "start": 15, "end": 45, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_mgr_api.html#c.sensor_mgr_find_next_bydevname", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67.markups.3": { "type": "A", "start": 75, "end": 81, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_api.html#c.sensor", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67.markups.4": { "type": "STRONG", "start": 15, "end": 45, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67.markups.5": { "type": "EM", "start": 58, "end": 66, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_67.markups.6": { "type": "EM", "start": 82, "end": 94, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_68": { "id": "315911fa6d1f_68", "name": "381c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "int sensor_register_listener(struct sensor * sensor, struct sensor_listener * listener)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_68.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_68.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_68.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_68.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_68.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_68.markups.5", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_68.markups.0": { "type": "CODE", "start": 0, "end": 87, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_68.markups.1": { "type": "A", "start": 4, "end": 28, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_68.markups.2": { "type": "A", "start": 36, "end": 42, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_api.html#c.sensor", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_68.markups.3": { "type": "STRONG", "start": 4, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_68.markups.4": { "type": "EM", "start": 44, "end": 51, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_68.markups.5": { "type": "EM", "start": 77, "end": 86, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_69": { "id": "315911fa6d1f_69", "name": "71dc", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "text": "Rust code to import Mynewt Sensor API. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L35-L62", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_69.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_69.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_69.markups.0": { "type": "A", "start": 44, "end": 130, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L35-L62", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:5237f77b26c945c31dec99f5e0db845b": { "id": "5237f77b26c945c31dec99f5e0db845b", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "import-sensor-api.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_69.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:5237f77b26c945c31dec99f5e0db845b", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_70": { "id": "315911fa6d1f_70", "name": "556a", "type": "P", "href": null, "layout": null, "metadata": null, "text": "…We just compile this Rust code with our Rust application, then we can call the Mynewt functions as though they were Rust functions!", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_71": { "id": "315911fa6d1f_71", "name": "c970", "type": "P", "href": null, "layout": null, "metadata": null, "text": "💎 How did we derive the Rust import declarations above from the Mynewt C declarations? This is explained in the section “Calling C from Rust and back” below.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_71.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_71.markups.0": { "type": "EM", "start": 3, "end": 158, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_72": { "id": "315911fa6d1f_72", "name": "f557", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Is This Code Unsafe?", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_73": { "id": "315911fa6d1f_73", "name": "8911", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Question: What’s wrong with this C function that calls the Mynewt API sensor_register_listener()?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_73.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_73.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_73.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_73.markups.0": { "type": "CODE", "start": 70, "end": 96, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_73.markups.1": { "type": "A", "start": 70, "end": 94, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_73.markups.2": { "type": "EM", "start": 0, "end": 8, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_74": { "id": "315911fa6d1f_74", "name": "d700", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_74.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:f653cac09197a56bd3022011c1144798": { "id": "f653cac09197a56bd3022011c1144798", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "start_sensor_listener_unsafe.c", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_74.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:f653cac09197a56bd3022011c1144798", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_75": { "id": "315911fa6d1f_75", "name": "dfc3", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Answer: listener is a variable created on the stack frame for start_sensor_listener(). When passed to sensor_register_listener(), the listener is appended directly to the global list of sensor listeners, without copying.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_75.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_75.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_75.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_75.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_75.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_75.markups.0": { "type": "CODE", "start": 8, "end": 16, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_75.markups.1": { "type": "CODE", "start": 62, "end": 85, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_75.markups.2": { "type": "CODE", "start": 102, "end": 128, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_75.markups.3": { "type": "CODE", "start": 134, "end": 142, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_75.markups.4": { "type": "EM", "start": 0, "end": 6, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_76": { "id": "315911fa6d1f_76", "name": "1ea7", "type": "P", "href": null, "layout": null, "metadata": null, "text": "When start_sensor_listener() returns, the stack frame is reused by other functions and the listener may contain garbage. When the sensor is polled 10 seconds later, Mynewt fetches the garbled listener to call the listener function. Which results in a catastrophic device failure. One IoT Device Down!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_76.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_76.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_76.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_76.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_76.markups.0": { "type": "CODE", "start": 5, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_76.markups.1": { "type": "CODE", "start": 91, "end": 99, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_76.markups.2": { "type": "CODE", "start": 192, "end": 200, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_76.markups.3": { "type": "EM", "start": 280, "end": 300, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_77": { "id": "315911fa6d1f_77", "name": "b973", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*wb5rYBsYtVbf_ePZ7sjyeA.png", "typename": "ImageMetadata" }, "text": "Bewildering variable choices for the C programmer", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*wb5rYBsYtVbf_ePZ7sjyeA.png": { "id": "1*wb5rYBsYtVbf_ePZ7sjyeA.png", "originalHeight": 1468, "originalWidth": 2152, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_78": { "id": "315911fa6d1f_78", "name": "8b23", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This is one key reason why my IoT students find C programming so hard… Every time we define a variable in C, we need to pick wisely whether it should be a 1️⃣ Static Variable, 2️⃣ Stack Variable or 3️⃣ Heap Variable.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_78.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_78.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_78.markups.0": { "type": "STRONG", "start": 159, "end": 216, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_78.markups.1": { "type": "EM", "start": 70, "end": 154, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_79": { "id": "315911fa6d1f_79", "name": "e960", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Choosing the wrong one will have dire consequences… that’s why Rust calls this “Unsafe” code.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_79.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_79.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_79.markups.0": { "type": "STRONG", "start": 80, "end": 86, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_79.markups.1": { "type": "EM", "start": 33, "end": 50, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_80": { "id": "315911fa6d1f_80", "name": "385c", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Unsafe Coding in Rust", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_81": { "id": "315911fa6d1f_81", "name": "c688", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Rust doesn’t prevent us from writing unsafe code though — it requires us to flag the code as unsafe using the unsafe keyword. Otherwise the Rust compiler politely terminates and refuses to generate any unsafe executables, for our safety.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_81.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_81.markups.0": { "type": "CODE", "start": 110, "end": 116, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_82": { "id": "315911fa6d1f_82", "name": "1f7b", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_82.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:58db0866498d3375aa6b983a91771dcb": { "id": "58db0866498d3375aa6b983a91771dcb", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "start_sensor_listener_unsafe.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_82.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:58db0866498d3375aa6b983a91771dcb", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_83": { "id": "315911fa6d1f_83", "name": "6f51", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In the Rust code above we are required to ring the alarm bells and flag as unsafe the call to sensor_register_listener() because…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_83.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_83.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_83.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_83.markups.0": { "type": "CODE", "start": 75, "end": 81, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_83.markups.1": { "type": "CODE", "start": 94, "end": 120, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_83.markups.2": { "type": "A", "start": 94, "end": 118, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84": { "id": "315911fa6d1f_84", "name": "3d0e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ We are passing the address of the listener to a function sensor_register_listener(). Which may cause problems if the listener was allocated incorrectly (like on the stack). &mut listener is equivalent to &listener in C, just that it also declares to Rust that the listener contents may change (mutable).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_84.markups.6", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_84.markups.0": { "type": "CODE", "start": 38, "end": 46, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84.markups.1": { "type": "CODE", "start": 61, "end": 87, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84.markups.2": { "type": "CODE", "start": 121, "end": 129, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84.markups.3": { "type": "CODE", "start": 177, "end": 190, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84.markups.4": { "type": "CODE", "start": 208, "end": 217, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84.markups.5": { "type": "CODE", "start": 268, "end": 276, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_84.markups.6": { "type": "STRONG", "start": 11, "end": 30, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_85": { "id": "315911fa6d1f_85", "name": "e237", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ sensor_register_listener() is a C function defined by Mynewt, that we have imported into Rust. All imported functions must be flagged as unsafe because, as we know, C functions are capable of doing really weird things.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_85.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_85.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_85.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_85.markups.0": { "type": "CODE", "start": 4, "end": 30, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_85.markups.1": { "type": "CODE", "start": 141, "end": 147, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_85.markups.2": { "type": "STRONG", "start": 99, "end": 147, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_86": { "id": "315911fa6d1f_86", "name": "08c0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "But we don’t really want unsafe alarm bells to ring in our heads every time we call the Mynewt API. Is there a safer way to silence the alarms?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_86.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_86.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_86.markups.0": { "type": "CODE", "start": 25, "end": 31, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_86.markups.1": { "type": "EM", "start": 100, "end": 143, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_87": { "id": "315911fa6d1f_87", "name": "ba09", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Safer Coding in Rust", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_88": { "id": "315911fa6d1f_88", "name": "7fa9", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The safer way to call unsafe Mynewt APIs in Rust is to create wrapper functions to check the parameters and the return values.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_88.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_88.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_88.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_88.markups.0": { "type": "CODE", "start": 22, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_88.markups.1": { "type": "A", "start": 55, "end": 79, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002F1.6.0\u002Fbook\u002Fffi.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_88.markups.2": { "type": "STRONG", "start": 55, "end": 79, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_89": { "id": "315911fa6d1f_89", "name": "6a23", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_89.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_89.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_89.markups.0": { "type": "A", "start": 5, "end": 90, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:a5917598c04b186cb08a0a1e409a010d": { "id": "a5917598c04b186cb08a0a1e409a010d", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "start_sensor_listener_safe.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_89.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:a5917598c04b186cb08a0a1e409a010d", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_90": { "id": "315911fa6d1f_90", "name": "30e3", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Check this out… we can now register a sensor listener without flagging as unsafe! And the listener was allocated on the stack!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_90.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_90.markups.0": { "type": "CODE", "start": 74, "end": 80, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_91": { "id": "315911fa6d1f_91", "name": "2453", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This is the perfect kind of API that my IoT students should be calling, without fear of crashing their devices. What is the magic that makes this happen?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_91.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_91.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_91.markups.0": { "type": "EM", "start": 12, "end": 31, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_91.markups.1": { "type": "EM", "start": 88, "end": 110, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_92": { "id": "315911fa6d1f_92", "name": "c39e", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_92.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_92.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_92.markups.0": { "type": "A", "start": 0, "end": 78, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:f0854fab2a0aef8f916735fa39c4e10b": { "id": "f0854fab2a0aef8f916735fa39c4e10b", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "register_listener.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_92.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:f0854fab2a0aef8f916735fa39c4e10b", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_93": { "id": "315911fa6d1f_93", "name": "0404", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here’s how we created register_listener() as the safe version of the sensor_register_listener() API in Mynewt… register_listener() makes a local static copy of the listener, and passes the local copy to the unsafe sensor_register_listener(). So even if the listener was created on the stack, we are actually passing a static copy to the Mynewt API. Which won’t crash the device.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_93.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_93.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_93.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_93.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_93.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_93.markups.5", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_93.markups.0": { "type": "CODE", "start": 22, "end": 41, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_93.markups.1": { "type": "CODE", "start": 69, "end": 95, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_93.markups.2": { "type": "CODE", "start": 111, "end": 130, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_93.markups.3": { "type": "CODE", "start": 214, "end": 240, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_93.markups.4": { "type": "A", "start": 69, "end": 93, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_93.markups.5": { "type": "STRONG", "start": 139, "end": 172, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_94": { "id": "315911fa6d1f_94", "name": "620f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "We have created a simple Rust wrapper that reuses the same types used by the Mynewt API. (That’s why register_listener() returns an integer as the result code.) But Rust APIs generally use a different convention to return results — the Result type. We’ll cover this in the next article.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_94.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_94.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_94.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_94.markups.0": { "type": "CODE", "start": 101, "end": 120, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_94.markups.1": { "type": "CODE", "start": 236, "end": 242, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_94.markups.2": { "type": "A", "start": 232, "end": 247, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fbook\u002Fch09-02-recoverable-errors-with-result.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_95": { "id": "315911fa6d1f_95", "name": "a898", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "💎 This implementation looks simplistic… what if we need more sensor listeners? But in reality our device RAM is highly constrained and we should plan in advance how many sensor listeners we really need (and set it as a #define). Then we create an array of listeners that’s allocated by register_listener().", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_95.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_95.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_95.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_95.markups.0": { "type": "CODE", "start": 220, "end": 227, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_95.markups.1": { "type": "CODE", "start": 287, "end": 306, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_95.markups.2": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_96": { "id": "315911fa6d1f_96", "name": "bbc0", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "What about allocating listeners on the heap? That could be a good solution but I’m not keen on using the heap on constrained devices (because we never know when we’ll run out of heap space). The alloc heap allocator needs to be implemented for our Rust environment.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_96.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_96.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_96.markups.0": { "type": "CODE", "start": 195, "end": 200, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_96.markups.1": { "type": "A", "start": 195, "end": 215, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdocs.rust-embedded.org\u002Fbook\u002Fcollections\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_97": { "id": "315911fa6d1f_97", "name": "99fb", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "The Typical Rust Build", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_98": { "id": "315911fa6d1f_98", "name": "d846", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*lDTTuwNPViPIkzKrlYFWOw.png", "typename": "ImageMetadata" }, "text": "Files involved in the Rust build", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*lDTTuwNPViPIkzKrlYFWOw.png": { "id": "1*lDTTuwNPViPIkzKrlYFWOw.png", "originalHeight": 1012, "originalWidth": 226, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_99": { "id": "315911fa6d1f_99", "name": "9c3d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To understand how we merged the Rust build with Mynewt, let’s look at the typical Rust build process.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_100": { "id": "315911fa6d1f_100", "name": "f8d6", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The following files are present in a standard Rust build. You can find them in your stm32bluepill-mynewt-sensor folder too…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_100.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_100.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_100.markups.0": { "type": "CODE", "start": 84, "end": 111, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_100.markups.1": { "type": "A", "start": 84, "end": 111, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_101": { "id": "315911fa6d1f_101", "name": "9187", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Cargo.toml: Just like building a typical Rust application, in Mynewt we run the command cargo build to build our embedded Rust application.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_101.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_101.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_101.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_101.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_101.markups.0": { "type": "CODE", "start": 4, "end": 14, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_101.markups.1": { "type": "CODE", "start": 92, "end": 103, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_101.markups.2": { "type": "A", "start": 4, "end": 14, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002FCargo.toml", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_101.markups.3": { "type": "STRONG", "start": 4, "end": 14, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_102": { "id": "315911fa6d1f_102", "name": "76ed", "type": "P", "href": null, "layout": null, "metadata": null, "text": "cargo performs the build according to the settings file Cargo.toml. This file must be present at the root of the workspace folder.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_102.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_102.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_102.markups.0": { "type": "CODE", "start": 0, "end": 5, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_102.markups.1": { "type": "CODE", "start": 56, "end": 66, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_103": { "id": "315911fa6d1f_103", "name": "41d0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "We’ll check the contents of Cargo.toml in a while.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_103.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_103.markups.0": { "type": "CODE", "start": 28, "end": 38, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_104": { "id": "315911fa6d1f_104", "name": "5e65", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ .cargo\u002Fconfig: Our Rust build is for an embedded platform: STM32 Blue Pill. The target platform is specified in this file.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_104.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_104.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_104.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_104.markups.0": { "type": "CODE", "start": 4, "end": 17, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_104.markups.1": { "type": "A", "start": 4, "end": 17, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002F.cargo\u002Fconfig", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_104.markups.2": { "type": "STRONG", "start": 4, "end": 17, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_105": { "id": "315911fa6d1f_105", "name": "9a91", "type": "P", "href": null, "layout": null, "metadata": null, "text": "We’ll check the contents of .cargo\u002Fconfig in a while.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_105.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_105.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_105.markups.0": { "type": "CODE", "start": 28, "end": 41, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_105.markups.1": { "type": "STRONG", "start": 28, "end": 41, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106": { "id": "315911fa6d1f_106", "name": "f7eb", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ src: This folder contains the Rust source code. lib.rs is the main Rust module that pulls in the other Rust files for the build (via the mod declaration).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_106.markups.6", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_106.markups.0": { "type": "CODE", "start": 4, "end": 7, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106.markups.1": { "type": "CODE", "start": 52, "end": 58, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106.markups.2": { "type": "CODE", "start": 141, "end": 144, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106.markups.3": { "type": "A", "start": 4, "end": 7, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Fsrc", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106.markups.4": { "type": "A", "start": 52, "end": 58, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flib.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106.markups.5": { "type": "STRONG", "start": 4, "end": 7, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_106.markups.6": { "type": "STRONG", "start": 52, "end": 58, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_107": { "id": "315911fa6d1f_107", "name": "7fc2", "type": "P", "href": null, "layout": null, "metadata": null, "text": "4️⃣ target\u002Fthumbv7m-none-eabi\u002Fdebug: The cargo build command compiles the src files and generates in this debug folder the Rust executable or library (according to Cargo.toml).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_107.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_107.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_107.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_107.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_107.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_107.markups.5", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_107.markups.0": { "type": "CODE", "start": 4, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_107.markups.1": { "type": "CODE", "start": 41, "end": 52, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_107.markups.2": { "type": "CODE", "start": 74, "end": 77, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_107.markups.3": { "type": "CODE", "start": 106, "end": 111, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_107.markups.4": { "type": "CODE", "start": 164, "end": 174, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_107.markups.5": { "type": "STRONG", "start": 4, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_108": { "id": "315911fa6d1f_108", "name": "0f28", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png": { "id": "1*pmGFQ2cRpqypaNDM1UYwEw.png", "originalHeight": 50, "originalWidth": 1800, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_109": { "id": "315911fa6d1f_109", "name": "1d6f", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*T6yHd_9UythCkdUZK_W2cw.png", "typename": "ImageMetadata" }, "text": "Compiled Rust code in libmylib.rlib", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_109.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*T6yHd_9UythCkdUZK_W2cw.png": { "id": "1*T6yHd_9UythCkdUZK_W2cw.png", "originalHeight": 446, "originalWidth": 1080, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_109.markups.0": { "type": "CODE", "start": 22, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_110": { "id": "315911fa6d1f_110", "name": "dad5", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In our build, cargo generates a library archive file libmylib.rlib. If we peek at the contents of the archive file …\n arm-none-eabi-ar t target\u002Fthumbv7m-none-eabi\u002Fdebug\u002Flibmylib.rlib\n…we’ll see that it contains *.o object files, the compiled Rust code.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_110.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_110.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_110.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_110.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_110.markups.0": { "type": "CODE", "start": 14, "end": 19, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_110.markups.1": { "type": "CODE", "start": 53, "end": 66, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_110.markups.2": { "type": "CODE", "start": 118, "end": 182, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_110.markups.3": { "type": "CODE", "start": 211, "end": 214, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_111": { "id": "315911fa6d1f_111", "name": "0a8f", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*gZKgb2lBLeA3a9b-urKDow.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*gZKgb2lBLeA3a9b-urKDow.png": { "id": "1*gZKgb2lBLeA3a9b-urKDow.png", "originalHeight": 526, "originalWidth": 349, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_112": { "id": "315911fa6d1f_112", "name": "4a06", "type": "P", "href": null, "layout": null, "metadata": null, "text": "But the files in this debug folder exclude the external Rust libraries called by our application (like cty and cstr_core).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_112.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_112.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_112.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_112.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_112.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_112.markups.0": { "type": "CODE", "start": 22, "end": 27, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_112.markups.1": { "type": "CODE", "start": 103, "end": 106, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_112.markups.2": { "type": "CODE", "start": 111, "end": 120, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_112.markups.3": { "type": "A", "start": 103, "end": 106, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcrates.io\u002Fcrates\u002Fcty", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_112.markups.4": { "type": "A", "start": 111, "end": 120, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcrates.io\u002Fcrates\u002Fcstr_core", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_113": { "id": "315911fa6d1f_113", "name": "53d4", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To include the external Rust libraries for the Mynewt build, we need to look one level deeper: debug\u002Fdeps", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_113.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_113.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_113.markups.0": { "type": "CODE", "start": 95, "end": 105, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_113.markups.1": { "type": "STRONG", "start": 95, "end": 105, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_114": { "id": "315911fa6d1f_114", "name": "3421", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This folder contains the compiled *.rlib archive files for our Rust application (libmylib-*.rlib) as well as external Rust libraries.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_114.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_114.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_114.markups.0": { "type": "CODE", "start": 34, "end": 40, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_114.markups.1": { "type": "CODE", "start": 81, "end": 96, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_115": { "id": "315911fa6d1f_115", "name": "fbb9", "type": "P", "href": null, "layout": null, "metadata": null, "text": "As we’ll see later, all the *.rlib files in debug\u002Fdeps will be injected into the Mynewt build.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_115.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_115.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_115.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_115.markups.0": { "type": "CODE", "start": 28, "end": 34, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_115.markups.1": { "type": "CODE", "start": 44, "end": 54, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_115.markups.2": { "type": "STRONG", "start": 44, "end": 54, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_116": { "id": "315911fa6d1f_116", "name": "b70b", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*xtPtQvUH_Jf3Wv85PpmlVA.png", "typename": "ImageMetadata" }, "text": "Typical Rust Build", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*xtPtQvUH_Jf3Wv85PpmlVA.png": { "id": "1*xtPtQvUH_Jf3Wv85PpmlVA.png", "originalHeight": 1651, "originalWidth": 1395, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_117": { "id": "315911fa6d1f_117", "name": "70d3", "type": "P", "href": null, "layout": null, "metadata": null, "text": "5️⃣ Rust Core Library libcore: There’s one important Rust library that’s missing — the Rust Core Library libcore. This library contains the fundamental code needed to implement the core Rust functions: data structures, math, panicking, text formatting, …", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_117.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_117.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_117.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_117.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_117.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_117.markups.0": { "type": "CODE", "start": 22, "end": 29, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_117.markups.1": { "type": "CODE", "start": 105, "end": 112, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_117.markups.2": { "type": "A", "start": 22, "end": 29, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002Fedition-guide\u002Frust-2018\u002Fplatform-and-target-support\u002Flibcore-for-low-level-rust.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_117.markups.3": { "type": "A", "start": 181, "end": 200, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Flogs\u002Flibcore.S", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_117.markups.4": { "type": "STRONG", "start": 4, "end": 29, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_118": { "id": "315911fa6d1f_118", "name": "5627", "type": "P", "href": null, "layout": null, "metadata": null, "text": "libcore is automatically included during the cargo build if we use cargo to generate the executable. But here we are using Mynewt to generate the executable, so we need to add libcore ourselves.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_118.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_118.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_118.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_118.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_118.markups.0": { "type": "CODE", "start": 0, "end": 7, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_118.markups.1": { "type": "CODE", "start": 45, "end": 50, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_118.markups.2": { "type": "CODE", "start": 67, "end": 72, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_118.markups.3": { "type": "CODE", "start": 176, "end": 183, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_119": { "id": "315911fa6d1f_119", "name": "e182", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Where is libcore located? It’s actually located together with the Rust compiler (not with the cargo installation). Our build script runs this command to get the location…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_119.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_119.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_119.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_119.markups.0": { "type": "CODE", "start": 9, "end": 16, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_119.markups.1": { "type": "CODE", "start": 94, "end": 99, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_119.markups.2": { "type": "A", "start": 115, "end": 131, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L91-L109", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_120": { "id": "315911fa6d1f_120", "name": "27d0", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "Locating the Rust Core Library libcore. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L91-L109", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_120.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_120.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_120.markups.0": { "type": "A", "start": 45, "end": 139, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L91-L109", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:a0051b05c607a5b6689432fd0fe729e0": { "id": "a0051b05c607a5b6689432fd0fe729e0", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "build-app-libcore.sh", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_120.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:a0051b05c607a5b6689432fd0fe729e0", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_121": { "id": "315911fa6d1f_121", "name": "7220", "type": "P", "href": null, "layout": null, "metadata": null, "text": "On my Mac, libcore is located at \u002FUsers\u002FLuppy\u002F.rustup\u002Ftoolchains\u002Fnightly-2019–05–22-x86_64-apple-darwin\u002Flib\u002Frustlib\u002Fthumbv7m-none-eabi\u002Flib\u002Flibcore-e6b0ad9835323d10.rlib", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_121.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_121.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_121.markups.0": { "type": "CODE", "start": 11, "end": 18, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_121.markups.1": { "type": "CODE", "start": 33, "end": 168, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_122": { "id": "315911fa6d1f_122", "name": "c6ac", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Note that libcore is specific to the target platform (Blue Pill is thumbv7m-none-eabi). We’ll link the libcore library in the Mynewt build.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_122.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_122.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_122.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_122.markups.0": { "type": "CODE", "start": 10, "end": 17, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_122.markups.1": { "type": "CODE", "start": 67, "end": 85, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_122.markups.2": { "type": "CODE", "start": 103, "end": 110, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_123": { "id": "315911fa6d1f_123", "name": "968c", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "💎 The disassembled code for our Rust application is available here. The disassembled code for libcore is available here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_123.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_123.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_123.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_123.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_123.markups.0": { "type": "CODE", "start": 95, "end": 102, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_123.markups.1": { "type": "A", "start": 53, "end": 67, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Flogs\u002Flibmylib-demangle.S", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_123.markups.2": { "type": "A", "start": 106, "end": 120, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Flogs\u002Flibcore.S", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_123.markups.3": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_124": { "id": "315911fa6d1f_124", "name": "a9a7", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Rust Build Settings", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_125": { "id": "315911fa6d1f_125", "name": "c42e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Let’s look at the simple Rust build settings for our project (which was inspired by this sample)…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_125.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_125.markups.0": { "type": "A", "start": 84, "end": 95, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Frust-embedded.github.io\u002Fbook\u002Fstart\u002Fqemu.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_126": { "id": "315911fa6d1f_126", "name": "9f39", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Cargo.toml", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_126.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_126.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_126.markups.0": { "type": "A", "start": 0, "end": 10, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002FCargo.toml", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_126.markups.1": { "type": "STRONG", "start": 0, "end": 10, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_127": { "id": "315911fa6d1f_127", "name": "8851", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "text": "Rust build settings. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002FCargo.toml", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_127.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_127.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_127.markups.0": { "type": "A", "start": 26, "end": 101, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002FCargo.toml", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:ecd5d24c360dd2190548b3605b26d0fa": { "id": "ecd5d24c360dd2190548b3605b26d0fa", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "Cargo.toml", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_127.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:ecd5d24c360dd2190548b3605b26d0fa", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_128": { "id": "315911fa6d1f_128", "name": "74f7", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here we indicate to cargo that we’re generating a library [lib] (instead of an executable [bin]).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_128.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_128.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_128.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_128.markups.0": { "type": "CODE", "start": 20, "end": 25, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_128.markups.1": { "type": "CODE", "start": 58, "end": 63, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_128.markups.2": { "type": "CODE", "start": 90, "end": 95, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_129": { "id": "315911fa6d1f_129", "name": "acaf", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To keep the ROM size small, we have included only a few small libraries.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_130": { "id": "315911fa6d1f_130", "name": "a5f0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This Cargo.toml produces the compiled Rust library libmylib.rlib that we’ll link with Mynewt.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_130.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_130.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_130.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_130.markups.0": { "type": "CODE", "start": 5, "end": 15, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_130.markups.1": { "type": "CODE", "start": 51, "end": 64, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_130.markups.2": { "type": "STRONG", "start": 15, "end": 16, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_131": { "id": "315911fa6d1f_131", "name": "8a77", "type": "IMG", "href": null, "layout": "OUTSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*NXF9cW-NQS7kcd8d1huhAQ.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*NXF9cW-NQS7kcd8d1huhAQ.png": { "id": "1*NXF9cW-NQS7kcd8d1huhAQ.png", "originalHeight": 50, "originalWidth": 1800, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_132": { "id": "315911fa6d1f_132", "name": "bef0", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": ".cargo\u002Fconfig", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_132.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_132.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_132.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_132.markups.0": { "type": "CODE", "start": 0, "end": 13, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_132.markups.1": { "type": "A", "start": 0, "end": 13, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002F.cargo\u002Fconfig", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_132.markups.2": { "type": "STRONG", "start": 0, "end": 13, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_133": { "id": "315911fa6d1f_133", "name": "4fc4", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "text": "Rust target settings. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002F.cargo\u002Fconfig", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_133.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_133.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_133.markups.0": { "type": "A", "start": 27, "end": 105, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002F.cargo\u002Fconfig", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:1db5330afa7f88b5fc53b805b3234d2a": { "id": "1db5330afa7f88b5fc53b805b3234d2a", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "cargo-config.toml", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_133.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:1db5330afa7f88b5fc53b805b3234d2a", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_134": { "id": "315911fa6d1f_134", "name": "a604", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here we select the target platform for the Rust compiler.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_135": { "id": "315911fa6d1f_135", "name": "ce0d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill runs on an Arm Cortex-M3 processor (which is based on the ARMv7-M architecture), so we have chosen the target thumbv7m-none-eabi", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_135.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_135.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_135.markups.0": { "type": "CODE", "start": 126, "end": 144, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_135.markups.1": { "type": "A", "start": 74, "end": 94, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FARM_Cortex-M#Cortex-M3", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_136": { "id": "315911fa6d1f_136", "name": "7f6b", "type": "P", "href": null, "layout": null, "metadata": null, "text": "cargo build will then generate compiled code in libmylib.rlib that will run on our Blue Pill.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_136.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_136.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_136.markups.0": { "type": "CODE", "start": 0, "end": 11, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_136.markups.1": { "type": "CODE", "start": 48, "end": 62, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_137": { "id": "315911fa6d1f_137", "name": "bf2e", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_138": { "id": "315911fa6d1f_138", "name": "00e2", "type": "P", "href": null, "layout": null, "metadata": null, "text": "As we have seen, we haven’t changed anything in the Rust cargo build process. We used the standard cargo build command to generate a Rust library libmylib.rlib for our Rust application.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_138.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_138.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_138.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_138.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_138.markups.0": { "type": "CODE", "start": 57, "end": 68, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_138.markups.1": { "type": "CODE", "start": 99, "end": 110, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_138.markups.2": { "type": "CODE", "start": 146, "end": 159, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_138.markups.3": { "type": "STRONG", "start": 17, "end": 76, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_139": { "id": "315911fa6d1f_139", "name": "24e5", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The integration of Rust with Mynewt is actually done by our custom build script that injects the compiled Rust files into the Mynewt build. Before going into the integration details, let’s learn about the Mynewt build…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_139.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_139.markups.0": { "type": "STRONG", "start": 56, "end": 138, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_140": { "id": "315911fa6d1f_140", "name": "c653", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*PafibhSo-rVT1RddaVomuA.png", "typename": "ImageMetadata" }, "text": "Typical Mynewt Build", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*PafibhSo-rVT1RddaVomuA.png": { "id": "1*PafibhSo-rVT1RddaVomuA.png", "originalHeight": 1464, "originalWidth": 2493, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_141": { "id": "315911fa6d1f_141", "name": "01cf", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "The Typical Mynewt Build", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_142": { "id": "315911fa6d1f_142", "name": "9661", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The normal Mynewt build command newt build compiles some C and assembly files from these folders…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_142.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_142.markups.0": { "type": "CODE", "start": 32, "end": 42, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_143": { "id": "315911fa6d1f_143", "name": "b798", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*OYkrzDkVIYxktW05cwiBBA.png", "typename": "ImageMetadata" }, "text": "Libraries generated by newt build", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*OYkrzDkVIYxktW05cwiBBA.png": { "id": "1*OYkrzDkVIYxktW05cwiBBA.png", "originalHeight": 840, "originalWidth": 254, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_144": { "id": "315911fa6d1f_144", "name": "abf0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ apps\u002Fmy_sensor_app: Our custom C application for Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_144.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_144.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_144.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_144.markups.0": { "type": "CODE", "start": 4, "end": 22, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_144.markups.1": { "type": "A", "start": 4, "end": 22, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Fapps\u002Fmy_sensor_app", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_144.markups.2": { "type": "STRONG", "start": 4, "end": 22, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_145": { "id": "315911fa6d1f_145", "name": "fb5a", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ libs: Custom drivers (e.g. ESP8266) and libraries (e.g. Sensor Network) for Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_145.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_145.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_145.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_145.markups.0": { "type": "CODE", "start": 4, "end": 8, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_145.markups.1": { "type": "A", "start": 4, "end": 8, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Flibs", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_145.markups.2": { "type": "STRONG", "start": 4, "end": 8, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_146": { "id": "315911fa6d1f_146", "name": "dff8", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ repos: Mynewt OS source code", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_146.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_146.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_146.markups.0": { "type": "CODE", "start": 4, "end": 9, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_146.markups.1": { "type": "STRONG", "start": 4, "end": 9, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147": { "id": "315911fa6d1f_147", "name": "a9a1", "type": "P", "href": null, "layout": null, "metadata": null, "text": "newt build compiles each source module (e.g. my_sensor_app, esp8266) into a separate *.a library (e.g. apps_my_sensor_app.a, libs_esp8266.a), located at bin\u002Ftargets\u002Fbluepill_my_sensor", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_147.markups.6", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_147.markups.0": { "type": "CODE", "start": 0, "end": 10, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147.markups.1": { "type": "CODE", "start": 45, "end": 58, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147.markups.2": { "type": "CODE", "start": 60, "end": 67, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147.markups.3": { "type": "CODE", "start": 85, "end": 88, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147.markups.4": { "type": "CODE", "start": 103, "end": 123, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147.markups.5": { "type": "CODE", "start": 125, "end": 139, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_147.markups.6": { "type": "CODE", "start": 153, "end": 183, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_148": { "id": "315911fa6d1f_148", "name": "f3cb", "type": "P", "href": null, "layout": null, "metadata": null, "text": "newt build links the *.a libraries together to create the Blue Pill executable image \u002Fbin\u002Ftargets\u002Fbluepill_my_sensor\u002Fapp\u002Fapps\u002Fmy_sensor_app\u002Fmy_sensor_app.elf", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_148.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_148.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_148.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_148.markups.0": { "type": "CODE", "start": 0, "end": 10, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_148.markups.1": { "type": "CODE", "start": 21, "end": 24, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_148.markups.2": { "type": "CODE", "start": 85, "end": 157, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_149": { "id": "315911fa6d1f_149", "name": "c250", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This is the image that get flashed into the Blue Pill ROM.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_150": { "id": "315911fa6d1f_150", "name": "a836", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*i8iXOjGKYidtuosPekWVGQ.png", "typename": "ImageMetadata" }, "text": "Combined build with Rust and Mynewt: https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_150.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*i8iXOjGKYidtuosPekWVGQ.png": { "id": "1*i8iXOjGKYidtuosPekWVGQ.png", "originalHeight": 2347, "originalWidth": 4000, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_150.markups.0": { "type": "A", "start": 37, "end": 122, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L1", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_151": { "id": "315911fa6d1f_151", "name": "0623", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Merging the Rust build with Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_152": { "id": "315911fa6d1f_152", "name": "a00c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To host a Rust application on Mynewt, we just need to inject three pieces of compiled code into the Mynewt build…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_153": { "id": "315911fa6d1f_153", "name": "b79b", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*qnsoPxdBv5z_qXuJehQeYA.png", "typename": "ImageMetadata" }, "text": "Overwriting libs_rust_app.a by the compiled Rust application and libraries", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*qnsoPxdBv5z_qXuJehQeYA.png": { "id": "1*qnsoPxdBv5z_qXuJehQeYA.png", "originalHeight": 1030, "originalWidth": 344, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_154": { "id": "315911fa6d1f_154", "name": "6fb8", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Compiled Rust application: libmylib.rlib", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_154.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_154.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_154.markups.0": { "type": "CODE", "start": 31, "end": 44, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_154.markups.1": { "type": "STRONG", "start": 4, "end": 29, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_155": { "id": "315911fa6d1f_155", "name": "ec2d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ Compiled external Rust libraries: target\u002Fthumbv7m-none-eabi\u002Fdebug\u002Fdeps\u002F*.rlib. This folder also contains libmylib.rlib", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_155.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_155.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_155.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_155.markups.0": { "type": "CODE", "start": 38, "end": 82, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_155.markups.1": { "type": "CODE", "start": 109, "end": 122, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_155.markups.2": { "type": "STRONG", "start": 4, "end": 36, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_156": { "id": "315911fa6d1f_156", "name": "1973", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ Rust Core Library libcore: ~\u002F.rustup\u002Ftoolchains\u002Fnightly-*\u002Flib\u002Frustlib\u002Fthumbv7m-none-eabi\u002Flib\u002Flibcore-*.rlib", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_156.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_156.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_156.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_156.markups.0": { "type": "CODE", "start": 22, "end": 29, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_156.markups.1": { "type": "CODE", "start": 31, "end": 111, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_156.markups.2": { "type": "STRONG", "start": 4, "end": 29, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_157": { "id": "315911fa6d1f_157", "name": "57fb", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To do that, we have a super build script scripts\u002Fbuild-app.sh that runs the Rust cargo build command and injects the above files at these Mynewt build locations…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_157.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_157.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_157.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_157.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_157.markups.0": { "type": "CODE", "start": 41, "end": 61, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_157.markups.1": { "type": "CODE", "start": 81, "end": 92, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_157.markups.2": { "type": "A", "start": 41, "end": 61, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_157.markups.3": { "type": "STRONG", "start": 41, "end": 61, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_158": { "id": "315911fa6d1f_158", "name": "c88e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Rust application and external Rust libraries: Copy and overwrite bin\u002Ftargets\u002Fbluepill_my_sensor\u002Fapp\u002Flibs\u002Frust_app\u002Flibs_rust_app.a", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_158.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_158.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_158.markups.0": { "type": "CODE", "start": 69, "end": 133, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_158.markups.1": { "type": "STRONG", "start": 4, "end": 48, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_159": { "id": "315911fa6d1f_159", "name": "8472", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ Rust libcore: Copy and overwrite bin\u002Ftargets\u002Fbluepill_my_sensor\u002Fapp\u002Flibs\u002Frust_libcore\u002Flibs_rust_libcore.a", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_159.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_159.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_159.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_159.markups.0": { "type": "CODE", "start": 9, "end": 16, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_159.markups.1": { "type": "CODE", "start": 37, "end": 109, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_159.markups.2": { "type": "STRONG", "start": 4, "end": 16, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_160": { "id": "315911fa6d1f_160", "name": "c0eb", "type": "IMG", "href": null, "layout": "OUTSET_LEFT", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*1BKmKJu6oxhhr8nvsCsITg.png", "typename": "ImageMetadata" }, "text": "rust_app and rust_libcore are empty stub libraries", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*1BKmKJu6oxhhr8nvsCsITg.png": { "id": "1*1BKmKJu6oxhhr8nvsCsITg.png", "originalHeight": 566, "originalWidth": 660, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_161": { "id": "315911fa6d1f_161", "name": "4f1a", "type": "P", "href": null, "layout": null, "metadata": null, "text": "What are rust_app and rust_libcore? These are custom stub libraries that we added to Mynewt at libs\u002Frust_app and libs\u002Frust_libcore. No meaningful code inside, just stubs.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.6", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.7", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.8", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_161.markups.9", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_161.markups.0": { "type": "CODE", "start": 9, "end": 17, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.1": { "type": "CODE", "start": 22, "end": 34, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.2": { "type": "CODE", "start": 95, "end": 108, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.3": { "type": "CODE", "start": 113, "end": 130, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.4": { "type": "A", "start": 9, "end": 17, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Flibs\u002Frust_app", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.5": { "type": "A", "start": 22, "end": 34, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Flibs\u002Frust_libcore", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.6": { "type": "A", "start": 95, "end": 108, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Flibs\u002Frust_app", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.7": { "type": "A", "start": 113, "end": 130, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Flibs\u002Frust_libcore", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.8": { "type": "STRONG", "start": 9, "end": 17, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_161.markups.9": { "type": "STRONG", "start": 22, "end": 34, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_162": { "id": "315911fa6d1f_162", "name": "9cc2", "type": "P", "href": null, "layout": null, "metadata": null, "text": "But because we instructed Mynewt to include them as part of the Mynewt build, Mynewt compiles them and generates the tiny libraries libs_rust_app.a and libs_rust_libcore.a", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_162.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_162.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_162.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_162.markups.0": { "type": "CODE", "start": 132, "end": 147, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_162.markups.1": { "type": "CODE", "start": 152, "end": 171, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_162.markups.2": { "type": "A", "start": 36, "end": 76, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fapps\u002Fmy_sensor_app\u002Fpkg.yml#L17-L21", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_163": { "id": "315911fa6d1f_163", "name": "0d39", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Which gives us the perfect opportunity to substitute libs_rust_app.a and libs_rust_libcore.a with our compiled Rust code.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_163.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_163.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_163.markups.0": { "type": "CODE", "start": 53, "end": 68, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_163.markups.1": { "type": "CODE", "start": 73, "end": 92, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164": { "id": "315911fa6d1f_164", "name": "3e22", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Our super build script overwrites libs_rust_app.a with the compiled Rust application and libraries, and overwrites libs_rust_libcore.a with the Rust libcore library. So when newt build links all the *.a libraries, the Rust code gets injected into my_sensor_app.elf, which will be flashed into the Blue Pill ROM. Sneaky!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.6", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.7", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_164.markups.8", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_164.markups.0": { "type": "CODE", "start": 34, "end": 49, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.1": { "type": "CODE", "start": 115, "end": 134, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.2": { "type": "CODE", "start": 149, "end": 156, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.3": { "type": "CODE", "start": 174, "end": 184, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.4": { "type": "CODE", "start": 199, "end": 202, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.5": { "type": "CODE", "start": 247, "end": 264, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.6": { "type": "A", "start": 23, "end": 49, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L77-L83", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.7": { "type": "A", "start": 104, "end": 134, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L91-L109", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_164.markups.8": { "type": "STRONG", "start": 218, "end": 264, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_165": { "id": "315911fa6d1f_165", "name": "0403", "type": "IFRAME", "href": null, "layout": "OUTSET_LEFT", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L51-L83", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_165.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_165.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_165.markups.0": { "type": "A", "start": 5, "end": 98, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L51-L83", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:ece08a9309fa020dea9113c7fb7173b4": { "id": "ece08a9309fa020dea9113c7fb7173b4", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "rustlib.sh", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_165.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:ece08a9309fa020dea9113c7fb7173b4", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_166": { "id": "315911fa6d1f_166", "name": "c238", "type": "P", "href": null, "layout": null, "metadata": null, "text": "But how do we replace libs_rust_app.a by multiple *.rlib libraries: libmylib.rlib + libcty.rlib + libcstr_core.rlib + ...?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_166.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_166.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_166.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_166.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_166.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_166.markups.0": { "type": "CODE", "start": 22, "end": 37, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_166.markups.1": { "type": "CODE", "start": 50, "end": 56, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_166.markups.2": { "type": "CODE", "start": 68, "end": 81, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_166.markups.3": { "type": "CODE", "start": 84, "end": 95, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_166.markups.4": { "type": "CODE", "start": 98, "end": 115, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_167": { "id": "315911fa6d1f_167", "name": "fa2a", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Our super build script extracts the *.o object files from every *.rlib file and archives them into a single rustlib.a library.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_167.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_167.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_167.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_167.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_167.markups.0": { "type": "CODE", "start": 36, "end": 39, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_167.markups.1": { "type": "CODE", "start": 64, "end": 70, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_167.markups.2": { "type": "CODE", "start": 108, "end": 117, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_167.markups.3": { "type": "A", "start": 4, "end": 22, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fscripts\u002Fbuild-app.sh#L51-L83", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_168": { "id": "315911fa6d1f_168", "name": "fceb", "type": "P", "href": null, "layout": null, "metadata": null, "text": "That’s how we create the Mynewt ROM for Blue Pill that includes the Rust application and libraries!", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_169": { "id": "315911fa6d1f_169", "name": "8694", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_170": { "id": "315911fa6d1f_170", "name": "6338", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This video explains the combined Rust and Mynewt build…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_171": { "id": "315911fa6d1f_171", "name": "829f", "type": "IFRAME", "href": null, "layout": "OUTSET_CENTER", "metadata": null, "text": "Building the combined Rust and Mynewt code", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_171.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:e31d7956d554de98c8fa9617e14ff0fd": { "id": "e31d7956d554de98c8fa9617e14ff0fd", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FQTTqRlsiBfk%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DQTTqRlsiBfk&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FQTTqRlsiBfk%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 640, "title": "Hosting Rust Applications on Apache Mynewt - Build", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_171.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:e31d7956d554de98c8fa9617e14ff0fd", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_172": { "id": "315911fa6d1f_172", "name": "83a9", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "💎 The complete Rust and Mynewt build log is available here. The disassembled code for our Mynewt ROM image is available here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_172.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_172.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_172.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_172.markups.0": { "type": "A", "start": 45, "end": 59, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Flogs\u002Fbuild-application.log#L1", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_172.markups.1": { "type": "A", "start": 111, "end": 125, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Flogs\u002Fmy_sensor_app.elf.lst", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_172.markups.2": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_173": { "id": "315911fa6d1f_173", "name": "48c2", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Installation and Configuration", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_174": { "id": "315911fa6d1f_174", "name": "b392", "type": "P", "href": null, "layout": null, "metadata": null, "text": "If you have the STM32 Blue Pill or Super Blue Pill and you wish to install and configure the Rust and Mynewt demo code, follow the instructions here. The steps are quite lengthy and you may run into hiccups, so I don’t recommend this if you’re new to embedded development.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_174.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_174.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_174.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_174.markups.0": { "type": "A", "start": 16, "end": 31, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttp:\u002F\u002Fwiki.stm32duino.com\u002Findex.php?title=Blue_Pill", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_174.markups.1": { "type": "A", "start": 35, "end": 50, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002Fswlh\u002Fsuper-blue-pill-like-stm32-blue-pill-but-better-6d341d9347da", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_174.markups.2": { "type": "A", "start": 120, "end": 148, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002FREADME.md", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_175": { "id": "315911fa6d1f_175", "name": "878e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Make sure that you’re using the rust branch of the code, not the master branch (that was used in previous articles)…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_175.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_175.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_175.markups.0": { "type": "CODE", "start": 32, "end": 36, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_175.markups.1": { "type": "CODE", "start": 65, "end": 71, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_176": { "id": "315911fa6d1f_176", "name": "3b88", "type": "P", "href": null, "layout": null, "metadata": null, "text": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_176.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_176.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_176.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_176.markups.0": { "type": "CODE", "start": 0, "end": 64, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_176.markups.1": { "type": "A", "start": 0, "end": 64, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_176.markups.2": { "type": "STRONG", "start": 60, "end": 64, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_177": { "id": "315911fa6d1f_177", "name": "64a9", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Verify that the README.md says…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_177.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_177.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_177.markups.0": { "type": "CODE", "start": 16, "end": 25, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_177.markups.1": { "type": "A", "start": 16, "end": 25, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002FREADME.md", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_178": { "id": "315911fa6d1f_178", "name": "8033", "type": "PRE", "href": null, "layout": null, "metadata": null, "text": "Note: This is the rust branch that contains a Rust application hosted on Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_179": { "id": "315911fa6d1f_179", "name": "afdc", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Conclusion", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_180": { "id": "315911fa6d1f_180", "name": "6dea", "type": "IFRAME", "href": null, "layout": "OUTSET_CENTER", "metadata": null, "text": "Running our Rust application on Mynewt", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_180.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:f9910827c133ed4feeed637c0bbcd3b2": { "id": "f9910827c133ed4feeed637c0bbcd3b2", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FPj3pl6GaztU%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DPj3pl6GaztU&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FPj3pl6GaztU%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 640, "title": "Hosting Rust Applications on Apache Mynewt - Run", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_180.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:f9910827c133ed4feeed637c0bbcd3b2", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_181": { "id": "315911fa6d1f_181", "name": "51c3", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here’s a video of our Rust application, hosted on Mynewt, running on an actual Blue Pill. It works as expected: Reading the Blue Pill’s internal temperature sensor every 10 seconds and displaying the results— Yay!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_181.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_181.markups.0": { "type": "EM", "start": 209, "end": 213, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_182": { "id": "315911fa6d1f_182", "name": "683e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "With some simple build integration, we have proven that it’s indeed possible to host Rust applications on Mynewt (and probably other embedded operating systems too). And it requires very little RAM and ROM to support embedded Rust.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_182.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_182.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_182.markups.0": { "type": "STRONG", "start": 80, "end": 112, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_182.markups.1": { "type": "STRONG", "start": 182, "end": 231, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_183": { "id": "315911fa6d1f_183", "name": "12b7", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Perhaps the bigger challenge is to design a Rust API for Mynewt that’s safe and easy to use.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_183.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_183.markups.0": { "type": "STRONG", "start": 35, "end": 92, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_184": { "id": "315911fa6d1f_184", "name": "a0cf", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In the meantime, what we have created is probably sufficient for new embedded developers (and my students) to create IoT devices in Rust and Mynewt without fear of memory corruption. Saving the world from unsafe embedded C programming… one microstep at a time!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_184.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_184.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_184.markups.0": { "type": "STRONG", "start": 110, "end": 181, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_184.markups.1": { "type": "EM", "start": 183, "end": 260, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_185": { "id": "315911fa6d1f_185", "name": "e064", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Check out the latest article on Visual Embedded Rust…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_186": { "id": "315911fa6d1f_186", "name": "12bd", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "Visual Embedded Rust Programming with Visual Studio Code\nCreate and edit Embedded Rust programs for STM32 Blue Pill and Apache Mynewt… By dragging and dropping blocks!medium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_186.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_186.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_186.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_186.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:315911fa6d1f_186.markups.0": { "type": "A", "start": 0, "end": 177, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fvisual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_186.markups.1": { "type": "STRONG", "start": 0, "end": 56, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_186.markups.2": { "type": "EM", "start": 57, "end": 167, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:315911fa6d1f_186.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fvisual-embedded-rust-programming-with-visual-studio-code-1bc1262e398c", "thumbnailImageId": "1*cWkz4VgkkdnGOdTMoAxcmQ.png", "mediaResourceId": "1*cWkz4VgkkdnGOdTMoAxcmQ.png", "__typename": "MixtapeMetadata" }, "Paragraph:315911fa6d1f_187": { "id": "315911fa6d1f_187", "name": "68b3", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Further Reading for Embedded Rust", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_188": { "id": "315911fa6d1f_188", "name": "2b19", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ “The Embedded Rust Book” was highly informative for embedded Rust programming on Arm Cortex M3", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_188.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_188.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_188.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_188.markups.0": { "type": "A", "start": 5, "end": 27, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Frust-embedded.github.io\u002Fbook\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_188.markups.1": { "type": "STRONG", "start": 4, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_188.markups.2": { "type": "EM", "start": 4, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_189": { "id": "315911fa6d1f_189", "name": "5798", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ “Writing an OS in Rust” has plenty of tips for coding operating systems in Rust", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_189.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_189.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_189.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_189.markups.0": { "type": "A", "start": 5, "end": 26, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fos.phil-opp.com\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_189.markups.1": { "type": "STRONG", "start": 5, "end": 28, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_189.markups.2": { "type": "EM", "start": 4, "end": 26, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_190": { "id": "315911fa6d1f_190", "name": "d525", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ freertos.rs (Rust wrapper for FreeRTOS) was the original inspiration for creating a safe Rust wrapper around an embedded operating system", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_190.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_190.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_190.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_190.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_190.markups.0": { "type": "CODE", "start": 4, "end": 15, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_190.markups.1": { "type": "A", "start": 4, "end": 15, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Fhashmismatch\u002Ffreertos.rs", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_190.markups.2": { "type": "A", "start": 34, "end": 42, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fwww.freertos.org\u002F", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_190.markups.3": { "type": "STRONG", "start": 4, "end": 15, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_191": { "id": "315911fa6d1f_191", "name": "634a", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "💎 The following Advanced Topic sections are for advanced developers. If you’re new to embedded programming, you may stop here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_191.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_191.markups.0": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_192": { "id": "315911fa6d1f_192", "name": "34b5", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "💎 Advanced Topic: Calling C from Rust and back", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_192.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_192.markups.0": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_193": { "id": "315911fa6d1f_193", "name": "55a6", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In this section we go into detail to see how C functions and structs are imported into Rust, and how to export Rust functions to C.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_193.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_193.markups.0": { "type": "CODE", "start": 61, "end": 68, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_194": { "id": "315911fa6d1f_194", "name": "494a", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Import C Functions into Rust: Rust ⟶ C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_195": { "id": "315911fa6d1f_195", "name": "1ebd", "type": "P", "href": null, "layout": null, "metadata": null, "text": "For our demo Rust application, we shall be calling the Mynewt Sensor API to configure the onboard temperature sensor to be polled every 10 seconds. After polling the sensor, Mynewt should call a Listener Function (defined in Rust) to display the result.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_195.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_195.markups.0": { "type": "A", "start": 55, "end": 72, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_api.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_196": { "id": "315911fa6d1f_196", "name": "dfbc", "type": "P", "href": null, "layout": null, "metadata": null, "text": "To import the Mynewt Sensor API functions into our Rust application, we should include this code…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_197": { "id": "315911fa6d1f_197", "name": "be94", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "Rust code to import Mynewt Sensor API. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L35-L62", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_197.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_197.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_197.markups.0": { "type": "A", "start": 44, "end": 130, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L35-L62", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:315911fa6d1f_197.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:5237f77b26c945c31dec99f5e0db845b", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_198": { "id": "315911fa6d1f_198", "name": "4a5c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "How did we derive the Rust import declarations above? Let’s look at the C declarations for the three Mynewt functions (right column) and see how they map to the Rust import declaration (left column)…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_199": { "id": "315911fa6d1f_199", "name": "31a5", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "Rust vs C declarations for Mynewt Sensor API. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L35-L62 and https:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Fblob\u002Fmaster\u002Fhw\u002Fsensor\u002Finclude\u002Fsensor\u002Fsensor.h", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_199.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_199.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_199.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_199.markups.0": { "type": "A", "start": 51, "end": 137, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L35-L62", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_199.markups.1": { "type": "A", "start": 142, "end": 225, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Fblob\u002Fmaster\u002Fhw\u002Fsensor\u002Finclude\u002Fsensor\u002Fsensor.h#L278-L296", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:712b9b8a1c7590aa2be05bbdf01b81aa": { "id": "712b9b8a1c7590aa2be05bbdf01b81aa", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "import-sensor-api.md", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_199.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:712b9b8a1c7590aa2be05bbdf01b81aa", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_200": { "id": "315911fa6d1f_200", "name": "69c8", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "#[link(name = “hw_sensor”)] declares to Rust that the C functions to be imported will be located in the compiled C library archive hw_sensor.a (which will be generated by the Mynewt build)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_200.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_200.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_200.markups.0": { "type": "CODE", "start": 0, "end": 27, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_200.markups.1": { "type": "CODE", "start": 131, "end": 142, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_201": { "id": "315911fa6d1f_201", "name": "47cf", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "i32 in Rust is equivalent to int in C (signed 32-bit integer)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_201.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_201.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_201.markups.0": { "type": "CODE", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_201.markups.1": { "type": "CODE", "start": 29, "end": 32, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_202": { "id": "315911fa6d1f_202", "name": "9360", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "u32 in Rust is equivalent to uint32_t in C (unsigned 32-bit integer)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_202.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_202.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_202.markups.0": { "type": "CODE", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_202.markups.1": { "type": "CODE", "start": 29, "end": 37, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_203": { "id": "315911fa6d1f_203", "name": "b689", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "u8 in Rust is equivalent to uint8_t in C (unsigned byte)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_203.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_203.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_203.markups.0": { "type": "CODE", "start": 0, "end": 2, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_203.markups.1": { "type": "CODE", "start": 28, "end": 35, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_204": { "id": "315911fa6d1f_204", "name": "835b", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "*const u8 in Rust is equivalent to const uint8_t * in C. We use this to pass devname because const uint8_t * has the same size as const char *", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_204.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_204.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_204.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_204.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_204.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_204.markups.0": { "type": "CODE", "start": 0, "end": 9, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_204.markups.1": { "type": "CODE", "start": 35, "end": 50, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_204.markups.2": { "type": "CODE", "start": 77, "end": 84, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_204.markups.3": { "type": "CODE", "start": 93, "end": 108, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_204.markups.4": { "type": "CODE", "start": 130, "end": 142, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_205": { "id": "315911fa6d1f_205", "name": "1d4c", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "SensorListener is a struct we imported from Mynewt to pass the listener info from Rust to C (to be explained in a while)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_205.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_205.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_205.markups.0": { "type": "CODE", "start": 0, "end": 14, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_205.markups.1": { "type": "CODE", "start": 20, "end": 26, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_206": { "id": "315911fa6d1f_206", "name": "1368", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "*mut SensorListener in Rust is equivalent to struct SensorListener * in C", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_206.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_206.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_206.markups.0": { "type": "CODE", "start": 0, "end": 19, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_206.markups.1": { "type": "CODE", "start": 45, "end": 68, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_207": { "id": "315911fa6d1f_207", "name": "19e8", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "Why *mut SensorListener and not *const SensorListener? Because SensorListener will be stored and updated by Mynewt.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_207.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_207.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_207.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_207.markups.0": { "type": "CODE", "start": 4, "end": 23, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_207.markups.1": { "type": "CODE", "start": 32, "end": 53, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_207.markups.2": { "type": "CODE", "start": 63, "end": 77, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_208": { "id": "315911fa6d1f_208", "name": "752f", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "We define SensorPtr as follows…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_208.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_208.markups.0": { "type": "CODE", "start": 10, "end": 19, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_209": { "id": "315911fa6d1f_209", "name": "0460", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "Rust code to import Mynewt Sensor API Types. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L101-L120", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_209.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_209.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_209.markups.0": { "type": "A", "start": 50, "end": 138, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L101-L120", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:a22041785ee1e66d1f2ee9d87e31d8ad": { "id": "a22041785ee1e66d1f2ee9d87e31d8ad", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "sensor-types.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_209.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:a22041785ee1e66d1f2ee9d87e31d8ad", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_210": { "id": "315911fa6d1f_210", "name": "9b5f", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "SensorPtr represents a pointer to a Mynewt sensor struct. Since we are just passing the pointer through from Rust to Mynewt, without touching its contents, we declare SensorPtr as a void * type, which is *const CVoid in Rust.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_210.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_210.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_210.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_210.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_210.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_210.markups.5", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_210.markups.0": { "type": "CODE", "start": 0, "end": 9, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_210.markups.1": { "type": "CODE", "start": 43, "end": 49, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_210.markups.2": { "type": "CODE", "start": 50, "end": 56, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_210.markups.3": { "type": "CODE", "start": 167, "end": 176, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_210.markups.4": { "type": "CODE", "start": 182, "end": 188, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_210.markups.5": { "type": "CODE", "start": 204, "end": 216, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_211": { "id": "315911fa6d1f_211", "name": "a9fe", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "CVoid is our Rust equivalent of void in C", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_211.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_211.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_211.markups.0": { "type": "CODE", "start": 0, "end": 5, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_211.markups.1": { "type": "CODE", "start": 32, "end": 36, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_212": { "id": "315911fa6d1f_212", "name": "30ce", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_213": { "id": "315911fa6d1f_213", "name": "9e83", "type": "IMG", "href": null, "layout": "OUTSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*NXF9cW-NQS7kcd8d1huhAQ.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_214": { "id": "315911fa6d1f_214", "name": "d786", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Import C Structs into Rust: Rust ⟵📦⟶ C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_215": { "id": "315911fa6d1f_215", "name": "eb8c", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "Rust code to import Mynewt SensorListener struct. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L63-L82", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_215.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_215.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_215.markups.0": { "type": "A", "start": 55, "end": 141, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L63-L82", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:2102dad3e88e2f38055aa863bb06f0eb": { "id": "2102dad3e88e2f38055aa863bb06f0eb", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "import-sensor-struct.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_215.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:2102dad3e88e2f38055aa863bb06f0eb", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_216": { "id": "315911fa6d1f_216", "name": "31a0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The Rust code above should be included into our Rust application so that the SensorListener struct may be passed through sensor_register_listener(). To understand how the Rust import declaration was derived, let’s compare the Rust import declaration with the Mynewt declaration in C…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_216.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_216.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_216.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_216.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_216.markups.0": { "type": "CODE", "start": 77, "end": 91, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_216.markups.1": { "type": "CODE", "start": 92, "end": 98, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_216.markups.2": { "type": "CODE", "start": 121, "end": 147, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_216.markups.3": { "type": "A", "start": 121, "end": 145, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_217": { "id": "315911fa6d1f_217", "name": "a7af", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "Rust vs C declarations for Mynewt SensorListener struct. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L63-L82 and https:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Fblob\u002Fmaster\u002Fhw\u002Fsensor\u002Finclude\u002Fsensor\u002Fsensor.h#L278-L296", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_217.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_217.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_217.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_217.markups.0": { "type": "A", "start": 62, "end": 148, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L63-L82", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_217.markups.1": { "type": "A", "start": 153, "end": 246, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Fblob\u002Fmaster\u002Fhw\u002Fsensor\u002Finclude\u002Fsensor\u002Fsensor.h#L278-L296", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:847ea88839d1cd9acc856ab451807a35": { "id": "847ea88839d1cd9acc856ab451807a35", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "import-sensor-struct.md", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_217.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:847ea88839d1cd9acc856ab451807a35", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_218": { "id": "315911fa6d1f_218", "name": "0936", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "#[repr(C)] tells Rust that this struct is used by both Rust and C functions. The struct memory layout shall be fixed according to the C convention.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_218.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_218.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_218.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_218.markups.0": { "type": "CODE", "start": 0, "end": 10, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_218.markups.1": { "type": "CODE", "start": 32, "end": 38, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_218.markups.2": { "type": "CODE", "start": 81, "end": 87, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_219": { "id": "315911fa6d1f_219", "name": "5656", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "#[repr(C, packed)] is used for C structs that are packed", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_219.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_219.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_219.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_219.markups.0": { "type": "CODE", "start": 0, "end": 18, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_219.markups.1": { "type": "CODE", "start": 33, "end": 40, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_219.markups.2": { "type": "CODE", "start": 50, "end": 56, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_220": { "id": "315911fa6d1f_220", "name": "aa74", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "SensorType, SensorArg, SensorDataFunc are defined in the Sensor Types Definition code above", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_220.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_220.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_220.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_220.markups.0": { "type": "CODE", "start": 0, "end": 10, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_220.markups.1": { "type": "CODE", "start": 12, "end": 21, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_220.markups.2": { "type": "CODE", "start": 23, "end": 37, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_221": { "id": "315911fa6d1f_221", "name": "f67a", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "SensorDataFunc is a pointer to a callback function in Rust that Mynewt will call from a C function. This is explained below.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_221.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_221.markups.0": { "type": "CODE", "start": 0, "end": 14, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_222": { "id": "315911fa6d1f_222", "name": "79e3", "type": "ULI", "href": null, "layout": null, "metadata": null, "text": "sl_next is defined as u32 (32-bit unsigned integer) because we should initialise the field to 0 in our Rust code. sl_next is updated by Mynewt to store the pointer to the next SensorListener in the linked list", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_222.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_222.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_222.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_222.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_222.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_222.markups.0": { "type": "CODE", "start": 0, "end": 7, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_222.markups.1": { "type": "CODE", "start": 22, "end": 25, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_222.markups.2": { "type": "CODE", "start": 94, "end": 95, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_222.markups.3": { "type": "CODE", "start": 114, "end": 121, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_222.markups.4": { "type": "CODE", "start": 176, "end": 190, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_223": { "id": "315911fa6d1f_223", "name": "d7a3", "type": "IMG", "href": null, "layout": "OUTSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*NXF9cW-NQS7kcd8d1huhAQ.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_224": { "id": "315911fa6d1f_224", "name": "1864", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Export Rust Functions to C (Callback): Rust ⟵ C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_225": { "id": "315911fa6d1f_225", "name": "a1cd", "type": "P", "href": null, "layout": null, "metadata": null, "text": "We have seen how C functions and structs may be imported into Rust. Now let’s see how Rust functions may be called from C.", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_226": { "id": "315911fa6d1f_226", "name": "f967", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs#L20-L56", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_226.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_226.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_226.markups.0": { "type": "A", "start": 5, "end": 98, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs#L20-L56", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:8a17b5bae4c3848db71a0152cfcde8a6": { "id": "8a17b5bae4c3848db71a0152cfcde8a6", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "read-temp1.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_226.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:8a17b5bae4c3848db71a0152cfcde8a6", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_227": { "id": "315911fa6d1f_227", "name": "12f8", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Recall that sensor_register_listener() registers a Listener Function (defined in Rust) that will be called by Mynewt when the temperature sensor has been polled. sensor_register_listener() accepts a SensorListener struct (named LISTENER here) as a parameter. The SensorListener struct includes sl_func, the pointer to the Listener Function.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.6", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.7", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_227.markups.8", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_227.markups.0": { "type": "CODE", "start": 12, "end": 38, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.1": { "type": "CODE", "start": 162, "end": 188, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.2": { "type": "CODE", "start": 199, "end": 213, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.3": { "type": "CODE", "start": 214, "end": 220, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.4": { "type": "CODE", "start": 228, "end": 236, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.5": { "type": "CODE", "start": 263, "end": 277, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.6": { "type": "CODE", "start": 278, "end": 284, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.7": { "type": "CODE", "start": 294, "end": 301, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_227.markups.8": { "type": "A", "start": 12, "end": 36, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_listener_api.html#c.sensor_register_listener", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_228": { "id": "315911fa6d1f_228", "name": "0933", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs#L41-L48", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_228.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_228.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_228.markups.0": { "type": "A", "start": 5, "end": 98, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs#L41-L48", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:ad7734150261a84bcf5d684b2a469b38": { "id": "ad7734150261a84bcf5d684b2a469b38", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "read-temp2.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_228.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:ad7734150261a84bcf5d684b2a469b38", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_229": { "id": "315911fa6d1f_229", "name": "d4de", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here we pass the Rust function read_temperature() as the Listener Function.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_229.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_229.markups.0": { "type": "CODE", "start": 31, "end": 49, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_230": { "id": "315911fa6d1f_230", "name": "0f8c", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs#L62-L108", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_230.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_230.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_230.markups.0": { "type": "A", "start": 0, "end": 94, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flisten_sensor.rs#L62-L108", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:5154c96d30dba489ace51d0b2252993e": { "id": "5154c96d30dba489ace51d0b2252993e", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "read-temp.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_230.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:5154c96d30dba489ace51d0b2252993e", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_231": { "id": "315911fa6d1f_231", "name": "7cc4", "type": "P", "href": null, "layout": null, "metadata": null, "text": "read_temperature() is declared as extern so that it may be called from C as a callback function (instead of calling by function name). Note that read_temperature() has the same function signature as sl_func (which has type SensorDataFunc)…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_231.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_231.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_231.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_231.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_231.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_231.markups.0": { "type": "CODE", "start": 0, "end": 18, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_231.markups.1": { "type": "CODE", "start": 34, "end": 40, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_231.markups.2": { "type": "CODE", "start": 145, "end": 163, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_231.markups.3": { "type": "CODE", "start": 199, "end": 206, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_231.markups.4": { "type": "CODE", "start": 223, "end": 237, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_232": { "id": "315911fa6d1f_232", "name": "eced", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L63-L109", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_232.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_232.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_232.markups.0": { "type": "A", "start": 5, "end": 92, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Fsensor.rs#L63-L109", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:6708dcc424b17ee3f7be8f7a05547c6c": { "id": "6708dcc424b17ee3f7be8f7a05547c6c", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "sensor-data-func.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_232.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:6708dcc424b17ee3f7be8f7a05547c6c", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_233": { "id": "315911fa6d1f_233", "name": "abea", "type": "IMG", "href": null, "layout": "OUTSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*NXF9cW-NQS7kcd8d1huhAQ.png", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_234": { "id": "315911fa6d1f_234", "name": "c159", "type": "PQ", "href": null, "layout": null, "metadata": null, "text": "Export Rust Functions to C (Call By Name): Rust ⟵ C", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_235": { "id": "315911fa6d1f_235", "name": "dc5c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Previously we have seen how C may call a Rust function via callback (i.e. the Rust function is passed to C as a pointer). What if our C function wishes to call a Rust function by its function name?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_235.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_235.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_235.markups.0": { "type": "EM", "start": 55, "end": 67, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_235.markups.1": { "type": "EM", "start": 176, "end": 197, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_236": { "id": "315911fa6d1f_236", "name": "d304", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Normally the Rust compiler converts Rust function names into a “mangled” format that includes the function signature. So the read_temperature() function would be compiled and renamed as: _ZN5mylib13listen_sensor16read_temperature17h318673dbfba97d4bE()", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_236.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_236.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_236.markups.0": { "type": "CODE", "start": 125, "end": 143, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_236.markups.1": { "type": "CODE", "start": 187, "end": 251, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_237": { "id": "315911fa6d1f_237", "name": "6b12", "type": "P", "href": null, "layout": null, "metadata": null, "text": "But if we are calling read_temperature() from C, this becomes a problem because the function name has changed. To prevent the mangling of the Rust function name, use the #[no_mangle] directive like this:", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_237.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_237.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_237.markups.0": { "type": "CODE", "start": 22, "end": 40, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_237.markups.1": { "type": "CODE", "start": 170, "end": 182, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_238": { "id": "315911fa6d1f_238", "name": "cdf6", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flib.rs#L21-L48", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_238.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:315911fa6d1f_238.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_238.markups.0": { "type": "A", "start": 5, "end": 88, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Frust\u002Fsrc\u002Flib.rs#L21-L48", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:4a996a89f0db98d2025aa2f02ac8f754": { "id": "4a996a89f0db98d2025aa2f02ac8f754", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "main.rs", "__typename": "MediaResource" }, "$Paragraph:315911fa6d1f_238.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:4a996a89f0db98d2025aa2f02ac8f754", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:315911fa6d1f_239": { "id": "315911fa6d1f_239", "name": "1dfa", "type": "P", "href": null, "layout": null, "metadata": null, "text": "So in the above code, the function main() will not be renamed by the Rust compiler. The pub extern “C” directive tells the Rust compiler to export the Rust function main() to C functions.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_239.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_239.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_239.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_239.markups.0": { "type": "CODE", "start": 35, "end": 41, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_239.markups.1": { "type": "CODE", "start": 88, "end": 102, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_239.markups.2": { "type": "CODE", "start": 165, "end": 171, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_240": { "id": "315911fa6d1f_240", "name": "66c1", "type": "P", "href": null, "layout": null, "metadata": null, "text": "From a C function, we may now call the function by its Rust name, main(). In fact that’s how Mynewt starts our Rust application.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_240.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_240.markups.0": { "type": "CODE", "start": 66, "end": 72, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_241": { "id": "315911fa6d1f_241", "name": "d404", "type": "P", "href": null, "layout": null, "metadata": null, "text": "This interoperability of Rust and C is known as the Foreign Function Interface. Read the details here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_241.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_241.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_241.markups.0": { "type": "A", "start": 80, "end": 101, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdoc.rust-lang.org\u002F1.6.0\u002Fbook\u002Fffi.html", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_241.markups.1": { "type": "STRONG", "start": 52, "end": 78, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_242": { "id": "315911fa6d1f_242", "name": "074d", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "💎 Advanced Topic: Enhancements", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_242.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_242.markups.0": { "type": "EM", "start": 0, "end": 3, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_243": { "id": "315911fa6d1f_243", "name": "c64c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Although we have done a lot in this article, we haven’t provided a comprehensive and maintainable environment in Mynewt for hosting all kinds of Embedded Rust applications.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_243.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_243.markups.0": { "type": "STRONG", "start": 67, "end": 109, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_244": { "id": "315911fa6d1f_244", "name": "d143", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Here are my suggestions for improving the integration of Rust with Mynewt. If you’re keen to work on the integration of Rust with Mynewt, lemme know!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_244.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_244.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_244.markups.0": { "type": "STRONG", "start": 28, "end": 53, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_244.markups.1": { "type": "EM", "start": 75, "end": 149, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_245": { "id": "315911fa6d1f_245", "name": "68eb", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Rust folders should follow the Mynewt folder structure:\nMove Rust source files from src to apps\u002Fmy_sensor_app\u002Fsrc\nGenerate compiled Rust object files in bin instead of target", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_245.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_245.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_245.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_245.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_245.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_245.markups.0": { "type": "CODE", "start": 84, "end": 87, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_245.markups.1": { "type": "CODE", "start": 91, "end": 113, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_245.markups.2": { "type": "CODE", "start": 153, "end": 156, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_245.markups.3": { "type": "CODE", "start": 168, "end": 174, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_245.markups.4": { "type": "STRONG", "start": 20, "end": 54, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_246": { "id": "315911fa6d1f_246", "name": "08e7", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Auto-generate the Rust code for importing Mynewt C functions and structs. bindgen is a tool that we could use to generate the Rust import declarations by feeding in the Mynewt header files. Already done here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_246.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_246.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_246.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_246.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_246.markups.0": { "type": "CODE", "start": 65, "end": 72, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_246.markups.1": { "type": "CODE", "start": 74, "end": 81, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_246.markups.2": { "type": "A", "start": 190, "end": 207, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_246.markups.3": { "type": "STRONG", "start": 0, "end": 72, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_247": { "id": "315911fa6d1f_247", "name": "fd1b", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Create safe Rust wrappers for the complete Mynewt API. We may need lots of thinking to create a safe Rust API for Mynewt that’s easy to use and error-proof. Already done here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_247.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_247.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_247.markups.0": { "type": "A", "start": 157, "end": 174, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_247.markups.1": { "type": "STRONG", "start": 7, "end": 53, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_248": { "id": "315911fa6d1f_248", "name": "36ea", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Rust wrappers for Mynewt should return Result type instead of integers (thanks to Marcel Hellwig). Already done here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_248.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_248.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_248.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_248.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_248.markups.0": { "type": "CODE", "start": 39, "end": 45, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_248.markups.1": { "type": "A", "start": 82, "end": 96, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fissues\u002F3", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_248.markups.2": { "type": "A", "start": 99, "end": 116, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_248.markups.3": { "type": "STRONG", "start": 39, "end": 70, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_249": { "id": "315911fa6d1f_249", "name": "b578", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "CoAP (JSON and CBOR) API for Rust, similar to the network-agnostic Sensor Network API. Already done here.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_249.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_249.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_249.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_249.markups.0": { "type": "A", "start": 67, "end": 85, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Frust\u002Flibs\u002Fsensor_network", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_249.markups.1": { "type": "A", "start": 87, "end": 104, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fsafer-simpler-embedded-rust-with-apache-mynewt-on-stm32-blue-pill-d8fcb41969ac", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_249.markups.2": { "type": "STRONG", "start": 0, "end": 24, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_250": { "id": "315911fa6d1f_250", "name": "7cda", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Allow Mynewt drivers and libraries to be created with Rust", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_250.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_250.markups.0": { "type": "STRONG", "start": 13, "end": 58, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_251": { "id": "315911fa6d1f_251", "name": "0a9a", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Support other microcontroller platforms besides Blue Pill", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_251.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_251.markups.0": { "type": "STRONG", "start": 0, "end": 39, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_252": { "id": "315911fa6d1f_252", "name": "9fcd", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Support text formatting and heap allocator in Rust. While keeping RAM and ROM usage low.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_252.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_252.markups.0": { "type": "STRONG", "start": 8, "end": 42, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_253": { "id": "315911fa6d1f_253", "name": "e9c8", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "Keep monitoring for RAM and ROM bloat as we implement enhancements. For example, the ROM size dropped from 73 KB to 55 KB after removing the unwrap() \u002F panic() error checking. Check the memory map before and after. (Learn more about memory maps)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_253.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_253.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_253.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_253.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_253.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_253.markups.5", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:315911fa6d1f_253.markups.0": { "type": "CODE", "start": 141, "end": 159, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_253.markups.1": { "type": "A", "start": 197, "end": 203, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1yep-QaAoaxrBz8tpYZ2TMo1xWNDaKCaFCGS-kON1Rt0\u002Fedit#gid=381366828&fvid=1643056349", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_253.markups.2": { "type": "A", "start": 208, "end": 213, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1tWbH8MMZE5_2NsaWs1qNHDC6V8iR8Hx-Le95gHS69fo\u002Fedit#gid=381366828&fvid=1643056349", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_253.markups.3": { "type": "A", "start": 216, "end": 244, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-analyse-and-optimise-your-ram-and-rom-9fc805e16ed7", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_253.markups.4": { "type": "STRONG", "start": 5, "end": 37, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_253.markups.5": { "type": "EM", "start": 215, "end": 245, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_254": { "id": "315911fa6d1f_254", "name": "b316", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*eLgNIm7M8o5YiwPKoJoopg.png", "typename": "ImageMetadata" }, "text": "ROM usage before and after removing unwrap() \u002F panic() error checking. From https:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1yep-QaAoaxrBz8tpYZ2TMo1xWNDaKCaFCGS-kON1Rt0\u002Fedit#gid=381366828 and https:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1tWbH8MMZE5_2NsaWs1qNHDC6V8iR8Hx-Le95gHS69fo\u002Fedit#gid=381366828&fvid=1643056349", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_254.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_254.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:315911fa6d1f_254.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*eLgNIm7M8o5YiwPKoJoopg.png": { "id": "1*eLgNIm7M8o5YiwPKoJoopg.png", "originalHeight": 1276, "originalWidth": 1962, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:315911fa6d1f_254.markups.0": { "type": "CODE", "start": 36, "end": 54, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_254.markups.1": { "type": "A", "start": 76, "end": 178, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1yep-QaAoaxrBz8tpYZ2TMo1xWNDaKCaFCGS-kON1Rt0\u002Fedit#gid=381366828", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:315911fa6d1f_254.markups.2": { "type": "A", "start": 183, "end": 301, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194225\u002Fhttps:\u002F\u002Fdocs.google.com\u002Fspreadsheets\u002Fd\u002F1tWbH8MMZE5_2NsaWs1qNHDC6V8iR8Hx-Le95gHS69fo\u002Fedit#gid=381366828&fvid=1643056349", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Tag:programming": { "id": "programming", "displayTitle": "Programming", "__typename": "Tag" }, "Tag:internet-of-things": { "id": "internet-of-things", "displayTitle": "Internet of Things", "__typename": "Tag" }, "Tag:embedded-systems": { "id": "embedded-systems", "displayTitle": "Embedded Systems", "__typename": "Tag" }, "Tag:rust": { "id": "rust", "displayTitle": "Rust", "__typename": "Tag" }, "Tag:stm32": { "id": "stm32", "displayTitle": "Stm32", "__typename": "Tag" }, "$Post:c86b119fe5f.previewContent": { "subtitle": "Build IoT devices the smarter, safer way with Rust and Apache Mynewt", "__typename": "PreviewContent" }, "ROOT_QUERY.variantFlags.0": { "name": "allow_access", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.0.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.0.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.1": { "name": "allow_signup", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.1.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.1.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.2": { "name": "allow_test_auth", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.2.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.2.valueType": { "__typename": "VariantFlagString", "value": "disallow" }, "ROOT_QUERY.variantFlags.3": { "name": "available_annual_plan", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.3.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.3.valueType": { "__typename": "VariantFlagString", "value": "2c754bcc2995" }, "ROOT_QUERY.variantFlags.4": { "name": "available_monthly_plan", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.4.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.4.valueType": { "__typename": "VariantFlagString", "value": "60e220181034" }, "ROOT_QUERY.variantFlags.5": { "name": "browsable_stream_config_bucket", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.5.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.5.valueType": { "__typename": "VariantFlagString", "value": "curated-topics" }, "ROOT_QUERY.variantFlags.6": { "name": "disable_gosocial_followers_that_you_follow", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.6.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.6.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.7": { "name": "disable_ios_resume_reading_toast", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.7.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.7.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.8": { "name": "disable_mobile_featured_chunk", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.8.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.8.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.9": { "name": "disable_post_recommended_from_friends_provider", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.9.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.9.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.10": { "name": "enable_annual_renewal_reminder_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.10.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.10.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.11": { "name": "enable_app_flirty_thirty", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.11.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.11.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.12": { "name": "enable_automated_mission_control_triggers", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.12.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.12.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.13": { "name": "enable_branch_io", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.13.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.13.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.14": { "name": "enable_branding", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.14.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.14.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.15": { "name": "enable_branding_fonts", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.15.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.15.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.16": { "name": "enable_dedicated_series_tab_api_ios", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.16.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.16.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.17": { "name": "enable_different_grid", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.17.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.17.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.18": { "name": "enable_disregard_trunc_state_for_footer", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.18.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.18.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.19": { "name": "enable_edit_alt_text", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.19.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.19.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.20": { "name": "enable_email_sign_in_captcha", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.20.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.20.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.21": { "name": "enable_embedding_based_diversification", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.21.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.21.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.22": { "name": "enable_filter_by_resend_rules", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.22.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.22.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.23": { "name": "enable_first_name_on_blocker_banner", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.23.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.23.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.24": { "name": "enable_first_name_on_paywall", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.24.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.24.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.25": { "name": "enable_gift_membership_ended_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.25.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.25.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.26": { "name": "enable_google_one_tap", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.26.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.26.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.27": { "name": "enable_graphql_lo_cache", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.27.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.27.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.28": { "name": "enable_inline_search_lite", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.28.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.28.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.29": { "name": "enable_inline_search_popover_lite", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.29.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.29.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.30": { "name": "enable_ios_post_stats", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.30.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.30.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.31": { "name": "enable_janky_spam_rules", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.31.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.31.valueType": { "__typename": "VariantFlagString", "value": "users,posts" }, "ROOT_QUERY.variantFlags.32": { "name": "enable_kafka_events", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.32.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.32.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.33": { "name": "enable_lite_notifications", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.33.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.33.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.34": { "name": "enable_lite_post", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.34.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.34.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.35": { "name": "enable_lite_post_cd", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.35.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.35.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.36": { "name": "enable_lite_post_highlights", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.36.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.36.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.37": { "name": "enable_lite_post_highlights_view_only", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.37.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.37.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.38": { "name": "enable_lite_profile", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.38.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.38.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.39": { "name": "enable_lite_pub_header_menu", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.39.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.39.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.40": { "name": "enable_lite_read_next", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.40.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.40.valueType": { "__typename": "VariantFlagString", "value": "sidebar" }, "ROOT_QUERY.variantFlags.41": { "name": "enable_lite_stories", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.41.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.41.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.42": { "name": "enable_lite_topics", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.42.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.42.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.43": { "name": "enable_lite_unread_notification_count_mutation", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.43.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.43.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.44": { "name": "enable_lo_homepage", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.44.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.44.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.45": { "name": "enable_lo_scroll_away_metabar", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.45.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.45.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.46": { "name": "enable_logged_out_homepage_signup", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.46.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.46.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.47": { "name": "enable_marketing_emails", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.47.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.47.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.48": { "name": "enable_media_resource_try_catch", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.48.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.48.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.49": { "name": "enable_membership_remove_section_a", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.49.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.49.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.50": { "name": "enable_more_branch_data", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.50.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.50.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.51": { "name": "enable_multi_day_pub_digests", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.51.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.51.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.52": { "name": "enable_new_collaborative_filtering_data", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.52.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.52.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.53": { "name": "enable_new_gdpr_partner_export", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.53.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.53.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.54": { "name": "enable_new_partner_dashboard", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.54.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.54.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.55": { "name": "enable_new_partner_program_updates", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.55.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.55.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.56": { "name": "enable_new_pub_fonts", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.56.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.56.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.57": { "name": "enable_new_pub_modules", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.57.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.57.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.58": { "name": "enable_new_suspended_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.58.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.58.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.59": { "name": "enable_new_three_dot_menu", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.59.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.59.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.60": { "name": "enable_no_cache_control", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.60.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.60.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.61": { "name": "enable_optimizely", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.61.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.61.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.62": { "name": "enable_parsely", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.62.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.62.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.63": { "name": "enable_patronus_on_kubernetes", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.63.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.63.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.64": { "name": "enable_popularity_feature", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.64.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.64.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.65": { "name": "enable_post_import", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.65.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.65.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.66": { "name": "enable_post_settings_screen", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.66.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.66.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.67": { "name": "enable_primary_topic_for_mobile", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.67.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.67.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.68": { "name": "enable_pubs_cta_follow", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.68.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.68.valueType": { "__typename": "VariantFlagString", "value": "explicit_about_email" }, "ROOT_QUERY.variantFlags.69": { "name": "enable_rito_caching", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.69.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.69.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.70": { "name": "enable_rtr_channel", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.70.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.70.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.71": { "name": "enable_save_to_medium", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.71.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.71.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.72": { "name": "enable_sign_up_with_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.72.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.72.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.73": { "name": "enable_stripe_express_initial_expansion_copy", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.73.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.73.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.74": { "name": "enable_stripe_express_rest_of_world_copy", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.74.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.74.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.75": { "name": "enable_suggest_account", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.75.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.75.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.76": { "name": "enable_susi_font_changes", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.76.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.76.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.77": { "name": "enable_tick_landing_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.77.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.77.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.78": { "name": "enable_tipalti_onboarding", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.78.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.78.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.79": { "name": "enable_topic_lifecycle_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.79.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.79.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.80": { "name": "enable_tribute_landing_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.80.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.80.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.81": { "name": "enable_trumpland_landing_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.81.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.81.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.82": { "name": "glyph_font_set", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.82.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.82.valueType": { "__typename": "VariantFlagString", "value": "m2" }, "ROOT_QUERY.variantFlags.83": { "name": "google_sign_in_android", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.83.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.83.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.84": { "name": "is_not_medium_subscriber", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.84.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.84.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.85": { "name": "new_transition_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.85.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.85.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.86": { "name": "pub_sidebar", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.86.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.86.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.87": { "name": "rank_model", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.87.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.87.valueType": { "__typename": "VariantFlagString", "value": "default" }, "ROOT_QUERY.variantFlags.88": { "name": "redis_read_write_splitting", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.88.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.88.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.89": { "name": "share_post_linkedin", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.89.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.89.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.90": { "name": "signin_services", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.90.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.90.valueType": { "__typename": "VariantFlagString", "value": "twitter,facebook,google,email,google-fastidv,google-one-tap" }, "ROOT_QUERY.variantFlags.91": { "name": "signup_services", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.91.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.91.valueType": { "__typename": "VariantFlagString", "value": "twitter,facebook,google,email,google-fastidv,google-one-tap" }, "ROOT_QUERY.variantFlags.92": { "name": "use_new_admin_topic_backend", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.92.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.92.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.93": { "name": "use_sendgrid_queue_for_digest_sends", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.93.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.93.valueType": { "__typename": "VariantFlagBoolean", "value": true } }</script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/manifest.c83c1a1a.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/vendors~main.9c8dc7d0.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/main.c5c932e3.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/vendors~screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tribute~scre~3e410f11.faa5af01.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tribute~screen.post~~73c4bb05.cf7c8ea6.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/screen.post~screen.post.amp~screen.post.series~screen.profile~screen.sequence.library~screen.sequenc~036c6b37.3e471c5d.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tick~screen.landingp~ed90ee39.3c8733a8.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194225js_/https://cdn-client.medium.com/lite/static/js/screen.post.1aa42b57.chunk.js"></script>
  <script>window.main();</script>
</body>

</html>
<!--
     FILE ARCHIVED ON 19:42:25 Dec 04, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 01:29:47 Feb 23, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  esindex: 0.013
  captures_list: 166.055
  load_resource: 90.608
  RedisCDXSource: 1.398
  LoadShardBlock: 129.449 (3)
  exclusion.robots: 0.41
  PetaboxLoader3.datanode: 135.395 (4)
  exclusion.robots.policy: 0.394
  CDXLines.iter: 30.061 (3)
  PetaboxLoader3.resolve: 48.522
-->