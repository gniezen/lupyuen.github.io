<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>Grafana Data Source for The Things Network</title>

    
    <!-- Begin scripts/articles/*-header.html: Article Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<meta property="og:title" 
    content="Grafana Data Source for The Things Network" 
    data-rh="true">
<meta property="og:description" 
    content="How we visualise Sensor Data from The Things Network... With a Custom MQTT Data Source in Grafana"
    data-rh="true">
<meta property="og:image" 
    content="https://lupyuen.github.io/images/grafana-title.jpg">
<meta property="og:type" 
    content="article" data-rh="true">
<!-- End scripts/articles/*-header.html -->
<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
<link rel="stylesheet" type="text/css" href="../dark.css">
<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->


</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

        <!-- Begin scripts/rustdoc-before.html: Pre-HTML for Custom Markdown files processed by rustdoc, like chip8.md -->

    <!-- Begin Theme Picker -->
    <div class="theme-picker" style="left: 0"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg"
        width="18" alt="Pick another theme!"></button>
        <div id="theme-choices"></div>
    </div>
    <script src="../theme.js"></script>
    <script src="../prism.js"></script>
    <!-- Theme Picker -->

    <!-- End scripts/rustdoc-before.html -->
    

    <h1 class="title">Grafana Data Source for The Things Network</h1>
    <nav id="TOC"><ul>
<li><a href="#configure-the-things-network-mqtt">1 Configure The Things Network MQTT</a><ul></ul></li>
<li><a href="#configure-grafana-data-source">2 Configure Grafana Data Source</a><ul></ul></li>
<li><a href="#grafana-dashboard">3 Grafana Dashboard</a><ul></ul></li>
<li><a href="#cbor-concise-binary-object-representation">4 CBOR: Concise Binary Object Representation</a><ul></ul></li>
<li><a href="#transform-mqtt-messages">5 Transform MQTT Messages</a><ul></ul></li>
<li><a href="#store-data-with-prometheus">6 Store Data with Prometheus</a><ul></ul></li>
<li><a href="#whats-next">7 What‚Äôs Next</a><ul></ul></li>
<li><a href="#notes">8 Notes</a><ul></ul></li>
<li><a href="#appendix-install-the-grafana-data-source-for-the-things-network">9 Appendix: Install the Grafana Data Source for The Things Network</a><ul></ul></li></ul></nav><p>üìù <em>30 Sep 2021</em></p>
<p><a href="https://lupyuen.github.io/articles/ttn"><strong>The Things Network</strong></a> is a public global <strong>wireless network for IoT devices</strong>‚Ä¶</p>
<p>(And it‚Äôs free for fair use!)</p>
<p><a href="https://grafana.com/oss/grafana/"><strong>Grafana</strong></a> is a open source tool for <strong>visualising all kinds of real-time data</strong>‚Ä¶</p>
<p>(Works on Linux, macOS and Windows)</p>
<p><em>Can we connect Grafana to The Things Network‚Ä¶</em></p>
<p><em>And instantly visualise the Sensor Data from our IoT Devices?</em></p>
<p><img src="https://lupyuen.github.io/images/grafana-flow.jpg" alt="Visualising The Things Network Sensor Data with Grafana" /></p>
<p>Today we shall experiment with a custom <strong>MQTT Data Source</strong> for Grafana that will stream real-time Sensor Data from The Things Network.</p>
<p><em>Wait‚Ä¶ We‚Äôre streaming the Sensor Data without storing it?</em></p>
<p>Yep this <strong>streaming setup for Grafana</strong> requires fewer components because it doesn‚Äôt store the data.</p>
<p>But it has limitations, which we‚Äôll discuss shortly.</p>
<p>(This is work-in-progress, some spot may get rough. And please pardon my ghastly GoLang üôè)</p>
<p><img src="https://lupyuen.github.io/images/grafana-title.jpg" alt="Grafana visualising Sensor Data from The Things Network" /></p>
<p><em>Grafana visualising Sensor Data from The Things Network</em></p>
<h1 id="configure-the-things-network-mqtt" class="section-header"><a href="#configure-the-things-network-mqtt">1 Configure The Things Network MQTT</a></h1>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-ttn.png" alt="" /></p>
<h1 id="configure-grafana-data-source" class="section-header"><a href="#configure-grafana-data-source">2 Configure Grafana Data Source</a></h1>
<p>TODO</p>
<ul>
<li><a href="https://github.com/lupyuen/the-things-network-datasource"><strong>lupyuen/the-things-network-datasource</strong></a></li>
</ul>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-datasource2.png" alt="" /></p>
<p>TODO5</p>
<p><img src="https://lupyuen.github.io/images/grafana-config.png" alt="" /></p>
<p>TODO6</p>
<p><img src="https://lupyuen.github.io/images/grafana-config2.png" alt="" /></p>
<h1 id="grafana-dashboard" class="section-header"><a href="#grafana-dashboard">3 Grafana Dashboard</a></h1>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-datasource3.png" alt="" /></p>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-dashboard2.png" alt="" /></p>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-filter.png" alt="" /></p>
<h1 id="cbor-concise-binary-object-representation" class="section-header"><a href="#cbor-concise-binary-object-representation">4 CBOR: Concise Binary Object Representation</a></h1>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-cbor.png" alt="" /></p>
<p><a href="http://cbor.me/">(Source)</a></p>
<p>TODO2</p>
<p><img src="https://lupyuen.github.io/images/grafana-cbor2.png" alt="" /></p>
<h1 id="transform-mqtt-messages" class="section-header"><a href="#transform-mqtt-messages">5 Transform MQTT Messages</a></h1>
<p>TODO</p>
<ul>
<li><a href="https://github.com/lupyuen/the-things-network-datasource"><strong>lupyuen/the-things-network-datasource</strong></a></li>
</ul>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-payload.jpg" alt="" /></p>
<p>TODO3</p>
<p><img src="https://lupyuen.github.io/images/grafana-code.png" alt="" /></p>
<p>TODO4</p>
<p><img src="https://lupyuen.github.io/images/grafana-code2.png" alt="" /></p>
<h1 id="store-data-with-prometheus" class="section-header"><a href="#store-data-with-prometheus">6 Store Data with Prometheus</a></h1>
<p>TODO</p>
<p><img src="https://lupyuen.github.io/images/grafana-flow2.jpg" alt="" /></p>
<h1 id="whats-next" class="section-header"><a href="#whats-next">7 What‚Äôs Next</a></h1>
<p>TODO</p>
<p>PineDio Stack BL604</p>
<ul>
<li>
<p><a href="https://github.com/sponsors/lupyuen">Sponsor me a coffee</a></p>
</li>
<li>
<p><a href="https://lupyuen.github.io/articles/book">Read ‚ÄúThe RISC-V BL602 / BL604 Book‚Äù</a></p>
</li>
<li>
<p><a href="https://lupyuen.github.io">Check out my articles</a></p>
</li>
<li>
<p><a href="https://lupyuen.github.io/rss.xml">RSS Feed</a></p>
</li>
</ul>
<p><em>Got a question, comment or suggestion? Create an Issue or submit a Pull Request here‚Ä¶</em></p>
<p><a href="https://github.com/lupyuen/lupyuen.github.io/blob/master/src/grafana.md"><code>lupyuen.github.io/src/grafana.md</code></a></p>
<h1 id="notes" class="section-header"><a href="#notes">8 Notes</a></h1>
<ol>
<li>This article is the expanded version of <a href="https://twitter.com/MisterTechBlog/status/1440459917828050946">this Twitter Thread</a></li>
</ol>
<h1 id="appendix-install-the-grafana-data-source-for-the-things-network" class="section-header"><a href="#appendix-install-the-grafana-data-source-for-the-things-network">9 Appendix: Install the Grafana Data Source for The Things Network</a></h1>
<p>TODO</p>
<ul>
<li><a href="https://github.com/lupyuen/the-things-network-datasource"><strong>lupyuen/the-things-network-datasource</strong></a></li>
</ul>
<p>TODO</p>

    
</body>
</html>