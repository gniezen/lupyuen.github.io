<!doctype html>
<html lang="en">

<head>
    <script defer src="https://cdn.optimizely.com/js/16180790160.js"></script>
    <title data-rh="true">Install Bluetooth Mesh and Apache Mynewt for nRF52 and Visual Studio Code on Windows and macOS
        | by Lup Yuen Lee 李立源 | Medium</title>
    <meta data-rh="true" charset="utf-8" />
    <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
    <meta data-rh="true" name="theme-color" content="#000000" />
    <meta data-rh="true" property="og:type" content="article" />
    <meta data-rh="true" property="article:published_time" content="2019-10-19T10:30:39.302Z" />
    <meta data-rh="true" name="title"
        content="Install Bluetooth Mesh and Apache Mynewt for nRF52 and Visual Studio Code on Windows and macOS | by Lup Yuen Lee 李立源 | Medium" />
    <meta data-rh="true" property="og:title"
        content="Install Bluetooth Mesh and Apache Mynewt for nRF52 and Visual Studio Code on Windows and macOS" />
    <meta data-rh="true" property="twitter:title"
        content="Install Bluetooth Mesh and Apache Mynewt for nRF52 and Visual Studio Code on Windows and macOS" />
    <meta data-rh="true" name="description"
        content="Follow these instructions to install the Bluetooth Mesh sample application for nRF52 and Visual Studio Code on Windows and macOS for the article “Bluetooth Mesh with nRF52 and Apache Mynewt” 1️⃣ For…" />
    <meta data-rh="true" property="og:description"
        content="Follow these instructions to install the Bluetooth Mesh sample application for nRF52 and Visual Studio Code on Windows and macOS for the…" />
    <meta data-rh="true" property="twitter:description"
        content="Follow these instructions to install the Bluetooth Mesh sample application for nRF52 and Visual Studio Code on Windows and macOS for the…" />
    <meta data-rh="true" name="twitter:card" content="summary_large_image" />
    <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
    <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
    <meta data-rh="true" name="robots" content="index,follow,max-image-preview:large" />
    <meta data-rh="true" name="referrer" content="unsafe-url" />
    <meta data-rh="true" name="twitter:label1" value="Reading time" />
    <meta data-rh="true" name="twitter:data1" value="6 min read" />
    <meta property="og:image" 
    content="https://lupyuen.github.io/images/legacy/n1.jpeg">
  
<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">

<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->

</head>

<body>
    <div id="root">
        <div class="a b c">
            <div class="s">
                <article>
                    <section class="ft fu fv fw w fx fd s"></section><span class="s"></span>
                    <div>
                        <div class="by fl fy fz ga ce"></div>
                        <section class="dj gb gc de gd">
                            <div class="ge w">
                                <div class="figure gf ge w paragraph-image">
                                    
                
                <p><img src="https://lupyuen.github.io/images/legacy/n1.jpeg" /></p>



                                    <figcaption><p><em>Bluetooth Mesh with four
                                        EBYTE E73-TBB Development Boards based on Nordic nRF52832 Microcontroller
                                    </em></p></figcaption>
                                </div>
                            </div>
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <div class="">
                                        <h1 id="3fa3"
                                            class="ha dh hb av cw hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw el">
                                            Install Bluetooth Mesh and Apache Mynewt for nRF52 and Visual Studio Code on
                                            Windows and macOS</h1>
                                        <div class="ct">
                                            <div class="n cg hx hy hz">
                                                <div class="o n">
                                                    <div><a rel="noopener"
                                                            href="https://lupyuen.github.io">
                                                            <div class="ah ia ib">
                                                                <div class="ba n ar o p by ic id cb cc cd ce"></div>
                                                                
                                                            </div>
                                                        </a></div>
                                                    <div class="dp w n cq">
                                                        <div class="n">
                                                            <div style="flex:1"><span class="av b aw ax el"><a class=""
                                                                        rel="noopener"
                                                                        href="https://lupyuen.github.io">
                                                                        <p class="av b aw ax az">Lup Yuen Lee 李立源</p>
                                                                    </a></span></div>
                                                        </div><span class="av b aw ax ay"><a class="" rel="noopener"
                                                                href="https://lupyuen.github.io/articles/install-bluetooth-mesh-and-apache-mynewt-for-nrf52-and-visual-studio-code-on-windows-and-macos">
                                                                <p class="av b aw ax ay"><span class="ie"></span>Oct 15,
                                                                    2019<span class="if">·</span>6 min read</p>
                                                            </a></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p id="cea3"
                                        class="iu iv hb iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn dj el">
                                        Follow these instructions to install the Bluetooth Mesh sample application for
                                        nRF52 and Visual Studio Code on Windows and macOS for the article <em
                                            class="jo">“</em><a class="bq jp" rel="noopener"
                                            href="https://lupyuen.github.io/articles/bluetooth-mesh-with-nrf52-and-apache-mynewt"><em
                                                class="jo">Bluetooth Mesh with nRF52 and Apache Mynewt</em></a><em
                                            class="jo">”</em></p>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="acd3"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Install Rust for Windows and macOS</h1>
                                    <p id="c5d5"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        1️⃣ <strong class="iw cw"><em class="jo">For Windows Only: </em></strong>Click
                                        here to install <strong class="iw cw">Build Tools For Visual Studio
                                            2019</strong>:<br /><code
                                            class="gp ky kz la lb b"><a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019" class="bq jp" rel="noopener nofollow">https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019</a></code>
                                    </p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n2.png" /></p>

                                    </div>
                                    <p id="be88"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click the <code class="gp ky kz la lb b">Individual Components</code> tab</p>
                                    <p id="54e7"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Select the following components:</p>
                                    <ol class="">
                                        <li id="3528"
                                            class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn lo lp lq el">
                                            <code class="gp ky kz la lb b">Windows 10 SDK (10.0.18362.0)</code></li>
                                        <li id="d511"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn lo lp lq el">
                                            <code class="gp ky kz la lb b">C++ CMake Tools for Windows</code></li>
                                        <li id="fe64"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn lo lp lq el">
                                            (This should be automatically selected) <code
                                                class="gp ky kz la lb b">MSVC v142 — VS 2019 C++ x64/x86 Build Tools</code>
                                        </li>
                                    </ol>
                                    <p id="751f"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ Install <code class="gp ky kz la lb b">rustup</code> according to the
                                        instructions here:<br /><code
                                            class="gp ky kz la lb b"><a href="https://rustup.rs" class="bq jp" rel="noopener nofollow">https://rustup.rs</a></code>
                                    </p>
                                    <p id="7f08"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        3️⃣ <strong class="iw cw"><em class="jo">For Windows Only: </em></strong>Click
                                        the link provided to download <code
                                            class="gp ky kz la lb b">rustup‑init.exe</code></p>
                                    <p id="59e6"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Launch the downloaded file <code class="gp ky kz la lb b">rustup‑init.exe</code>
                                    </p>
                                    <p id="9b61"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        If you see the message “<code
                                            class="gp ky kz la lb b">Windows Defender SmartScreen prevented an unrecognised app from starting</code>”…
                                    </p>
                                    <p id="5910"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code class="gp ky kz la lb b">More Info</code></p>
                                    <p id="669a"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code class="gp ky kz la lb b">Run Anyway</code></p>
                                    <p id="b628"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        4<span id="rmm">️</span>⃣ At the <code
                                            class="gp ky kz la lb b">Welcome to Rust!</code> prompt, press Enter to
                                        select the default option:<br /><code
                                            class="gp ky kz la lb b">1) Proceed with installation (default)</code></p>
                                    <p id="f14f"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        5️⃣ Open the Windows or macOS Command Prompt. Enter into the command prompt:</p>
                                    <pre
                                        class="ld le lf lg lh lw lx ly"><span id="0e46" class="el lz jy hb lb b dk ma mb s mc">rustup default nightly<br/>rustup update<br/>rustup target add thumbv7m-none-eabi<br/>rustup target add thumbv7em-none-eabihf<br/># For RISC-V Only:<br/>rustup target add riscv32imac-unknown-none-elf<br/>rustc -V</span></pre>
                                    <p id="cbad"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        The reported version of <code class="gp ky kz la lb b">rustc</code> should be
                                        <code class="gp ky kz la lb b">1.38.0</code> or later:</p>
                                    <p id="8482"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        <code
                                            class="gp ky kz la lb b">rustc 1.38.0-nightly (435236b88 2019–08–01)</code>
                                    </p>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="6a41"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Install Source Files</h1>
                                    <p id="5ed6"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        1️⃣ Download the <code
                                            class="gp ky kz la lb b">stm32bluepill-mynewt-sensor.7z</code> file attached
                                        below…</p>
                                    <p id="3d10"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        <strong class="iw cw"><em class="jo">For Windows:</em></strong><br /><code
                                            class="gp ky kz la lb b"><a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/releases/tag/v11.0.0" class="bq jp" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/releases/tag/v11.0.0</a></code>
                                    </p>
                                    <p id="d74f"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        <strong class="iw cw"><em class="jo">For macOS:<br /></em></strong><code
                                            class="gp ky kz la lb b"><a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/releases/tag/v11.0.1" class="bq jp" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/releases/tag/v11.0.1</a></code>
                                    </p>
                                    <p id="7387"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ Expand the <code class="gp ky kz la lb b">.7z</code> file with 7zip
                                        (Windows) or Keka (macOS)…</p>
                                    <p id="9f2c"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        <strong class="iw cw"><em class="jo">For Windows:</em></strong><br /><code
                                            class="gp ky kz la lb b"><a href="https://www.7-zip.org/download.html" class="bq jp" rel="noopener nofollow">https://www.7-zip.org/download.html</a></code>
                                    </p>
                                    <p id="7179"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        <strong class="iw cw"><em class="jo">For macOS:</em></strong><br /><code
                                            class="gp ky kz la lb b"><a href="https://www.keka.io/en/" class="bq jp" rel="noopener nofollow">https://www.keka.io/en/</a></code>
                                    </p>
                                    <p id="d7b6"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ <strong class="iw cw"><em class="jo">For Windows Only:</em></strong> Install
                                        Arm Cross-Compiler and Linker for Windows from Arm Developer Website…<br /><code
                                            class="gp ky kz la lb b"><a href="https://developer.arm.com/-/media/Files/downloads/gnu-rm/8-2019q3/RC1.1/gcc-arm-none-eabi-8-2019-q3-update-win32-sha1.exe?revision=fcadabed-d946-49dc-8f78-0732d2f43773?product=GNU%20Arm%20Embedded%20Toolchain,32-bit,,Windows,8-2019-q3-update" class="bq jp" rel="noopener nofollow">https://developer.arm.com/-/media/Files/downloads/gnu-rm/8-2019q3/RC1.1/gcc-arm-none-eabi-8-2019-q3-update-win32-sha1.exe?revision=fcadabed-d946-49dc-8f78-0732d2f43773?product=GNU%20Arm%20Embedded%20Toolchain,32-bit,,Windows,8-2019-q3-update</a></code>
                                    </p>
                                    <p id="a951"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Select this option at the last install step:<br /><code
                                            class="gp ky kz la lb b">&quot;Add path to environment variable&quot;</code>
                                    </p>
                                    <p id="8abf"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        3️⃣ <strong class="iw cw"><em class="jo">For Windows Only:
                                            </em></strong>Download the ST-Link USB driver from ST-Link Driver Website
                                        (email registration required)…<br /><code
                                            class="gp ky kz la lb b"><a href="https://www.st.com/en/development-tools/stsw-link009.html" class="bq jp" rel="noopener nofollow">https://www.st.com/en/development-tools/stsw-link009.html</a></code>
                                    </p>
                                    <p id="a090"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code class="gp ky kz la lb b">Get Software</code><br />Unzip the
                                        downloaded file. Double-click the driver installer:<br /><code
                                            class="gp ky kz la lb b">dpinst_amd64.exe</code></p>
                                    <p id="134a"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        4️⃣ Install Windows Studio Code:<br /><code
                                            class="gp ky kz la lb b"><a href="https://code.visualstudio.com/" class="bq jp" rel="noopener nofollow">https://code.visualstudio.com/</a></code>
                                    </p>
                                    <p id="c108"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Launch Visual Studio Code</p>
                                    <p id="8707"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code class="gp ky kz la lb b">View → Extensions</code></p>
                                    <p id="bef9"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Enter <code class="gp ky kz la lb b">cortex-debug</code></p>
                                    <p id="2527"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Install the extension “Cortex-Debug” shown below…</p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n3.png" /></p>

                                     
                                        <figcaption><p><em>Cortex-Debug Extension
                                            for Visual Studio Code: <code
                                                class="gp ky kz la lb b"><a href="https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug" class="bq jp" rel="noopener nofollow">https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug</a></code>
                                        </em></p></figcaption>
                                    </div>
                                    <p id="bc81"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        5️⃣ <strong class="iw cw"><em class="jo">For macOS Only:</em></strong> In Visual
                                        Studio Code, click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → Install Mynewt</code></p>
                                    <p id="522c"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        This installs the Arm Cross-Compiler and Linker for macOS.</p>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="2376"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Build The Firmware</h1>
                                    <p id="989f"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        1️⃣ In Visual Studio Code, click <code
                                            class="gp ky kz la lb b">File → Open Folder</code><br />Select the
                                        downloaded folder <code
                                            class="gp ky kz la lb b">stm32bluepill-mynewt-sensor</code></p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n4.png" /></p>

                                    </div>
                                    <p id="7b13"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        When prompted to open the workspace, click <code
                                            class="gp ky kz la lb b">Open Workspace</code></p>
                                    <p id="73cc"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ Click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [1] Build Bootloader</code><br />This
                                        builds the Bootloader Firmware, which starts the Apache Mynewt operating system
                                        upon startup. If it shows errors, compare with <a
                                            href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/build-bootloader.log"
                                            class="bq jp" rel="noopener nofollow">this build log</a>.</p>
                                    <p id="4893"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [2] Build Application</code><br />This
                                        builds the Application Firmware containing our Rust program. Compare with <a
                                            href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/build-application.log"
                                            class="bq jp" rel="noopener nofollow">this build log</a>.</p>
                                    <p id="a359"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        When our Rust program has been successfully compiled as Application Firmware, we
                                        should see this…</p>
                                </div>
                            </div>
                            <div class="ge w">
                                <div class="figure ld le lf lg lh ge w paragraph-image">

                                                    
                <p><img src="https://lupyuen.github.io/images/legacy/n5.png" /></p>


                                  
                                </div>
                            </div>
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <p id="fb99"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        If you see the message <code
                                            class="gp ky kz la lb b">Undefined reference to main</code>, rebuild the
                                        application by clicking <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [2] Build Application</code>
                                    </p>
                                    <p id="8c72"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [3] Image Application</code><br />This
                                        creates the flash image from the firmware. Compare with <a
                                            href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/image.log"
                                            class="bq jp" rel="noopener nofollow">this image log</a>.</p>
                                    <p id="9351"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        If any source files or configuration files are changed, rebuild the application
                                        by clicking <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [2] Build Application</code>
                                    </p>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="8871"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Flash The Firmware</h1>
                                    <p id="8bcd"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        The next step is to flash the firmware into ROM. We’ll need to connect the nRF52
                                        to the USB port of our computer via an <a
                                            href="https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924134644&amp;SearchText=st-link+v2&amp;switch_new_app=y"
                                            class="bq jp" rel="noopener nofollow">ST-Link V2 adapter</a>.</p>
                                </div>
                            </div>
                            <div class="ge">
                                <div class="n p">
                                    <div class="mi mj mk ml mm mn am mo an mp ap w">
                                        <div class="figure ld le lf lg lh ge mr ms paragraph-image">
                
                                            <p><img src="https://lupyuen.github.io/images/legacy/n6.jpeg" /></p>


                                      
                                            <figcaption><p><em>nRF52 Board connected
                                                to ST-Link V2</em></p></figcaption>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <p id="dee2"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        1️⃣ Connect the nRF52 board to ST-Link V2 as follows…</p>
                                        
                      
                                    <div class="figure ld le lf lg lh ge">

                                        <p><script src="https://gist.github.com/lupyuen/ce548c2bff1ed7e3f95c151359c96b92.js"></script></p>

                                    </div>
                                    <p id="78c0"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Plug ST-Link into your computer’s USB port.</p>
                                    <p id="b3c2"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ Click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [4] Load Bootloader</code>
                                    </p>
                                    <p id="a933"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        This flashes the bootloader, to start the Apache Mynewt operating system upon
                                        startup. If it shows errors, compare with <a
                                            href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/load-bootloader.log"
                                            class="bq jp" rel="noopener nofollow">this flash log</a>.</p>
                                    <p id="4a5f"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        3️⃣ Click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [5] Load Application</code>
                                    </p>
                                    <p id="6784"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        This flashes the application firmware. If it shows errors, compare with <a
                                            href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/load-application.log"
                                            class="bq jp" rel="noopener nofollow">this flash log</a>.</p>
                                    <p id="ec29"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        If you’re unable to flash the nRF52, it’s highly likely that the flash ROM on
                                        your nRF52 has been protected. To remove the flash ROM protection, follow the
                                        steps in the section <em class="jo">“Advanced Topic: Remove nRF52 Flash
                                            Protection With Raspberry Pi”</em> in the article <em class="jo">“</em><a
                                            class="bq jp" rel="noopener"
                                            href="https://lupyuen.github.io/articles/coding-nrf52-with-rust-and-apache-mynewt-on-visual-studio-code"><em
                                                class="jo">Coding nRF52 with Rust and Apache Mynewt on Visual Studio
                                                Code</em></a><em class="jo">”</em>.</p>
                                    <p id="ccfe"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        4️⃣ If the nRF52 board has been previously provisioned as a mesh node, erase the
                                        provisioning details in the Flash ROM by clicking<br /><code
                                            class="gp ky kz la lb b">Terminal → Run Task → Erase Flash</code></p>
                                    <p id="5b60"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Then re-flash the Bootloader and Application…<br />Click <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [4] Load Bootloader<br/></code>Click
                                        <code class="gp ky kz la lb b">Terminal → Run Task → [5] Load Application</code>
                                    </p>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="bb03"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Run The Program</h1>
                                    <p id="aaf6"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        1️⃣ Click <code class="gp ky kz la lb b">Debug → Start Debugging</code></p>
                                    <figure
                                        class="ld le lf lg lh ge mw mx fc my mz na nb nc bg js nd ne nf ng dy paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n7.png" /></p>

                                        
                                        
                                    </div>
                                    <p id="05eb"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ Click <code class="gp ky kz la lb b">View → Output</code></p>
                                    <p id="5ec5"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Select <code class="gp ky kz la lb b">Adapter Output</code> to see the Console
                                        Log of debug messages generated by our program</p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/a0.png" /></p>

                                     
                                        
                                    </div>
                                    <div class="figure gv ge mw mx fc my mz na nb nc bg js nd ne nf ng dy paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n8.png" /></p>

                                        
                                    </div>
                                    <p id="91cc"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        3️⃣ The debugger pauses at <code class="gp ky kz la lb b">Reset_Handler</code>
                                    </p>
                                    <p id="2598"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code class="gp ky kz la lb b">Continue</code> or press <code
                                            class="gp ky kz la lb b">F5</code></p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/a0.png" /></p>

                               
                                        
                                    </div>
                                    <div class="figure gv ge mw mx fc my mz na nb nc bg js nd ne nf ng dy paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n9.png" /></p>

                             
                                        
                                    </div>
                                    <p id="cc81"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        4️⃣ The debugger pauses next at the <code class="gp ky kz la lb b">main()</code>
                                        function</p>
                                    <p id="1590"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Click <code class="gp ky kz la lb b">Continue</code> or press <code
                                            class="gp ky kz la lb b">F5</code></p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/a0.png" /></p>

                                    
                                        
                                    </div>
                                    <p id="fef3"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        The program is now running on our microcontroller. <a
                                            href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/provision-app.log"
                                            class="bq jp" rel="noopener nofollow">The Console Log should look like
                                            this</a>.</p>
                                    <div class="figure ld le lf lg lh ge">
                                        
                                        <p><script src="https://gist.github.com/lupyuen/90ac1dca567c53b00b0877cc47c5ae5e.js"></script></p>
                      
                                     
                                        <figcaption><p><em>Console Log from <a
                                                href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/provision-app.log"
                                                class="bq jp"
                                                rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/provision-app.log</a>
                                        </em></p></figcaption>
                                    </div>
                                    <p id="5e62"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        Here’s a video demo of the application build and debug on nRF52…</p>
                                </div>
                            </div>
                            <div class="ge">
                                <div class="n p">
                                    <div class="mi mj mk ml mm mn am mo an mp ap w">
                                        <div class="figure ld le lf lg lh ge">
                                        
                                            <p><a href="https://youtu.be/wqimbvJeGMo">[Watch video on YouTube]</a></p>
                          
                                        
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="173f"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Optional: Install Rust Language Server</h1>
                                    <p id="c97b"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        To get full Rust Language Support for editing Rust source files in Visual Studio
                                        Code, you may install <a href="https://github.com/rust-lang/rls-vscode"
                                            class="bq jp" rel="noopener nofollow"><strong class="iw cw">Rust Language
                                                Server</strong></a>…</p>
                                    <p id="c103"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        1️⃣ In Visual Studio Code, browse to a Rust file like <code
                                            class="gp ky kz la lb b">rust/app/src/lib.rs</code></p>
                                    <figure
                                        class="ld le lf lg lh ge mw mx fc my mz na nb nc bg js nd ne nf ng dy paragraph-image">

            
                                        <p><img src="https://lupyuen.github.io/images/legacy/n10.png" /></p>

                                     
                                    </div>
                                    <p id="20bd"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        2️⃣ When prompted to install RLS, click <code
                                            class="gp ky kz la lb b">Yes</code></p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy2/h0.png" /></p>
                      

                                
                                    </div>
                                    <div class="figure gv ge mw mx fc my mz na nb nc bg js nd ne nf ng dy paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy/n11.png" /></p>

                                
                                    </div>
                                    <p id="1da9"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        3️⃣ Good Luck! Sometimes the RLS installation fails with this message because we
                                        are using the nightly build…</p>
                                    <div class="figure ld le lf lg lh ge fv fw paragraph-image">
                
                                        <p><img src="https://lupyuen.github.io/images/legacy2/h0.png" /></p>
                      

                                    </div>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="5af2"
                                        class="jx jy hb av jz ka kb iy kc kd ke jb kf kg kh ki kj kk kl km kn ko kp kq kr ks el">
                                        Optional: Update The Program Settings</h1>
                                    <p id="e758"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        The program settings may be found in the file <code
                                            class="gp ky kz la lb b"><a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/targets/nrf52_my_sensor/syscfg.yml" class="bq jp" rel="noopener nofollow">targets/nrf52_my_sensor/syscfg.yml</a></code>
                                    </p>
                                    <p id="1c39"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        After updating the program settings, rebuild the application by clicking <code
                                            class="gp ky kz la lb b">Terminal → Run Task → [2] Build Application</code>
                                    </p>
                                    <div class="figure ld le lf lg lh ge">
                                        
                                        <p><script src="https://gist.github.com/lupyuen/0d232faf505ea8987a864b39c1f7517c.js"></script></p>
                      
                                        <figcaption><p><em>Program Settings. From <a
                                                href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/targets/nrf52_my_sensor/syscfg.yml"
                                                class="bq jp"
                                                rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/nrf52/targets/nrf52_my_sensor/syscfg.yml</a>
                                        </em></p></figcaption>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <div class="n p ct jq jr js" role="separator"><span class="jt cf ef ju jv jw"></span><span
                                class="jt cf ef ju jv jw"></span><span class="jt cf ef ju jv"></span></div>
                        <section class="dj gb gc de gd">
                            <div class="ge w">
                                <div class="figure ld le lf lg lh ge w paragraph-image">
                
                                    <p><img src="https://lupyuen.github.io/images/legacy/n12.png" /></p>

                                    <figcaption><p><em>Mynewt Project Structure
                                    </em></p></figcaption>
                                </div>
                            </div>
                            <div class="n p">
                                <div class="aj ak al am an gz ap w">
                                    <h1 id="c1bb"
                                        class="jx jy hb av jz ka nw iy kc kd nx jb kf kg ny ki kj kk nz km kn ko oa kq kr ks el">
                                        References</h1>
                                    <p id="d451"
                                        class="iu iv hb iw b ix kt iy iz ja ku jb jc jd kv je jf jg kw jh ji jj kx jk jl jn dj el">
                                        The Mynewt Project Structure is described in the article <em class="jo">“</em><a
                                            class="bq jp" rel="noopener"
                                            href="https://lupyuen.github.io/articles/coding-nrf52-with-rust-and-apache-mynewt-on-visual-studio-code"><em
                                                class="jo">Coding nRF52 with Rust and Apache Mynewt on Visual Studio
                                                Code</em></a><em class="jo">”</em></p>
                                    <p id="89d1"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        The application is based on the Apache NimBLE sample application <code
                                            class="gp ky kz la lb b"><a href="https://github.com/apache/mynewt-nimble/tree/master/apps/blemesh_models_example_2" class="bq jp" rel="noopener nofollow">blemesh_models_example_2</a></code>
                                        with the following changes…</p>
                                    <ol class="">
                                        <li id="cb4d"
                                            class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn lo lp lq el">
                                            Reduced the number of buttons and LEDs from 4 to 2</li>
                                        <li id="a8f8"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn lo lp lq el">
                                            Removed calls to math function <code class="gp ky kz la lb b">sqrt()</code>
                                        </li>
                                        <li id="96c3"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn lo lp lq el">
                                            Added Rust support</li>
                                    </ol>
                                    <p id="7690"
                                        class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn dj el">
                                        The following files may be useful for reference…</p>
                                    <ul class="">
                                        <li id="8ae1"
                                            class="iu iv hb iw b ix lj iy iz ja lk jb jc jd ll je jf jg lm jh ji jj ln jk jl jn ob lp lq el">
                                            <a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/libapp-demangle.S"
                                                class="bq jp" rel="noopener nofollow">Disassembly of the Rust
                                                Application build</a></li>
                                        <li id="b065"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn ob lp lq el">
                                            <a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/rustlib-demangle.S"
                                                class="bq jp" rel="noopener nofollow">Disassembly of the Rust Crates</a>
                                        </li>
                                        <li id="3008"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn ob lp lq el">
                                            <a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/my_sensor_app.elf.lst"
                                                class="bq jp" rel="noopener nofollow">Disassembly of the firmware</a>
                                        </li>
                                        <li id="d59d"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn ob lp lq el">
                                            <a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/my_sensor_app.elf.map"
                                                class="bq jp" rel="noopener nofollow">Memory map of the firmware</a>
                                        </li>
                                        <li id="ea50"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn ob lp lq el">
                                            <a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/boot_stub.elf.lst"
                                                class="bq jp" rel="noopener nofollow">Disassembly of the bootloader</a>
                                        </li>
                                        <li id="d551"
                                            class="iu iv hb iw b ix lr iy iz ja ls jb jc jd lt je jf jg lu jh ji jj lv jk jl jn ob lp lq el">
                                            <a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/mesh/logs/boot_stub.elf.map"
                                                class="bq jp" rel="noopener nofollow">Memory map of the bootloader</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </section>
                    </div>
                </article>
            </div>
        </div>
    </div>
</body>

</html>