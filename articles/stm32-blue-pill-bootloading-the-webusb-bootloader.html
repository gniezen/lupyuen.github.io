<!doctype html>
<html lang="en">

<head>
  <script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
  <script
    type="text/javascript">window.addEventListener('DOMContentLoaded', function () { var v = archive_analytics.values; v.service = 'wb'; v.server_name = 'wwwb-app202.us.archive.org'; v.server_ms = 370; archive_analytics.send_pageview({}); });</script>
  <script type="text/javascript" src="/_static/js/playback.bundle.js?v=bQvHU8mx" charset="utf-8"></script>
  <script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
  <script type="text/javascript">
    __wm.init("https://web.archive.org/web");
    __wm.wombat("https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&sk=8b43b83310910e64752a61cf630e0b78", "20191204194111", "https://web.archive.org/", "web", "/_static/",
      "1575488471");
  </script>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <!-- End Wayback Rewrite JS Include -->
  <script>!function (c, f) { var t, o, i, e = [], r = { passive: !0, capture: !0 }, n = new Date, a = "pointerup", u = "pointercancel"; function p(n, e) { t || (t = e, o = n, i = new Date, w(f), s()) } function s() { 0 <= o && o < i - n && (e.forEach(function (n) { n(o, t) }), e = []) } function l(n) { if (n.cancelable) { var e = (1e12 < n.timeStamp ? new Date : performance.now()) - n.timeStamp; "pointerdown" == n.type ? function (n, e) { function t() { p(n, e), i() } function o() { i() } function i() { f(a, t, r), f(u, o, r) } c(a, t, r), c(u, o, r) }(e, n) : p(e, n) } } function w(e) { ["click", "mousedown", "keydown", "touchstart", "pointerdown"].forEach(function (n) { e(n, l, r) }) } w(c), self.perfMetrics = self.perfMetrics || {}, self.perfMetrics.onFirstInputDelay = function (n) { e.push(n), s() } }(addEventListener, removeEventListener)</script>
  <title data-rh="true">STM32 Blue Pill — Bootloading the WebUSB Bootloader</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" name="twitter:app:name:iphone" content="Medium" />
  <meta data-rh="true" name="twitter:app:id:iphone" content="828256236" />
  <meta data-rh="true" property="al:ios:app_name" content="Medium" />
  <meta data-rh="true" property="al:ios:app_store_id" content="828256236" />
  <meta data-rh="true" property="al:android:package" content="com.medium.reader" />
  <meta data-rh="true" property="fb:app_id" content="542599432471018" />
  <meta data-rh="true" property="og:site_name" content="Medium" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2019-02-25T08:09:17.176Z" />
  <meta data-rh="true" name="title" content="STM32 Blue Pill — Bootloading the WebUSB Bootloader" />
  <meta data-rh="true" property="og:title" content="STM32 Blue Pill — Bootloading the WebUSB Bootloader" />
  <meta data-rh="true" property="twitter:title" content="STM32 Blue Pill — Bootloading the WebUSB Bootloader" />
  <meta data-rh="true" name="twitter:site" content="@Medium" />
  <meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/63398ef5eb76" />
  <meta data-rh="true" property="al:android:url" content="medium://p/63398ef5eb76" />
  <meta data-rh="true" property="al:ios:url" content="medium://p/63398ef5eb76" />
  <meta data-rh="true" property="al:android:app_name" content="Medium" />
  <meta data-rh="true" name="description"
    content="How does the WebUSB Bootloader upgrade itself? With a special Baseloader" />
  <meta data-rh="true" property="og:description"
    content="How does the WebUSB Bootloader upgrade itself? With a special Baseloader" />
  <meta data-rh="true" property="twitter:description"
    content="How does the WebUSB Bootloader upgrade itself? With a special Baseloader" />
  <meta data-rh="true" property="og:url"
    content="https://web.archive.org/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76" />
  <meta data-rh="true" property="al:web:url"
    content="https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76" />
  <meta data-rh="true" property="og:image"
    content="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/1200/1*0EWymp7F8ROU0pUX-vyC7A.gif" />
  <meta data-rh="true" name="twitter:image:src"
    content="https://miro.medium.com/freeze/max/1200/1*0EWymp7F8ROU0pUX-vyC7A.gif" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" property="article:author" content="https://medium.com/@ly.lee" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="9 min read" />
  <meta data-rh="true" name="parsely-post-id" content="63398ef5eb76" />
  <link data-rh="true" rel="publisher" href="https://plus.google.com/103654360130207659246" />
  <link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium"
    href="/web/20191204194111/https://medium.com/osd.xml" />
  <link data-rh="true" rel="apple-touch-icon" sizes="152x152"
    href="https://web.archive.org/web/20191204194111im_/https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="120x120"
    href="https://web.archive.org/web/20191204194111im_/https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="76x76"
    href="https://web.archive.org/web/20191204194111im_/https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="60x60"
    href="https://web.archive.org/web/20191204194111im_/https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="mask-icon"
    href="https://web.archive.org/web/20191204194111im_/https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg"
    color="#171717" />
  <link data-rh="true" rel="icon"
    href="https://web.archive.org/web/20191204194111im_/https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" />
  <link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css"
    href="https://web.archive.org/web/20191204194111cs_/https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css" />
  <link data-rh="true" rel="author" href="https://medium.com/@ly.lee" />
  <link data-rh="true" rel="canonical"
    href="https://web.archive.org/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76" />
  <link data-rh="true" rel="alternate"
    href="https://web.archive.org/web/20191204194111/android-app://com.medium.reader/https/medium.com/p/63398ef5eb76" />
  <script data-rh="true"
    type="application/ld+json">{"@context":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttp:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Ffreeze\u002Fmax\u002F1200\u002F1*0EWymp7F8ROU0pUX-vyC7A.gif"],"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76","dateCreated":"2019-02-25T08:09:17.176Z","datePublished":"2019-02-25T08:09:17.176Z","dateModified":"2019-02-25T10:21:02.769Z","headline":"STM32 Blue Pill — Bootloading the WebUSB Bootloader","name":"STM32 Blue Pill — Bootloading the WebUSB Bootloader","description":"How does the WebUSB Bootloader upgrade itself? With a special Baseloader","identifier":"63398ef5eb76","keywords":["Lite:true","Tag:Programming","Tag:Gadgets","Tag:Stm32","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:4"],"author":{"@type":"Person","name":"Lup Yuen Lee 李立源","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee"},"creator":["Lup Yuen Lee 李立源"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76"}</script>
  <script data-rh="true">(function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://web.archive.org/web/20191204194111/https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-24232453-2', 'auto');
    ga('send', 'pageview');</script>
  <link rel="preload" href="https://web.archive.org/web/20191204194111/https://cdn.optimizely.com/js/16180790160.js"
    as="script">
  <style type="text/css" data-fela-rehydration="434" data-fela-type="STATIC">
    html {
      box-sizing: border-box
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit
    }

    body {
      margin: 0;
      padding: 0;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      color: rgba(0, 0, 0, 0.8);
      position: relative;
      min-height: 100vh
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    dl,
    dd,
    ol,
    ul,
    menu,
    figure,
    blockquote,
    p,
    pre,
    form {
      margin: 0
    }

    menu,
    ol,
    ul {
      padding: 0;
      list-style: none;
      list-style-image: none
    }

    main {
      display: block
    }

    a {
      color: inherit;
      text-decoration: none
    }

    a,
    button,
    input {
      -webkit-tap-highlight-color: transparent
    }

    img,
    svg {
      vertical-align: middle
    }

    button {
      background: transparent;
      overflow: visible
    }

    button,
    input,
    optgroup,
    select,
    textarea {
      margin: 0
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="KEYFRAME">
    @-webkit-keyframes k1 {
      0% {
        transform: scale(1);
        opacity: 1
      }

      70% {
        transform: scale(1.4);
        opacity: 0
      }

      100% {
        opacity: 0
      }
    }

    @-moz-keyframes k1 {
      0% {
        transform: scale(1);
        opacity: 1
      }

      70% {
        transform: scale(1.4);
        opacity: 0
      }

      100% {
        opacity: 0
      }
    }

    @keyframes k1 {
      0% {
        transform: scale(1);
        opacity: 1
      }

      70% {
        transform: scale(1.4);
        opacity: 0
      }

      100% {
        opacity: 0
      }
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE">
    .a {
      font-family: medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif
    }

    .b {
      font-weight: 400
    }

    .c {
      background-color: rgba(255, 255, 255, 1)
    }

    .l {
      height: 100vh
    }

    .m {
      width: 100vw
    }

    .n {
      display: flex
    }

    .o {
      align-items: center
    }

    .p {
      justify-content: center
    }

    .q {
      fill: rgba(0, 0, 0, 0.84)
    }

    .r {
      display: block
    }

    .s {
      position: fixed
    }

    .t {
      top: 0
    }

    .u {
      left: 0
    }

    .v {
      right: 0
    }

    .w {
      z-index: 500
    }

    .x {
      box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05)
    }

    .ai {
      max-width: 1192px
    }

    .aj {
      min-width: 0
    }

    .ak {
      width: 100%
    }

    .al {
      height: 65px
    }

    .ao {
      flex: 1 0 auto
    }

    .ap {
      display: none
    }

    .ar {
      flex: 0 0 auto
    }

    .as {
      visibility: hidden
    }

    .at {
      color: inherit
    }

    .au {
      fill: inherit
    }

    .av {
      font-size: inherit
    }

    .aw {
      border: inherit
    }

    .ax {
      font-family: inherit
    }

    .ay {
      letter-spacing: inherit
    }

    .az {
      font-weight: inherit
    }

    .ba {
      padding: 0
    }

    .bb {
      margin: 0
    }

    .bc:hover {
      cursor: pointer
    }

    .bd:hover {
      color: rgba(0, 0, 0, 0.9)
    }

    .be:hover {
      fill: rgba(0, 0, 0, 0.9)
    }

    .bf:focus {
      outline: none
    }

    .bg:disabled {
      cursor: default
    }

    .bh:disabled {
      color: rgba(0, 0, 0, 0.54)
    }

    .bi:disabled {
      fill: rgba(0, 0, 0, 0.54)
    }

    .bj {
      font-family: medium-content-sans-serif-font, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif
    }

    .bk {
      font-style: normal
    }

    .bl {
      line-height: 20px
    }

    .bm {
      font-size: 15.8px
    }

    .bn {
      letter-spacing: 0px
    }

    .bo {
      color: rgba(0, 0, 0, 0.54)
    }

    .bp {
      fill: rgba(0, 0, 0, 0.54)
    }

    .bq {
      margin-left: 16px
    }

    .br {
      color: rgba(2, 158, 116, 1)
    }

    .bs {
      fill: rgba(3, 168, 124, 1)
    }

    .bt:hover {
      color: rgba(1, 143, 105, 1)
    }

    .bu:hover {
      fill: rgba(2, 158, 116, 1)
    }

    .bv:disabled {
      color: rgba(3, 168, 124, 0.5)
    }

    .bw:disabled {
      fill: rgba(3, 168, 124, 0.5)
    }

    .bx {
      padding: 8px 16px
    }

    .by {
      background: 0
    }

    .bz {
      border-color: rgba(3, 168, 124, 1)
    }

    .ca:hover {
      border-color: rgba(2, 158, 116, 1)
    }

    .cb {
      border-radius: 4px
    }

    .cc {
      border-width: 1px
    }

    .cd {
      border-style: solid
    }

    .ce {
      box-sizing: border-box
    }

    .cf {
      display: inline-block
    }

    .cg {
      text-decoration: none
    }

    .ch {
      margin-bottom: 0px
    }

    .cj {
      padding-left: 24px
    }

    .ck {
      padding-right: 24px
    }

    .cl {
      margin-left: auto
    }

    .cm {
      margin-right: auto
    }

    .cn {
      max-width: 728px
    }

    .co {
      flex-direction: column
    }

    .cp {
      position: absolute
    }

    .cq {
      top: calc(100vh + 100px)
    }

    .cr {
      bottom: calc(100vh + 100px)
    }

    .cs {
      width: 10px
    }

    .ct {
      pointer-events: none
    }

    .cu {
      word-break: break-word
    }

    .cv {
      word-wrap: break-word
    }

    .cw:after {
      display: block
    }

    .cx:after {
      content: ""
    }

    .cy:after {
      clear: both
    }

    .cz {
      clear: both
    }

    .da {
      margin-top: 0px
    }

    .db {
      opacity: 0
    }

    .dc {
      transition: opacity 100ms 400ms
    }

    .dd {
      height: 100%
    }

    .de {
      overflow: hidden
    }

    .df {
      will-change: transform
    }

    .dg {
      transform: translateZ(0)
    }

    .dh {
      margin: auto
    }

    .di {
      position: relative
    }

    .dj {
      background-color: rgba(0, 0, 0, 0.05)
    }

    .dk {
      padding-bottom: 47.5669099756691%
    }

    .dl {
      filter: blur(20px)
    }

    .dm {
      transform: scale(1.1)
    }

    .dn {
      visibility: visible
    }

    .do {
      background: rgba(255, 255, 255, 1)
    }

    .dp {
      max-width: 680px
    }

    .dq {
      line-height: 1.23
    }

    .dr {
      letter-spacing: 0
    }

    .ds {
      color: rgba(0, 0, 0, 0.84)
    }

    .dt {
      font-family: medium-content-title-font, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .du {
      font-size: 40px
    }

    .ea {
      margin-bottom: -0.27em
    }

    .eb {
      line-height: 48px
    }

    .ec {
      margin-top: 32px
    }

    .ed {
      justify-content: space-between
    }

    .eh {
      width: 48px
    }

    .ei {
      height: 48px
    }

    .ej {
      flex-direction: row
    }

    .ek {
      width: calc(100% + 25px)
    }

    .el {
      height: calc(100% + 25px)
    }

    .em {
      top: 50%
    }

    .en {
      left: 50%
    }

    .eo {
      transform: translateX(-50%) translateY(-50%)
    }

    .ep {
      border-radius: 50%
    }

    .eq {
      margin-left: 12px
    }

    .er {
      margin-bottom: 2px
    }

    .et {
      font-weight: 300
    }

    .eu {
      font-size: 16px
    }

    .ev {
      max-height: 20px
    }

    .ew {
      text-overflow: ellipsis
    }

    .ex {
      display: -webkit-box
    }

    .ey {
      -webkit-line-clamp: 1
    }

    .ez {
      -webkit-box-orient: vertical
    }

    .fa:hover {
      text-decoration: underline
    }

    .fb {
      margin-left: 8px
    }

    .fc {
      padding: 0px 8px
    }

    .fd {
      border-color: rgba(0, 0, 0, 0.54)
    }

    .fe:hover {
      color: rgba(0, 0, 0, 0.97)
    }

    .ff:hover {
      fill: rgba(0, 0, 0, 0.97)
    }

    .fg:hover {
      border-color: rgba(0, 0, 0, 0.84)
    }

    .fh:disabled {
      fill: rgba(0, 0, 0, 0.76)
    }

    .fi:disabled {
      border-color: rgba(0, 0, 0, 0.2)
    }

    .fj:disabled {
      cursor: inherit
    }

    .fk:disabled:hover {
      color: rgba(0, 0, 0, 0.54)
    }

    .fl:disabled:hover {
      fill: rgba(0, 0, 0, 0.76)
    }

    .fm:disabled:hover {
      border-color: rgba(0, 0, 0, 0.2)
    }

    .fn {
      line-height: 18px
    }

    .fo {
      font-size: 15px
    }

    .fp {
      align-items: flex-end
    }

    .fx {
      padding-right: 8px
    }

    .fy {
      margin-right: -6px
    }

    .fz {
      box-shadow: inset 3px 0 0 0 rgba(0, 0, 0, 0.84)
    }

    .ga {
      padding-left: 23px
    }

    .gb {
      margin-left: -20px
    }

    .gc {
      line-height: 1.58
    }

    .gd {
      letter-spacing: -0.004em
    }

    .ge {
      font-style: italic
    }

    .gf {
      font-family: medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .gq {
      margin-bottom: -0.46em
    }

    .gr {
      background-repeat: repeat-x
    }

    .gs {
      background-image: linear-gradient(to right, rgba(0, 0, 0, 0.84) 100%, rgba(0, 0, 0, 0.84) 0);
      background-image: url('data:image/svg+xml;utf8,<svg preserveAspectRatio="none" viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="0" x2="1" y2="1" stroke="rgba(0, 0, 0, 0.84)" /></svg>')
    }

    .gt {
      background-size: 1px 1px
    }

    .gu {
      background-position: 0 1.05em;
      background-position: 0 calc(1em + 1px)
    }

    .gv {
      font-weight: 700
    }

    .gw {
      font-family: medium-content-slab-serif-font, Georgia, Cambria, "Times New Roman", Times, serif
    }

    .gx {
      font-size: 28px
    }

    .gy {
      border: none
    }

    .gz {
      margin-top: 30px
    }

    .ha {
      text-align: center
    }

    .hb:before {
      content: "..."
    }

    .hc:before {
      letter-spacing: 0.6em
    }

    .hd:before {
      text-indent: 0.6em
    }

    .he:before {
      font-style: italic
    }

    .hf:before {
      line-height: 1.4
    }

    .hg {
      list-style-type: decimal
    }

    .hh {
      margin-left: 30px
    }

    .hi {
      padding-left: 0px
    }

    .ho {
      line-height: 1.12
    }

    .hp {
      letter-spacing: -0.022em
    }

    .hq {
      font-weight: 600
    }

    .ib {
      margin-bottom: -0.28em
    }

    .ih {
      max-width: 886px
    }

    .in {
      transition: transform 300ms cubic-bezier(0.2, 0, 0.2, 1)
    }

    .io {
      cursor: zoom-in
    }

    .ip {
      z-index: auto
    }

    .iq {
      padding-bottom: 95.03386004514672%
    }

    .ir {
      line-height: 1.4
    }

    .is {
      margin-top: 10px
    }

    .iv {
      padding: 2px 4px
    }

    .iw {
      font-size: 75%
    }

    .ix>strong {
      font-family: inherit
    }

    .iy {
      font-family: Menlo, Monaco, "Courier New", Courier, monospace
    }

    .iz {
      max-width: 762px
    }

    .ja {
      padding-bottom: 109.71128608923884%
    }

    .jb {
      padding-bottom: 15.770447356529598%
    }

    .jc {
      padding-bottom: 15.951197469498418%
    }

    .jd {
      padding-bottom: 31.902394938996835%
    }

    .je {
      padding-bottom: 20.60551287844555%
    }

    .jf {
      padding-bottom: 13.87257117035698%
    }

    .jg {
      padding-bottom: 32.53502033438771%
    }

    .jp {
      padding-bottom: 56.206088992974244%
    }

    .jq {
      padding: 20px
    }

    .jr {
      background: rgba(0, 0, 0, 0.05)
    }

    .js {
      overflow-x: auto
    }

    .jt {
      line-height: 1.18
    }

    .ju {
      margin-top: -0.09em
    }

    .jv {
      margin-bottom: -0.09em
    }

    .jw {
      white-space: pre-wrap
    }

    .jx {
      padding-bottom: NaN%
    }

    .kd {
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(0, 0, 0, 0.1)
    }

    .ke {
      max-height: 40px
    }

    .kf {
      -webkit-line-clamp: 2
    }

    .kg {
      padding: 0px
    }

    .kw {
      padding: 16px 20px
    }

    .kx {
      flex: 1 1 auto
    }

    .kz {
      font-size: 18px
    }

    .la {
      margin-top: 8px
    }

    .lb {
      margin-top: 12px
    }

    .lc {
      width: 160px
    }

    .ld {
      background-image: url(https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/320/1*fjfoda1Ovwdahy09TwUkqA.png)
    }

    .le {
      background-origin: border-box
    }

    .lf {
      background-size: cover
    }

    .lg {
      height: 167px
    }

    .lh {
      background-position: 50% 50%
    }

    .li {
      max-width: 100%
    }

    .lj {
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1)
    }

    .lk {
      background-image: url(https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/320/1*sqHQVxWsmoA7_PW7j9_GJQ.png)
    }

    .ll {
      background-image: url(https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/320/1*Vxgr9fS45NRgtYPmDzkOgg.png)
    }

    .lm {
      background-image: url(https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/320/1*M3Y_T_EI28gPHHBXGxTmjw.png)
    }

    .ln {
      background-image: url(https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/320/1*0P7BkmUox48Rak_cta48QA.png)
    }

    .lo {
      background-image: url(https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/320/1*nRCSpyqsYtpaJSNGwD13bQ.jpeg)
    }

    .lp {
      will-change: opacity
    }

    .lq {
      top: calc(65px + 54px + 40px)
    }

    .lt {
      width: 131px
    }

    .lu {
      padding-top: 28px
    }

    .lv {
      margin-bottom: 19px
    }

    .lw {
      margin-left: -5px
    }

    .lx {
      margin-right: 5px
    }

    .ly {
      outline: 0
    }

    .lz {
      border: 0
    }

    .ma {
      user-select: none
    }

    .mb {
      cursor: pointer
    }

    .mc>svg {
      pointer-events: none
    }

    .md:active {
      border-style: none
    }

    .me {
      -webkit-user-select: none
    }

    .mf {
      fill: rgba(0, 0, 0, 0.76)
    }

    .mg:focus {
      fill: rgba(0, 0, 0, 0.54)
    }

    .mh:hover {
      fill: rgba(0, 0, 0, 0.54)
    }

    .mi {
      margin-top: 5px
    }

    .mj button {
      text-align: left
    }

    .mk {
      width: 188px
    }

    .ml {
      transform: translateX(406px)
    }

    .mm {
      top: calc(65px + 54px + 14px)
    }

    .mo {
      margin-top: 40px
    }

    .mp {
      flex-wrap: wrap
    }

    .mq {
      margin-top: 25px
    }

    .mr {
      list-style-type: none
    }

    .ms {
      margin-right: 8px
    }

    .mt {
      margin-bottom: 8px
    }

    .mu {
      border-radius: 3px
    }

    .mv {
      padding: 5px 10px
    }

    .mw {
      line-height: 22px
    }

    .mx {
      margin-top: 15px
    }

    .my {
      margin-right: 16px
    }

    .mz {
      border: 1px solid rgba(0, 0, 0, 0.1)
    }

    .na {
      height: 60px
    }

    .nb {
      width: 60px
    }

    .no:hover {
      border-color: rgba(0, 0, 0, 0.54)
    }

    .np:active {
      border-style: solid
    }

    .nq {
      z-index: 2
    }

    .ns {
      padding-top: 32px
    }

    .nt {
      border-top: 1px solid rgba(0, 0, 0, 0.1)
    }

    .nu {
      margin-bottom: 25px
    }

    .nv {
      margin-bottom: 32px
    }

    .nw {
      min-height: 80px
    }

    .ob {
      width: 80px
    }

    .oc {
      height: 80px
    }

    .od {
      padding-left: 102px
    }

    .of {
      text-transform: uppercase
    }

    .og {
      letter-spacing: 0.05em
    }

    .oh {
      margin-bottom: 6px
    }

    .oi {
      line-height: 36px
    }

    .oj {
      padding: 4px 12px
    }

    .ok {
      max-width: 555px
    }

    .ol {
      max-width: 450px
    }

    .om {
      line-height: 24px
    }

    .oo {
      padding-top: 25px
    }

    .op {
      color: rgba(0, 0, 0, 0.76)
    }

    .oq {
      opacity: 1
    }

    .or {
      border: 1px solid rgba(3, 168, 124, 1)
    }

    .os {
      margin-top: 64px
    }

    .ot {
      background-color: rgba(0, 0, 0, 0.02)
    }

    .ou {
      padding: 60px 0
    }

    .ov {
      background-color: rgba(0, 0, 0, 0.9)
    }

    .ox {
      padding-bottom: 48px
    }

    .oy {
      border-bottom: 1px solid rgba(255, 255, 255, 0.54)
    }

    .oz {
      margin: 0 -12px
    }

    .pa {
      margin: 0 12px
    }

    .pb {
      flex: 1 1 0
    }

    .pc {
      padding-bottom: 12px
    }

    .pd:hover {
      color: rgba(255, 255, 255, 0.99)
    }

    .pe:hover {
      fill: rgba(255, 255, 255, 0.99)
    }

    .pf:disabled {
      color: rgba(255, 255, 255, 0.7)
    }

    .pg:disabled {
      fill: rgba(255, 255, 255, 0.7)
    }

    .ph {
      color: rgba(255, 255, 255, 0.98)
    }

    .pi {
      fill: rgba(255, 255, 255, 0.98)
    }

    .pj {
      text-align: inherit
    }

    .pk {
      font-size: 21.6px
    }

    .pl {
      letter-spacing: -0.32px
    }

    .pm {
      color: rgba(255, 255, 255, 0.7)
    }

    .pn {
      fill: rgba(255, 255, 255, 0.7)
    }

    .po {
      text-decoration: underline
    }

    .pp {
      padding-bottom: 8px
    }

    .pq {
      padding-top: 8px
    }

    .pr {
      width: 200px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (min-width: 1080px)">
    .d {
      display: none
    }

    .ah {
      margin: 0 64px
    }

    .dz {
      margin-top: 0.78em
    }

    .fw {
      margin-left: 30px
    }

    .go {
      font-size: 21px
    }

    .gp {
      margin-top: 2em
    }

    .hn {
      margin-top: 1.05em
    }

    .hz {
      font-size: 34px
    }

    .ia {
      margin-top: 1.25em
    }

    .ig {
      margin-top: 0.86em
    }

    .im {
      margin-top: 56px
    }

    .jo {
      max-width: 1192px
    }

    .kc {
      margin-top: 32px
    }

    .kt {
      padding-left: 64px
    }

    .ku {
      padding-right: 64px
    }

    .kv {
      max-width: 1320px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (max-width: 1079.98px)">
    .e {
      display: none
    }

    .fv {
      margin-left: 30px
    }

    .it {
      margin-left: auto
    }

    .iu {
      text-align: center
    }

    .kq {
      padding-left: 64px
    }

    .kr {
      padding-right: 64px
    }

    .ks {
      max-width: 1080px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (max-width: 903.98px)">
    .f {
      display: none
    }

    .fu {
      margin-left: 30px
    }

    .kn {
      padding-left: 48px
    }

    .ko {
      padding-right: 48px
    }

    .kp {
      max-width: 904px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (max-width: 727.98px)">
    .g {
      display: none
    }

    .am {
      height: 56px
    }

    .an {
      display: flex
    }

    .aq {
      display: block
    }

    .ci {
      margin-bottom: 0px
    }

    .ef {
      margin-top: 32px
    }

    .eg {
      flex-direction: column-reverse
    }

    .fs {
      margin-bottom: 30px
    }

    .ft {
      margin-left: 0px
    }

    .kk {
      padding-left: 24px
    }

    .kl {
      padding-right: 24px
    }

    .km {
      max-width: 728px
    }

    .ky {
      padding: 10px 12px 10px
    }

    .nx {
      margin-bottom: 24px
    }

    .ny {
      align-items: center
    }

    .nz {
      width: 102px
    }

    .oa {
      position: relative
    }

    .oe {
      padding-left: 0
    }

    .on {
      margin-top: 24px
    }

    .ow {
      padding: 32px 0
    }

    .ps {
      width: 140px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (max-width: 551.98px)">
    .h {
      display: none
    }

    .ac {
      margin: 0 24px
    }

    .dv {
      margin-top: 0.39em
    }

    .ee {
      margin-top: 32px
    }

    .es {
      margin-bottom: 0px
    }

    .fq {
      margin-bottom: 30px
    }

    .fr {
      margin-left: 0px
    }

    .gg {
      font-size: 18px
    }

    .gh {
      margin-top: 1.56em
    }

    .hj {
      margin-top: 1.34em
    }

    .hr {
      font-size: 30px
    }

    .hs {
      margin-top: 0.93em
    }

    .ic {
      margin-top: 0.67em
    }

    .ii {
      margin-top: 40px
    }

    .jh {
      margin: 0
    }

    .ji {
      max-width: 100%
    }

    .jy {
      margin-top: 24px
    }

    .kh {
      padding-left: 24px
    }

    .ki {
      padding-right: 24px
    }

    .kj {
      max-width: 552px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE"
    media="all and (min-width: 904px) and (max-width: 1079.98px)">
    .i {
      display: none
    }

    .ag {
      margin: 0 64px
    }

    .dy {
      margin-top: 0.78em
    }

    .gm {
      font-size: 21px
    }

    .gn {
      margin-top: 2em
    }

    .hm {
      margin-top: 1.05em
    }

    .hx {
      font-size: 34px
    }

    .hy {
      margin-top: 1.25em
    }

    .if {
      margin-top: 0.86em
    }

    .il {
      margin-top: 56px
    }

    .jn {
      max-width: 1192px
    }

    .kb {
      margin-top: 32px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE"
    media="all and (min-width: 728px) and (max-width: 903.98px)">
    .j {
      display: none
    }

    .af {
      margin: 0 48px
    }

    .dx {
      margin-top: 0.78em
    }

    .gk {
      font-size: 21px
    }

    .gl {
      margin-top: 2em
    }

    .hl {
      margin-top: 1.05em
    }

    .hv {
      font-size: 34px
    }

    .hw {
      margin-top: 1.25em
    }

    .ie {
      margin-top: 0.86em
    }

    .ik {
      margin-top: 56px
    }

    .jl {
      margin: 0
    }

    .jm {
      max-width: 100%
    }

    .ka {
      margin-top: 32px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE"
    media="all and (min-width: 552px) and (max-width: 727.98px)">
    .k {
      display: none
    }

    .ae {
      margin: 0 24px
    }

    .dw {
      margin-top: 0.39em
    }

    .gi {
      font-size: 18px
    }

    .gj {
      margin-top: 1.56em
    }

    .hk {
      margin-top: 1.34em
    }

    .ht {
      font-size: 30px
    }

    .hu {
      margin-top: 0.93em
    }

    .id {
      margin-top: 0.67em
    }

    .ij {
      margin-top: 40px
    }

    .jj {
      margin: 0
    }

    .jk {
      max-width: 100%
    }

    .jz {
      margin-top: 24px
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="print">
    .ab {
      display: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE"
    media="(prefers-reduced-motion: no-preference)">
    .y {
      transition: transform 300ms ease
    }

    .z {
      will-change: transform
    }

    .lr {
      transition: opacity 200ms
    }

    .nc {
      transition: border-color 150ms ease
    }

    .nd::before {
      background:
        radial-gradient(circle, rgba(0, 0, 0, 0.84) 60%, transparent 70%)
    }

    .ne::before {
      border-radius: 50%
    }

    .nf::before {
      content: ""
    }

    .ng::before {
      display: block
    }

    .nh::before {
      z-index: 0
    }

    .ni::before {
      left: 0
    }

    .nj::before {
      height: 100%
    }

    .nk::before {
      position: absolute
    }

    .nl::before {
      top: 0
    }

    .nm::before {
      width: 100%
    }

    .nn:hover::before {
      animation: k1 2000ms infinite cubic-bezier(.1, .12, .25, 1)
    }

    .nr {
      transition: fill 200ms ease
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (max-width: 1198px)">
    .ls {
      display: none
    }
  </style>
  <style type="text/css" data-fela-rehydration="434" data-fela-type="RULE" media="all and (max-width: 1230px)">
    .mn {
      display: none
    }
  </style>
</head>

<body>
  <!-- BEGIN WAYBACK TOOLBAR INSERT -->
  <style type="text/css">
    body {
      margin-top: 0 !important;
      padding-top: 0 !important;
      /*min-width:800px !important;*/
    }
  </style>
  <script>__wm.rw(0);</script>
  <div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
    <div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
      <div id="wm-ipp-inside">
        <div style="position:relative;">
          <div id="wm-logo" style="float:left;width:110px;padding-top:12px;">
            <a href="/web/" title="Wayback Machine home page"><img
                src="/_static/images/toolbar/wayback-toolbar-logo-200.png"
                srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x"
                alt="Wayback Machine" style="width:100px" border="0" /></a>
          </div>
          <div class="r" style="float:right;">
            <div id="wm-btns" style="text-align:right;height:25px;">
              <div id="wm-save-snapshot-success">success</div>
              <div id="wm-save-snapshot-fail">fail</div>
              <a id="wm-save-snapshot-open" href="#" title="Share via My Web Archive">
                <span class="iconochive-web"></span>
              </a>
              <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in">
                <span class="iconochive-person"></span>
              </a>
              <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
              <a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine"
                style="top:-6px;"><span class="iconochive-question"
                  style="color:rgb(87,186,244);font-size:160%;"></span></a>
              <a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;"
                title="Close the toolbar"><span class="iconochive-remove-circle"
                  style="color:#888888;font-size:240%;"></span></a>
            </div>
            <div id="wm-share">
              <a href="/web/20191204194111/http://web.archive.org/screenshot/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&sk=8b43b83310910e64752a61cf630e0b78"
                id="wm-screenshot" title="screenshot">
                <span class="wm-icon-screen-shot"></span>
              </a>
              <a id="wm-share-facebook" href="#"
                data-url="https://web.archive.org/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&amp;sk=8b43b83310910e64752a61cf630e0b78"
                title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook"
                  style="color:#3b5998;font-size:160%;"></span></a>
              <a id="wm-share-twitter" href="#"
                data-url="https://web.archive.org/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&amp;sk=8b43b83310910e64752a61cf630e0b78"
                title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter"
                  style="color:#1dcaff;font-size:160%;"></span></a>
            </div>
          </div>
          <table class="c" style="">
            <tbody>
              <tr>
                <td class="u" colspan="2">
                  <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text"
                      name="url" id="wmtbURL"
                      value="https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&sk=8b43b83310910e64752a61cf630e0b78"
                      onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input
                      type="hidden" name="date" value="20191204194111" /><input type="submit" value="Go" /></form>
                </td>
                <td class="n" rowspan="2" style="width:110px;">
                  <table>
                    <tbody>
                      <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
                      <tr class="m">
                        <td class="b" nowrap="nowrap">Nov</td>
                        <td class="c" id="displayMonthEl" title="You are here: 19:41:11 Dec 04, 2019">DEC</td>
                        <td class="f" nowrap="nowrap">Jan</td>
                      </tr>
                      <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
                      <tr class="d">
                        <td class="b" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_prv_off.png"
                            alt="Previous capture" width="14" height="16" border="0" /></td>
                        <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;"
                          title="You are here: 19:41:11 Dec 04, 2019">04</td>
                        <td class="f" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_nxt_off.png"
                            alt="Next capture" width="14" height="16" border="0" /></td>
                      </tr>
                      <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
                      <tr class="y">
                        <td class="b" nowrap="nowrap">2018</td>
                        <td class="c" id="displayYearEl" title="You are here: 19:41:11 Dec 04, 2019">2019</td>
                        <td class="f" nowrap="nowrap">2020</td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td class="s">
                  <div id="wm-nav-captures">
                    <a class="t"
                      href="/web/20191204194111*/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&sk=8b43b83310910e64752a61cf630e0b78"
                      title="See a list of every capture for this URL">1 capture</a>
                    <div class="r" title="Timespan for captures of this URL">04 Dec 2019</div>
                  </div>
                </td>
                <td class="k">
                  <a href="" id="wm-graph-anchor">
                    <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
                      <canvas id="wm-sparkline-canvas" width="650" height="27" border="0"></canvas>
                    </div>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
          <div style="position:absolute;bottom:0;right:2px;text-align:right;">
            <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span
                id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this
                capture</span></a>
          </div>
        </div>
        <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
          <div id="wm-capinfo-collected-by">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
            <div style="padding:3px;position:relative" id="wm-collected-by-content">
              <div style="display:inline-block;vertical-align:top;width:50%;">
                <span class="c-logo"
                  style="background-image:url(https://archive.org/services/img/ArchiveIt-Partner-1028);"></span>
                Organization: <a style="color:#33f;" href="https://archive.org/details/ArchiveIt-Partner-1028"
                  target="_new"><span class="wm-title">Mark Graham&#39;s Archive-IT Collections</span></a>
                <div style="max-height:75px;overflow:hidden;position:relative;">
                  <div
                    style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);">
                  </div>
                  This is a set of web collections curated by Mark Graham using the <a
                    href="http://archive-it.org">Archive-IT</a> service of the <a href="http//archive.org">Internet
                    Archive.</a>
                  <br>
                  <br>
                  They include web captures of the ISKME.org website as well as captures from sites hosted by IGC.org.
                  <br>
                  <br>
                  <br><br>
                  These web captures are available to the general public.
                  <br>
                  <br>
                  For more information about this collection please feel free to contact Mark via <a
                    href="mailto:mark@archive.org?Subject=Question%20about%20you%20Archive-IT%20Collection"
                    target="_top">Send Mail</a>
                </div>
              </div>
              <div style="display:inline-block;vertical-align:top;width:49%;">
                <span class="c-logo"
                  style="background-image:url(https://archive.org/services/img/ArchiveIt-Collection-8332)"></span>
                <div>Collection: <a style="color:#33f;" href="https://archive.org/details/ArchiveIt-Collection-8332"
                    target="_new"><span class="wm-title">General Crawls</span></a></div>
                <div style="max-height:75px;overflow:hidden;position:relative;">
                  <div
                    style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);">
                  </div>
                  Archive-It Partner 1028: Mark Graham - Collection 8332: General Crawls
                </div>
              </div>
            </div>
          </div>
          <div id="wm-capinfo-timestamps">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center"
              title="Timestamps for the elements of this page">TIMESTAMPS</div>
            <div>
              <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important">
              </div>
              <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img
                  src="/_static/images/loading.gif" alt="loading" /></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="donato" style="position:relative;width:100%;">
    <div id="donato-base">
      <iframe id="donato-if"
        src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20191204194111/https%3A//medium.com/%2540ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76%3Fsource%3Dfriends_link%26sk%3D8b43b83310910e64752a61cf630e0b78"
        scrolling="no" frameborder="0" style="width:100%; height:100%">
      </iframe>
    </div>
  </div>
  <script type="text/javascript">
    __wm.bt(650, 27, 25, 2, "web", "https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=friends_link&sk=8b43b83310910e64752a61cf630e0b78", "20191204194111", 1996, "/_static/", ["/_static/css/banner-styles.css?v=bsmaklHF", "/_static/css/iconochive.css?v=qtvMKcIJ"]);
    __wm.rw(1);
  </script>
  <!-- END WAYBACK TOOLBAR INSERT -->
  <div id="root">
    <div class="a b c">
      <div class="d e f g h i j k"></div>
      <script>document.domain = document.domain;</script>
      <script>window.PARSELY = window.PARSELY || { autotrack: false }</script>
      <nav class="r s t u v c w x y z ab">
        <div class="branch-journeys-top">
          <div class="n p">
            <div class="ac ae af ag ah ai aj ak">
              <div class="al n o am an">
                <div class="r ao w">
                  <div class="n o"><a aria-label="Homepage" rel="noopener"
                      href="/web/20191204194111/https://medium.com/?source=post_page-----63398ef5eb76----------------------">
                      <div class="ap g"><svg height="22" width="112" viewbox="0 0 111.5 22" class="q">
                          <path
                            d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z">
                          </path>
                        </svg></div>
                      <div class="r aq"><svg width="35" height="35" viewbox="5 5 35 35" class="q">
                          <path
                            d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z">
                          </path>
                        </svg></div>
                    </a></div>
                </div>
                <div class="r ar w">
                  <div class="n o">
                    <div class="n g">
                      <div class="as" id="lo-post-page-navbar-upsell-button">
                        <div><a
                            href="https://web.archive.org/web/20191204194111/https://medium.com/membership?source=upgrade_membership---nav_full------------------------"
                            class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><span
                              class="bj b bk bl bm bn r bo bp">Become a member</span></a></div>
                      </div>
                      <div class="as" id="lo-post-page-navbar-sign-in-link">
                        <div class="bq r"><span class="bj b bk bl bm bn r bo bp"><a
                              href="https://web.archive.org/web/20191204194111/https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76&amp;source=post_page-----63398ef5eb76---------------------nav_reg-"
                              class="br bs av aw ax ay az ba bb bc bt bu bf bg bv bw" rel="noopener">Sign in</a></span>
                        </div>
                      </div>
                    </div>
                    <div class="as" id="lo-post-page-navbar-get-started-button">
                      <div class="bq r"><button
                          class="bx by br bs bz bt bu ca bc cb bj b bk bl bm bn cc cd ce cf cg bf">Get started</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div class="ch al r ci am"></div>
      <article>
        <section class="cj ck cl cm ak cn ce n co"></section><span class="r"></span>
        <div>
          <div class="cp u cq cr cs ct"></div>
          <section class="cu cv cw cx cy">
            <div class="cz ak">
              <figure class="da cz ak paragraph-image">
                <div class="dh r di dj">
                  <div class="dk r">
                    <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*0EWymp7F8ROU0pUX-vyC7A.gif?q=20"
                        width="1644" height="782" role="presentation" /></div><img class="db dc cp t u dd ak do"
                      width="1644" height="782" role="presentation" /><noscript><img class="cp t u dd ak"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/3288/1*0EWymp7F8ROU0pUX-vyC7A.gif"
                        width="1644" height="782" role="presentation" /></noscript>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <div>
                  <div id="a008" class="dq dr ds bk dt b du dv dw dx dy dz ea">
                    <h1 class="dt b du eb ds">STM32 Blue Pill — Bootloading the WebUSB Bootloader</h1>
                  </div>
                  <div class="ec">
                    <div class="n ed ee ef eg">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="/web/20191204194111/https://medium.com/@ly.lee?source=post_page-----63398ef5eb76----------------------">
                            <div class="di eh ei">
                              <div class="bs n ej o p cp ek el em en eo ct"><svg width="57" height="57"
                                  viewbox="0 0 57 57">
                                  <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M28.5 1.2A27.45 27.45 0 0 0 4.06 15.82L3 15.27A28.65 28.65 0 0 1 28.5 0C39.64 0 49.29 6.2 54 15.27l-1.06.55A27.45 27.45 0 0 0 28.5 1.2zM4.06 41.18A27.45 27.45 0 0 0 28.5 55.8a27.45 27.45 0 0 0 24.44-14.62l1.06.55A28.65 28.65 0 0 1 28.5 57 28.65 28.65 0 0 1 3 41.73l1.06-.55z">
                                  </path>
                                </svg></div><img alt="Lup Yuen Lee 李立源" class="r ep ei eh"
                                src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/fit/c/96/96/1*KGohS3sQaUnr58gc0BIfoQ.jpeg"
                                width="48" height="48" />
                            </div>
                          </a></div>
                        <div class="eq ak r">
                          <div class="n">
                            <div style="flex:1"><span class="bj b bk bl bm bn r ds q">
                                <div class="er n o es"><span class="bj et eu bl de ev ew ex ey ez ds"><a
                                      class="at au av aw ax ay az ba bb bc fa bf bg bh bi" rel="noopener"
                                      href="/web/20191204194111/https://medium.com/@ly.lee?source=post_page-----63398ef5eb76----------------------">Lup
                                      Yuen Lee 李立源</a></span>
                                  <div class="fb r ar h"><button
                                      class="fc ds q by fd fe ff fg bc bh fh fi fj fk fl fm cb bj b bk fn fo bn cc cd ce cf cg bf">Follow</button>
                                  </div>
                                </div>
                              </span></div>
                          </div><span class="bj b bk bl bm bn r bo bp"><span class="bj et eu bl de ev ew ex ey ez bo">
                              <div><a class="at au av aw ax ay az ba bb bc fa bf bg bh bi" rel="noopener"
                                  href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76?source=post_page-----63398ef5eb76----------------------">Feb
                                  25</a> <!-- -->·
                                <!-- -->
                                <!-- -->9
                                <!-- --> min read
                              </div>
                            </span></span>
                        </div>
                      </div>
                      <div class="n fp fq fr fs ft fu fv fw ab">
                        <div class="n o">
                          <div class="fx r ar"><a
                              href="//web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/share/twitter?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener"><svg width="29" height="29" class="q">
                                <path
                                  d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                                </path>
                              </svg></a></div>
                          <div class="fx r ar"><a
                              href="//web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/share/linkedIn?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener"><svg width="29" height="29" viewbox="0 0 29 29" fill="none" class="q">
                                <path
                                  d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z"
                                  fill="#fff"></path>
                              </svg></a></div>
                          <div class="fx r ar"><a
                              href="//web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/share/facebook?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener"><svg width="29" height="29" class="q">
                                <path
                                  d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                                </path>
                              </svg></a></div>
                          <div class="fy r ao">
                            <div>
                              <div class="cf"><a
                                  href="https://web.archive.org/web/20191204194111/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76&amp;source=post_actions_header--------------------------bookmark_sidebar-"
                                  class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25"
                                    height="25" viewbox="0 0 25 25">
                                    <path
                                      d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                      fill-rule="evenodd"></path>
                                  </svg></a></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <blockquote class="fz ga gb">
                  <p id="a396" class="gc gd ds ge gf b gg gh gi gj gk gl gm gn go gp gq">The year is 2029. At <a
                      class="at cg gr gs gt gu" target="_blank" rel="noopener"
                      href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2?source=friends_link&amp;sk=9a9389cdea5828cb48713f963c8f7615">Moon
                      Base One</a>, two Moon Base Operators nearly wiped out their entire crop of beautiful red
                    tomatoes… All because of a firmware bug in their IoT monitoring device that slipped past <a
                      class="at cg gr gs gt gu" target="_blank" rel="noopener"
                      href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2?source=friends_link&amp;sk=9a9389cdea5828cb48713f963c8f7615">Embedded
                      Unit Testing</a>.</p>
                  <p id="cbc9" class="gc gd ds ge gf b gg gh gi gj gk gl gm gn go gp gq">Operator 1: Are we all set to
                    flash our STM32-BLUEST-PILL monitoring devices with the new firmware? The one that passed Embedded
                    Unit Testing?</p>
                  <p id="bf3c" class="gc gd ds ge gf b gg gh gi gj gk gl gm gn go gp gq">Operator 2: Yes! Lemme launch
                    <a class="at cg gr gs gt gu" target="_blank" rel="noopener"
                      href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&amp;sk=661984e9775f991a97e5747a67214b60"><strong
                        class="gf gv">MakeCode</strong></a><strong class="gf gv"> version 2029</strong>… Hitting the
                    DOWNLOAD button… Now regenerating the new <a
                      href="https://web.archive.org/web/20191204194111/https://github.com/Microsoft/uf2"
                      class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">UF2 firmware image</a>…
                    Transmitting firmware image to all <a class="at cg gr gs gt gu" target="_blank" rel="noopener"
                      href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&amp;sk=661984e9775f991a97e5747a67214b60">STM32-BLUEST-PILL
                      Bootloaders</a>… And <strong class="gf gv">Firmware version 2029</strong> has been flashed to all
                    1,000 devices! Wait we got 1,000 errors… “<strong class="gf gv">Critical system library </strong><a
                      href="https://web.archive.org/web/20191204194111/https://github.com/libopencm3/libopencm3/wiki"
                      class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong
                        class="gf gv">libopencm3</strong></a><strong class="gf gv"> version 2029 not found</strong>”…
                  </p>
                  <p id="9d62" class="gc gd ds ge gf b gg gh gi gj gk gl gm gn go gp gq">Operator 1: WHAT’S HAPPENING TO
                    OUR SENSORS ??? OUR IOT DASHBOARDS ALL TURNED BLANK !!! We’re running <strong
                      class="gf gv">Bootloader version 2028</strong>, which contains <strong class="gf gv">libopencm3
                      version 2028! </strong>We don’t use version 2029 here!</p>
                  <p id="bded" class="gc gd ds ge gf b gg gh gi gj gk gl gm gn go gp gq">Operator 2: So we just upgrade
                    the Bootloader to version 2029. Piece of cake right? Oh wait… There’s no button for MakeCode
                    Bootloader Upgrade. <strong class="gf gv">We haven’t implemented the Bootloader Upgrade
                      yet.</strong> How often do we upgrade the Bootloader right? Heh heh…</p>
                  <p id="0451" class="gc gd ds ge gf b gg gh gi gj gk gl gm gn go gp gq">Operator 1: The sprinklers have
                    stopped !!! Our juicy tomatoes are drying up and turning into… SUN-DRIED TOMATOES !!! NOOOOOOO…</p>
                </blockquote>
              </div>
            </div>
          </section>
          <hr class="gw et gx gy gz ha hb hc hd he hf" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="943f" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">With a Bootloader installed,
                  programming the <a
                    href="https://web.archive.org/web/20191204194111/http://wiki.stm32duino.com/index.php?title=Blue_Pill"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">STM32 Blue Pill</a> via USB gets a
                  lot simpler and faster… <a
                    href="https://web.archive.org/web/20191204194111/https://youtu.be/DSNDvrVOJns"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">A single click</a> is all it takes
                  to flash the Blue Pill!</p>
                <p id="1352" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq"><a class="at cg gr gs gt gu"
                    target="_blank" rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&amp;sk=661984e9775f991a97e5747a67214b60">In
                    the previous article</a> we learned how our <a
                    href="https://web.archive.org/web/20191204194111/https://makecode.com/about"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">MakeCode</a> Bootloader flashed
                  Applications to Blue Pill via <a
                    href="https://web.archive.org/web/20191204194111/https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">WebUSB</a>. The chronicles of <em
                    class="ge">Moon Base One</em> have taught us that we need a way to upgrade the Bootloader as well.
                </p>
                <p id="632b" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">But how do we upgrade the
                  Bootloader when it’s <em class="ge">always running in the background, waiting for flashing
                    requests</em>? This article explains a special technique I used to upgrade the MakeCode Bootloader
                  over WebUSB… I call it “<strong class="gf gv">Baseloading</strong>”. We’ll learn…</p>
                <ol class="">
                  <li id="06d7" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq hg hh hi">How to <strong
                      class="gf gv">write to Blue Pill’s flash memory</strong> without calling any libraries</li>
                  <li id="c7eb" class="gc gd ds bk gf b gg hj gi hk gk hl gm hm go hn gq hg hh hi">How we used this
                    method of flashing to <strong class="gf gv">update the Bootloader</strong> code</li>
                  <li id="2ef3" class="gc gd ds bk gf b gg hj gi hk gk hl gm hm go hn gq hg hh hi">How to use <strong
                      class="gf gv">Backup Registers</strong> to remember the state of the Blue Pill after restarting
                  </li>
                </ol>
              </div>
            </div>
          </section>
          <hr class="gw et gx gy gz ha hb hc hd he hf" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <h1 id="d5da" class="ho hp ds bk bj hq hr hs ht hu hv hw hx hy hz ia ib">Flashing with Zero Dependencies
                </h1>
                <p id="f42e" class="gc gd ds bk gf b gg ic gi id gk ie gm if go ig gq">Take a look at <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c#L256-L362"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">this code that we use for flashing
                    the Blue Pill WebUSB Bootloader</a>…</p>
                <figure class="ii ij ik il im cz cl cm paragraph-image">
                  <div class="in io di ip ak">
                    <div class="cl cm ih">
                      <div class="dh r di dj">
                        <div class="iq r">
                          <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                              src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/60/1*7SG_RJfjtCcnOUeusbwoow.png?q=20"
                              width="886" height="842" role="presentation" /></div><img class="db dc cp t u dd ak do"
                            width="886" height="842" role="presentation" /><noscript><img class="cp t u dd ak"
                              src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/1772/1*7SG_RJfjtCcnOUeusbwoow.png"
                              width="886" height="842" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo eu ir is ha cn cl cm it iu bj et">Baseloader code for flashing the Bootloader.
                    From <a
                      href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c#L256-L362"
                      class="at cg gr gs gt gu" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c#L256-L362</a>
                  </figcaption>
                </figure>
                <p id="48f9" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Looks like typical Blue Pill
                  code… <code class="dj iv iw ix iy b">baseloader_start()</code> calls some functions to <strong
                    class="gf gv">lock, unlock, erase and update</strong> Blue Pill’s flash memory. Now look at the <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/logs/firmware.dump#L875-L1650"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">Arm Cortex-M3 assembly code</a>
                  that the C compiler generated for <code class="dj iv iw ix iy b">baseloader_start()</code>…</p>
                <figure class="ii ij ik il im cz cl cm paragraph-image">
                  <div class="in io di ip ak">
                    <div class="cl cm iz">
                      <div class="dh r di dj">
                        <div class="ja r">
                          <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                              src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/54/1*xEAfpV6RyM4XImfuUdOouw.png?q=20"
                              width="762" height="836" role="presentation" /></div><img class="db dc cp t u dd ak do"
                            width="762" height="836" role="presentation" /><noscript><img class="cp t u dd ak"
                              src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/1524/1*xEAfpV6RyM4XImfuUdOouw.png"
                              width="762" height="836" role="presentation" /></noscript>
                        </div>
                      </div>
                    </div>
                  </div>
                  <figcaption class="bo eu ir is ha cn cl cm it iu bj et">Compiled Baseloader code. From <a
                      href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/logs/firmware.dump#L875-L1650"
                      class="at cg gr gs gt gu" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/codal-libopencm3/blob/master/logs/firmware.dump#L875-L1650</a>
                  </figcaption>
                </figure>
                <p id="b3d7" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Do you see the magic here?
                  <strong class="gf gv">There are no calls to other functions!</strong> It’s as though all the <strong
                    class="gf gv">lock / unlock / erase / update</strong> functions are done within this <code
                    class="dj iv iw ix iy b">baseloader_start()</code> function… <code
                    class="dj iv iw ix iy b">baseloader_start()</code> has <strong class="gf gv">Zero
                    Dependencies</strong>!</p>
                <p id="76bb" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">How is that possible? That’s
                  because Blue Pill uses <a
                    href="https://web.archive.org/web/20191204194111/https://en.wikipedia.org/wiki/Memory-mapped_I/O"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong
                      class="gf gv">Memory-Mapped I/O</strong></a>. By reading/writing some special memory location, we
                  can control the Blue Pill peripherals, including the flash memory. The <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c#L67-L212"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">lock / unlock / erase / update
                    functions above are actually C macros</a> that read/write the special memory addresses that control
                  the Blue Pill flash memory.</p>
                <p id="5f8e" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Also note that <code
                    class="dj iv iw ix iy b">baseloader_start()</code> uses <a
                    href="https://web.archive.org/web/20191204194111/https://en.wikipedia.org/wiki/Addressing_mode#PC-relative_2"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong class="gf gv">Relative
                      Addresses</strong></a> (instead of Absolute Addresses) when branching conditionally to other parts
                  of the function. Just look at the above <a
                    href="https://web.archive.org/web/20191204194111/https://www.st.com/content/ccc/resource/technical/document/programming_manual/5b/ca/8d/83/56/7f/40/08/CD00228163.pdf/files/CD00228163.pdf/jcr:content/translations/en.CD00228163.pdf"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">branch instructions</a> like <code
                    class="dj iv iw ix iy b">bls.n, b.n, bcs.n</code>.</p>
                <p id="afed" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Zero Dependencies + Relative
                  Addressing… That means the code is perfect for <strong class="gf gv">Relocation</strong> anywhere in
                  Blue Pill memory! <em class="ge">We can copy the </em><code
                    class="dj iv iw ix iy b"><em class="ge">baseloader_start()</em></code><em class="ge"> function into
                    any chunk of Blue Pill memory and it will still work!</em> Assuming of course we don’t mess around
                  with the global variables accessed by <code class="dj iv iw ix iy b">baseloader_start()</code>.</p>
                <p id="ef7d" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">That’s the key reason why our
                  Bootloader code is able to update itself… It’s able to <em class="ge">clone itself into a new chunk of
                    ROM memory AND execute the cloned copy of Bootloader to update the old ROM copy of Bootloader</em>!
                </p>
                <p id="6b1f" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">From now on we’ll call this “<em
                    class="ge">code that updates the Bootloader</em>” as the <strong class="gf gv">Baseloader</strong>.
                </p>
                <p id="f437" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Now if the Baseloader can’t fetch
                  the new Bootloader code from the USB port (remember that the Baseloader only uses flash memory),<em
                    class="ge"> how can the Baseloader update the Bootloader?</em></p>
                <p id="59c0" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">By carefully juggling flash
                  memory, as we shall soon see…</p>
              </div>
            </div>
          </section>
          <hr class="gw et gx gy gz ha hb hc hd he hf" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <h1 id="d708" class="ho hp ds bk bj hq hr hs ht hu hv hw hx hy hz ia ib">Upgrading the Bootloader, step
                  by step</h1>
                <p id="d352" class="gc gd ds bk gf b gg ic gi id gk ie gm if go ig gq">How does our Blue Pill WebUSB
                  Bootloader upgrade its own code? Let’s watch how it’s done with the <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">Baseloader</a>…</p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="ii ij ik il im cz ak paragraph-image">
                <div class="dh r di dj">
                  <div class="jb r">
                    <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*rGjBafDApcRteWb4xmQFJg.gif?q=20"
                        width="2213" height="349" role="presentation" /></div><img class="db dc cp t u dd ak do"
                      width="2213" height="349" role="presentation" /><noscript><img class="cp t u dd ak"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/4426/1*rGjBafDApcRteWb4xmQFJg.gif"
                        width="2213" height="349" role="presentation" /></noscript>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="8bc4" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">1️⃣ We have partitioned Blue
                  Pill’s ROM with this layout: <a class="at cg gr gs gt gu" target="_blank" rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&amp;sk=661984e9775f991a97e5747a67214b60"><strong
                      class="gf gv">Bootloader in the lower ROM region, Application in the upper ROM region</strong></a>
                </p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="ii ij ik il im cz ak paragraph-image">
                <div class="dh r di dj">
                  <div class="jc r">
                    <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*HapHNlS6goDV4SH2tAnUHw.gif?q=20"
                        width="2213" height="353" role="presentation" /></div><img class="db dc cp t u dd ak do"
                      width="2213" height="353" role="presentation" /><noscript><img class="cp t u dd ak"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/4426/1*HapHNlS6goDV4SH2tAnUHw.gif"
                        width="2213" height="353" role="presentation" /></noscript>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="6931" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">2️⃣ When we click <code
                    class="dj iv iw ix iy b">Download</code> to update the Blue Pill, the MakeCode Website <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/pxt/tree/master/pxtcompiler/emitter"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">generates a Blue Pill firmware
                    image</a> with the <strong class="gf gv">same ROM layout</strong></p>
                <p id="e30f" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">3️⃣ MakeCode Website <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/pxt/blob/master/pxtlib/hf2.ts#L454-L495"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">transfers the firmware image in
                    chunks</a> to Blue Pill via the <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/pxt/blob/master/pxtlib/hf2.ts#L57-L123"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">USB HF2 protocol</a>, from low to
                  high address (<strong class="gf gv">Bootloader followed by Application</strong>)</p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="ii ij ik il im cz ak paragraph-image">
                <div class="dh r di dj">
                  <div class="jd r">
                    <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*-4DKlyS_PbcHV1U8kzmVFA.gif?q=20"
                        width="2213" height="706" role="presentation" /></div><img class="db dc cp t u dd ak do"
                      width="2213" height="706" role="presentation" /><noscript><img class="cp t u dd ak"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/4426/1*-4DKlyS_PbcHV1U8kzmVFA.gif"
                        width="2213" height="706" role="presentation" /></noscript>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="ed3b" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">4️⃣ Blue Pill Bootloader receives
                  <strong class="gf gv">the new Bootloader code</strong> and <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/hf2.c#L267-L294"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">writes temporarily into the
                    <strong class="gf gv">old Application region</strong></a></p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="ii ij ik il im cz ak paragraph-image">
                <div class="in io di ip ak">
                  <div class="dh r di dj">
                    <div class="je r">
                      <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                          src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*pCO50XtJ92ZXPmg1LkKUdQ.gif?q=20"
                          width="2213" height="456" role="presentation" /></div><img class="db dc cp t u dd ak do"
                        width="2213" height="456" role="presentation" /><noscript><img class="cp t u dd ak"
                          src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/4426/1*pCO50XtJ92ZXPmg1LkKUdQ.gif"
                          width="2213" height="456" role="presentation" /></noscript>
                    </div>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="8de9" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">5️⃣ Bootloader <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/hf2.c#L304-L314"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">compares the old and new
                    Bootloader code</a>. Assuming that the code has changed, the Bootloader <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/hf2.c#L316-L332"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong class="gf gv">clones the
                      Baseloader code</strong></a> (inside the Bootloader) into the next available ROM space. Bootloader
                  reboots the Blue Pill and <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/bootloader.c#L72-L155"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong class="gf gv">starts the
                      Baseloader</strong></a>.</p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="ii ij ik il im cz ak paragraph-image">
                <div class="dh r di dj">
                  <div class="jf r">
                    <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*FKhd4zTftEid0fdGOEnARw.gif?q=20"
                        width="2213" height="307" role="presentation" /></div><img class="db dc cp t u dd ak do"
                      width="2213" height="307" role="presentation" /><noscript><img class="cp t u dd ak"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/4426/1*FKhd4zTftEid0fdGOEnARw.gif"
                        width="2213" height="307" role="presentation" /></noscript>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="ac78" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">6️⃣ Baseloader <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c#L314-L345"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong class="gf gv">moves the
                      new Bootloader code into the Bootloader ROM region</strong></a>, overwriting the old Bootloader.
                  The Bootloader is not running now, so it’s safe to overwrite.</p>
                <p id="1a4e" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">7️⃣ The Baseloader code is
                  <strong class="gf gv">Relocatable</strong>, so it may be <strong class="gf gv">executed anywhere in
                    ROM</strong>. That’s why the Baseloader can run outside the Bootloader ROM region. Unlike the
                  Bootloader, which may only be executed at a fixed address in the Bootloader ROM region (<code
                    class="dj iv iw ix iy b">0x0800 0000</code>).</p>
                <p id="66ae" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">8️⃣ The Baseloader code is
                  Relocatable because <strong class="gf gv">it doesn’t call any other functions</strong> (it uses only C
                  macros that access I/O memory). And because it branches to other parts of its own code through <strong
                    class="gf gv">Relative Addresses, not Absolute Addresses</strong>.</p>
                <p id="d785" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">9️⃣ Baseloader <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/baseloader/baseloader.c#L353-L361"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">reboots the Blue Pill</a> and
                  <strong class="gf gv">starts the new Bootloader</strong></p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="ii ij ik il im cz ak paragraph-image">
                <div class="dh r di dj">
                  <div class="jg r">
                    <div class="db dc cp t u dd ak de df dg"><img class="cp t u dd ak dl dm dn"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/freeze/max/60/1*dtMrgW8drZ_7az9VnhUqhQ.gif?q=20"
                        width="2213" height="720" role="presentation" /></div><img class="db dc cp t u dd ak do"
                      width="2213" height="720" role="presentation" /><noscript><img class="cp t u dd ak"
                        src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/max/4426/1*dtMrgW8drZ_7az9VnhUqhQ.gif"
                        width="2213" height="720" role="presentation" /></noscript>
                  </div>
                </div>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <p id="a4da" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">🔟 Bootloader continues to
                  receive the firmware from MakeCode via USB. Bootloader <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/hf2.c#L267-L295"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"><strong class="gf gv">writes the
                      updated Application code into the Application ROM region</strong></a><strong
                    class="gf gv">,</strong> overwriting the old Application code.</p>
                <p id="a9af" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">After flashing, Bootloader
                  reboots the Blue Pill and <strong class="gf gv">starts the new Application</strong></p>
                <p id="c6c4" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">As we can see, the Bootloader
                  upgrade is made possible by the Baseloader, a special tiny program that has zero dependencies and
                  performs only one job — <em class="ge">overwrite the old Bootloader in ROM by the new Bootloader</em>
                  (also in ROM).</p>
                <p id="4c2c" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Once again, watch how the
                  Bootloader works together with the Baseloader to update its own code…</p>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="jh ji jj jk jl jm ag jn ah jo aj ak">
                  <figure class="ii ij ik il im cz">
                    <div class="dh r di">
                      <div class="jp r"><iframe
                          src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FAU0aQ9Vro1g%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DAU0aQ9Vro1g&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FAU0aQ9Vro1g%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="854"
                          title="Upgrading the Blue Pill WebUSB Bootloader" class="cp t u dd ak"
                          scrolling="auto"></iframe></div>
                    </div>
                    <figcaption class="bo eu ir is ha cn cl cm it iu bj et">Upgrading the WebUSB Bootloader</figcaption>
                  </figure>
                </div>
              </div>
            </div>
          </section>
          <hr class="gw et gx gy gz ha hb hc hd he hf" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <h1 id="4b10" class="ho hp ds bk bj hq hr hs ht hu hv hw hx hy hz ia ib">Remembering the Blue Pill state
                  after restarting</h1>
                <p id="ab27" class="gc gd ds bk gf b gg ic gi id gk ie gm if go ig gq">In some of the above steps we had
                  to restart Blue Pill in either the Bootloader, Baseloader or Application Modes. How does Blue Pill
                  remember which mode it should switch to after restarting?</p>
                <p id="9fdc" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Before we answer that, here’s the
                  libopencm3 function that we should call to restart the Blue Pill…</p>
                <pre
                  class="ii ij ik il im jq jr js"><span id="4d12" class="jt hp ds bk iy b eu ju jv r jw">scb_reset_system();</span></pre>
                <p id="a594" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">After restarting, all contents of
                  the RAM are wiped out. ROM is non-volatile, so we could flash a value into ROM to indicate the restart
                  mode. But on Blue Pill there’s an easier, safer way to remember the restart mode: <strong
                    class="gf gv">Backup Registers</strong>.</p>
                <p id="a96c" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">The Blue Pill’s Backup Registers
                  are ten 16-bit registers that we may use to store 20 bytes of data. The contents of the registers will
                  be preserved across restarts,<strong class="gf gv"> as long as there is power supplied to Blue
                    Pill</strong>.</p>
                <figure class="ii ij ik il im cz">
              
                  <p><script src="https://gist.github.com/lupyuen/aaaaa.js"></script></p>


                  <figcaption class="bo eu ir is ha cn cl cm it iu bj et">From <a
                      href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/backup.c"
                      class="at cg gr gs gt gu" target="_blank"
                      rel="noopener nofollow">https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/backup.c</a>
                  </figcaption>
                </figure>
                <p id="5eef" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">In the <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/backup.c"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">Bootloader code above</a> we use
                  macro <code class="dj iv iw ix iy b">RTC_BKP_DR()</code> to read and write the contents of the Backup
                  Registers. Note that the <code class="dj iv iw ix iy b">RTC_BKP_DR()</code> macro is called twice, so
                  that we can store a 32-bit value into two 16-bit registers.</p>
                <p id="529f" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Also note the calls to libopencm3
                  functions <code class="dj iv iw ix iy b">pwr_disable_backup_domain_write_protect()</code> and <code
                    class="dj iv iw ix iy b">pwr_enable_backup_domain_write_protect()</code>. The Backup Registers are
                  write-protected against any possible data corruption, in case the Blue Pill is restarted and the power
                  is unstable. We need to call <code
                    class="dj iv iw ix iy b">pwr_disable_backup_domain_write_protect()</code> to disable the
                  write-protection before writing to the Backup Registers, and call <code
                    class="dj iv iw ix iy b">pwr_enable_backup_domain_write_protect()</code> when we’re done.</p>
                <p id="458f" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">So here’s what happens when our
                  Blue Pill restarts…</p>
                <p id="42f7" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">1️⃣ Before restarting, the
                  Bootloader sets the restart mode to Bootloader, Baseloader or Application Mode by calling <code
                    class="dj iv iw ix iy b"><a href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/target_stm32f103.c#L240-L246" class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">boot_target_manifest_bootloader()</a>, <a href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/target_stm32f103.c#L232-L238" class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">boot_target_manifest_baseloader()</a></code>
                  or <code
                    class="dj iv iw ix iy b"><a href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/target_stm32f103.c#L224-L230" class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">boot_target_manifest_app()</a></code>.
                  These three functions store the restart mode into Backup Registers 0 and 1.</p>
                <p id="d9a0" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">1️⃣ Upon restarting, <code
                    class="dj iv iw ix iy b"><a href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/bootloader.c#L157-L205" class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">bootloader_start()</a></code><a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/bootloader.c#L157-L205"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"> in our Bootloader</a> is the
                  function that runs first. It calls <code
                    class="dj iv iw ix iy b">boot_target_get_startup_mode()</code> to get the restart mode.</p>
                <p id="5016" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">2️⃣ <code
                    class="dj iv iw ix iy b"><a href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/target_stm32f103.c#L67-L103" class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">boot_target_get_startup_mode()</a></code><a
                    href="https://web.archive.org/web/20191204194111/https://github.com/lupyuen/codal-libopencm3/blob/master/stm32/bootloader/stm32f103/target_stm32f103.c#L67-L103"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow"> in our Bootloader</a> reads the
                  Backup Registers 0 and 1 to get the restart mode.</p>
              </div>
            </div>
          </section>
          <hr class="gw et gx gy gz ha hb hc hd he hf" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dp aj ak">
                <h1 id="cfd7" class="ho hp ds bk bj hq hr hs ht hu hv hw hx hy hz ia ib">End of the Journey?</h1>
                <p id="187b" class="gc gd ds bk gf b gg ic gi id gk ie gm if go ig gq">The WebUSB Bootloader for
                  MakeCode on Blue Pill is incredibly complex — it required five articles (plus this article) to explain
                  the topics that we have covered today…</p>
                <p id="4472" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">1️⃣ We implemented the WebUSB and
                  WinUSB interfaces on Blue Pill…</p>
                <div class="jy jz ka kb kc kd"><a rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-usb-bootloader-how-i-fixed-the-usb-storage-serial-dfu-and-webusb-interfaces-36d7fe245b5c?source=post_page-----63398ef5eb76----------------------">
                    <section class="kg cl cm ak ce n ar kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
                      <div class="kw n co p kx ky">
                        <h2 class="bj hq kz bl ds">
                          <div class="de ke ew ex kf ez">STM32 Blue Pill USB Bootloader — How I fixed the USB Storage,
                            Serial, DFU and WebUSB interfaces</div>
                        </h2>
                        <div class="la r">
                          <h3 class="bj et eu bl bo">
                            <div class="de ke ew ex kf ez">Building a complex composite USB device with libopencm3 that
                              works on Windows, Mac and Linux</div>
                          </h3>
                        </div>
                        <div class="lb r">
                          <h4 class="bj et fo bl bo">
                            <div class="de ke ew ex kf ez">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="lc r">
                        <div class="ld r le lf lg lc lh li lj"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="4e43" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">2️⃣ We applied memory
                  optimisation tools and techniques to squeeze the Bootloader into Blue Pill…</p>
                <div class="jy jz ka kb kc kd"><a rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-analyse-and-optimise-your-ram-and-rom-9fc805e16ed7?source=post_page-----63398ef5eb76----------------------">
                    <section class="kg cl cm ak ce n ar kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
                      <div class="kw n co p kx ky">
                        <h2 class="bj hq kz bl ds">
                          <div class="de ke ew ex kf ez">STM32 Blue Pill — Analyse and Optimise Your RAM and ROM</div>
                        </h2>
                        <div class="la r">
                          <h3 class="bj et eu bl bo">
                            <div class="de ke ew ex kf ez">Tips and tools to prevent Blue Pill Bloat</div>
                          </h3>
                        </div>
                        <div class="lb r">
                          <h4 class="bj et fo bl bo">
                            <div class="de ke ew ex kf ez">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="lc r">
                        <div class="lk r le lf lg lc lh li lj"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="38d8" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">3️⃣ We created nano-float, an
                  optimised version of the standard math library…</p>
                <div class="jy jz ka kb kc kd"><a rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-shrink-your-math-libraries-with-qfplib-55093aab163a?source=post_page-----63398ef5eb76----------------------">
                    <section class="kg cl cm ak ce n ar kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
                      <div class="kw n co p kx ky">
                        <h2 class="bj hq kz bl ds">
                          <div class="de ke ew ex kf ez">STM32 Blue Pill — Shrink your math libraries with Qfplib</div>
                        </h2>
                        <div class="la r">
                          <h3 class="bj et eu bl bo">
                            <div class="de ke ew ex kf ez">Floating-point math libraries can bloat your Blue Pill code.
                              Here’s one way to fix that</div>
                          </h3>
                        </div>
                        <div class="lb r">
                          <h4 class="bj et fo bl bo">
                            <div class="de ke ew ex kf ez">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="lc r">
                        <div class="ll r le lf lg lc lh li lj"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="60d5" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">4️⃣ And we verified the accuracy
                  of the nano-float library through Unit Testing…</p>
                <div class="jy jz ka kb kc kd"><a rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2?source=post_page-----63398ef5eb76----------------------">
                    <section class="kg cl cm ak ce n ar kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
                      <div class="kw n co p kx ky">
                        <h2 class="bj hq kz bl ds">
                          <div class="de ke ew ex kf ez">STM32 Blue Pill — Unit Testing with Qemu Blue Pill Emulator
                          </div>
                        </h2>
                        <div class="la r">
                          <h3 class="bj et eu bl bo">
                            <div class="de ke ew ex kf ez">Unit Testing can help to stop bugs before they pollute the
                              entire IoT chain</div>
                          </h3>
                        </div>
                        <div class="lb r">
                          <h4 class="bj et fo bl bo">
                            <div class="de ke ew ex kf ez">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="lc r">
                        <div class="lm r le lf lg lc lh li lj"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="1c37" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">5️⃣ Finally we combined all the
                  topics from the above articles into a complex Bootloader…</p>
                <div class="jy jz ka kb kc kd"><a rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=post_page-----63398ef5eb76----------------------">
                    <section class="kg cl cm ak ce n ar kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
                      <div class="kw n co p kx ky">
                        <h2 class="bj hq kz bl ds">
                          <div class="de ke ew ex kf ez">STM32 Blue Pill — Dissecting the WebUSB Bootloader for MakeCode
                          </div>
                        </h2>
                        <div class="la r">
                          <h3 class="bj et eu bl bo">
                            <div class="de ke ew ex kf ez">How the MakeCode Bootloader for Blue Pill implements flashing
                              over WebUSB</div>
                          </h3>
                        </div>
                        <div class="lb r">
                          <h4 class="bj et fo bl bo">
                            <div class="de ke ew ex kf ez">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="lc r">
                        <div class="ln r le lf lg lc lh li lj"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="054e" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">We have done so many incredible
                  things with Blue Pill… Is there a limit? Nope we haven’t hit the limit yet. <em class="ge">So why
                    don’t we create better development tools to let everyone enjoy the power of Blue Pill?</em></p>
                <p id="49a8" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">A good Bootloader is essential
                  for a great programming experience on Blue Pill, and we have come a long way since the first Blue Pill
                  Bootloader…</p>
                <p id="0a5a" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">1️⃣ <a
                    href="https://web.archive.org/web/20191204194111/https://www.st.com/content/ccc/resource/technical/document/application_note/51/5f/03/1e/bd/9b/45/be/CD00264342.pdf/files/CD00264342.pdf/jcr:content/translations/en.CD00264342.pdf"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">Blue Pill Factory-Installed
                    Bootloader</a>: Needs the UART pins to be connected before flashing. No USB support.</p>
                <p id="8d95" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">2️⃣ <a
                    href="https://web.archive.org/web/20191204194111/https://github.com/rogerclarkmelbourne/STM32duino-bootloader"
                    class="at cg gr gs gt gu" target="_blank" rel="noopener nofollow">Blue Pill Arduino Bootloader</a>:
                  Works with USB. Flashing works only with Arduino IDE client.</p>
                <p id="d648" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">3️⃣ <a class="at cg gr gs gt gu"
                    target="_blank" rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/stm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&amp;sk=661984e9775f991a97e5747a67214b60">Blue
                    Pill MakeCode Bootloader</a>: Works with Chrome and other WebUSB-compatible web browsers. Allows
                  Bootloader to be reflashed via WebUSB. Probably the best Blue Pill Bootloader to date!</p>
                <p id="24cb" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">It’s been a long journey —
                  <strong class="gf gv">join me if you’re keen to complete the Blue Pill port of MakeCode!</strong> So
                  that we’ll finally have the perfect platform to build and test IoT prototypes.</p>
                <p id="e56d" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">There are too many topics to
                  cover, so I kept a log of all things that I have tried (even the failed ones)…</p>
                <div class="jy jz ka kb kc kd"><a rel="noopener"
                    href="/web/20191204194111/https://medium.com/@ly.lee/work-in-progress-stm32-blue-pill-visual-programming-with-makecode-codal-and-libopencm3-422d308f252e?source=post_page-----63398ef5eb76----------------------">
                    <section class="kg cl cm ak ce n ar kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
                      <div class="kw n co p kx ky">
                        <h2 class="bj hq kz bl ds">
                          <div class="de ke ew ex kf ez">[Work In Progress] STM32 Blue Pill Visual Programming with
                            MakeCode, CODAL and libopencm3</div>
                        </h2>
                        <div class="la r">
                          <h3 class="bj et eu bl bo">
                            <div class="de ke ew ex kf ez">Note: This work-in-progress document describes an incomplete
                              implementation of STM32 Blue Pill visual programming. The…</div>
                          </h3>
                        </div>
                        <div class="lb r">
                          <h4 class="bj et fo bl bo">
                            <div class="de ke ew ex kf ez">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="lc r">
                        <div class="lo r le lf lg lc lh li lj"></div>
                      </div>
                    </section>
                  </a></div>
                <p id="b151" class="gc gd ds bk gf b gg gh gi gj gk gl gm gn go gp gq">Look forward to having you
                  onboard the Blue Pill MakeCode journey! :-)</p>
              </div>
            </div>
          </section>
        </div>
      </article>
      <div class="db ct lp s ak lq lr ls" data-test-id="post-sidebar">
        <div class="n p">
          <div class="ac ae af ag ah ai aj ak">
            <div class="lt n co">
              <div class="ct">
                <div class="lu lv lw n">
                  <div class="n o">
                    <div class="lx r di"><a
                        href="https://web.archive.org/web/20191204194111/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76&amp;source=post_sidebar-----63398ef5eb76---------------------clap_sidebar-"
                        class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener">
                        <div class="ba ly lz ma mb mc md me mf mg mh"><svg width="29" height="29">
                            <g fill-rule="evenodd">
                              <path
                                d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z">
                              </path>
                            </g>
                          </svg></div>
                      </a></div>
                    <div class="mi r">
                      <div class="mj">
                        <h4 class="bj et eu bl bo"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi">10
                          </button></h4>
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="cf"><a
                      href="https://web.archive.org/web/20191204194111/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76&amp;source=post_sidebar--------------------------bookmark_sidebar-"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25" height="25"
                        viewbox="0 0 25 25">
                        <path
                          d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                          fill-rule="evenodd"></path>
                      </svg></a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="db ct lp s mk en ml mm lr mn"></div>
      <div>
        <div class="mo cz n co p">
          <div class="n p">
            <div class="ac ae af ag ah dp aj ak">
              <div class="n mp"></div>
              <div class="n o mp"></div>
              <div class="mq r">
                <ul class="ba bb">
                  <li class="cf mr ms mt"><a href="/web/20191204194111/https://medium.com/tag/programming"
                      class="mu mv cg bo r jr mw a b fo">Programming</a></li>
                  <li class="cf mr ms mt"><a href="/web/20191204194111/https://medium.com/tag/gadgets"
                      class="mu mv cg bo r jr mw a b fo">Gadgets</a></li>
                  <li class="cf mr ms mt"><a href="/web/20191204194111/https://medium.com/tag/stm32"
                      class="mu mv cg bo r jr mw a b fo">Stm32</a></li>
                </ul>
              </div>
              <div class="mx n ed ab">
                <div class="n o">
                  <div class="my r di"><a
                      href="https://web.archive.org/web/20191204194111/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76&amp;source=post_actions_footer-----63398ef5eb76---------------------clap_footer-"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener">
                      <div class="c mz ep n o na di nb nc nd ne nf ng nh ni nj nk nl nm nn no">
                        <div class="ba ly lz ma mb mc np me o do ep n p nq u dd cp t ak mf mg mh nr"><svg width="33"
                            height="33" viewbox="0 0 33 33">
                            <path
                              d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z"
                              fill-rule="evenodd"></path>
                          </svg></div>
                      </div>
                    </a></div>
                  <div class="mi r">
                    <div class="mj">
                      <h4 class="bj et eu bl ds"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi">10
                          claps</button></h4>
                    </div>
                  </div>
                </div>
                <div class="n o">
                  <div class="fx r ar"><a
                      href="//web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/share/twitter?source=post_actions_footer---------------------------"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg
                        width="29" height="29" class="q">
                        <path
                          d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                        </path>
                      </svg></a></div>
                  <div class="fx r ar"><a
                      href="//web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/share/linkedIn?source=post_actions_footer---------------------------"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg
                        width="29" height="29" viewbox="0 0 29 29" fill="none" class="q">
                        <path
                          d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z">
                        </path>
                        <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z"
                          fill="#fff"></path>
                      </svg></a></div>
                  <div class="fx r ar"><a
                      href="//web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/share/facebook?source=post_actions_footer---------------------------"
                      class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg
                        width="29" height="29" class="q">
                        <path
                          d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                        </path>
                      </svg></a></div>
                  <div class="fx r ar">
                    <div>
                      <div class="cf"><a
                          href="https://web.archive.org/web/20191204194111/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76&amp;source=post_actions_footer--------------------------bookmark_sidebar-"
                          class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25"
                            height="25" viewbox="0 0 25 25">
                            <path
                              d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                              fill-rule="evenodd"></path>
                          </svg></a></div>
                    </div>
                  </div>
                  <div class="cf">
                    <div class="cf">
                      <div class="cf">
                        <div class="r ar"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi"><svg
                              width="25" height="25" viewbox="-480.5 272.5 21 21" class="q">
                              <path
                                d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z">
                              </path>
                            </svg></button></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="ns nt nu mq r ab">
                <div class="nv nw r di"><span class="r nx an ny">
                    <div class="r cp nz oa"><a rel="noopener"
                        href="/web/20191204194111/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-">
                        <div class="di ob oc">
                          <div class="bs n ej o p cp ek el em en eo ct"><svg width="91" height="91" viewbox="0 0 91 91">
                              <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M45.5 1.4c-17.14 0-32 9.95-39.25 24.5L5 25.28C12.47 10.28 27.8 0 45.5 0S78.53 10.29 86 25.28l-1.25.62C77.5 11.35 62.65 1.4 45.5 1.4zM6.25 65.1c7.25 14.55 22.1 24.5 39.25 24.5 17.14 0 32-9.95 39.25-24.5l1.25.62C78.53 80.72 63.2 91 45.5 91S12.47 80.71 5 65.72l1.25-.62z">
                              </path>
                            </svg></div><img alt="Lup Yuen Lee 李立源" class="r ep oc ob"
                            src="https://web.archive.org/web/20191204194111im_/https://miro.medium.com/fit/c/160/160/1*KGohS3sQaUnr58gc0BIfoQ.jpeg"
                            width="80" height="80" />
                        </div>
                      </a></div><span class="r">
                      <div class="od r oe">
                        <p class="bj et fo bl bo of og">Written by</p>
                      </div>
                      <div class="od oh n oe">
                        <div class="ak n o ed">
                          <h2 class="bj hq gx oi ds"><a class="at au av aw ax ay az ba bb bc bd be bf bg bh bi"
                              rel="noopener"
                              href="/web/20191204194111/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-">Lup
                              Yuen Lee 李立源</a></h2>
                          <div class="r g"><button
                              class="oj ds q by fd fe ff fg bc bh fh fi fj fk fl fm cb bj b bk bl bm bn cc cd ce cf cg bf">Follow</button>
                          </div>
                        </div>
                      </div>
                    </span>
                  </span>
                  <div class="od ok r oe aq">
                    <div class="ol r">
                      <h4 class="bj et kz om bo">Techie and Educator in IoT 物聯網教師</h4>
                    </div>
                    <div class="ap on aq"><button
                        class="oj ds q by fd fe ff fg bc bh fh fi fj fk fl fm cb bj b bk bl bm bn cc cd ce cf cg bf">Follow</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="oo nt r ab"><a
                  href="https://web.archive.org/web/20191204194111/https://medium.com/p/63398ef5eb76/responses/show?source=follow_footer--------------------------follow_footer-"
                  class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><span class="op oq mb">
                    <div class="jq or cb r ha g"><span class="br">Write the first response</span></div>
                  </span></a></div>
            </div>
          </div>
          <div class="os r ot ab">
            <div class="n p">
              <div class="ac ae af ag ah ai aj ak"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="ou r ov ow">
        <section class="cl cm ak ce r kh ki kj kk kl km kn ko kp kq kr ks kt ku kv">
          <div class="ox oy nv n ed g">
            <div class="oz n ed">
              <div class="pa r pb">
                <div class="pc r"><a
                    href="https://web.archive.org/web/20191204194111/https://medium.com/about?autoplay=1&amp;source=post_page-----63398ef5eb76----------------------"
                    class="at au av aw ax ay az ba bb bc pd pe bf bg pf pg" rel="noopener">
                    <h4 class="ph pi pj bj hq bk om pk pl r">Discover
                      <!-- -->Medium
                    </h4>
                  </a></div><span class="bj b bk bl bm bn r pm pn">Welcome to a place where words matter. On
                  <!-- -->Medium
                  <!-- -->, smart voices and original ideas take center stage - with no ads in sight.
                  <!-- --> <a
                    href="https://web.archive.org/web/20191204194111/https://medium.com/about?autoplay=1&amp;source=post_page-----63398ef5eb76----------------------"
                    class="at au av aw ax ay az ba bb bc bf bg pf pg po" rel="noopener">Watch</a>
                </span>
              </div>
              <div class="pa r pb">
                <div class="pp r"><a
                    href="https://web.archive.org/web/20191204194111/https://medium.com/topics?source=post_page-----63398ef5eb76----------------------"
                    class="at au av aw ax ay az ba bb bc pd pe bf bg pf pg" rel="noopener">
                    <h4 class="ph pi pj bj hq bk om pk pl r">Make
                      <!-- -->Medium
                      <!-- --> yours
                    </h4>
                  </a></div><span class="bj b bk bl bm bn r pm pn">Follow all the topics you care about, and we’ll
                  deliver the best stories for you to your homepage and inbox.
                  <!-- --> <a
                    href="https://web.archive.org/web/20191204194111/https://medium.com/topics?source=post_page-----63398ef5eb76----------------------"
                    class="at au av aw ax ay az ba bb bc bf bg pf pg po" rel="noopener">Explore</a>
                </span>
              </div>
              <div class="pa r pb">
                <div class="pc r"><a
                    href="https://web.archive.org/web/20191204194111/https://medium.com/membership?source=post_page-----63398ef5eb76----------------------"
                    class="at au av aw ax ay az ba bb bc pd pe bf bg pf pg" rel="noopener">
                    <h4 class="ph pi pj bj hq bk om pk pl r">Become a member</h4>
                  </a></div><span class="bj b bk bl bm bn r pm pn">Get unlimited access to the best stories on
                  <!-- -->Medium
                  <!-- --> — and support writers while you’re at it. Just $5/month.
                  <!-- --> <a
                    href="https://web.archive.org/web/20191204194111/https://medium.com/membership?source=post_page-----63398ef5eb76----------------------"
                    class="at au av aw ax ay az ba bb bc bf bg pf pg po" rel="noopener">Upgrade</a>
                </span>
              </div>
            </div>
          </div>
          <div class="n o ed"><a class="at au av aw ax ay az ba bb bc pd pe bf bg pf pg" rel="noopener"
              href="/web/20191204194111/https://medium.com/?source=post_page-----63398ef5eb76----------------------"><svg
                height="22" width="112" viewbox="0 0 111.5 22" class="pi">
                <path
                  d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z">
                </path>
              </svg></a><span class="bj b bk bl bm bn r pm pn">
              <div class="pq pr n ed ps an"><a
                  href="https://web.archive.org/web/20191204194111/https://medium.com/about?autoplay=1&amp;source=post_page-----63398ef5eb76----------------------"
                  class="at au av aw ax ay az ba bb bc fa bf bg pf pg" rel="noopener">About</a><a
                  href="https://web.archive.org/web/20191204194111/https://help.medium.com/?source=post_page-----63398ef5eb76----------------------"
                  class="at au av aw ax ay az ba bb bc fa bf bg pf pg" rel="noopener">Help</a><a
                  class="at au av aw ax ay az ba bb bc fa bf bg pf pg" rel="noopener"
                  href="/web/20191204194111/https://medium.com/policy/9db0094a1e0f?source=post_page-----63398ef5eb76----------------------">Legal</a>
              </div>
            </span></div>
        </section>
      </div>
    </div>
  </div>
  <script src="https://web.archive.org/web/20191204194111js_/https://cdn.optimizely.com/js/16180790160.js"></script>
  <script>window.__BUILD_ID__ = "development"</script>
  <script>window.__GRAPHQL_URI__ = "https://web.archive.org/web/20191204194111/https://medium.com/_/graphql"</script>
  <script>window.__PRELOADED_STATE__ = { "config": { "nodeEnv": "production", "version": "master-20191204-185604-55b0ab8728", "productName": "Medium", "publicUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fcdn-client.medium.com\u002Flite", "authDomain": "medium.com", "authGoogleClientId": "216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com", "favicon": "production", "glyphUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fglyph.medium.com", "branchKey": "key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm", "lightStep": { "name": "lite-web", "host": "collector-medium.lightstep.com", "token": "ce5be895bef60919541332990ac9fef2", "appVersion": "master-20191204-185604-55b0ab8728" }, "algolia": { "appId": "MQ57UUUQZ2", "apiKeySearch": "394474ced050e3911ae2249ecc774921", "indexPrefix": "medium_", "host": "-dsn.algolia.net" }, "recaptchaKey": "6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk", "sentry": { "dsn": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002F589e367c28ca47b195ce200d1507d18b@sentry.io\u002F1423575", "environment": "production" }, "isAmp": false, "googleAnalyticsCode": "UA-24232453-2", "signInWallCustomDomainCollectionIds": ["3a8144eabfe3", "336d898217ee", "61061eb0c96b", "138adf9c44c", "819cc2aaeee0"], "mediumOwnedAndOperatedCollectionIds": ["544c7006046e", "bcc38c8f6edf", "444d13b52878", "8d6b8a439e32", "92d2092dc598", "1285ba81cada", "cb8577c9149e", "8ccfed20cbb2", "ae2a65f35510", "3f6ecf56618", "7b6769f2748b", "fc8964313712", "ef8e90590e66", "191186aaafa0", "d944778ce714", "bdc4052bbdba", "88d9857e584e"], "tierOneDomains": ["medium.com", "thebolditalic.com", "arcdigital.media", "towardsdatascience.com", "uxdesign.cc", "codeburst.io", "psiloveyou.xyz", "writingcooperative.com", "entrepreneurshandbook.co", "prototypr.io", "betterhumans.coach.me", "theascent.pub"] }, "debug": { "requestId": "dc9e1faa-5293-44a1-a2db-2d39a5dc062d", "originalSpanCarrier": { "ot-tracer-spanid": "6a542b9b17d7ef8c", "ot-tracer-traceid": "44808445328936b9", "ot-tracer-sampled": "true" } }, "session": { "user": { "id": "lo_8t7pWmLEs64U" }, "xsrf": "" }, "stats": { "itemCount": 0, "sending": false, "timeout": null, "backup": {} }, "navigation": { "showBranchBanner": null, "hasRenderedBranchBanner": null, "hideGoogleOneTap": false, "hideAlternateUser": false, "branchData": { "loaded": false }, "shareKey": "8b43b83310910e64752a61cf630e0b78", "referrerSource": "friends_link", "currentLocation": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76", "host": "medium.com", "hostname": "medium.com", "referrer": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002Ftag\u002Frust", "susiModal": { "step": null, "operation": "register", "reportEventInfo": { "eventName": "", "data": {} } } }, "client": { "isBot": false, "isEu": false, "isNativeMedium": false, "isCustomDomain": false }, "multiVote": { "clapsPerPost": {} }, "metadata": { "faviconImageId": null } }</script>
  <script>window.__APOLLO_STATE__ = { "ROOT_QUERY": { "viewer": null, "variantFlags": [{ "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.0", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.1", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.2", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.3", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.4", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.5", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.6", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.7", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.8", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.9", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.10", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.11", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.12", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.13", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.14", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.15", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.16", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.17", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.18", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.19", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.20", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.21", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.22", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.23", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.24", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.25", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.26", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.27", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.28", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.29", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.30", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.31", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.32", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.33", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.34", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.35", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.36", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.37", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.38", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.39", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.40", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.41", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.42", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.43", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.44", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.45", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.46", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.47", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.48", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.49", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.50", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.51", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.52", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.53", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.54", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.55", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.56", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.57", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.58", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.59", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.60", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.61", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.62", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.63", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.64", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.65", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.66", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.67", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.68", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.69", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.70", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.71", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.72", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.73", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.74", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.75", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.76", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.77", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.78", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.79", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.80", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.81", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.82", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.83", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.84", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.85", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.86", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.87", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.88", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.89", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.90", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.91", "typename": "VariantFlag" }, { "type": "id", "generated": true, "id": "ROOT_QUERY.variantFlags.92", "typename": "VariantFlag" }], "meterPost({\"postId\":\"63398ef5eb76\",\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}})": { "type": "id", "generated": false, "id": "MeteringInfo:singleton", "typename": "MeteringInfo" }, "postResult({\"id\":\"63398ef5eb76\"})": { "type": "id", "generated": false, "id": "Post:63398ef5eb76", "typename": "Post" } }, "ROOT_QUERY.variantFlags.0": { "name": "allow_access", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.0.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.0.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.1": { "name": "allow_signup", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.1.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.1.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.2": { "name": "allow_test_auth", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.2.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.2.valueType": { "__typename": "VariantFlagString", "value": "disallow" }, "ROOT_QUERY.variantFlags.3": { "name": "available_annual_plan", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.3.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.3.valueType": { "__typename": "VariantFlagString", "value": "2c754bcc2995" }, "ROOT_QUERY.variantFlags.4": { "name": "available_monthly_plan", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.4.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.4.valueType": { "__typename": "VariantFlagString", "value": "60e220181034" }, "ROOT_QUERY.variantFlags.5": { "name": "browsable_stream_config_bucket", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.5.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.5.valueType": { "__typename": "VariantFlagString", "value": "curated-topics" }, "ROOT_QUERY.variantFlags.6": { "name": "daily_read_non_silent", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.6.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.6.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.7": { "name": "disable_gosocial_followers_that_you_follow", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.7.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.7.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.8": { "name": "disable_ios_resume_reading_toast", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.8.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.8.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.9": { "name": "disable_mobile_featured_chunk", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.9.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.9.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.10": { "name": "disable_post_recommended_from_friends_provider", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.10.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.10.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.11": { "name": "diversification_no_embedding", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.11.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.11.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.12": { "name": "enable_annual_renewal_reminder_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.12.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.12.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.13": { "name": "enable_app_flirty_thirty", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.13.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.13.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.14": { "name": "enable_automated_mission_control_triggers", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.14.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.14.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.15": { "name": "enable_branch_io", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.15.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.15.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.16": { "name": "enable_branding", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.16.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.16.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.17": { "name": "enable_branding_fonts", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.17.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.17.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.18": { "name": "enable_dedicated_series_tab_api_ios", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.18.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.18.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.19": { "name": "enable_different_grid", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.19.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.19.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.20": { "name": "enable_disregard_trunc_state_for_footer", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.20.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.20.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.21": { "name": "enable_edit_alt_text", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.21.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.21.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.22": { "name": "enable_email_sign_in_captcha", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.22.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.22.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.23": { "name": "enable_embedding_based_diversification", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.23.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.23.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.24": { "name": "enable_filter_by_resend_rules", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.24.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.24.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.25": { "name": "enable_first_name_on_blocker_banner", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.25.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.25.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.26": { "name": "enable_first_name_on_paywall", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.26.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.26.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.27": { "name": "enable_gift_membership_ended_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.27.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.27.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.28": { "name": "enable_google_one_tap", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.28.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.28.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.29": { "name": "enable_inline_search_lite", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.29.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.29.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.30": { "name": "enable_inline_search_popover_lite", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.30.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.30.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.31": { "name": "enable_ios_post_stats", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.31.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.31.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.32": { "name": "enable_janky_spam_rules", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.32.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.32.valueType": { "__typename": "VariantFlagString", "value": "users,posts" }, "ROOT_QUERY.variantFlags.33": { "name": "enable_kafka_events", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.33.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.33.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.34": { "name": "enable_lite_notifications", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.34.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.34.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.35": { "name": "enable_lite_post", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.35.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.35.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.36": { "name": "enable_lite_post_cd", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.36.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.36.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.37": { "name": "enable_lite_post_highlights", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.37.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.37.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.38": { "name": "enable_lite_post_highlights_view_only", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.38.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.38.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.39": { "name": "enable_lite_profile", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.39.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.39.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.40": { "name": "enable_lite_pub_header_menu", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.40.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.40.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.41": { "name": "enable_lite_read_next", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.41.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.41.valueType": { "__typename": "VariantFlagString", "value": "sidebar" }, "ROOT_QUERY.variantFlags.42": { "name": "enable_lite_stories", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.42.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.42.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.43": { "name": "enable_lite_topics", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.43.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.43.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.44": { "name": "enable_lite_unread_notification_count_mutation", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.44.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.44.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.45": { "name": "enable_lo_homepage", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.45.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.45.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.46": { "name": "enable_lo_scroll_away_metabar", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.46.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.46.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.47": { "name": "enable_logged_out_homepage_signup", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.47.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.47.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.48": { "name": "enable_marketing_emails", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.48.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.48.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.49": { "name": "enable_media_resource_try_catch", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.49.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.49.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.50": { "name": "enable_membership_remove_section_a", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.50.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.50.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.51": { "name": "enable_more_branch_data", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.51.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.51.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.52": { "name": "enable_new_collaborative_filtering_data", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.52.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.52.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.53": { "name": "enable_new_gdpr_partner_export", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.53.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.53.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.54": { "name": "enable_new_partner_dashboard", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.54.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.54.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.55": { "name": "enable_new_partner_program_updates", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.55.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.55.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.56": { "name": "enable_new_pub_fonts", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.56.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.56.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.57": { "name": "enable_new_pub_modules", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.57.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.57.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.58": { "name": "enable_new_suspended_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.58.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.58.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.59": { "name": "enable_new_three_dot_menu", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.59.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.59.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.60": { "name": "enable_no_cache_control", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.60.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.60.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.61": { "name": "enable_optimizely", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.61.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.61.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.62": { "name": "enable_parsely", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.62.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.62.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.63": { "name": "enable_patronus_on_kubernetes", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.63.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.63.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.64": { "name": "enable_post_import", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.64.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.64.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.65": { "name": "enable_post_settings_screen", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.65.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.65.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.66": { "name": "enable_primary_topic_for_mobile", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.66.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.66.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.67": { "name": "enable_pub_digest_send_after_pub_follow", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.67.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.67.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.68": { "name": "enable_pubs_cta_follow", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.68.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.68.valueType": { "__typename": "VariantFlagString", "value": "explicit_about_email" }, "ROOT_QUERY.variantFlags.69": { "name": "enable_rtr_channel", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.69.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.69.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.70": { "name": "enable_save_to_medium", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.70.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.70.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.71": { "name": "enable_sign_up_with_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.71.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.71.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.72": { "name": "enable_stripe_express_initial_expansion_copy", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.72.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.72.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.73": { "name": "enable_stripe_express_rest_of_world_copy", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.73.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.73.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.74": { "name": "enable_suggest_account", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.74.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.74.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.75": { "name": "enable_susi_font_changes", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.75.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.75.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.76": { "name": "enable_tick_landing_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.76.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.76.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.77": { "name": "enable_tipalti_onboarding", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.77.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.77.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.78": { "name": "enable_topic_lifecycle_email", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.78.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.78.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.79": { "name": "enable_tribute_landing_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.79.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.79.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.80": { "name": "enable_trumpland_landing_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.80.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.80.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.81": { "name": "glyph_font_set", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.81.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.81.valueType": { "__typename": "VariantFlagString", "value": "m2" }, "ROOT_QUERY.variantFlags.82": { "name": "google_sign_in_android", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.82.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.82.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.83": { "name": "is_not_medium_subscriber", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.83.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.83.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.84": { "name": "new_transition_page", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.84.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.84.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.85": { "name": "pub_digest_cta_in_digest_copy2", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.85.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.85.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.86": { "name": "pub_sidebar", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.86.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.86.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.87": { "name": "rank_model", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.87.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.87.valueType": { "__typename": "VariantFlagString", "value": "default" }, "ROOT_QUERY.variantFlags.88": { "name": "redis_read_write_splitting", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.88.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.88.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.89": { "name": "share_post_linkedin", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.89.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.89.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "ROOT_QUERY.variantFlags.90": { "name": "signin_services", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.90.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.90.valueType": { "__typename": "VariantFlagString", "value": "twitter,facebook,google,email,google-fastidv,google-one-tap" }, "ROOT_QUERY.variantFlags.91": { "name": "signup_services", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.91.valueType", "typename": "VariantFlagString" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.91.valueType": { "__typename": "VariantFlagString", "value": "twitter,facebook,google,email,google-fastidv,google-one-tap" }, "ROOT_QUERY.variantFlags.92": { "name": "use_new_admin_topic_backend", "valueType": { "type": "id", "generated": true, "id": "$ROOT_QUERY.variantFlags.92.valueType", "typename": "VariantFlagBoolean" }, "__typename": "VariantFlag" }, "$ROOT_QUERY.variantFlags.92.valueType": { "__typename": "VariantFlagBoolean", "value": true }, "MeteringInfo:singleton": { "__typename": "MeteringInfo", "postIds": { "type": "json", "json": [] }, "maxUnlockCount": 3, "unlocksRemaining": 3 }, "Post:63398ef5eb76": { "__typename": "Post", "visibility": "PUBLIC", "latestPublishedVersion": "750a57fb2d8d", "collection": null, "id": "63398ef5eb76", "creator": { "type": "id", "generated": false, "id": "User:1da08193a324", "typename": "User" }, "isLocked": false, "lockedSource": "LOCKED_POST_SOURCE_NONE", "sequence": null, "mediumUrl": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-bootloading-the-webusb-bootloader-63398ef5eb76", "canonicalUrl": "", "content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}})": { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}})", "typename": "PostContent" }, "firstPublishedAt": 1551082157176, "isPublished": true, "layerCake": 4, "primaryTopic": null, "title": "STM32 Blue Pill — Bootloading the WebUSB Bootloader", "isLimitedState": false, "pendingCollection": { "type": "id", "generated": false, "id": "Collection:721b17443fd5", "typename": "Collection" }, "shareKey": null, "statusForCollection": "PENDING", "readingTime": 8.060377358490566, "readingList": "READING_LIST_NONE", "license": "ALL_RIGHTS_RESERVED", "allowResponses": true, "tags": [{ "type": "id", "generated": false, "id": "Tag:programming", "typename": "Tag" }, { "type": "id", "generated": false, "id": "Tag:gadgets", "typename": "Tag" }, { "type": "id", "generated": false, "id": "Tag:stm32", "typename": "Tag" }], "viewerClapCount": 0, "clapCount": 10, "voterCount": 1, "recommenders": [], "responsesCount": 0, "collaborators": [], "translationSourcePost": null, "newsletterId": "", "inResponseToPostResult": null, "inResponseToMediaResource": null, "curationEligibleAt": 1551082154490, "audioVersionUrl": "", "seoTitle": "", "socialTitle": "", "socialDek": "", "metaDescription": "How does the WebUSB Bootloader upgrade itself? With a special Baseloader", "latestPublishedAt": 1551082157176, "wordCount": 1818, "previewContent": { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.previewContent", "typename": "PreviewContent" }, "previewImage": { "type": "id", "generated": false, "id": "ImageMetadata:1*0EWymp7F8ROU0pUX-vyC7A.gif", "typename": "ImageMetadata" }, "updatedAt": 1551090062769, "topics": [], "seoDescription": "", "isSuspended": false }, "User:1da08193a324": { "id": "1da08193a324", "__typename": "User", "isSuspended": false, "allowNotes": true, "name": "Lup Yuen Lee 李立源", "isFollowing": false, "username": "ly.lee", "bio": "Techie and Educator in IoT 物聯網教師", "imageId": "1*KGohS3sQaUnr58gc0BIfoQ.jpeg", "mediumMemberAt": 1571194811000, "isBlocking": false, "isPartnerProgramEnrolled": false, "twitterScreenName": "MisterTechBlog" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}})": { "isLockedPreviewOnly": false, "validatedShareKey": "8b43b83310910e64752a61cf630e0b78", "__typename": "PostContent", "bodyModel": { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel", "typename": "RichText" } }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.0": { "name": "37ba", "startIndex": 0, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.1": { "name": "7d12", "startIndex": 8, "textLayout": "FLOW", "imageLayout": "NONE", "backgroundImage": null, "videoLayout": "NO_VIDEO", "backgroundVideo": null, "__typename": "Section" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.2": { "name": "d6d5", "startIndex": 14, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.3": { "name": "7207", "startIndex": 27, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.4": { "name": "f142", "startIndex": 49, "textLayout": null, "imageLayout": null, "backgroundImage": null, "videoLayout": null, "backgroundVideo": null, "__typename": "Section" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.5": { "name": "15c1", "startIndex": 62, "textLayout": "FLOW", "imageLayout": "NONE", "backgroundImage": null, "videoLayout": "NO_VIDEO", "backgroundVideo": null, "__typename": "Section" }, "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel": { "sections": [{ "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.0", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.1", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.2", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.3", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.4", "typename": "Section" }, { "type": "id", "generated": true, "id": "$Post:63398ef5eb76.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"8b43b83310910e64752a61cf630e0b78\",\"source\":\"friends_link\"}}).bodyModel.sections.5", "typename": "Section" }], "paragraphs": [{ "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_0", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_1", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_2", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_3", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_4", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_5", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_6", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_7", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_8", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_9", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_10", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_11", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_12", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_13", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_14", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_15", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_16", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_17", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_18", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_19", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_20", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_21", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_22", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_23", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_24", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_25", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_26", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_27", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_28", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_29", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_30", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_31", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_32", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_33", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_34", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_35", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_36", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_37", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_38", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_39", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_40", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_41", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_42", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_43", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_44", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_45", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_46", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_47", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_48", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_49", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_50", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_51", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_52", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_53", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_54", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_55", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_56", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_57", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_58", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_59", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_60", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_61", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_62", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_63", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_64", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_65", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_66", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_67", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_68", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_69", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_70", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_71", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_72", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_73", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_74", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_75", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_76", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_77", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_78", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_79", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_80", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_81", "typename": "Paragraph" }, { "type": "id", "generated": false, "id": "Paragraph:750a57fb2d8d_82", "typename": "Paragraph" }], "__typename": "RichText" }, "Paragraph:750a57fb2d8d_0": { "id": "750a57fb2d8d_0", "name": "8518", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*0EWymp7F8ROU0pUX-vyC7A.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*0EWymp7F8ROU0pUX-vyC7A.gif": { "id": "1*0EWymp7F8ROU0pUX-vyC7A.gif", "originalHeight": 782, "originalWidth": 1644, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_1": { "id": "750a57fb2d8d_1", "name": "a008", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill — Bootloading the WebUSB Bootloader", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_2": { "id": "750a57fb2d8d_2", "name": "a396", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "The year is 2029. At Moon Base One, two Moon Base Operators nearly wiped out their entire crop of beautiful red tomatoes… All because of a firmware bug in their IoT monitoring device that slipped past Embedded Unit Testing.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_2.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_2.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_2.markups.0": { "type": "A", "start": 21, "end": 34, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2?source=friends_link&sk=9a9389cdea5828cb48713f963c8f7615", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_2.markups.1": { "type": "A", "start": 201, "end": 222, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2?source=friends_link&sk=9a9389cdea5828cb48713f963c8f7615", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_3": { "id": "750a57fb2d8d_3", "name": "cbc9", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "Operator 1: Are we all set to flash our STM32-BLUEST-PILL monitoring devices with the new firmware? The one that passed Embedded Unit Testing?", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_4": { "id": "750a57fb2d8d_4", "name": "bf3c", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "Operator 2: Yes! Lemme launch MakeCode version 2029… Hitting the DOWNLOAD button… Now regenerating the new UF2 firmware image… Transmitting firmware image to all STM32-BLUEST-PILL Bootloaders… And Firmware version 2029 has been flashed to all 1,000 devices! Wait we got 1,000 errors… “Critical system library libopencm3 version 2029 not found”…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.4", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.5", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_4.markups.6", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_4.markups.0": { "type": "A", "start": 30, "end": 38, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&sk=661984e9775f991a97e5747a67214b60", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_4.markups.1": { "type": "A", "start": 107, "end": 125, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002FMicrosoft\u002Fuf2", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_4.markups.2": { "type": "A", "start": 162, "end": 191, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&sk=661984e9775f991a97e5747a67214b60", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_4.markups.3": { "type": "A", "start": 309, "end": 319, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flibopencm3\u002Flibopencm3\u002Fwiki", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_4.markups.4": { "type": "STRONG", "start": 30, "end": 51, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_4.markups.5": { "type": "STRONG", "start": 197, "end": 218, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_4.markups.6": { "type": "STRONG", "start": 285, "end": 342, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_5": { "id": "750a57fb2d8d_5", "name": "9d62", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "Operator 1: WHAT’S HAPPENING TO OUR SENSORS ??? OUR IOT DASHBOARDS ALL TURNED BLANK !!! We’re running Bootloader version 2028, which contains libopencm3 version 2028! We don’t use version 2029 here!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_5.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_5.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_5.markups.0": { "type": "STRONG", "start": 102, "end": 125, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_5.markups.1": { "type": "STRONG", "start": 142, "end": 167, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_6": { "id": "750a57fb2d8d_6", "name": "bded", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "Operator 2: So we just upgrade the Bootloader to version 2029. Piece of cake right? Oh wait… There’s no button for MakeCode Bootloader Upgrade. We haven’t implemented the Bootloader Upgrade yet. How often do we upgrade the Bootloader right? Heh heh…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_6.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_6.markups.0": { "type": "STRONG", "start": 144, "end": 194, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_7": { "id": "750a57fb2d8d_7", "name": "0451", "type": "BQ", "href": null, "layout": null, "metadata": null, "text": "Operator 1: The sprinklers have stopped !!! Our juicy tomatoes are drying up and turning into… SUN-DRIED TOMATOES !!! NOOOOOOO…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_8": { "id": "750a57fb2d8d_8", "name": "943f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "With a Bootloader installed, programming the STM32 Blue Pill via USB gets a lot simpler and faster… A single click is all it takes to flash the Blue Pill!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_8.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_8.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_8.markups.0": { "type": "A", "start": 45, "end": 60, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttp:\u002F\u002Fwiki.stm32duino.com\u002Findex.php?title=Blue_Pill", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_8.markups.1": { "type": "A", "start": 100, "end": 114, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fyoutu.be\u002FDSNDvrVOJns", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_9": { "id": "750a57fb2d8d_9", "name": "1352", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In the previous article we learned how our MakeCode Bootloader flashed Applications to Blue Pill via WebUSB. The chronicles of Moon Base One have taught us that we need a way to upgrade the Bootloader as well.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_9.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_9.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_9.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_9.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_9.markups.0": { "type": "A", "start": 0, "end": 23, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&sk=661984e9775f991a97e5747a67214b60", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_9.markups.1": { "type": "A", "start": 43, "end": 51, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmakecode.com\u002Fabout", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_9.markups.2": { "type": "A", "start": 101, "end": 107, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Fupdates\u002F2016\u002F03\u002Faccess-usb-devices-on-the-web", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_9.markups.3": { "type": "EM", "start": 127, "end": 140, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_10": { "id": "750a57fb2d8d_10", "name": "632b", "type": "P", "href": null, "layout": null, "metadata": null, "text": "But how do we upgrade the Bootloader when it’s always running in the background, waiting for flashing requests? This article explains a special technique I used to upgrade the MakeCode Bootloader over WebUSB… I call it “Baseloading”. We’ll learn…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_10.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_10.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_10.markups.0": { "type": "STRONG", "start": 220, "end": 231, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_10.markups.1": { "type": "EM", "start": 47, "end": 110, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_11": { "id": "750a57fb2d8d_11", "name": "06d7", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "How to write to Blue Pill’s flash memory without calling any libraries", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_11.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_11.markups.0": { "type": "STRONG", "start": 7, "end": 40, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_12": { "id": "750a57fb2d8d_12", "name": "c7eb", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "How we used this method of flashing to update the Bootloader code", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_12.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_12.markups.0": { "type": "STRONG", "start": 39, "end": 60, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_13": { "id": "750a57fb2d8d_13", "name": "2ef3", "type": "OLI", "href": null, "layout": null, "metadata": null, "text": "How to use Backup Registers to remember the state of the Blue Pill after restarting", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_13.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_13.markups.0": { "type": "STRONG", "start": 11, "end": 27, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_14": { "id": "750a57fb2d8d_14", "name": "d5da", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Flashing with Zero Dependencies", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_15": { "id": "750a57fb2d8d_15", "name": "f42e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Take a look at this code that we use for flashing the Blue Pill WebUSB Bootloader…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_15.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_15.markups.0": { "type": "A", "start": 15, "end": 81, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c#L256-L362", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_16": { "id": "750a57fb2d8d_16", "name": "5518", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*7SG_RJfjtCcnOUeusbwoow.png", "typename": "ImageMetadata" }, "text": "Baseloader code for flashing the Bootloader. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c#L256-L362", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_16.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*7SG_RJfjtCcnOUeusbwoow.png": { "id": "1*7SG_RJfjtCcnOUeusbwoow.png", "originalHeight": 842, "originalWidth": 886, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_16.markups.0": { "type": "A", "start": 50, "end": 145, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c#L256-L362", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_17": { "id": "750a57fb2d8d_17", "name": "48f9", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Looks like typical Blue Pill code… baseloader_start() calls some functions to lock, unlock, erase and update Blue Pill’s flash memory. Now look at the Arm Cortex-M3 assembly code that the C compiler generated for baseloader_start()…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_17.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_17.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_17.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_17.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_17.markups.0": { "type": "CODE", "start": 35, "end": 53, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_17.markups.1": { "type": "CODE", "start": 213, "end": 231, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_17.markups.2": { "type": "A", "start": 151, "end": 178, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Flogs\u002Ffirmware.dump#L875-L1650", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_17.markups.3": { "type": "STRONG", "start": 78, "end": 108, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_18": { "id": "750a57fb2d8d_18", "name": "3dd3", "type": "IMG", "href": null, "layout": "INSET_CENTER", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*xEAfpV6RyM4XImfuUdOouw.png", "typename": "ImageMetadata" }, "text": "Compiled Baseloader code. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Flogs\u002Ffirmware.dump#L875-L1650", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_18.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*xEAfpV6RyM4XImfuUdOouw.png": { "id": "1*xEAfpV6RyM4XImfuUdOouw.png", "originalHeight": 836, "originalWidth": 762, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_18.markups.0": { "type": "A", "start": 31, "end": 116, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Flogs\u002Ffirmware.dump#L875-L1650", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_19": { "id": "750a57fb2d8d_19", "name": "b3d7", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Do you see the magic here? There are no calls to other functions! It’s as though all the lock \u002F unlock \u002F erase \u002F update functions are done within this baseloader_start() function… baseloader_start() has Zero Dependencies!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_19.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_19.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_19.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_19.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_19.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_19.markups.0": { "type": "CODE", "start": 151, "end": 169, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_19.markups.1": { "type": "CODE", "start": 180, "end": 198, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_19.markups.2": { "type": "STRONG", "start": 27, "end": 65, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_19.markups.3": { "type": "STRONG", "start": 89, "end": 119, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_19.markups.4": { "type": "STRONG", "start": 203, "end": 220, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_20": { "id": "750a57fb2d8d_20", "name": "76bb", "type": "P", "href": null, "layout": null, "metadata": null, "text": "How is that possible? That’s because Blue Pill uses Memory-Mapped I\u002FO. By reading\u002Fwriting some special memory location, we can control the Blue Pill peripherals, including the flash memory. The lock \u002F unlock \u002F erase \u002F update functions above are actually C macros that read\u002Fwrite the special memory addresses that control the Blue Pill flash memory.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_20.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_20.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_20.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_20.markups.0": { "type": "A", "start": 52, "end": 69, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMemory-mapped_I\u002FO", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_20.markups.1": { "type": "A", "start": 194, "end": 262, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c#L67-L212", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_20.markups.2": { "type": "STRONG", "start": 52, "end": 69, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_21": { "id": "750a57fb2d8d_21", "name": "5f8e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Also note that baseloader_start() uses Relative Addresses (instead of Absolute Addresses) when branching conditionally to other parts of the function. Just look at the above branch instructions like bls.n, b.n, bcs.n.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_21.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_21.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_21.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_21.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_21.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_21.markups.0": { "type": "CODE", "start": 15, "end": 33, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_21.markups.1": { "type": "CODE", "start": 199, "end": 216, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_21.markups.2": { "type": "A", "start": 39, "end": 57, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FAddressing_mode#PC-relative_2", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_21.markups.3": { "type": "A", "start": 174, "end": 193, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fwww.st.com\u002Fcontent\u002Fccc\u002Fresource\u002Ftechnical\u002Fdocument\u002Fprogramming_manual\u002F5b\u002Fca\u002F8d\u002F83\u002F56\u002F7f\u002F40\u002F08\u002FCD00228163.pdf\u002Ffiles\u002FCD00228163.pdf\u002Fjcr:content\u002Ftranslations\u002Fen.CD00228163.pdf", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_21.markups.4": { "type": "STRONG", "start": 39, "end": 57, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_22": { "id": "750a57fb2d8d_22", "name": "afed", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Zero Dependencies + Relative Addressing… That means the code is perfect for Relocation anywhere in Blue Pill memory! We can copy the baseloader_start() function into any chunk of Blue Pill memory and it will still work! Assuming of course we don’t mess around with the global variables accessed by baseloader_start().", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_22.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_22.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_22.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_22.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_22.markups.0": { "type": "CODE", "start": 133, "end": 151, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_22.markups.1": { "type": "CODE", "start": 298, "end": 316, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_22.markups.2": { "type": "STRONG", "start": 76, "end": 86, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_22.markups.3": { "type": "EM", "start": 117, "end": 219, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_23": { "id": "750a57fb2d8d_23", "name": "ef7d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "That’s the key reason why our Bootloader code is able to update itself… It’s able to clone itself into a new chunk of ROM memory AND execute the cloned copy of Bootloader to update the old ROM copy of Bootloader!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_23.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_23.markups.0": { "type": "EM", "start": 85, "end": 211, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_24": { "id": "750a57fb2d8d_24", "name": "6b1f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "From now on we’ll call this “code that updates the Bootloader” as the Baseloader.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_24.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_24.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_24.markups.0": { "type": "STRONG", "start": 70, "end": 80, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_24.markups.1": { "type": "EM", "start": 29, "end": 61, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_25": { "id": "750a57fb2d8d_25", "name": "f437", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Now if the Baseloader can’t fetch the new Bootloader code from the USB port (remember that the Baseloader only uses flash memory), how can the Baseloader update the Bootloader?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_25.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_25.markups.0": { "type": "EM", "start": 130, "end": 176, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_26": { "id": "750a57fb2d8d_26", "name": "59c0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "By carefully juggling flash memory, as we shall soon see…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_27": { "id": "750a57fb2d8d_27", "name": "d708", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Upgrading the Bootloader, step by step", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_28": { "id": "750a57fb2d8d_28", "name": "d352", "type": "P", "href": null, "layout": null, "metadata": null, "text": "How does our Blue Pill WebUSB Bootloader upgrade its own code? Let’s watch how it’s done with the Baseloader…", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_28.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_28.markups.0": { "type": "A", "start": 98, "end": 108, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_29": { "id": "750a57fb2d8d_29", "name": "988f", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*rGjBafDApcRteWb4xmQFJg.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*rGjBafDApcRteWb4xmQFJg.gif": { "id": "1*rGjBafDApcRteWb4xmQFJg.gif", "originalHeight": 349, "originalWidth": 2213, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_30": { "id": "750a57fb2d8d_30", "name": "8bc4", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ We have partitioned Blue Pill’s ROM with this layout: Bootloader in the lower ROM region, Application in the upper ROM region", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_30.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_30.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_30.markups.0": { "type": "A", "start": 58, "end": 129, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&sk=661984e9775f991a97e5747a67214b60", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_30.markups.1": { "type": "STRONG", "start": 58, "end": 129, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_31": { "id": "750a57fb2d8d_31", "name": "c1ba", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*HapHNlS6goDV4SH2tAnUHw.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*HapHNlS6goDV4SH2tAnUHw.gif": { "id": "1*HapHNlS6goDV4SH2tAnUHw.gif", "originalHeight": 353, "originalWidth": 2213, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_32": { "id": "750a57fb2d8d_32", "name": "6931", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ When we click Download to update the Blue Pill, the MakeCode Website generates a Blue Pill firmware image with the same ROM layout", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_32.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_32.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_32.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_32.markups.0": { "type": "CODE", "start": 18, "end": 26, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_32.markups.1": { "type": "A", "start": 73, "end": 109, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fpxt\u002Ftree\u002Fmaster\u002Fpxtcompiler\u002Femitter", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_32.markups.2": { "type": "STRONG", "start": 119, "end": 134, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_33": { "id": "750a57fb2d8d_33", "name": "e30f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ MakeCode Website transfers the firmware image in chunks to Blue Pill via the USB HF2 protocol, from low to high address (Bootloader followed by Application)", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_33.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_33.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_33.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_33.markups.0": { "type": "A", "start": 21, "end": 59, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fpxt\u002Fblob\u002Fmaster\u002Fpxtlib\u002Fhf2.ts#L454-L495", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_33.markups.1": { "type": "A", "start": 81, "end": 97, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fpxt\u002Fblob\u002Fmaster\u002Fpxtlib\u002Fhf2.ts#L57-L123", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_33.markups.2": { "type": "STRONG", "start": 125, "end": 159, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_34": { "id": "750a57fb2d8d_34", "name": "6601", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*-4DKlyS_PbcHV1U8kzmVFA.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*-4DKlyS_PbcHV1U8kzmVFA.gif": { "id": "1*-4DKlyS_PbcHV1U8kzmVFA.gif", "originalHeight": 706, "originalWidth": 2213, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_35": { "id": "750a57fb2d8d_35", "name": "ed3b", "type": "P", "href": null, "layout": null, "metadata": null, "text": "4️⃣ Blue Pill Bootloader receives the new Bootloader code and writes temporarily into the old Application region", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_35.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_35.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_35.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_35.markups.0": { "type": "A", "start": 62, "end": 112, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fhf2.c#L267-L294", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_35.markups.1": { "type": "STRONG", "start": 34, "end": 57, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_35.markups.2": { "type": "STRONG", "start": 90, "end": 112, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_36": { "id": "750a57fb2d8d_36", "name": "ccee", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*pCO50XtJ92ZXPmg1LkKUdQ.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*pCO50XtJ92ZXPmg1LkKUdQ.gif": { "id": "1*pCO50XtJ92ZXPmg1LkKUdQ.gif", "originalHeight": 456, "originalWidth": 2213, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_37": { "id": "750a57fb2d8d_37", "name": "8de9", "type": "P", "href": null, "layout": null, "metadata": null, "text": "5️⃣ Bootloader compares the old and new Bootloader code. Assuming that the code has changed, the Bootloader clones the Baseloader code (inside the Bootloader) into the next available ROM space. Bootloader reboots the Blue Pill and starts the Baseloader.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_37.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_37.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_37.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_37.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_37.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_37.markups.0": { "type": "A", "start": 15, "end": 55, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fhf2.c#L304-L314", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_37.markups.1": { "type": "A", "start": 108, "end": 134, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fhf2.c#L316-L332", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_37.markups.2": { "type": "A", "start": 231, "end": 252, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fbootloader.c#L72-L155", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_37.markups.3": { "type": "STRONG", "start": 108, "end": 134, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_37.markups.4": { "type": "STRONG", "start": 231, "end": 252, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_38": { "id": "750a57fb2d8d_38", "name": "1b40", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*FKhd4zTftEid0fdGOEnARw.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*FKhd4zTftEid0fdGOEnARw.gif": { "id": "1*FKhd4zTftEid0fdGOEnARw.gif", "originalHeight": 307, "originalWidth": 2213, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_39": { "id": "750a57fb2d8d_39", "name": "ac78", "type": "P", "href": null, "layout": null, "metadata": null, "text": "6️⃣ Baseloader moves the new Bootloader code into the Bootloader ROM region, overwriting the old Bootloader. The Bootloader is not running now, so it’s safe to overwrite.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_39.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_39.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_39.markups.0": { "type": "A", "start": 15, "end": 75, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c#L314-L345", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_39.markups.1": { "type": "STRONG", "start": 15, "end": 75, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_40": { "id": "750a57fb2d8d_40", "name": "1a4e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "7️⃣ The Baseloader code is Relocatable, so it may be executed anywhere in ROM. That’s why the Baseloader can run outside the Bootloader ROM region. Unlike the Bootloader, which may only be executed at a fixed address in the Bootloader ROM region (0x0800 0000).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_40.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_40.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_40.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_40.markups.0": { "type": "CODE", "start": 247, "end": 258, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_40.markups.1": { "type": "STRONG", "start": 27, "end": 38, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_40.markups.2": { "type": "STRONG", "start": 53, "end": 77, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_41": { "id": "750a57fb2d8d_41", "name": "66ae", "type": "P", "href": null, "layout": null, "metadata": null, "text": "8️⃣ The Baseloader code is Relocatable because it doesn’t call any other functions (it uses only C macros that access I\u002FO memory). And because it branches to other parts of its own code through Relative Addresses, not Absolute Addresses.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_41.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_41.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_41.markups.0": { "type": "STRONG", "start": 47, "end": 82, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_41.markups.1": { "type": "STRONG", "start": 194, "end": 236, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_42": { "id": "750a57fb2d8d_42", "name": "d785", "type": "P", "href": null, "layout": null, "metadata": null, "text": "9️⃣ Baseloader reboots the Blue Pill and starts the new Bootloader", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_42.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_42.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_42.markups.0": { "type": "A", "start": 15, "end": 36, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbaseloader\u002Fbaseloader.c#L353-L361", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_42.markups.1": { "type": "STRONG", "start": 41, "end": 66, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_43": { "id": "750a57fb2d8d_43", "name": "b500", "type": "IMG", "href": null, "layout": "FULL_WIDTH", "metadata": { "type": "id", "generated": false, "id": "ImageMetadata:1*dtMrgW8drZ_7az9VnhUqhQ.gif", "typename": "ImageMetadata" }, "text": "", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "ImageMetadata:1*dtMrgW8drZ_7az9VnhUqhQ.gif": { "id": "1*dtMrgW8drZ_7az9VnhUqhQ.gif", "originalHeight": 720, "originalWidth": 2213, "focusPercentX": null, "focusPercentY": null, "alt": null, "__typename": "ImageMetadata" }, "Paragraph:750a57fb2d8d_44": { "id": "750a57fb2d8d_44", "name": "a4da", "type": "P", "href": null, "layout": null, "metadata": null, "text": "🔟 Bootloader continues to receive the firmware from MakeCode via USB. Bootloader writes the updated Application code into the Application ROM region, overwriting the old Application code.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_44.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_44.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_44.markups.0": { "type": "A", "start": 82, "end": 149, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fhf2.c#L267-L295", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_44.markups.1": { "type": "STRONG", "start": 82, "end": 150, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_45": { "id": "750a57fb2d8d_45", "name": "a9af", "type": "P", "href": null, "layout": null, "metadata": null, "text": "After flashing, Bootloader reboots the Blue Pill and starts the new Application", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_45.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_45.markups.0": { "type": "STRONG", "start": 53, "end": 79, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_46": { "id": "750a57fb2d8d_46", "name": "c6c4", "type": "P", "href": null, "layout": null, "metadata": null, "text": "As we can see, the Bootloader upgrade is made possible by the Baseloader, a special tiny program that has zero dependencies and performs only one job — overwrite the old Bootloader in ROM by the new Bootloader (also in ROM).", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_46.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_46.markups.0": { "type": "EM", "start": 152, "end": 209, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_47": { "id": "750a57fb2d8d_47", "name": "4c2c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Once again, watch how the Bootloader works together with the Baseloader to update its own code…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_48": { "id": "750a57fb2d8d_48", "name": "eeb4", "type": "IFRAME", "href": null, "layout": "OUTSET_CENTER", "metadata": null, "text": "Upgrading the WebUSB Bootloader", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_48.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "MediaResource:1d1067244bbd0dd27cae138a29c6afd6": { "id": "1d1067244bbd0dd27cae138a29c6afd6", "iframeSrc": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FAU0aQ9Vro1g%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DAU0aQ9Vro1g&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FAU0aQ9Vro1g%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube", "iframeHeight": 480, "iframeWidth": 854, "title": "Upgrading the Blue Pill WebUSB Bootloader", "__typename": "MediaResource" }, "$Paragraph:750a57fb2d8d_48.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:1d1067244bbd0dd27cae138a29c6afd6", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:750a57fb2d8d_49": { "id": "750a57fb2d8d_49", "name": "4b10", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "Remembering the Blue Pill state after restarting", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_50": { "id": "750a57fb2d8d_50", "name": "ab27", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In some of the above steps we had to restart Blue Pill in either the Bootloader, Baseloader or Application Modes. How does Blue Pill remember which mode it should switch to after restarting?", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_51": { "id": "750a57fb2d8d_51", "name": "9fdc", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Before we answer that, here’s the libopencm3 function that we should call to restart the Blue Pill…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_52": { "id": "750a57fb2d8d_52", "name": "4d12", "type": "PRE", "href": null, "layout": null, "metadata": null, "text": "scb_reset_system();", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_53": { "id": "750a57fb2d8d_53", "name": "a594", "type": "P", "href": null, "layout": null, "metadata": null, "text": "After restarting, all contents of the RAM are wiped out. ROM is non-volatile, so we could flash a value into ROM to indicate the restart mode. But on Blue Pill there’s an easier, safer way to remember the restart mode: Backup Registers.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_53.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_53.markups.0": { "type": "STRONG", "start": 219, "end": 235, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_54": { "id": "750a57fb2d8d_54", "name": "a96c", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The Blue Pill’s Backup Registers are ten 16-bit registers that we may use to store 20 bytes of data. The contents of the registers will be preserved across restarts, as long as there is power supplied to Blue Pill.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_54.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_54.markups.0": { "type": "STRONG", "start": 165, "end": 213, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_55": { "id": "750a57fb2d8d_55", "name": "7c55", "type": "IFRAME", "href": null, "layout": "INSET_CENTER", "metadata": null, "text": "From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Fbackup.c", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_55.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_55.iframe", "typename": "Iframe" }, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_55.markups.0": { "type": "A", "start": 5, "end": 96, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Fbackup.c", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "MediaResource:15e624e16ab6b9b7520733b4929c72f8": { "id": "15e624e16ab6b9b7520733b4929c72f8", "iframeSrc": "", "iframeHeight": 0, "iframeWidth": 0, "title": "backup-register.c", "__typename": "MediaResource" }, "$Paragraph:750a57fb2d8d_55.iframe": { "mediaResource": { "type": "id", "generated": false, "id": "MediaResource:15e624e16ab6b9b7520733b4929c72f8", "typename": "MediaResource" }, "__typename": "Iframe" }, "Paragraph:750a57fb2d8d_56": { "id": "750a57fb2d8d_56", "name": "5eef", "type": "P", "href": null, "layout": null, "metadata": null, "text": "In the Bootloader code above we use macro RTC_BKP_DR() to read and write the contents of the Backup Registers. Note that the RTC_BKP_DR() macro is called twice, so that we can store a 32-bit value into two 16-bit registers.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_56.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_56.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_56.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_56.markups.0": { "type": "CODE", "start": 42, "end": 54, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_56.markups.1": { "type": "CODE", "start": 125, "end": 137, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_56.markups.2": { "type": "A", "start": 7, "end": 28, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Fbackup.c", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_57": { "id": "750a57fb2d8d_57", "name": "529f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Also note the calls to libopencm3 functions pwr_disable_backup_domain_write_protect() and pwr_enable_backup_domain_write_protect(). The Backup Registers are write-protected against any possible data corruption, in case the Blue Pill is restarted and the power is unstable. We need to call pwr_disable_backup_domain_write_protect() to disable the write-protection before writing to the Backup Registers, and call pwr_enable_backup_domain_write_protect() when we’re done.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_57.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_57.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_57.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_57.markups.3", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_57.markups.0": { "type": "CODE", "start": 44, "end": 85, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_57.markups.1": { "type": "CODE", "start": 90, "end": 130, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_57.markups.2": { "type": "CODE", "start": 289, "end": 330, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_57.markups.3": { "type": "CODE", "start": 412, "end": 452, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_58": { "id": "750a57fb2d8d_58", "name": "458f", "type": "P", "href": null, "layout": null, "metadata": null, "text": "So here’s what happens when our Blue Pill restarts…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_59": { "id": "750a57fb2d8d_59", "name": "42f7", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Before restarting, the Bootloader sets the restart mode to Bootloader, Baseloader or Application Mode by calling boot_target_manifest_bootloader(), boot_target_manifest_baseloader() or boot_target_manifest_app(). These three functions store the restart mode into Backup Registers 0 and 1.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_59.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_59.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_59.markups.2", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_59.markups.3", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_59.markups.4", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_59.markups.0": { "type": "CODE", "start": 117, "end": 185, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_59.markups.1": { "type": "CODE", "start": 189, "end": 215, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_59.markups.2": { "type": "A", "start": 117, "end": 150, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Ftarget_stm32f103.c#L240-L246", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_59.markups.3": { "type": "A", "start": 152, "end": 185, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Ftarget_stm32f103.c#L232-L238", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_59.markups.4": { "type": "A", "start": 189, "end": 215, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Ftarget_stm32f103.c#L224-L230", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_60": { "id": "750a57fb2d8d_60", "name": "d9a0", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Upon restarting, bootloader_start() in our Bootloader is the function that runs first. It calls boot_target_get_startup_mode() to get the restart mode.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_60.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_60.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_60.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_60.markups.0": { "type": "CODE", "start": 21, "end": 39, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_60.markups.1": { "type": "CODE", "start": 100, "end": 130, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_60.markups.2": { "type": "A", "start": 21, "end": 57, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fbootloader.c#L157-L205", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_61": { "id": "750a57fb2d8d_61", "name": "5016", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ boot_target_get_startup_mode() in our Bootloader reads the Backup Registers 0 and 1 to get the restart mode.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_61.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_61.markups.1", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_61.markups.0": { "type": "CODE", "start": 4, "end": 34, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_61.markups.1": { "type": "A", "start": 4, "end": 52, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fcodal-libopencm3\u002Fblob\u002Fmaster\u002Fstm32\u002Fbootloader\u002Fstm32f103\u002Ftarget_stm32f103.c#L67-L103", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_62": { "id": "750a57fb2d8d_62", "name": "cfd7", "type": "H3", "href": null, "layout": null, "metadata": null, "text": "End of the Journey?", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_63": { "id": "750a57fb2d8d_63", "name": "187b", "type": "P", "href": null, "layout": null, "metadata": null, "text": "The WebUSB Bootloader for MakeCode on Blue Pill is incredibly complex — it required five articles (plus this article) to explain the topics that we have covered today…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_64": { "id": "750a57fb2d8d_64", "name": "4472", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ We implemented the WebUSB and WinUSB interfaces on Blue Pill…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_65": { "id": "750a57fb2d8d_65", "name": "14e8", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill USB Bootloader — How I fixed the USB Storage, Serial, DFU and WebUSB interfaces\nBuilding a complex composite USB device with libopencm3 that works on Windows, Mac and Linuxmedium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_65.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_65.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_65.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_65.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:750a57fb2d8d_65.markups.0": { "type": "A", "start": 0, "end": 198, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-usb-bootloader-how-i-fixed-the-usb-storage-serial-dfu-and-webusb-interfaces-36d7fe245b5c", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_65.markups.1": { "type": "STRONG", "start": 0, "end": 95, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_65.markups.2": { "type": "EM", "start": 96, "end": 188, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:750a57fb2d8d_65.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-usb-bootloader-how-i-fixed-the-usb-storage-serial-dfu-and-webusb-interfaces-36d7fe245b5c", "thumbnailImageId": "1*fjfoda1Ovwdahy09TwUkqA.png", "mediaResourceId": "1*fjfoda1Ovwdahy09TwUkqA.png", "__typename": "MixtapeMetadata" }, "Paragraph:750a57fb2d8d_66": { "id": "750a57fb2d8d_66", "name": "4e43", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ We applied memory optimisation tools and techniques to squeeze the Bootloader into Blue Pill…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_67": { "id": "750a57fb2d8d_67", "name": "7c98", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill — Analyse and Optimise Your RAM and ROM\nTips and tools to prevent Blue Pill Bloatmedium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_67.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_67.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_67.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_67.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:750a57fb2d8d_67.markups.0": { "type": "A", "start": 0, "end": 107, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-analyse-and-optimise-your-ram-and-rom-9fc805e16ed7", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_67.markups.1": { "type": "STRONG", "start": 0, "end": 55, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_67.markups.2": { "type": "EM", "start": 56, "end": 97, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:750a57fb2d8d_67.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-analyse-and-optimise-your-ram-and-rom-9fc805e16ed7", "thumbnailImageId": "1*sqHQVxWsmoA7_PW7j9_GJQ.png", "mediaResourceId": "1*sqHQVxWsmoA7_PW7j9_GJQ.png", "__typename": "MixtapeMetadata" }, "Paragraph:750a57fb2d8d_68": { "id": "750a57fb2d8d_68", "name": "38d8", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ We created nano-float, an optimised version of the standard math library…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_69": { "id": "750a57fb2d8d_69", "name": "f988", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill — Shrink your math libraries with Qfplib\nFloating-point math libraries can bloat your Blue Pill code. Here’s one way to fix thatmedium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_69.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_69.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_69.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_69.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:750a57fb2d8d_69.markups.0": { "type": "A", "start": 0, "end": 154, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-shrink-your-math-libraries-with-qfplib-55093aab163a", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_69.markups.1": { "type": "STRONG", "start": 0, "end": 56, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_69.markups.2": { "type": "EM", "start": 57, "end": 144, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:750a57fb2d8d_69.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-shrink-your-math-libraries-with-qfplib-55093aab163a", "thumbnailImageId": "1*Vxgr9fS45NRgtYPmDzkOgg.png", "mediaResourceId": "1*Vxgr9fS45NRgtYPmDzkOgg.png", "__typename": "MixtapeMetadata" }, "Paragraph:750a57fb2d8d_70": { "id": "750a57fb2d8d_70", "name": "60d5", "type": "P", "href": null, "layout": null, "metadata": null, "text": "4️⃣ And we verified the accuracy of the nano-float library through Unit Testing…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_71": { "id": "750a57fb2d8d_71", "name": "f8f6", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill — Unit Testing with Qemu Blue Pill Emulator\nUnit Testing can help to stop bugs before they pollute the entire IoT chainmedium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_71.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_71.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_71.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_71.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:750a57fb2d8d_71.markups.0": { "type": "A", "start": 0, "end": 145, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_71.markups.1": { "type": "STRONG", "start": 0, "end": 59, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_71.markups.2": { "type": "EM", "start": 60, "end": 135, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:750a57fb2d8d_71.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-unit-testing-with-qemu-blue-pill-emulator-9d88002a68b2", "thumbnailImageId": "1*M3Y_T_EI28gPHHBXGxTmjw.png", "mediaResourceId": "1*M3Y_T_EI28gPHHBXGxTmjw.png", "__typename": "MixtapeMetadata" }, "Paragraph:750a57fb2d8d_72": { "id": "750a57fb2d8d_72", "name": "1c37", "type": "P", "href": null, "layout": null, "metadata": null, "text": "5️⃣ Finally we combined all the topics from the above articles into a complex Bootloader…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_73": { "id": "750a57fb2d8d_73", "name": "e8e2", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "STM32 Blue Pill — Dissecting the WebUSB Bootloader for MakeCode\nHow the MakeCode Bootloader for Blue Pill implements flashing over WebUSBmedium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_73.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_73.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_73.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_73.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:750a57fb2d8d_73.markups.0": { "type": "A", "start": 0, "end": 147, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_73.markups.1": { "type": "STRONG", "start": 0, "end": 63, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_73.markups.2": { "type": "EM", "start": 64, "end": 137, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:750a57fb2d8d_73.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89", "thumbnailImageId": "1*0P7BkmUox48Rak_cta48QA.png", "mediaResourceId": "1*0P7BkmUox48Rak_cta48QA.png", "__typename": "MixtapeMetadata" }, "Paragraph:750a57fb2d8d_74": { "id": "750a57fb2d8d_74", "name": "054e", "type": "P", "href": null, "layout": null, "metadata": null, "text": "We have done so many incredible things with Blue Pill… Is there a limit? Nope we haven’t hit the limit yet. So why don’t we create better development tools to let everyone enjoy the power of Blue Pill?", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_74.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_74.markups.0": { "type": "EM", "start": 108, "end": 201, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_75": { "id": "750a57fb2d8d_75", "name": "49a8", "type": "P", "href": null, "layout": null, "metadata": null, "text": "A good Bootloader is essential for a great programming experience on Blue Pill, and we have come a long way since the first Blue Pill Bootloader…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_76": { "id": "750a57fb2d8d_76", "name": "0a5a", "type": "P", "href": null, "layout": null, "metadata": null, "text": "1️⃣ Blue Pill Factory-Installed Bootloader: Needs the UART pins to be connected before flashing. No USB support.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_76.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_76.markups.0": { "type": "A", "start": 4, "end": 42, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fwww.st.com\u002Fcontent\u002Fccc\u002Fresource\u002Ftechnical\u002Fdocument\u002Fapplication_note\u002F51\u002F5f\u002F03\u002F1e\u002Fbd\u002F9b\u002F45\u002Fbe\u002FCD00264342.pdf\u002Ffiles\u002FCD00264342.pdf\u002Fjcr:content\u002Ftranslations\u002Fen.CD00264342.pdf", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_77": { "id": "750a57fb2d8d_77", "name": "8d95", "type": "P", "href": null, "layout": null, "metadata": null, "text": "2️⃣ Blue Pill Arduino Bootloader: Works with USB. Flashing works only with Arduino IDE client.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_77.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_77.markups.0": { "type": "A", "start": 4, "end": 32, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fgithub.com\u002Frogerclarkmelbourne\u002FSTM32duino-bootloader", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_78": { "id": "750a57fb2d8d_78", "name": "d648", "type": "P", "href": null, "layout": null, "metadata": null, "text": "3️⃣ Blue Pill MakeCode Bootloader: Works with Chrome and other WebUSB-compatible web browsers. Allows Bootloader to be reflashed via WebUSB. Probably the best Blue Pill Bootloader to date!", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_78.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_78.markups.0": { "type": "A", "start": 4, "end": 33, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fstm32-blue-pill-dissecting-the-webusb-bootloader-for-makecode-b7f1a1508e89?source=friends_link&sk=661984e9775f991a97e5747a67214b60", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_79": { "id": "750a57fb2d8d_79", "name": "24cb", "type": "P", "href": null, "layout": null, "metadata": null, "text": "It’s been a long journey — join me if you’re keen to complete the Blue Pill port of MakeCode! So that we’ll finally have the perfect platform to build and test IoT prototypes.", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_79.markups.0", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_79.markups.0": { "type": "STRONG", "start": 27, "end": 93, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_80": { "id": "750a57fb2d8d_80", "name": "e56d", "type": "P", "href": null, "layout": null, "metadata": null, "text": "There are too many topics to cover, so I kept a log of all things that I have tried (even the failed ones)…", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "Paragraph:750a57fb2d8d_81": { "id": "750a57fb2d8d_81", "name": "a7f1", "type": "MIXTAPE_EMBED", "href": null, "layout": null, "metadata": null, "text": "[Work In Progress] STM32 Blue Pill Visual Programming with MakeCode, CODAL and libopencm3\nNote: This work-in-progress document describes an incomplete implementation of STM32 Blue Pill visual programming. The…medium.com", "hasDropCap": null, "dropCapImage": null, "markups": [{ "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_81.markups.0", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_81.markups.1", "typename": "Markup" }, { "type": "id", "generated": true, "id": "Paragraph:750a57fb2d8d_81.markups.2", "typename": "Markup" }], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": { "type": "id", "generated": true, "id": "$Paragraph:750a57fb2d8d_81.mixtapeMetadata", "typename": "MixtapeMetadata" } }, "Paragraph:750a57fb2d8d_81.markups.0": { "type": "A", "start": 0, "end": 219, "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fwork-in-progress-stm32-blue-pill-visual-programming-with-makecode-codal-and-libopencm3-422d308f252e", "anchorType": "LINK", "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_81.markups.1": { "type": "STRONG", "start": 0, "end": 89, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "Paragraph:750a57fb2d8d_81.markups.2": { "type": "EM", "start": 90, "end": 209, "href": null, "anchorType": null, "userId": null, "linkMetadata": null, "__typename": "Markup" }, "$Paragraph:750a57fb2d8d_81.mixtapeMetadata": { "href": "https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194111\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fwork-in-progress-stm32-blue-pill-visual-programming-with-makecode-codal-and-libopencm3-422d308f252e", "thumbnailImageId": "1*nRCSpyqsYtpaJSNGwD13bQ.jpeg", "mediaResourceId": "1*nRCSpyqsYtpaJSNGwD13bQ.jpeg", "__typename": "MixtapeMetadata" }, "Paragraph:750a57fb2d8d_82": { "id": "750a57fb2d8d_82", "name": "b151", "type": "P", "href": null, "layout": null, "metadata": null, "text": "Look forward to having you onboard the Blue Pill MakeCode journey! :-)", "hasDropCap": null, "dropCapImage": null, "markups": [], "__typename": "Paragraph", "iframe": null, "mixtapeMetadata": null }, "User:87a61f1520ab": { "id": "87a61f1520ab", "__typename": "User" }, "Collection:721b17443fd5": { "creator": { "type": "id", "generated": false, "id": "User:87a61f1520ab", "typename": "User" }, "viewerIsEditor": false, "__typename": "Collection", "name": "Coinmonks", "avatar": { "type": "id", "generated": false, "id": "ImageMetadata:1*-_aiJHzJPz655N7iSSrLrQ.png", "typename": "ImageMetadata" }, "id": "721b17443fd5", "domain": null, "slug": "coinmonks" }, "Tag:programming": { "id": "programming", "displayTitle": "Programming", "__typename": "Tag" }, "Tag:gadgets": { "id": "gadgets", "displayTitle": "Gadgets", "__typename": "Tag" }, "Tag:stm32": { "id": "stm32", "displayTitle": "Stm32", "__typename": "Tag" }, "ImageMetadata:1*-_aiJHzJPz655N7iSSrLrQ.png": { "id": "1*-_aiJHzJPz655N7iSSrLrQ.png", "__typename": "ImageMetadata" }, "$Post:63398ef5eb76.previewContent": { "subtitle": "How does the WebUSB Bootloader upgrade itself? With a special Baseloader", "__typename": "PreviewContent" } }</script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/manifest.1a56bbb8.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/vendors~main.9c8dc7d0.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/main.c5c932e3.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/vendors~screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tribute~scre~3e410f11.faa5af01.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tribute~screen.post~~73c4bb05.82cfb8d6.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/screen.post~screen.post.amp~screen.post.series~screen.profile~screen.sequence.library~screen.sequenc~036c6b37.3e471c5d.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tick~screen.landingp~ed90ee39.3c8733a8.chunk.js"></script>
  <script
    src="https://web.archive.org/web/20191204194111js_/https://cdn-client.medium.com/lite/static/js/screen.post.1aa42b57.chunk.js"></script>
  <script>window.main();</script>
</body>

</html>
<!--
     FILE ARCHIVED ON 19:41:11 Dec 04, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 01:30:24 Feb 23, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 300.993
  exclusion.robots: 0.152
  exclusion.robots.policy: 0.145
  RedisCDXSource: 19.97
  esindex: 0.007
  LoadShardBlock: 248.701 (3)
  PetaboxLoader3.datanode: 197.736 (4)
  CDXLines.iter: 28.85 (3)
  load_resource: 49.069
  PetaboxLoader3.resolve: 21.641
-->