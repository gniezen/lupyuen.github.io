<!doctype html>
<html lang="en">

<head>
  <script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
  <script
    type="text/javascript">window.addEventListener('DOMContentLoaded', function () { var v = archive_analytics.values; v.service = 'wb'; v.server_name = 'wwwb-app104.us.archive.org'; v.server_ms = 267; archive_analytics.send_pageview({}); });</script>
  <script type="text/javascript" src="/_static/js/playback.bundle.js?v=bQvHU8mx" charset="utf-8"></script>
  <script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
  <script type="text/javascript">
    __wm.init("https://web.archive.org/web");
    __wm.wombat("https://medium.com/@ly.lee/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9", "20200124105013", "https://web.archive.org/", "web", "/_static/",
      "1579863013");
  </script>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <!-- End Wayback Rewrite JS Include -->
  <script>!function (c, f) { var t, o, i, e = [], r = { passive: !0, capture: !0 }, n = new Date, a = "pointerup", u = "pointercancel"; function p(n, e) { t || (t = e, o = n, i = new Date, w(f), s()) } function s() { 0 <= o && o < i - n && (e.forEach(function (n) { n(o, t) }), e = []) } function l(n) { if (n.cancelable) { var e = (1e12 < n.timeStamp ? new Date : performance.now()) - n.timeStamp; "pointerdown" == n.type ? function (n, e) { function t() { p(n, e), i() } function o() { i() } function i() { f(a, t, r), f(u, o, r) } c(a, t, r), c(u, o, r) }(e, n) : p(e, n) } } function w(e) { ["click", "mousedown", "keydown", "touchstart", "pointerdown"].forEach(function (n) { e(n, l, r) }) } w(c), self.perfMetrics = self.perfMetrics || {}, self.perfMetrics.onFirstInputDelay = function (n) { e.push(n), s() } }(addEventListener, removeEventListener)</script>
  <title data-rh="true">Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" name="twitter:app:name:iphone" content="Medium" />
  <meta data-rh="true" name="twitter:app:id:iphone" content="828256236" />
  <meta data-rh="true" property="al:ios:app_name" content="Medium" />
  <meta data-rh="true" property="al:ios:app_store_id" content="828256236" />
  <meta data-rh="true" property="al:android:package" content="com.medium.reader" />
  <meta data-rh="true" property="fb:app_id" content="542599432471018" />
  <meta data-rh="true" property="og:site_name" content="Medium" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2020-01-23T10:39:37.612Z" />
  <meta data-rh="true" name="title" content="Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi" />
  <meta data-rh="true" property="og:title" content="Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi" />
  <meta data-rh="true" property="twitter:title" content="Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi" />
  <meta data-rh="true" name="twitter:site" content="@Medium" />
  <meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/4b9ac2d093a9" />
  <meta data-rh="true" property="al:android:url" content="medium://p/4b9ac2d093a9" />
  <meta data-rh="true" property="al:ios:url" content="medium://p/4b9ac2d093a9" />
  <meta data-rh="true" property="al:android:app_name" content="Medium" />
  <meta data-rh="true" name="description"
    content="Using only a Raspberry Pi, we can debug the firmware on PineTime Smart Watch: Step into the flashed program line by line, set a breakpoint to pause execution at a line, inspect variables at runtime…" />
  <meta data-rh="true" property="og:description"
    content="Using only a Raspberry Pi, we may debug the firmware on PineTime Smart Watch: Step into the flashed program line by line, set a breakpoint…" />
  <meta data-rh="true" property="twitter:description"
    content="Using only a Raspberry Pi, we may debug the firmware on PineTime Smart Watch: Step into the flashed program line by line, set a breakpoint…" />
  <meta data-rh="true" property="og:url"
    content="https://web.archive.org/web/20200124105013/https://medium.com/@ly.lee/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9" />
  <meta data-rh="true" property="al:web:url"
    content="https://medium.com/@ly.lee/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9" />
  <meta data-rh="true" property="og:image"
    content="https://web.archive.org/web/20200124105013im_/https://miro.medium.com/max/1200/1*VYiiT3x-WhL7EaIJAIw-iw.png" />
  <meta data-rh="true" name="twitter:image:src"
    content="https://miro.medium.com/max/1200/1*VYiiT3x-WhL7EaIJAIw-iw.png" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" property="article:author" content="https://medium.com/@ly.lee" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="9 min read" />
  <meta data-rh="true" name="parsely-post-id" content="4b9ac2d093a9" />
  <link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium"
    href="/web/20200124105013/https://medium.com/osd.xml" />
  <link data-rh="true" rel="apple-touch-icon" sizes="152x152"
    href="https://web.archive.org/web/20200124105013im_/https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="120x120"
    href="https://web.archive.org/web/20200124105013im_/https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="76x76"
    href="https://web.archive.org/web/20200124105013im_/https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="60x60"
    href="https://web.archive.org/web/20200124105013im_/https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="mask-icon"
    href="https://web.archive.org/web/20200124105013im_/https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg"
    color="#171717" />
  <link data-rh="true" rel="icon"
    href="https://web.archive.org/web/20200124105013im_/https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" />
  <link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css"
    href="https://web.archive.org/web/20200124105013cs_/https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css" />
  <link data-rh="true" rel="author" href="https://medium.com/@ly.lee" />
  <link data-rh="true" rel="canonical"
    href="https://web.archive.org/web/20200124105013/https://medium.com/@ly.lee/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9" />
  <link data-rh="true" rel="alternate"
    href="https://web.archive.org/web/20200124105013/android-app://com.medium.reader/https/medium.com/p/4b9ac2d093a9" />
  <script data-rh="true"
    type="application/ld+json">{"@context":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttp:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*VYiiT3x-WhL7EaIJAIw-iw.png"],"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fdebug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9","dateCreated":"2020-01-22T17:31:26.207Z","datePublished":"2020-01-22T17:31:26.207Z","dateModified":"2020-01-23T10:39:38.953Z","headline":"Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi","name":"Debug Rust+Mynewt Firmware for PineTime on Raspberry Pi","description":"Using only a Raspberry Pi, we can debug the firmware on PineTime Smart Watch: Step into the flashed program line by line, set a breakpoint to pause execution at a line, inspect variables at runtime…","identifier":"4b9ac2d093a9","keywords":["Lite:true","Tag:Pinetime","Tag:Vscode","Tag:Nrf52","Tag:Internet of Things","Tag:Raspberry Pi","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:0"],"author":{"@type":"Person","name":"Lup Yuen Lee 李立源","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee"},"creator":["Lup Yuen Lee 李立源"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttps:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20200124105013\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fdebug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9"}</script>
  <script data-rh="true">(function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://web.archive.org/web/20200124105013/https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-24232453-2', 'auto');
    ga('send', 'pageview');</script>
  <link rel="preload" href="https://web.archive.org/web/20200124105013/https://cdn.optimizely.com/js/16180790160.js"
    as="script">

<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
<link rel="stylesheet" type="text/css" href="../dark.css">
<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->

</head>

<body>

  <div id="root">
    <div class="a b c">
      <article>
        <section class="cj ck cl cm ak cn ce n co"></section><span class="r"></span>
        <div>
          <div class="cp u cq cr cs ct"></div>
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <div>
                  <div id="7897" class="da db dc bk dd b de df dg dh di dj dk dl dm dn do">
                    <h1 class="dd b de dp dg dq di dr dk ds dm dt dc">Debug Rust+Mynewt Firmware for PineTime on
                      Raspberry Pi</h1>
                  </div>
                  <div class="du">
                    <div class="n dv dw dx dy">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="/web/20200124105013/https://medium.com/@ly.lee?source=post_page-----4b9ac2d093a9----------------------">
                            <div class="dz ea eb">
                              <div class="bs n ec o p cp ed ee ef eg eh ct"></div><img alt="Lup Yuen Lee 李立源" class="r ei eb ea"
                                src="https://web.archive.org/web/20200124105013im_/https://miro.medium.com/fit/c/96/96/1*KGohS3sQaUnr58gc0BIfoQ.jpeg"
                                width="48" height="48" />
                            </div>
                          </a></div>
                        <div class="ej ak r">
                          <div class="n">
                            <div style="flex:1"><span class="bj b bk bl bm bn r dc q">
                                <div class="ek n o el"><span class="bj em en bl eo ep eq er es et dc"><a
                                      class="at au av aw ax ay az ba bb bc eu bf bg bh bi" rel="noopener"
                                      href="/web/20200124105013/https://medium.com/@ly.lee?source=post_page-----4b9ac2d093a9----------------------">Lup
                                      Yuen Lee 李立源</a></span>
                                  <div class="ev r ar h"><button
                                      class="ew dc q by ex ey ez fa bc bh fb fc fd fe ff fg cb bj b bk fh fi bn cc cd ce cf cg bf">Follow</button>
                                  </div>
                                </div>
                              </span></div>
                          </div><span class="bj b bk bl bm bn r bo bp"><span class="bj em en bl eo ep eq er es et bo">
                              <div><a class="at au av aw ax ay az ba bb bc eu bf bg bh bi" rel="noopener"
                                  href="/web/20200124105013/https://medium.com/@ly.lee/debug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9?source=post_page-----4b9ac2d093a9----------------------">Jan
                                  22</a> <!-- -->·
                                <!-- -->
                                <!-- -->9
                                <!-- --> min read
                              </div>
                            </span></span>
                        </div>
                      </div>
                      <div class="n fj fk fl fm fn fo fp fq ab">
                        <div class="n o">
                          <div class="fr r ar"><a
                              href="//web.archive.org/web/20200124105013/https://medium.com/p/4b9ac2d093a9/share/twitter?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener nofollow"></a></div>
                          <div class="fr r ar"><a
                              href="//web.archive.org/web/20200124105013/https://medium.com/p/4b9ac2d093a9/share/facebook?source=post_actions_header---------------------------"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                              rel="noopener nofollow"></a></div>
                          <div class="fs r ao"><a
                              href="https://web.archive.org/web/20200124105013/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fdebug-rust-mynewt-firmware-for-pinetime-on-raspberry-pi-4b9ac2d093a9&amp;source=post_actions_header--------------------------bookmark_sidebar-"
                              class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"></a></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="a6a4" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Using only a Raspberry Pi, we can
                  debug the firmware on <a class="at cg gh gi gj gk" target="_blank" rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/build-and-flash-rust-mynewt-firmware-for-pinetime-smart-watch-5e14259c55?source=friends_link&amp;sk=150b2a73b84144e5ef25b985e65aebe9">PineTime
                    Smart Watch</a>: Step into the flashed program line by line, set a breakpoint to pause execution at
                  a line, inspect variables at runtime, … Just like the Embedded Pros!</p>
                <p id="b673" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">It’s a great way to learn how
                  real IoT gadgets are created… At a fraction of the cost of professional embedded tools and
                  workstations!</p>
                <p id="d422" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Here are the steps to configure a
                  Raspberry Pi (1, 2, 3 or 4, with 1 GB RAM or more) for debugging the Rust+Mynewt Firmware for
                  PineTime…</p>
              </div>
            </div>
            <div class="gl ak">
              <figure class="gm gn go gp gq gl ak paragraph-image">

                <p><img src="https://lupyuen.github.io/images/legacy/c1.jpeg" /></p>

                <p><em>Debugging PineTime Firmware with VSCode on
                  Raspberry Pi 4. Requires under 600 MB of RAM.</em></p>
              </figure>
            </div>
          </section>
          <hr class="hi em hj hk hl hf hm hn ho hp hq" />
          <section class="cu cv cw cx cy">
            <div class="gl">
              <div class="n p">
                <div class="hr hs ht hu hv hw ag hx ah hy aj ak">
                  <figure class="gm gn go gp gq gl ia ib paragraph-image">

                    <p><img src="https://lupyuen.github.io/images/legacy/c2.jpeg" /></p>

                    <p><em>Raspberry Pi connected to PineTime for
                      flashing and debugging firmware</em></p>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <h1 id="0ebb" class="ig ih dc bk bj ii de ij dg ik il im in io ip iq ir">Build and Flash Firmware to
                  PineTime</h1>
                <p id="bf4a" class="ft fu dc bk fv b fw is fy it ga iu gc iv ge iw gg">First we prepare PineTime for
                  development by erasing the demo firmware and replacing it by our own firmware. This only needs to be
                  done once.</p>
                <p id="eaf3" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Follow the instructions in the
                  article <em class="ix">“</em><a class="at cg gh gi gj gk" target="_blank" rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/build-and-flash-rust-mynewt-firmware-for-pinetime-smart-watch-5e14259c55?source=friends_link&amp;sk=150b2a73b84144e5ef25b985e65aebe9"><em
                      class="ix">Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch</em></a><em
                    class="ix">”</em> under the following sections…</p>
                <ol class="">
                  <li id="785c" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg iy iz ja"><strong
                      class="fv jb"><em class="ix">“Connect PineTime to Raspberry Pi”</em></strong></li>
                  <li id="2439" class="ft fu dc bk fv b fw jc fy jd ga je gc jf ge jg gg iy iz ja"><strong
                      class="fv jb"><em class="ix">“Remove PineTime Flash Protection”</em></strong></li>
                </ol>
                <p id="fe72" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong class="fv jb">If you have
                    installed the PineTime tools before 23 Jan 2020, please redo the above steps to get the latest
                    updates</strong></p>
                <p id="8826" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">🛈<em class="ix"> </em><a
                    href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/41fffaddade277d27c48697bca21d837"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">What is “flash
                      memory” / “flashing” / “firmware”? Read this</em></a></p>
                <p id="10e0" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">1️⃣ Launch VSCode by clicking the
                  <strong class="fv jb">Raspberry Pi Menu </strong>(top left corner)<strong class="fv jb"> → Programming
                    → Code OSS Headmelted</strong></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c3.jpeg" /></p>

                  <p><em>Launching VSCode on Raspberry Pi</em></p>
                </figure>
                <p id="222a" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">In VSCode, click <code
                    class="gx jj jk jl jm b">File → Open Folder</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c4.jpeg" /></p>

                </figure>
                <p id="1d36" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Under <code
                    class="gx jj jk jl jm b">Home</code>, select the folder <code
                    class="gx jj jk jl jm b">pinetime-rust-mynewt</code> and click <code
                    class="gx jj jk jl jm b">OK</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c5.jpeg" /></p>

                </figure>
                <p id="f023" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">When prompted to open the
                  workspace, click <code class="gx jj jk jl jm b">Open Workspace</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c6.jpeg" /></p>

                </figure>
                <p id="4eb4" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">When prompted to install
                  Extension Recommendations, click <code class="gx jj jk jl jm b">Install All</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c7.jpeg" /></p>

                </figure>
                <p id="3f7e" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Ignore the message <code
                    class="gx jj jk jl jm b">Unable To Watch For File Changes</code>. Close the message when it appears.
                </p>
                <p id="8819" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">2️⃣ At the lower left corner,
                  there is a panel <code class="gx jj jk jl jm b">Task Runner</code>. Click the panel to display the
                  tasks.</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c8.jpeg" /></p>

                </figure>
                <p id="c24d" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">In the Task Runner, click <code
                    class="gx jj jk jl jm b">[1] Build Bootloader</code></p>
                <p id="87e4" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">When the Terminal Panel appears,
                  right-click the <code class="gx jj jk jl jm b">Terminal</code> tab, select <code
                    class="gx jj jk jl jm b">Move Panel Right</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c9.jpeg" /></p>

                </figure>
                <p id="fb2d" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">After the building the
                  Bootloader, we should see <code class="gx jj jk jl jm b">Done</code>…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c10.jpeg" /></p>

                </figure>
                <p id="9464" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Ignore the message <code
                    class="gx jj jk jl jm b">There Are Task Errors</code></p>
                <p id="b1f4" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">🛈 <a
                    href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/93ba71e0ae5e746e7a68e4513e0a54d8"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">What is a
                      Bootloader? Read this</em></a></p>
                <p id="b818" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">3️⃣ In the Task Runner, click
                  <code class="gx jj jk jl jm b">[2] Build Application</code></p>
                <p id="dbc6" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">After the building the
                  Application, we should see <code class="gx jj jk jl jm b">Done</code>…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c11.jpeg" /></p>

                </figure>
                <p id="b6a1" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">If you see the message <code
                    class="gx jj jk jl jm b">Undefined Reference To Main</code>, click <code
                    class="gx jj jk jl jm b">[2] Build Application</code> again and it should succeed.</p>
                <p id="d2f4" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">4️⃣ In the Task Runner, click
                  <code class="gx jj jk jl jm b">[3] Image Application</code></p>
                <p id="3b7c" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">After the creating the Firmware
                  Image, we should see <code class="gx jj jk jl jm b">Done</code>…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c12.jpeg" /></p>

                </figure>
                <p id="99f7" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">5️⃣ In the Task Runner, click
                  <code class="gx jj jk jl jm b">[4] Flash Bootloader</code></p>
                <p id="8f0b" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">After flashing the Bootloader
                  Firmware to PineTime, we should see <code class="gx jj jk jl jm b">Done</code>…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c13.jpeg" /></p>

                </figure>
                <p id="6789" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">6️⃣ In the Task Runner, click
                  <code class="gx jj jk jl jm b">[5] Flash Application</code></p>
                <p id="e1de" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">After the flashing the
                  Application Firmware to PineTime, we should see <code class="gx jj jk jl jm b">Done</code>…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c14.jpeg" /></p>

                </figure>
                <p id="b9da" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">7️⃣ Our Rust application starts
                  running on PineTime…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c15.jpeg" /></p>

                  <p><em>Our Rust Application rendering graphics and
                    text to the PineTime display</em></p>
                </figure>
                <p id="5015" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Here are the debugging messages
                  generated by our application…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c16.jpeg" /></p>

                </figure>
                <p id="c7e6" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">8️⃣ Click the <strong
                    class="fv jb">Trash</strong> icon 🗑 near the top right to terminate the application. If we click
                  the <strong class="fv jb">Close</strong> icon ❌ instead of the Trash icon, the next flash or debug
                  command will fail.</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c17.jpeg" /></p>

                </figure>
                <p id="69cc" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Here’s a walkthrough of the steps
                  to Build and Flash Firmware to PineTime…</p>
              </div>
            </div>
            <div class="gl ak">
              <figure class="gm gn go gp gq gl">
                <div class="gw r dz">
                  <div class="km r"><iframe
                      src="https://web.archive.org/web/20200124105013if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FxKAxQNMXlKY%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DxKAxQNMXlKY&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FxKAxQNMXlKY%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                      allowfullscreen="" frameborder="0" height="480" width="854"
                      title="Build and Flash PineTime Firmware on Raspberry Pi with VSCode" class="cp t u gt ak"
                      scrolling="auto"></iframe></div>
                </div>
                <p><em>Building and Flashing Firmware to PineTime with
                  VSCode</em></p>
              </figure>
            </div>
          </section>
          <hr class="hi em hj hk hl hf hm hn ho hp hq" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <h1 id="aac8" class="ig ih dc bk bj ii de kn dg ko il kp in kq ip kr ir">Debug PineTime Firmware</h1>
                <p id="81bf" class="ft fu dc bk fv b fw is fy it ga iu gc iv ge iw gg">Now that the Bootloader Firmware
                  and Application Firmware have been flashed, we are ready to debug the firmware on PineTime…</p>
                <p id="6e02" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">1️⃣ In VSCode, edit the Rust
                  application located at <code
                    class="gx jj jk jl jm b"><a href="https://web.archive.org/web/20200124105013/https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/display.rs" class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">rust/app/src/display.rs</a></code>
                </p>
              </div>
            </div>
            <div class="gl">
              <div class="n p">
                <div class="hr hs ht hu hv hw ag hx ah hy aj ak">
                  <figure class="gm gn go gp gq gl ia ib paragraph-image">

                    <p><img src="https://lupyuen.github.io/images/legacy/c18.jpeg" /></p>

                    <p><em>Editing the Rust application in VSCode
                    </em></p>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <p id="f593" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">This is a simple function <code
                    class="gx jj jk jl jm b">test_display</code> that’s called by our Rust Application to render some
                  text and graphics to the PineTime display. <a
                    href="https://web.archive.org/web/20200124105013/https://doc.rust-lang.org/book/title-page.html"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">Here’s a good
                      introduction to Rust programming</em></a></p>
                <p id="8767" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Change <code
                    class="gx jj jk jl jm b">I AM PINETIME</code> to your own message</p>
                <p id="8a9c" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Click <code
                    class="gx jj jk jl jm b">File → Save</code> (or <code class="gx jj jk jl jm b">Ctrl-S</code>) to
                  save the file</p>
                <p id="5a0e" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">2️⃣ In the Task Runner, click
                  <code class="gx jj jk jl jm b">[2] Build Application</code></p>
                <p id="11c6" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Wait for the Application to be
                  built…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c19.jpeg" /></p>

                </figure>
                <p id="677f" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">If you see the message <code
                    class="gx jj jk jl jm b">Undefined Reference To Main</code>, click <code
                    class="gx jj jk jl jm b">[2] Build Application</code> again and it should succeed.</p>
                <p id="c060" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">3️⃣ In the Rust function <code
                    class="gx jj jk jl jm b">test_display</code>, look for the first line that calls the function <code
                    class="gx jj jk jl jm b">draw_to_display</code> (Line 43)</p>
                <p id="f04e" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Click the empty space to the left
                  of Line 43. A red dot should appear like this…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c20.jpeg" /></p>

                </figure>
                <p id="a1bb" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">We have set a <strong
                    class="fv jb">Breakpoint</strong>. When PineTime executes the firmware to that point, it will pause
                  the execution.</p>
                <p id="8543" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">In a while we’ll discover for
                  ourselves how the PineTime firmware runs: <br />Reset Handler → <code
                    class="gx jj jk jl jm b">main</code> Function → <code class="gx jj jk jl jm b">test_display</code>
                  Function</p>
                <p id="c9df" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">4️⃣ Click <code
                    class="gx jj jk jl jm b">Debug → Start Debugging</code> or press <code
                    class="gx jj jk jl jm b">F5</code></p>
                <p id="1d7d" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">This starts the VSCode Debugger
                  and automatically flashes our updated firmware to PineTime.</p>
                <p id="88a9" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Click <code
                    class="gx jj jk jl jm b">View → Output</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c21.jpeg" /></p>

                </figure>
                <p id="b8fc" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">In the Output Panel, select <code
                    class="gx jj jk jl jm b">Adapter Output</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c22.jpeg" /></p>

                </figure>
                <p id="cb5c" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">5️⃣ The program has paused at
                  first line of code in our firmware, the <strong class="fv jb">Reset Handler</strong>.</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c23.jpeg" /></p>

                </figure>
                <p id="e5b1" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">In the Debug Toolbar, click <code
                    class="gx jj jk jl jm b">Continue</code> or press <code class="gx jj jk jl jm b">F5</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c24.jpeg" /></p>

                </figure>
                <p id="bfbd" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">🛈<em class="ix"> </em><a
                    href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/b0b7782f21330e292ea65b9c875bd9a7"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">What’s a Reset
                      Handler? Read this</em></a></p>
                <p id="49a7" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">6️⃣ The debugger now pauses at
                  the first line of the <code class="gx jj jk jl jm b">main</code> function that’s defined in <code
                    class="gx jj jk jl jm b"><a href="https://web.archive.org/web/20200124105013/https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/lib.rs" class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">rust/app/src/lib.rs</a></code>
                </p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c25.jpeg" /></p>

                </figure>
                <p id="ff3b" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">This is the first line of Rust
                  code in our Rust Application, which will call <code class="gx jj jk jl jm b">test_display</code> in a
                  while.</p>
                <p id="beab" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">In the Debug Toolbar, click <code
                    class="gx jj jk jl jm b">Continue</code> or press <code class="gx jj jk jl jm b">F5</code></p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c26.jpeg" /></p>

                </figure>
                <p id="a16d" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">🛈<em class="ix"> </em><a
                    href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/5360769a2d92ec50d988cce92622abff"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">What’s a
                    </em></a><code
                    class="gx jj jk jl jm b"><a href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/5360769a2d92ec50d988cce92622abff" class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">main</a></code><a
                    href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/5360769a2d92ec50d988cce92622abff"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix"> function? Read
                      this</em></a></p>
                <p id="9e0e" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">7️⃣ The debugger pauses at the
                  Breakpoint that we have set earlier…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c27.jpeg" /></p>

                </figure>
                <p id="a2c8" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Now we may inspect the Rust
                  variables live, as our firmware runs.</p>
                <p id="5e13" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Expand the <strong
                    class="fv jb">Variables Panel</strong> at top left to inspect the Rust variables for our graphical
                  objects: <code class="gx jj jk jl jm b">background</code>, <code
                    class="gx jj jk jl jm b">circle</code>, <code class="gx jj jk jl jm b">square</code>, <code
                    class="gx jj jk jl jm b">text</code>. We can see the screen coordinates that have been set for each
                  graphical object, as well as the text string.</p>
                <p id="7939" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Below that, the <strong
                    class="fv jb">Call Stack Panel</strong> shows the callers of this function. Click on a caller to see
                  the calling location.</p>
                <p id="f201" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong class="fv jb">Output
                    Panel → Adapter Output </strong>at right shows the debugging messages generated by our Application…
                </p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c28.jpeg" /></p>

                </figure>
                <p id="f535" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">🛈 <a
                    href="https://web.archive.org/web/20200124105013/https://gist.github.com/lupyuen/fc9321c2338e6fdda8827aff7236c9fb"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">Why are the strings
                      mashed together? Read this</em></a></p>
                <p id="3ddc" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">8️⃣ Here are the other buttons in
                  the Debug Toolbar…</p>
                <figure class="gm gn go gp gq gl cl cm paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/c29.jpeg" /></p>

                  <p><em>Debug Toolbar</em></p>
                </figure>
                <p id="b882" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong
                    class="fv jb">Continue</strong>: Continue execution of our firmware until the next Breakpoint</p>
                <p id="fa3a" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong class="fv jb">Step
                    Over</strong>: Step over the code line by line. The variables will magically reveal themselves one
                  by one after stepping over each line of code! Here’s how it works… <a
                    href="https://web.archive.org/web/20200124105013/https://vt.tiktok.com/F8ksVR/"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">抖音视频</a></p>
              </div>
            </div>
            <div class="gl">
              <div class="n p">
                <div class="hr hs ht hu hv hw ag hx ah hy aj ak">
                  <figure class="gm gn go gp gq gl">
                    <div class="gw r dz">
                      <div class="ll r"><iframe
                          src="https://web.archive.org/web/20200124105013if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FDXL6C5ky0nE%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DDXL6C5ky0nE&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FDXL6C5ky0nE%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="640"
                          title="PineTime Debugger: Step Over" class="cp t u gt ak" scrolling="auto"></iframe></div>
                    </div>
                    <p><em>Stepping Over with PineTime Debugger
                    </em></p>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <p id="746c" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong class="fv jb">Step
                    Into</strong>: Same as Step Over, except that it steps into functions. Useful for diving into Rust
                  library functions and Mynewt system functions. Here’s how it works… <a
                    href="https://web.archive.org/web/20200124105013/https://vt.tiktok.com/FRt29a/"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">抖音视频</a></p>
              </div>
            </div>
            <div class="gl">
              <div class="n p">
                <div class="hr hs ht hu hv hw ag hx ah hy aj ak">
                  <figure class="gm gn go gp gq gl">
                    <div class="gw r dz">
                      <div class="ll r"><iframe
                          src="https://web.archive.org/web/20200124105013if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FFAeaUo0HByU%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DFAeaUo0HByU&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FFAeaUo0HByU%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="640"
                          title="PineTime Debugger: Step Into" class="cp t u gt ak" scrolling="auto"></iframe></div>
                    </div>
                    <p><em>Stepping Into with PineTime Debugger
                    </em></p>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <p id="e5d9" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><em class="ix">(In the last part
                    of the video, I clicked the Call Stack to see the variables in the calling function)</em></p>
                <p id="d428" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong class="fv jb">Step
                    Out</strong>: Continue execution until the current function returns</p>
                <p id="9196" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong
                    class="fv jb">Restart</strong>: Stop the execution and start from the beginning</p>
                <p id="1f54" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><strong
                    class="fv jb">Stop</strong>: Stop the debugger</p>
                <p id="cbb5" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">9️⃣ When’re we done with
                  debugging, click <code class="gx jj jk jl jm b">Stop</code></p>
                <p id="3f41" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><a
                    href="https://web.archive.org/web/20200124105013/https://code.visualstudio.com/docs/editor/debugging"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow"><em class="ix">More about VSCode
                      Debugging</em></a></p>
                <p id="6d93" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">When we modify any code in our
                  Rust Application, we only need to click <code class="gx jj jk jl jm b">[2] Build Application</code>
                  before starting the debugger. The debugger will flash our updated firmware automatically to PineTime.
                </p>
                <p id="6691" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Here’s a walkthrough of the steps
                  to debug PineTime Firmware…</p>
              </div>
            </div>
            <div class="gl ak">
              <figure class="gm gn go gp gq gl">
                <div class="gw r dz">
                  <div class="km r"><iframe
                      src="https://web.archive.org/web/20200124105013if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FkuDQwAlQd18%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DkuDQwAlQd18&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FkuDQwAlQd18%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                      allowfullscreen="" frameborder="0" height="480" width="854"
                      title="Debug PineTime Firmware on Raspberry Pi with VSCode" class="cp t u gt ak"
                      scrolling="auto"></iframe></div>
                </div>
                <p><em>Debugging PineTime Firmware on Raspberry Pi
                </em></p>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <blockquote class="lm ln lo">
                  <p id="944f" class="ft fu dc ix fv b fw fx fy fz ga gb gc gd ge gf gg"><em class="bk">💎 </em>The
                    number of Breakpoints that we may set through the debugger is limited to 2 or 3, constrained by the
                    nRF52 Microcontroller in PineTime. Step Over / Step Into / Step Out also counts as one Breakpoint.
                    So it’s easy to run out of Breakpoints while debugging.</p>
                  <p id="e69f" class="ft fu dc ix fv b fw fx fy fz ga gb gc gd ge gf gg">Instead of setting Breakpoints
                    via the debugger, we may trigger an unlimited number of Breakpoints in our Rust code by inserting
                    the line below (<a
                      href="https://web.archive.org/web/20200124105013/https://github.com/lupyuen/druid-embedded/blob/master/druid-shell/src/platform/embedded/window.rs#L58"
                      class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">here’s an example</a>)</p>
                </blockquote>
                <pre
                  class="gm gn go gp gq lp lq lr"><span id="d3b4" class="ls ih dc bk jm b en lt lu r lv">cortex_m::asm::bkpt();</span></pre>
              </div>
            </div>
          </section>
          <hr class="hi em hj hk hl hf hm hn ho hp hq" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <h1 id="5509" class="ig ih dc bk bj ii de kn dg ko il kp in kq ip kr ir">💎 Advanced Topic: Debug
                  Interactive Firmware for PineTime</h1>
                <p id="dee6" class="ft fu dc bk fv b fw is fy it ga iu gc iv ge iw gg"><em class="ix">Feeling
                    adventurous?</em> Try debugging an interactive application for PineTime… <em class="ix">A Rust
                    Application that responds to your touch!</em></p>
                <p id="aa94" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">1️⃣ Follow the instructions in
                  the article <em class="ix">“</em><a class="at cg gh gi gj gk" target="_blank" rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/build-and-flash-rust-mynewt-firmware-for-pinetime-smart-watch-5e14259c55?source=friends_link&amp;sk=150b2a73b84144e5ef25b985e65aebe9"><em
                      class="ix">Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch</em></a><em
                    class="ix">”</em> under the section <em class="ix">“Advanced Topic: Build druid UI Firmware for
                    PineTime”</em></p>
                <p id="30a6" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Modify <code
                    class="gx jj jk jl jm b">Cargo.toml</code> to enable <code class="gx jj jk jl jm b">ui_app</code>
                  (and disable <code class="gx jj jk jl jm b">display_app</code>). Save the file.</p>
                <p id="1285" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">2️⃣ Open the file <code
                    class="gx jj jk jl jm b"><a href="https://web.archive.org/web/20200124105013/https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/rust/app/src/ui.rs" class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">rust/app/src/ui.rs</a></code>.
                  This file contains two Rust functions: <code class="gx jj jk jl jm b">launch</code> and <code
                    class="gx jj jk jl jm b">ui_builder</code></p>
              </div>
            </div>
            <div class="gl">
              <div class="n p">
                <div class="hr hs ht hu hv hw ag hx ah hy aj ak">
                  <figure class="gm gn go gp gq gl ia ib paragraph-image">

                    <p><img src="https://lupyuen.github.io/images/legacy/c30.jpeg" /></p>

                    <p><em>Setting a breakpoint at the <code
                        class="gx jj jk jl jm b">ui_builder</code> function in <code
                        class="gx jj jk jl jm b">rust/app/src/ui.rs</code></em></p>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <p id="4342" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Set a Breakpoint inside the <code
                    class="gx jj jk jl jm b">ui_builder</code> function, at the line that says <code
                    class="gx jj jk jl jm b">let text = ...</code></p>
                <p id="b3aa" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">3️⃣ Click <code
                    class="gx jj jk jl jm b">[2] Build Application</code></p>
                <p id="d511" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">Click <code
                    class="gx jj jk jl jm b">Debug → Start Debugging</code> or press <code
                    class="gx jj jk jl jm b">F5</code></p>
                <p id="21f8" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">The flow of firmware execution
                  now becomes…<br />Reset Handler → <code class="gx jj jk jl jm b">main</code> Function → <code
                    class="gx jj jk jl jm b">launch</code> Function → <code class="gx jj jk jl jm b">ui_builder</code>
                  Function</p>
                <p id="4000" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">When execution pauses at Reset
                  Handler and at the <code class="gx jj jk jl jm b">main</code> Function, click <code
                    class="gx jj jk jl jm b">Continue</code> in the Debug Toolbar, or press <code
                    class="gx jj jk jl jm b">F5</code></p>
                <p id="d5ac" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">When execution pauses at the
                  <code class="gx jj jk jl jm b">ui_builder</code> Function, click <code
                    class="gx jj jk jl jm b">Step Into</code> a few times</p>
                <p id="4c64" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">We’ll see that this function goes
                  <em class="ix">a lot deeper</em>, from…</p>
                <ol class="">
                  <li id="f3b9" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg iy iz ja"><strong
                      class="fv jb">druid Library, </strong>for user interface widgets, to…</li>
                  <li id="e344" class="ft fu dc bk fv b fw jc fy jd ga je gc jf ge jg gg iy iz ja"><strong
                      class="fv jb">piet Library, </strong>for 2D graphics, to…</li>
                  <li id="6baf" class="ft fu dc bk fv b fw jc fy jd ga je gc jf ge jg gg iy iz ja"><strong
                      class="fv jb">kurbo Library, </strong>for computing curves, to…</li>
                  <li id="5851" class="ft fu dc bk fv b fw jc fy jd ga je gc jf ge jg gg iy iz ja"><strong
                      class="fv jb">embedded-graphics Library, </strong>for rendering graphics, to…</li>
                  <li id="3f81" class="ft fu dc bk fv b fw jc fy jd ga je gc jf ge jg gg iy iz ja"><strong
                      class="fv jb">Mynewt OS</strong>, for sending rendering commands to the display controller, also
                    for handling touch events from the touchscreen controller</li>
                </ol>
                <p id="ce9d" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><em class="ix">Remember: The Call
                    Stack is always there to help if you get lost!</em></p>
              </div>
            </div>
            <div class="gl">
              <div class="n p">
                <div class="hr hs ht hu hv hw ag hx ah hy aj ak">
                  <figure class="gm gn go gp gq gl">
                    <div class="gw r dz">
                      <div class="km r"><iframe
                          src="https://web.archive.org/web/20200124105013if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FVt5Jem7swrw%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DVt5Jem7swrw&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FVt5Jem7swrw%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                          allowfullscreen="" frameborder="0" height="480" width="854"
                          title="druid UI App for PineTime Smart Watch" class="cp t u gt ak" scrolling="auto"></iframe>
                      </div>
                    </div>
                    <p><em>Interactive Firmware for PineTime that we’re
                      debugging</em></p>
                  </figure>
                </div>
              </div>
            </div>
          </section>
          <hr class="hi em hj hk hl hf hm hn ho hp hq" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah cz aj ak">
                <h1 id="54c9" class="ig ih dc bk bj ii de kn dg ko il kp in kq ip kr ir">What’s Next?</h1>
                <p id="351e" class="ft fu dc bk fv b fw is fy it ga iu gc iv ge iw gg">The skills that we have learnt
                  today for debugging PineTime Firmware: stepping through code, setting breakpoints, inspecting
                  variables… Are the same skills that I used for creating professional IoT devices based on STM32 and
                  Nordic nRF52 microcontrollers connected with Bluetooth, WiFi, NB-IoT and Sigfox networks! <em
                    class="ix">(</em><a class="at cg gh gi gj gk" target="_blank" rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee"><em class="ix">Check out my
                      articles</em></a><em class="ix">)</em></p>
                <p id="705c" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><em class="ix">Congratulations,
                    you’re now an experienced Embedded IoT Developer!</em></p>
                <p id="60b2" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">The firmware debugging experience
                  is realistic even though we are running on hardware that’s a fraction of the cost of <a
                    href="https://web.archive.org/web/20200124105013/https://www.segger.com/products/debug-probes/j-link/"
                    class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">professional debugging
                    hardware</a>. That’s possible because the PineTime debugger uses a modified version of OpenOCD
                  that’s explained in the article <em class="ix">“</em><a class="at cg gh gi gj gk" target="_blank"
                    rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/openocd-on-raspberry-pi-better-with-swd-on-spi-7dea9caeb590?source=friends_link&amp;sk=df399bfd913d3e262447d28aa5af6b63"><em
                      class="ix">OpenOCD on Raspberry Pi: Better with SWD on SPI</em></a><em class="ix">”</em></p>
                <p id="f5da" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg"><em class="ix">Thanks everyone
                    for testing </em><code
                    class="gx jj jk jl jm b"><a href="https://web.archive.org/web/20200124105013/https://github.com/lupyuen/openocd-spi" class="at cg gh gi gj gk" target="_blank" rel="noopener nofollow">openocd-spi</a></code><em
                    class="ix">… PineTime Debugger wouldn’t have been possible without you!</em> 😃</p>
                <p id="ac46" class="ft fu dc bk fv b fw fx fy fz ga gb gc gd ge gf gg">To sharpen your skills as an
                  Embedded IoT Developer, check out the other articles in the PineTime series to learn what really
                  happens inside the PineTime firmware…</p>
                <div class="ly lz ma mb mc md"><a rel="noopener"
                    href="https://lupyuen.github.io/articles/sneak-peek-of-pinetime-smart-watch-and-why-its-perfect-for-teaching-iot">
                    <div class="mg n ar">
                      <div class="mh n co p mi mj">
                        <h2 class="bj ii mk bl dc">
                          <div class="eo me eq er mf et">Sneak Peek of PineTime Smart Watch… And why it’s perfect for
                            teaching IoT</div>
                        </h2>
                        <div class="ml r">
                          <h3 class="bj em en bl bo">
                            <div class="eo me eq er mf et">I’m one of the lucky few who received the developer preview
                              version of the PineTime Smart Watch by Pine64. (My official…</div>
                          </h3>
                        </div>
                        <div class="mm r">
                          <h4 class="bj em fi bl bo">
                            <div class="eo me eq er mf et">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="mn r">
                        <div class="mo r mp mq mr mn ms kh mt"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="ly lz ma mb mc md"><a rel="noopener"
                    href="https://lupyuen.github.io/articles/building-a-rust-driver-for-pinetimes-touch-controller">
                    <div class="mg n ar">
                      <div class="mh n co p mi mj">
                        <h2 class="bj ii mk bl dc">
                          <div class="eo me eq er mf et">Building a Rust Driver for PineTime’s Touch Controller</div>
                        </h2>
                        <div class="ml r">
                          <h3 class="bj em en bl bo">
                            <div class="eo me eq er mf et">Pretend you’re my IoT student. I give you a PineTime Smart
                              Watch and challenge you to “Make it work… Especially the…</div>
                          </h3>
                        </div>
                        <div class="mm r">
                          <h4 class="bj em fi bl bo">
                            <div class="eo me eq er mf et">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="mn r">
                        <div class="mu r mp mq mr mn ms kh mt"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="ly lz ma mb mc md"><a rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/porting-druid-rust-widgets-to-pinetime-smart-watch-7e1d5a5d977a">
                    <div class="mg n ar">
                      <div class="mh n co p mi mj">
                        <h2 class="bj ii mk bl dc">
                          <div class="eo me eq er mf et">Porting [druid] Rust Widgets to PineTime Smart Watch</div>
                        </h2>
                        <div class="ml r">
                          <h3 class="bj em en bl bo">
                            <div class="eo me eq er mf et">A button that responds to our tapping and increments a
                              counter… That’s what we shall accomplish today on the PineTime…</div>
                          </h3>
                        </div>
                        <div class="mm r">
                          <h4 class="bj em fi bl bo">
                            <div class="eo me eq er mf et">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="mn r">
                        <div class="mv r mp mq mr mn ms kh mt"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="ly lz ma mb mc md"><a rel="noopener"
                    href="https://lupyuen.github.io/articles/optimising-pinetimes-display-driver-with-rust-and-mynewt">
                    <div class="mg n ar">
                      <div class="mh n co p mi mj">
                        <h2 class="bj ii mk bl dc">
                          <div class="eo me eq er mf et">Optimising PineTime’s Display Driver with Rust and Mynewt</div>
                        </h2>
                        <div class="ml r">
                          <h3 class="bj em en bl bo">
                            <div class="eo me eq er mf et">Simple tweaks like Batched Updates and Non-Blocking SPI can
                              have a huge impact on rendering performance…</div>
                          </h3>
                        </div>
                        <div class="mm r">
                          <h4 class="bj em fi bl bo">
                            <div class="eo me eq er mf et">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="mn r">
                        <div class="mw r mp mq mr mn ms kh mt"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="ly lz ma mb mc md"><a rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/build-and-flash-rust-mynewt-firmware-for-pinetime-smart-watch-5e14259c55">
                    <div class="mg n ar">
                      <div class="mh n co p mi mj">
                        <h2 class="bj ii mk bl dc">
                          <div class="eo me eq er mf et">Build and Flash Rust+Mynewt Firmware for PineTime Smart Watch
                          </div>
                        </h2>
                        <div class="ml r">
                          <h3 class="bj em en bl bo">
                            <div class="eo me eq er mf et">All you need is a Raspberry Pi and a Windows or macOS
                              computer!</div>
                          </h3>
                        </div>
                        <div class="mm r">
                          <h4 class="bj em fi bl bo">
                            <div class="eo me eq er mf et">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="mn r">
                        <div class="mx r mp mq mr mn ms kh mt"></div>
                      </div>
                    </div>
                  </a></div>
                <div class="ly lz ma mb mc md"><a rel="noopener"
                    href="/web/20200124105013/https://medium.com/@ly.lee/openocd-on-raspberry-pi-better-with-swd-on-spi-7dea9caeb590">
                    <div class="mg n ar">
                      <div class="mh n co p mi mj">
                        <h2 class="bj ii mk bl dc">
                          <div class="eo me eq er mf et">OpenOCD on Raspberry Pi: Better with SWD on SPI</div>
                        </h2>
                        <div class="ml r">
                          <h3 class="bj em en bl bo">
                            <div class="eo me eq er mf et">Sneaky tricks to align stray bits into proper bytes</div>
                          </h3>
                        </div>
                        <div class="mm r">
                          <h4 class="bj em fi bl bo">
                            <div class="eo me eq er mf et">medium.com</div>
                          </h4>
                        </div>
                      </div>
                      <div class="mn r">
                        <div class="my r mp mq mr mn ms kh mt"></div>
                      </div>
                    </div>
                  </a></div>
              </div>
            </div>
            <div class="gl ak">
              <figure class="gm gn go gp gq gl ak paragraph-image">

                <p><img src="https://lupyuen.github.io/images/legacy/c31.jpeg" /></p>

                <p><em>Building our Rust Firmware requires under 900 MB
                  of RAM on Raspberry Pi 4. Includes VSCode.</em></p>
              </figure>
            </div>
          </section>
        </div>
      </article>
    </div>
  </div>
</body>

</html>
<!--
     FILE ARCHIVED ON 10:50:13 Jan 24, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 10:29:43 Feb 21, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  exclusion.robots: 0.255
  captures_list: 140.957
  LoadShardBlock: 111.088 (3)
  RedisCDXSource: 5.549
  PetaboxLoader3.datanode: 85.744 (4)
  esindex: 0.01
  PetaboxLoader3.resolve: 94.364 (2)
  exclusion.robots.policy: 0.244
  CDXLines.iter: 21.062 (3)
  load_resource: 93.198
-->