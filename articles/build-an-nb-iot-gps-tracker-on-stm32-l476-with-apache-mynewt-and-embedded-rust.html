<!doctype html><html lang="en"><head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app39.us.archive.org';v.server_ms=376;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="/_static/js/playback.bundle.js?v=bQvHU8mx" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=cRqOKCOw" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&sk=f3e802795d4fd7d569f0d67679e8c9e6","20191204194100","https://web.archive.org/","web","/_static/",
	      "1575488460");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->
<script>!function(c,f){var t,o,i,e=[],r={passive:!0,capture:!0},n=new Date,a="pointerup",u="pointercancel";function p(n,e){t||(t=e,o=n,i=new Date,w(f),s())}function s(){0<=o&&o<i-n&&(e.forEach(function(n){n(o,t)}),e=[])}function l(n){if(n.cancelable){var e=(1e12<n.timeStamp?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,e){function t(){p(n,e),i()}function o(){i()}function i(){f(a,t,r),f(u,o,r)}c(a,t,r),c(u,o,r)}(e,n):p(e,n)}}function w(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(n){e(n,l,r)})}w(c),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){e.push(n),s()}}(addEventListener,removeEventListener)</script><title data-rh="true">Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2019-09-22T12:24:41.202Z"/><meta data-rh="true" name="title" content="Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust"/><meta data-rh="true" property="og:title" content="Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust"/><meta data-rh="true" property="twitter:title" content="Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/8c095a925546"/><meta data-rh="true" property="al:android:url" content="medium://p/8c095a925546"/><meta data-rh="true" property="al:ios:url" content="medium://p/8c095a925546"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content=" Let’s build an NB-IoT GPS Tracker! A simple gadget that determines its current location based on received GPS signals… And transmits the location to a server via NB-IoT. We shall take an existing…"/><meta data-rh="true" property="og:description" content="Plus Quectel L70-R GPS, Quectel BC95 NB-IoT modules and thethings.io"/><meta data-rh="true" property="twitter:description" content="Plus Quectel L70-R GPS, Quectel BC95 NB-IoT modules and thethings.io"/><meta data-rh="true" property="og:url" content="https://web.archive.org/web/20191204194100/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546"/><meta data-rh="true" property="al:web:url" content="https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546"/><meta data-rh="true" property="og:image" content="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1200/1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/max/1200/1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" property="article:author" content="https://medium.com/@ly.lee"/><meta data-rh="true" name="twitter:creator" content="@MisterTechBlog"/><meta data-rh="true" name="author" content="Lup Yuen Lee 李立源"/><meta data-rh="true" name="robots" content="index,follow"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" name="twitter:label1" value="Reading time"/><meta data-rh="true" name="twitter:data1" value="16 min read"/><meta data-rh="true" name="parsely-post-id" content="8c095a925546"/><link data-rh="true" rel="publisher" href="https://plus.google.com/103654360130207659246"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/web/20191204194100/https://medium.com/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://web.archive.org/web/20191204194100im_/https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://web.archive.org/web/20191204194100im_/https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://web.archive.org/web/20191204194100im_/https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://web.archive.org/web/20191204194100im_/https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png"/><link data-rh="true" rel="mask-icon" href="https://web.archive.org/web/20191204194100im_/https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"/><link data-rh="true" rel="icon" href="https://web.archive.org/web/20191204194100im_/https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://web.archive.org/web/20191204194100cs_/https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css"/><link data-rh="true" rel="author" href="https://medium.com/@ly.lee"/><link data-rh="true" rel="canonical" href="https://web.archive.org/web/20191204194100/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546"/><link data-rh="true" rel="alternate" href="https://web.archive.org/web/20191204194100/android-app://com.medium.reader/https/medium.com/p/8c095a925546"/><script data-rh="true" type="application/ld+json">{"@context":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttp:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1200\u002F1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg"],"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","dateCreated":"2019-09-22T12:08:56.213Z","datePublished":"2019-09-22T12:08:56.213Z","dateModified":"2019-09-22T12:24:41.491Z","headline":"Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust","name":"Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust","description":" Let’s build an NB-IoT GPS Tracker! A simple gadget that determines its current location based on received GPS signals… And transmits the location to a server via NB-IoT. We shall take an existing…","identifier":"8c095a925546","keywords":["Lite:true","Tag:Internet of Things","Tag:Rust","Tag:Stm32","Tag:Gps","Tag:Nb Iot","Elevated:false","LockedPostSource:LOCKED_POST_SOURCE_NONE","LayerCake:0"],"author":{"@type":"Person","name":"Lup Yuen Lee 李立源","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee"},"creator":["Lup Yuen Lee 李立源"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmiro.medium.com\u002Fmax\u002F616\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546"}</script><script data-rh="true">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://web.archive.org/web/20191204194100/https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-24232453-2', 'auto');
ga('send', 'pageview');</script><link rel="preload" href="https://web.archive.org/web/20191204194100/https://cdn.optimizely.com/js/16180790160.js" as="script"><style type="text/css" data-fela-rehydration="494" data-fela-type="STATIC">html{box-sizing:border-box}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@-moz-keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}@keyframes k1{0%{transform:scale(1);opacity:1}70%{transform:scale(1.4);opacity:0}100%{opacity:0}}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{height:100vh}.m{width:100vw}.n{display:flex}.o{align-items:center}.p{justify-content:center}.q{fill:rgba(0, 0, 0, 0.84)}.r{display:block}.s{position:fixed}.t{top:0}.u{left:0}.v{right:0}.w{z-index:500}.x{box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.05)}.ai{max-width:1192px}.aj{min-width:0}.ak{width:100%}.al{height:65px}.ao{flex:1 0 auto}.ap{display:none}.ar{flex:0 0 auto}.as{visibility:hidden}.at{color:inherit}.au{fill:inherit}.av{font-size:inherit}.aw{border:inherit}.ax{font-family:inherit}.ay{letter-spacing:inherit}.az{font-weight:inherit}.ba{padding:0}.bb{margin:0}.bc:hover{cursor:pointer}.bd:hover{color:rgba(0, 0, 0, 0.9)}.be:hover{fill:rgba(0, 0, 0, 0.9)}.bf:focus{outline:none}.bg:disabled{cursor:default}.bh:disabled{color:rgba(0, 0, 0, 0.54)}.bi:disabled{fill:rgba(0, 0, 0, 0.54)}.bj{font-family:medium-content-sans-serif-font, "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Arial, sans-serif}.bk{font-style:normal}.bl{line-height:20px}.bm{font-size:15.8px}.bn{letter-spacing:0px}.bo{color:rgba(0, 0, 0, 0.54)}.bp{fill:rgba(0, 0, 0, 0.54)}.bq{margin-left:16px}.br{color:rgba(2, 158, 116, 1)}.bs{fill:rgba(3, 168, 124, 1)}.bt:hover{color:rgba(1, 143, 105, 1)}.bu:hover{fill:rgba(2, 158, 116, 1)}.bv:disabled{color:rgba(3, 168, 124, 0.5)}.bw:disabled{fill:rgba(3, 168, 124, 0.5)}.bx{padding:8px 16px}.by{background:0}.bz{border-color:rgba(3, 168, 124, 1)}.ca:hover{border-color:rgba(2, 158, 116, 1)}.cb{border-radius:4px}.cc{border-width:1px}.cd{border-style:solid}.ce{box-sizing:border-box}.cf{display:inline-block}.cg{text-decoration:none}.ch{margin-bottom:0px}.cj{padding-left:24px}.ck{padding-right:24px}.cl{margin-left:auto}.cm{margin-right:auto}.cn{max-width:728px}.co{flex-direction:column}.cp{position:absolute}.cq{top:calc(100vh + 100px)}.cr{bottom:calc(100vh + 100px)}.cs{width:10px}.ct{pointer-events:none}.cu{word-break:break-word}.cv{word-wrap:break-word}.cw:after{display:block}.cx:after{content:""}.cy:after{clear:both}.cz{clear:both}.da{margin-top:0px}.db{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}.dc{cursor:zoom-in}.dd{position:relative}.de{z-index:auto}.df{opacity:0}.dg{transition:opacity 100ms 400ms}.dh{height:100%}.di{overflow:hidden}.dj{will-change:transform}.dk{transform:translateZ(0)}.dl{margin:auto}.dm{background-color:rgba(0, 0, 0, 0.05)}.dn{padding-bottom:57.59212198221093%}.do{filter:blur(20px)}.dp{transform:scale(1.1)}.dq{visibility:visible}.dr{background:rgba(255, 255, 255, 1)}.ds{font-size:16px}.dt{line-height:1.4}.du{margin-top:10px}.dv{text-align:center}.dy{font-weight:300}.dz{max-width:680px}.ea{line-height:1.23}.eb{letter-spacing:0}.ec{color:rgba(0, 0, 0, 0.84)}.ed{font-family:medium-content-title-font, Georgia, Cambria, "Times New Roman", Times, serif}.ee{font-size:40px}.ek{margin-bottom:-0.27em}.el{line-height:48px}.em{margin-top:32px}.en{justify-content:space-between}.er{width:48px}.es{height:48px}.et{flex-direction:row}.eu{width:calc(100% + 25px)}.ev{height:calc(100% + 25px)}.ew{top:50%}.ex{left:50%}.ey{transform:translateX(-50%) translateY(-50%)}.ez{border-radius:50%}.fa{margin-left:12px}.fb{margin-bottom:2px}.fd{max-height:20px}.fe{text-overflow:ellipsis}.ff{display:-webkit-box}.fg{-webkit-line-clamp:1}.fh{-webkit-box-orient:vertical}.fi:hover{text-decoration:underline}.fj{margin-left:8px}.fk{padding:0px 8px}.fl{border-color:rgba(0, 0, 0, 0.54)}.fm:hover{color:rgba(0, 0, 0, 0.97)}.fn:hover{fill:rgba(0, 0, 0, 0.97)}.fo:hover{border-color:rgba(0, 0, 0, 0.84)}.fp:disabled{fill:rgba(0, 0, 0, 0.76)}.fq:disabled{border-color:rgba(0, 0, 0, 0.2)}.fr:disabled{cursor:inherit}.fs:disabled:hover{color:rgba(0, 0, 0, 0.54)}.ft:disabled:hover{fill:rgba(0, 0, 0, 0.76)}.fu:disabled:hover{border-color:rgba(0, 0, 0, 0.2)}.fv{line-height:18px}.fw{font-size:15px}.fx{align-items:flex-end}.gf{padding-right:8px}.gg{margin-right:-6px}.gh{line-height:1.58}.gi{letter-spacing:-0.004em}.gj{font-family:medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif}.gu{margin-bottom:-0.46em}.gv{font-style:italic}.gw{max-width:1242px}.hc{border-width:2px}.hd{border-color:rgba(255, 255, 255, 1)}.he{float:left}.hf{margin-left:-150px}.hg{margin-right:30px}.hh{width:75%}.hi{padding-bottom:10px}.hn{margin-bottom:16px}.ho{padding-bottom:177.77777777777777%}.hp{font-weight:700}.hq{background-repeat:repeat-x}.hr{background-image:linear-gradient(to right,rgba(0, 0, 0, 0.84) 100%,rgba(0, 0, 0, 0.84) 0);background-image:url('data:image/svg+xml;utf8,<svg preserveAspectRatio="none" viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="0" x2="1" y2="1" stroke="rgba(0, 0, 0, 0.84)" /></svg>')}.hs{background-size:1px 1px}.ht{background-position:0 1.05em;background-position:0 calc(1em + 1px)}.hy{padding-bottom:NaN%}.hz{padding-bottom:55.172413793103445%}.ia{padding:2px 4px}.ib{font-size:75%}.ic> strong{font-family:inherit}.id{font-family:Menlo, Monaco, "Courier New", Courier, monospace}.ij{box-shadow:0 1px 4px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(0, 0, 0, 0.1)}.ik{max-height:40px}.il{-webkit-line-clamp:2}.im{padding:0px}.jc{padding:16px 20px}.jd{flex:1 1 auto}.jf{font-weight:600}.jg{font-size:18px}.jh{margin-top:8px}.ji{margin-top:12px}.jj{width:160px}.jk{background-image:url(https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/320/0*6o8mPnExokf9Og9J)}.jl{background-origin:border-box}.jm{background-size:cover}.jn{height:167px}.jo{background-position:50% 50%}.jp{max-width:100%}.jq{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.1)}.jr{font-family:medium-content-slab-serif-font, Georgia, Cambria, "Times New Roman", Times, serif}.js{font-size:28px}.jt{border:none}.ju{margin-top:30px}.jv:before{content:"..."}.jw:before{letter-spacing:0.6em}.jx:before{text-indent:0.6em}.jy:before{font-style:italic}.jz:before{line-height:1.4}.ka{max-width:446px}.kb{padding-bottom:87.21973094170403%}.kc{line-height:1.12}.kd{letter-spacing:-0.022em}.ko{margin-bottom:-0.28em}.ku{padding-bottom:86.34175691937425%}.kv{list-style-type:disc}.kw{margin-left:30px}.kx{padding-left:0px}.ld{padding-bottom:44.087591240875916%}.le{max-width:730px}.lf{padding-bottom:33.83561643835616%}.lg{max-width:333px}.lh{padding-bottom:172.67267267267266%}.li{max-width:1800px}.lj{padding-bottom:2.7777777777777777%}.lk{max-width:326px}.ll{padding-bottom:170.24539877300614%}.lm{max-width:755px}.ln{padding-bottom:73.77483443708608%}.lo{padding-bottom:47.05400981996727%}.lu{max-width:406px}.lv{padding-bottom:94.33497536945814%}.me{max-width:1340px}.mf{padding-bottom:5px}.mg{padding-top:5px}.mh{padding-bottom:72.6865671641791%}.mi{max-width:647px}.mj{padding-bottom:85.78052550231838%}.mk{padding:20px}.ml{background:rgba(0, 0, 0, 0.05)}.mm{overflow-x:auto}.mn{line-height:1.18}.mo{margin-top:-0.09em}.mp{margin-bottom:-0.09em}.mq{white-space:pre-wrap}.mr{max-width:536px}.ms{padding-bottom:62.5%}.mt{padding-bottom:50.455465587044536%}.mu{max-width:463px}.mv{padding-bottom:92.22462203023757%}.mw{max-width:315px}.mx{padding-bottom:117.46031746031747%}.my{max-width:422px}.mz{padding-bottom:57.345971563981045%}.na{max-width:6000px}.nb{padding-bottom:66.66666666666667%}.nc{max-width:203px}.nd{padding-bottom:83.25123152709361%}.ne{max-width:2677px}.nf{padding-bottom:79.30519237952933%}.ng{max-width:874px}.nh{padding-bottom:54.004576659038904%}.ni{max-width:450px}.nj{padding-bottom:102.44444444444444%}.nk{max-width:2758px}.nl{padding-bottom:67.00507614213198%}.nm{padding-bottom:33.35555925987664%}.nn{padding-bottom:75%}.no{width:50.17%}.np{margin-right:10px}.nq:last-of-type{margin-right:0}.nr{padding-bottom:142.70833333333331%}.ns{width:49.83%}.nt{padding-bottom:143.6842105263158%}.nu{max-width:2484px}.nv{padding-bottom:52.254428341384866%}.nw{max-width:462px}.nx{padding-bottom:170.34632034632034%}.ny{will-change:opacity}.nz{top:calc(65px + 54px + 40px)}.oc{width:131px}.od{padding-top:28px}.oe{margin-bottom:19px}.of{margin-left:-5px}.og{margin-right:5px}.oh{outline:0}.oi{border:0}.oj{user-select:none}.ok{cursor:pointer}.ol> svg{pointer-events:none}.om:active{border-style:none}.on{-webkit-user-select:none}.oo{fill:rgba(0, 0, 0, 0.76)}.op:focus{fill:rgba(0, 0, 0, 0.54)}.oq:hover{fill:rgba(0, 0, 0, 0.54)}.or{margin-top:5px}.os button{text-align:left}.ot{width:188px}.ou{transform:translateX(406px)}.ov{top:calc(65px + 54px + 14px)}.ox{margin-top:40px}.oy{flex-wrap:wrap}.oz{margin-top:25px}.pa{list-style-type:none}.pb{margin-right:8px}.pc{margin-bottom:8px}.pd{border-radius:3px}.pe{padding:5px 10px}.pf{line-height:22px}.pg{margin-top:15px}.ph{margin-right:16px}.pi{border:1px solid rgba(0, 0, 0, 0.1)}.pj{height:60px}.pk{width:60px}.px:hover{border-color:rgba(0, 0, 0, 0.54)}.py:active{border-style:solid}.pz{z-index:2}.qb{padding-top:32px}.qc{border-top:1px solid rgba(0, 0, 0, 0.1)}.qd{margin-bottom:25px}.qe{margin-bottom:32px}.qf{min-height:80px}.qk{width:80px}.ql{height:80px}.qm{padding-left:102px}.qo{text-transform:uppercase}.qp{letter-spacing:0.05em}.qq{margin-bottom:6px}.qr{line-height:36px}.qs{padding:4px 12px}.qt{max-width:555px}.qu{line-height:24px}.qw{padding-top:25px}.qx{color:rgba(0, 0, 0, 0.76)}.qy{opacity:1}.qz{border:1px solid rgba(3, 168, 124, 1)}.ra{margin-top:64px}.rb{background-color:rgba(0, 0, 0, 0.02)}.rc{padding:60px 0}.rd{background-color:rgba(0, 0, 0, 0.9)}.rf{padding-bottom:48px}.rg{border-bottom:1px solid rgba(255, 255, 255, 0.54)}.rh{margin:0 -12px}.ri{margin:0 12px}.rj{flex:1 1 0}.rk{padding-bottom:12px}.rl:hover{color:rgba(255, 255, 255, 0.99)}.rm:hover{fill:rgba(255, 255, 255, 0.99)}.rn:disabled{color:rgba(255, 255, 255, 0.7)}.ro:disabled{fill:rgba(255, 255, 255, 0.7)}.rp{color:rgba(255, 255, 255, 0.98)}.rq{fill:rgba(255, 255, 255, 0.98)}.rr{text-align:inherit}.rs{font-size:21.6px}.rt{letter-spacing:-0.32px}.ru{color:rgba(255, 255, 255, 0.7)}.rv{fill:rgba(255, 255, 255, 0.7)}.rw{text-decoration:underline}.rx{padding-bottom:8px}.ry{padding-top:8px}.rz{width:200px}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.ah{margin:0 64px}.ej{margin-top:0.78em}.ge{margin-left:30px}.gs{font-size:21px}.gt{margin-top:2em}.hb{margin-top:56px}.ii{margin-top:32px}.iz{padding-left:64px}.ja{padding-right:64px}.jb{max-width:1320px}.km{font-size:34px}.kn{margin-top:1.95em}.kt{margin-top:0.86em}.lc{margin-top:1.05em}.lt{margin-top:1.25em}.md{max-width:1192px}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.dw{margin-left:auto}.dx{text-align:center}.gd{margin-left:30px}.hj{float:none}.hk{margin-left:0}.hl{margin-right:0}.hm{width:100%}.iw{padding-left:64px}.ix{padding-right:64px}.iy{max-width:1080px}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.gc{margin-left:30px}.hu{float:none}.hv{margin-left:0}.hw{margin-right:0}.hx{width:100%}.it{padding-left:48px}.iu{padding-right:48px}.iv{max-width:904px}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.am{height:56px}.an{display:flex}.aq{display:block}.ci{margin-bottom:0px}.ep{margin-top:32px}.eq{flex-direction:column-reverse}.ga{margin-bottom:30px}.gb{margin-left:0px}.iq{padding-left:24px}.ir{padding-right:24px}.is{max-width:728px}.je{padding:10px 12px 10px}.qg{margin-bottom:24px}.qh{align-items:center}.qi{width:102px}.qj{position:relative}.qn{padding-left:0}.qv{margin-top:24px}.re{padding:32px 0}.sa{width:140px}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.ac{margin:0 24px}.ef{margin-top:0.39em}.eo{margin-top:32px}.fc{margin-bottom:0px}.fy{margin-bottom:30px}.fz{margin-left:0px}.gk{font-size:18px}.gl{margin-top:1.56em}.gx{margin-top:40px}.ie{margin-top:24px}.in{padding-left:24px}.io{padding-right:24px}.ip{max-width:552px}.ke{font-size:30px}.kf{margin-top:1.2em}.kp{margin-top:0.67em}.ky{margin-top:1.34em}.lp{margin-top:0.93em}.lw{margin:0}.lx{max-width:100%}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.ag{margin:0 64px}.ei{margin-top:0.78em}.gq{font-size:21px}.gr{margin-top:2em}.ha{margin-top:56px}.ih{margin-top:32px}.kk{font-size:34px}.kl{margin-top:1.95em}.ks{margin-top:0.86em}.lb{margin-top:1.05em}.ls{margin-top:1.25em}.mc{max-width:1192px}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.af{margin:0 48px}.eh{margin-top:0.78em}.go{font-size:21px}.gp{margin-top:2em}.gz{margin-top:56px}.ig{margin-top:32px}.ki{font-size:34px}.kj{margin-top:1.95em}.kr{margin-top:0.86em}.la{margin-top:1.05em}.lr{margin-top:1.25em}.ma{margin:0}.mb{max-width:100%}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.ae{margin:0 24px}.eg{margin-top:0.39em}.gm{font-size:18px}.gn{margin-top:1.56em}.gy{margin-top:40px}.if{margin-top:24px}.kg{font-size:30px}.kh{margin-top:1.2em}.kq{margin-top:0.67em}.kz{margin-top:1.34em}.lq{margin-top:0.93em}.ly{margin:0}.lz{max-width:100%}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="print">.ab{display:none}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.y{transition:transform 300ms ease}.z{will-change:transform}.oa{transition:opacity 200ms}.pl{transition:border-color 150ms ease}.pm::before{background:
      radial-gradient(circle, rgba(0, 0, 0, 0.84) 60%, transparent 70%)
    }.pn::before{border-radius:50%}.po::before{content:""}.pp::before{display:block}.pq::before{z-index:0}.pr::before{left:0}.ps::before{height:100%}.pt::before{position:absolute}.pu::before{top:0}.pv::before{width:100%}.pw:hover::before{animation:k1 2000ms infinite cubic-bezier(.1,.12,.25,1)}.qa{transition:fill 200ms ease}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (max-width: 1198px)">.ob{display:none}</style><style type="text/css" data-fela-rehydration="494" data-fela-type="RULE" media="all and (max-width: 1230px)">.ow{display:none}</style></head><body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
<div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:110px;padding-top:12px;">
      <a href="/web/" title="Wayback Machine home page"><img src="/_static/images/toolbar/wayback-toolbar-logo-200.png" srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x" alt="Wayback Machine" style="width:100px" border="0" /></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a id="wm-save-snapshot-open" href="#"
	     title="Share via My Web Archive" >
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php"
             title="Sign In"
             id="wm-sign-in"
          >
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share">
          <a href="/web/20191204194100/http://web.archive.org/screenshot/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&sk=f3e802795d4fd7d569f0d67679e8c9e6"
             id="wm-screenshot"
             title="screenshot">
            <span class="wm-icon-screen-shot"></span>
          </a>
	<a id="wm-share-facebook" href="#" data-url="https://web.archive.org/web/20191204194100/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&amp;sk=f3e802795d4fd7d569f0d67679e8c9e6" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a id="wm-share-twitter" href="#" data-url="https://web.archive.org/web/20191204194100/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&amp;sk=f3e802795d4fd7d569f0d67679e8c9e6" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&sk=f3e802795d4fd7d569f0d67679e8c9e6" onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20191204194100" /><input type="submit" value="Go" /></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap">Nov</td>
		  <td class="c" id="displayMonthEl" title="You are here: 19:41:00 Dec 04, 2019">DEC</td>
		  <td class="f" nowrap="nowrap">Jan</td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_prv_off.png" alt="Previous capture" width="14" height="16" border="0" /></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 19:41:00 Dec 04, 2019">04</td>
		  <td class="f" nowrap="nowrap"><img src="/_static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0" /></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap">2018</td>
		  <td class="c" id="displayYearEl" title="You are here: 19:41:00 Dec 04, 2019">2019</td>
		  <td class="f" nowrap="nowrap">2020</td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures">
	      	      <a class="t" href="/web/20191204194100*/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&sk=f3e802795d4fd7d569f0d67679e8c9e6" title="See a list of every capture for this URL">1 capture</a>
	      <div class="r" title="Timespan for captures of this URL">04 Dec 2019</div>
	      </div>
	  </td>
	  <td class="k">
	    <a href="" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="650" height="27" border="0"></canvas>
	      </div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
                    <div id="wm-capinfo-collected-by">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/ArchiveIt-Partner-1028);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/ArchiveIt-Partner-1028" target="_new"><span class="wm-title">Mark Graham&#39;s Archive-IT Collections</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  This is a set of web collections curated by Mark Graham using the <a href="http://archive-it.org">Archive-IT</a> service of the <a href="http//archive.org">Internet Archive.</a>
<br>
<br>
They include web captures of the ISKME.org website as well as captures from sites hosted by IGC.org.
<br>
<br>
<br><br>
These web captures are available to the general public.
<br>
<br>
For more information about this collection please feel free to contact Mark via <a href="mailto:mark@archive.org?Subject=Question%20about%20you%20Archive-IT%20Collection" target="_top">Send Mail</a>
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/ArchiveIt-Collection-8332)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/ArchiveIt-Collection-8332" target="_new"><span class="wm-title">General Crawls</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Archive-It Partner 1028: Mark Graham - Collection 8332: General Crawls
	</div>
	      </div>
    </div>
    </div>
    <div id="wm-capinfo-timestamps">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="/_static/images/loading.gif" alt="loading" /></div>
    </div>
    </div>
  </div></div></div></div><div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=https%3A//web.archive.org/web/20191204194100/https%3A//medium.com/%2540ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546%3Fsource%3Dfriends_link%26sk%3Df3e802795d4fd7d569f0d67679e8c9e6"
	    scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(650,27,25,2,"web","https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=friends_link&sk=f3e802795d4fd7d569f0d67679e8c9e6","20191204194100",1996,"/_static/",["/_static/css/banner-styles.css?v=bsmaklHF","/_static/css/iconochive.css?v=qtvMKcIJ"]);
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT --><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><script>window.PARSELY = window.PARSELY || {autotrack: false}</script><nav class="r s t u v c w x y z ab"><div class="branch-journeys-top"><div class="n p"><div class="ac ae af ag ah ai aj ak"><div class="al n o am an"><div class="r ao w"><div class="n o"><a aria-label="Homepage" rel="noopener" href="/web/20191204194100/https://medium.com/?source=post_page-----8c095a925546----------------------"><div class="ap g"><svg height="22" width="112" viewbox="0 0 111.5 22" class="q"><path d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"></path></svg></div><div class="r aq"><svg width="35" height="35" viewbox="5 5 35 35" class="q"><path d="M5 40V5h35v35H5zm8.56-12.63c0 .56-.03.69-.32 1.03L10.8 31.4v.4h6.97v-.4L15.3 28.4c-.29-.34-.34-.5-.34-1.03v-8.95l6.13 13.36h.71l5.26-13.36v10.64c0 .3 0 .35-.19.53l-1.85 1.8v.4h9.2v-.4l-1.83-1.8c-.18-.18-.2-.24-.2-.53V15.94c0-.3.02-.35.2-.53l1.82-1.8v-.4h-6.47l-4.62 11.55-5.2-11.54h-6.8v.4l2.15 2.63c.24.3.29.37.29.77v10.35z"></path></svg></div></a></div></div><div class="r ar w"><div class="n o"><div class="n g"><div class="as" id="lo-post-page-navbar-upsell-button"><div><a href="https://web.archive.org/web/20191204194100/https://medium.com/membership?source=upgrade_membership---nav_full------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><span class="bj b bk bl bm bn r bo bp">Become a member</span></a></div></div><div class="as" id="lo-post-page-navbar-sign-in-link"><div class="bq r"><span class="bj b bk bl bm bn r bo bp"><a href="https://web.archive.org/web/20191204194100/https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546&amp;source=post_page-----8c095a925546---------------------nav_reg-" class="br bs av aw ax ay az ba bb bc bt bu bf bg bv bw" rel="noopener">Sign in</a></span></div></div></div><div class="as" id="lo-post-page-navbar-get-started-button"><div class="bq r"><button class="bx by br bs bz bt bu ca bc cb bj b bk bl bm bn cc cd ce cf cg bf">Get started</button></div></div></div></div></div></div></div></div></nav><div class="ch al r ci am"></div><article><section class="cj ck cl cm ak cn ce n co"></section><span class="r"></span><div><div class="cp u cq cr cs ct"></div><section class="cu cv cw cx cy"><div class="cz ak"><figure class="da cz ak paragraph-image"><div class="db dc dd de ak"><div class="dl r dd dm"><div class="dn r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg?q=20" width="3148" height="1813" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="3148" height="1813" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/6296/1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg" width="3148" height="1813" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">NB-IoT GPS Tracker running on the Ghostyu NB-EK-L476 Developer Kit with STM32L476RCT6 microcontroller, Quectel L70-R GPS module and Quectel BC95 NB-IoT module. Photo taken during the field test at Berlayer Creek Boardwalk (and mangrove swamp) in Singapore.</figcaption></figure></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><div><div id="5984" class="ea eb ec bk ed b ee ef eg eh ei ej ek"><h1 class="ed b ee el ec">Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust</h1></div><div class="em"><div class="n en eo ep eq"><div class="o n"><div><a rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee?source=post_page-----8c095a925546----------------------"><div class="dd er es"><div class="bs n et o p cp eu ev ew ex ey ct"><svg width="57" height="57" viewbox="0 0 57 57"><path fill-rule="evenodd" clip-rule="evenodd" d="M28.5 1.2A27.45 27.45 0 0 0 4.06 15.82L3 15.27A28.65 28.65 0 0 1 28.5 0C39.64 0 49.29 6.2 54 15.27l-1.06.55A27.45 27.45 0 0 0 28.5 1.2zM4.06 41.18A27.45 27.45 0 0 0 28.5 55.8a27.45 27.45 0 0 0 24.44-14.62l1.06.55A28.65 28.65 0 0 1 28.5 57 28.65 28.65 0 0 1 3 41.73l1.06-.55z"></path></svg></div><img alt="Lup Yuen Lee 李立源" class="r ez es er" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/fit/c/96/96/1*KGohS3sQaUnr58gc0BIfoQ.jpeg" width="48" height="48"/></div></a></div><div class="fa ak r"><div class="n"><div style="flex:1"><span class="bj b bk bl bm bn r ec q"><div class="fb n o fc"><span class="bj dy ds bl di fd fe ff fg fh ec"><a class="at au av aw ax ay az ba bb bc fi bf bg bh bi" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee?source=post_page-----8c095a925546----------------------">Lup Yuen Lee 李立源</a></span><div class="fj r ar h"><button class="fk ec q by fl fm fn fo bc bh fp fq fr fs ft fu cb bj b bk fv fw bn cc cd ce cf cg bf">Follow</button></div></div></span></div></div><span class="bj b bk bl bm bn r bo bp"><span class="bj dy ds bl di fd fe ff fg fh bo"><div><a class="at au av aw ax ay az ba bb bc fi bf bg bh bi" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546?source=post_page-----8c095a925546----------------------">Sep 22</a> <!-- -->·<!-- --> <!-- -->16<!-- --> min read</div></span></span></div></div><div class="n fx fy fz ga gb gc gd ge ab"><div class="n o"><div class="gf r ar"><a href="//web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/share/twitter?source=post_actions_header---------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="gf r ar"><a href="//web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/share/linkedIn?source=post_actions_header---------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg width="29" height="29" viewbox="0 0 29 29" fill="none" class="q"><path d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z" fill="#fff"></path></svg></a></div><div class="gf r ar"><a href="//web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/share/facebook?source=post_actions_header---------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="gg r ao"><div><div class="cf"><a href="https://web.archive.org/web/20191204194100/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546&amp;source=post_actions_header--------------------------bookmark_sidebar-" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25" height="25" viewbox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div></div><p id="c30e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">Plus Quectel L70-R GPS, Quectel BC95 NB-IoT modules and thethings.io</em></p><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="db dc dd de ak"><div class="cl cm gw"><div class="dl r dd dm"><div class="ho r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/34/1*qT9I1BeqVmw_5-nhmDVZlQ.png?q=20" width="1242" height="2208" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1242" height="2208" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/2484/1*qT9I1BeqVmw_5-nhmDVZlQ.png" width="1242" height="2208" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">The Completed NB-IoT GPS Tracker Application showing geolocation and sensor data (raw temperature)</figcaption></figure><p id="20b9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Let’s build an <strong class="gj hp">NB-IoT GPS Tracker</strong>! A simple gadget that determines its current location based on received GPS signals… And transmits the location to a server via NB-IoT.</p><p id="bdb6" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We shall take an existing <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Apache Mynewt Embedded OS</a> + Embedded Rust project from the article <em class="gv">“</em><a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0"><em class="gv">Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt</em></a><em class="gv">”</em>… And extend it with a GPS module: <a href="https://web.archive.org/web/20191204194100/https://www.quectel.com/product/l70r.htm" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp">Quectel L70-R</strong></a>.</p><p id="3c4a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The project already includes the <a href="https://web.archive.org/web/20191204194100/https://www.quectel.com/product/bc95.htm" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp">Quectel BC95</strong></a> NB-IoT module for transmitting sensor data in CoAP format over NB-IoT.</p><p id="bc3b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">STM32 Blue Pill F103 doesn’t support floating-point computations in hardware, so it will be inefficient to compute floating-point latitude/longitude coordinates for the GPS module.</p><p id="7cde" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We’ll upgrade the STM32 F103 microcontroller to an <a href="https://web.archive.org/web/20191204194100/https://www.st.com/en/microcontrollers-microprocessors/stm32l476rc.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp">STM32 L476</strong></a> because it supports floating-point computations in hardware.</p><p id="19d8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Thankfully there’s already a developer kit that contains the STM32 L476 microcontroller, Quectel L70-R GPS module and Quectel BC95 NB-IoT module… <a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/quick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&amp;sk=37f71270cd52f497fb6fb8139917031c"><strong class="gj hp">Ghostyu NB-EK-L476 Developer Kit</strong></a>, as described in the article <em class="gv">“</em><a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/quick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&amp;sk=37f71270cd52f497fb6fb8139917031c"><em class="gv">Quick Peek of Huawei LiteOS with NB-IoT on Ghostyu NB-EK-L476 Developer Kit (STM32L476RCT6)</em></a><em class="gv">”. </em>Perfect for our NB-IoT GPS Tracker!</p><p id="58ca" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Alternatively we may create your own kit based on the same STM32L476RCT6 microcontroller and Quectel modules.</p><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hu hv hw hx hn"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/c58ee75565298292a27498c069b36912" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/install-apache-mynewt-and-embedded-rust-for-stm32-l476-and-visual-studio-code-on-windows-9ed40e065cf4" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Upgrading from STM32 Blue Pill F103 to L476</figcaption></figure><p id="3ab3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">How hard is it to switch microcontrollers and migrate a Mynewt + Rust project from STM32 Blue Pill F103 to L476?</em> As we shall find out… Not that hard!</p><p id="da6d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Below is the overall map of changes made to the Mynewt + Rust project while building the NB-IoT GPS Tracker. We’ll study each block in the subsequent sections.</p><p id="358b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">Even if you’re new to Mynewt or Rust, feel free to skim this article!</em> While building the NB-IoT GPS Tracker we made changes to a number of components in Mynewt OS and the Rust application… You’ll soon understand how the various parts of Mynewt and Rust work together to create an IoT gadget.</p></div></div><div class="cz ak"><figure class="gx gy gz ha hb cz ak paragraph-image"><div class="dl r dd dm"><div class="hz r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*8M4JWUsBMEkf7L_eDUAZrA.png?q=20" width="1856" height="1024" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1856" height="1024" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/3712/1*8M4JWUsBMEkf7L_eDUAZrA.png" width="1856" height="1024" role="presentation"/></noscript></div></div></figure></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="945d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The complete source code is available at the <code class="dm ia ib ic id b">l476</code> branch of this repository…</p><div class="ie if ig ih ii ij"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476?source=post_page-----8c095a925546----------------------" rel="noopener nofollow"><section class="im cl cm ak ce n ar in io ip iq ir is it iu iv iw ix iy iz ja jb"><div class="jc n co p jd je"><h2 class="bj jf jg bl ec"><div class="di ik fe ff il fh">lupyuen/stm32bluepill-mynewt-sensor</div></h2><div class="jh r"><h3 class="bj dy ds bl bo"><div class="di ik fe ff il fh">Tested on the Ghostyu NB-EK-L476 Developer Kit (STM32L476RCT6)... Quick Peek of Huawei LiteOS with NB-IoT on Ghostyu…</div></h3></div><div class="ji r"><h4 class="bj dy fw bl bo"><div class="di ik fe ff il fh">github.com</div></h4></div></div><div class="jj r"><div class="jk r jl jm jn jj jo jp jq"></div></div></section></a></div></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="cl cm ka"><div class="dl r dd dm"><div class="kb r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*_6qewiP2-zNY8JdVfiv_gQ.png?q=20" width="446" height="389" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="446" height="389" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/892/1*_6qewiP2-zNY8JdVfiv_gQ.png" width="446" height="389" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Mynewt Board Support Package</figcaption></figure><h1 id="9d72" class="kc kd ec bk bj jf ke kf kg kh ki kj kk kl km kn ko">Mynewt Board Support Package</h1><p id="689f" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu">Every Mynewt project begins with a <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/os/core_os/porting/port_bsp.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Board Support Package</a>… Either take an existing one, or adapt from one. <a href="https://web.archive.org/web/20191204194100/https://github.com/apache/mynewt-core/tree/master/hw/bsp" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Check out the Board Support Packages</a></p><p id="9491" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">A Board Support Package contains information, scripts and drivers necessary to build Mynewt for our microcontroller and the associated peripherals on our microcontroller board: flash memory, LEDs, UART ports, …</p><p id="3036" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">For this project, we customised an existing Board Support Package <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/apache/mynewt-core/tree/master/hw/bsp/nucleo-l476rg" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">nucleo-l476rg</a></code> by copying into <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/hw/bsp/stm32l4" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hw/bsp/stm32l4</a></code> and renaming it. (<a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">The previous project</a> used the Board Support Package <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/hw/bsp/bluepill-64kb" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hw/bsp/bluepill-64kb</a></code>)</p><p id="88d7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Our board is similar to the <a href="https://web.archive.org/web/20191204194100/https://www.st.com/en/evaluation-tools/nucleo-l476rg.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Nucleo L476RG</a>, except that the Nucleo has 1 MB of flash ROM while ours has only 256 KB. Here’s how we resized the flash ROM by editing <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/bsp.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hw/bsp/stm32l4/bsp.yml</a></code>…</p></div></div><div class="cz ak"><figure class="gx gy gz ha hb cz ak paragraph-image"><div class="dl r dd dm"><div class="ku r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*9r4M6KlGwEHz-LlenvqYBA.png?q=20" width="1662" height="1435" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1662" height="1435" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/3324/1*9r4M6KlGwEHz-LlenvqYBA.png" width="1662" height="1435" role="presentation"/></noscript></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Customising a Board Support Package for STM32 L476 on Mynewt</figcaption></figure></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="7cbd" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The Board Support Package for the Nucleo defines two UART ports…</p><ul class=""><li id="f73a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu kv kw kx">The first is named <code class="dm ia ib ic id b">UART_0</code> which points to port <code class="dm ia ib ic id b">USART2</code> (connected to the Quectel BC95 NB-IoT module)</li><li id="0eec" class="gh gi ec bk gj b gk ky gm kz go la gq lb gs lc gu kv kw kx">The second is named <code class="dm ia ib ic id b">UART_1</code> which points to port <code class="dm ia ib ic id b">USART1</code> (not used)</li></ul><p id="1ecf" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">(Yep don’t confuse the Mynewt port name with the actual UART port)</em></p><p id="485f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">For our board we need a third port…</p><ul class=""><li id="6f0b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu kv kw kx"><code class="dm ia ib ic id b">UART_2</code> which points to port <code class="dm ia ib ic id b">LPUART1</code> (connected to the Quectel L70-R GPS module)</li></ul><p id="1e86" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s how we add <code class="dm ia ib ic id b">UART_2</code> by editing <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hw/bsp/stm32l4/syscfg.yml</a></code>…</p><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hu hv hw hx hn"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/761b33ec4f2297c20e801e74bf09712d" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Adding UART_2 to Board Support Package Configuration. From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/syscfg.yml</a></figcaption></figure><p id="38a3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">But wait… This says that <code class="dm ia ib ic id b">UART_2</code> will point to port <code class="dm ia ib ic id b">USART3</code>, not <code class="dm ia ib ic id b">LPUART1</code>!</p><p id="45c5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Mynewt doesn’t have the driver code to support LPUARTs (Low Power UART) on the STM32 platform, so we used a quick hack…</p></div></div><div class="cz ak"><figure class="gx gy gz ha hb cz ak paragraph-image"><div class="dl r dd dm"><div class="ld r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*zNV3jnzITl__3_MXOzFJMA.png?q=20" width="2055" height="906" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="2055" height="906" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/4110/1*zNV3jnzITl__3_MXOzFJMA.png" width="2055" height="906" role="presentation"/></noscript></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From STM32L476xx Datasheet <a href="https://web.archive.org/web/20191204194100/https://www.st.com/resource/en/datasheet/stm32l476je.pdf" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://www.st.com/resource/en/datasheet/stm32l476je.pdf</a> and Ghostyu NB-EK-L476 Hardware Manual <a href="https://web.archive.org/web/20191204194100/https://drive.google.com/file/d/14KZqMO6cj20eKqM85iJNth8vf_WbI5VM/view?usp=sharing" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://drive.google.com/file/d/14KZqMO6cj20eKqM85iJNth8vf_WbI5VM/view?usp=sharing</a></figcaption></figure></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="0979" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The <a href="https://web.archive.org/web/20191204194100/https://www.st.com/resource/en/datasheet/stm32l476je.pdf" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">STM32L476 Datasheet</a> says that <code class="dm ia ib ic id b">LPUART1</code> and <code class="dm ia ib ic id b">USART3</code> share the same <code class="dm ia ib ic id b">TX</code> and <code class="dm ia ib ic id b">RX</code> pins, except that they are flipped. <em class="gv">(How odd!)</em> STM32 programs may configure the UART port such that the <code class="dm ia ib ic id b">TX</code> and <code class="dm ia ib ic id b">RX</code> pins are swapped… That’s how we disguised <code class="dm ia ib ic id b">USART3</code> as <code class="dm ia ib ic id b">LPUART1</code>! More about swapping <code class="dm ia ib ic id b">TX</code> and <code class="dm ia ib ic id b">RX</code> in a while.</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/3ba771ff2268d8af39b9990f479e6b8d" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/src/hal_bsp.c" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/src/hal_bsp.c</a></figcaption></figure><p id="4ffd" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We complete the UART customisation by adding the above code to <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/hw/bsp/stm32l4/src/hal_bsp.c" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hw/bsp/stm32l4/src/hal_bsp.c</a></code>. We are now ready to use our custom Board Support Package!</p></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm le"><div class="dl r dd dm"><div class="lf r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*Pz6L7nzL4EjE7Eoa3UAoOA.png?q=20" width="730" height="247" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="730" height="247" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1460/1*Pz6L7nzL4EjE7Eoa3UAoOA.png" width="730" height="247" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Mynewt Hardware Abstraction Layer</figcaption></figure><h1 id="b33a" class="kc kd ec bk bj jf ke kf kg kh ki kj kk kl km kn ko">Mynewt Hardware Abstraction Layer</h1><p id="c541" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu">Let’s talk about the Hardware Abstraction Layer (HAL) in Mynewt… Because there are two definitions of HAL used in Mynewt that may confuse us…</p><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm lg"><div class="dl r dd dm"><div class="lh r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/34/1*owZ72OGq9YWjiWOHkvxmwQ.png?q=20" width="333" height="575" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="333" height="575" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/666/1*owZ72OGq9YWjiWOHkvxmwQ.png" width="333" height="575" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">General HAL for STM32 in repos/apache-mynewt-core/hw/mcu/stm/stm32_common</figcaption></figure><p id="69f4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ The first type of HAL is the <strong class="gj hp">General HAL that abstracts all the hardware on our microcontroller.</strong> The General HAL enables us to write Mynewt applications that are portable across microcontrollers. Here’s an example of a General HAL that <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/os/modules/hal/hal_gpio/hal_gpio.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">abstracts the GPIO interface</a>: <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/os/modules/hal/hal_gpio/hal_gpio.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://mynewt.apache.org/latest/os/modules/hal/hal_gpio/hal_gpio.html</a></code></p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm li"><div class="dl r dd dm"><div class="lj r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20" width="1800" height="50" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1800" height="50" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png" width="1800" height="50" role="presentation"/></noscript></div></div></div></div></figure><figure class="du cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm lk"><div class="dl r dd dm"><div class="ll r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/36/1*xBtSEsEzLIg75Cu9gqMobg.png?q=20" width="326" height="555" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="326" height="555" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/652/1*xBtSEsEzLIg75Cu9gqMobg.png" width="326" height="555" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Vendor-Specific HAL for STM32 in repos/apache-mynewt-core/hw/mcu/stm/stm32l4xx</figcaption></figure><p id="ac73" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ The second type of HAL is the <strong class="gj hp">Vendor-Specific HAL provided by a microcontroller maker</strong> (like STMicroelectronics) that abstracts the differences between various models of microcontrollers, e.g. STM32 F103 vs L476. Here’s a <a href="https://web.archive.org/web/20191204194100/https://github.com/apache/mynewt-core/tree/master/hw/mcu/stm/stm32l4xx/src/ext/Drivers/STM32L4xx_HAL_Driver/Src" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Vendor-Specific HAL</a>: <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/apache/mynewt-core/tree/master/hw/mcu/stm/stm32l4xx/src/ext/Drivers/STM32L4xx_HAL_Driver/Src" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/apache/mynewt-core/tree/master/hw/mcu/stm/stm32l4xx/src/ext/Drivers/STM32L4xx_HAL_Driver/Src</a></code></p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm li"><div class="dl r dd dm"><div class="lj r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*pmGFQ2cRpqypaNDM1UYwEw.png?q=20" width="1800" height="50" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1800" height="50" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/3600/1*pmGFQ2cRpqypaNDM1UYwEw.png" width="1800" height="50" role="presentation"/></noscript></div></div></div></div></figure><p id="8171" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">From now on, when we mention “HAL” we refer to 1️⃣ <strong class="gj hp">General HAL</strong>.</p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm lm"><div class="dl r dd dm"><div class="ln r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*SyQclfixhtymp8JxPH5cpA.png?q=20" width="755" height="557" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="755" height="557" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1510/1*SyQclfixhtymp8JxPH5cpA.png" width="755" height="557" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From STM32L4x6 Reference Manual: <a href="https://web.archive.org/web/20191204194100/https://www.st.com/content/ccc/resource/technical/document/reference_manual/02/35/09/0c/4f/f7/40/03/DM00083560.pdf/files/DM00083560.pdf/jcr:content/translations/en.DM00083560.pdf" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://www.st.com/content/ccc/resource/technical/document/reference_manual/02/35/09/0c/4f/f7/40/03/DM00083560.pdf/files/DM00083560.pdf/jcr:content/translations/en.DM00083560.pdf</a></figcaption></figure><p id="4650" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Recall that we need to patch the UART HAL so that the <code class="dm ia ib ic id b">TX</code> and <code class="dm ia ib ic id b">RX</code> pins are swapped for port <code class="dm ia ib ic id b">USART3</code> (so that it behaves like <code class="dm ia ib ic id b">LPUART1</code>). The <a href="https://web.archive.org/web/20191204194100/https://www.st.com/content/ccc/resource/technical/document/reference_manual/02/35/09/0c/4f/f7/40/03/DM00083560.pdf/files/DM00083560.pdf/jcr:content/translations/en.DM00083560.pdf" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">STM32L4x6 Reference Manual</a> says that we may set the <code class="dm ia ib ic id b">SWAP</code> bit of UART register <code class="dm ia ib ic id b">CR2</code> to swap the <code class="dm ia ib ic id b">TX/RX</code> pins.</p><p id="6956" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The UART HAL for STM32 is implemented in <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/apache/mynewt-core/blob/master/hw/mcu/stm/stm32_common/src/hal_uart.c" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">apache-mynewt-core/hw/mcu/stm/stm32_common/src/hal_uart.c</a></code> (inside the <code class="dm ia ib ic id b">repos</code> folder of our project). Edit the file at line 468 to set the <code class="dm ia ib ic id b">SWAP</code> bit of <code class="dm ia ib ic id b">CR2</code> like this…</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/666b66c037a94c6e3326489ea30a7761" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/patch/hal_uart.c#L468-L471" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/patch/hal_uart.c#L468-L471</a></figcaption></figure><p id="460b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">You may refer to this <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/patch/hal_uart.c#L468-L471" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">patched version of </a><code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/patch/hal_uart.c#L468-L471" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hal_uart.c</a></code>. This patch depends on two conditions…</p><p id="ebb7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code class="dm ia ib ic id b">UART_2_SWAP_TXRX</code> must be set to 1 in the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">syscfg.yml</a></code><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"> configuration file</a>. Remember that <code class="dm ia ib ic id b">UART_2</code> is the Mynewt name for port <code class="dm ia ib ic id b">USART3</code>.</p><p id="3d79" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ UART port must be <code class="dm ia ib ic id b">USART3</code></p><p id="8f80" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Where is <code class="dm ia ib ic id b">USART_CR2_SWAP</code> defined? In the <a href="https://web.archive.org/web/20191204194100/https://github.com/apache/mynewt-core/blob/master/hw/mcu/stm/stm32l4xx/src/ext/Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4a6xx.h" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Vendor-Specific HAL</a>.</p><p id="78e7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In Visual Studio Code, the patch should look like this…</p></div></div><div class="cz ak"><figure class="gx gy gz ha hb cz ak paragraph-image"><div class="dl r dd dm"><div class="lo r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*ItdOaKusfagV5z7_8FtcZw.png?q=20" width="1222" height="575" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1222" height="575" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/2444/1*ItdOaKusfagV5z7_8FtcZw.png" width="1222" height="575" role="presentation"/></noscript></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Patching hal_uart.c to swap TX/RX pins for USART3</figcaption></figure></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="b3f1" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Mynewt Targets</h1><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm lu"><div class="dl r dd dm"><div class="lv r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*82TqzmSYlp6Xi9w9xEr9xg.png?q=20" width="406" height="383" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="406" height="383" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/812/1*82TqzmSYlp6Xi9w9xEr9xg.png" width="406" height="383" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Mynewt Targets</figcaption></figure><p id="6619" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Mynewt Applications are designed to be portable across microcontrollers… The same application may be recompiled to run on STM32 Blue Pill F103, STM32 F476, or even BBC micro:bit (based on Nordic nRF51).</p><p id="3977" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To compile a Mynewt Application for a specific microcontroller board, we run the <code class="dm ia ib ic id b">newt target</code> command like this…</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/c5f926b4424456accab0308c211f7cf3" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div></figure><p id="4cd2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This creates two targets <code class="dm ia ib ic id b">stm32l4_boot</code> (for the bootloader) and <code class="dm ia ib ic id b">stm32l4_my_sensor</code> (for the application)…</p><p id="ef7d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_boot/pkg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">stm32l4_boot</a></code> is based on the Stub Bootloader located at <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/apps/boot_stub" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">apps/boot_stub</a></code></p><p id="2117" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/targets/stm32l4_my_sensor" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">stm32l4_my_sensor</a></code> is based on our platform-indepedent Sensor Application located at <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/apps/my_sensor_app" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">apps/my_sensor_app</a></code> (which will be merged with the Rust application during compilation)</p><p id="4c2b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Both targets <code class="dm ia ib ic id b">stm32l4_boot</code> and <code class="dm ia ib ic id b">stm32l4_my_sensor</code> point to the same Board Support Package for STM32 L476 (<code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/hw/bsp/stm32l4" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">hw/bsp/stm32l4</a></code>), so they will produce Bootloader and Application Firmware Images that will run on our STM32 L476 board.</p><p id="8484" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">(<a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">The previous project</a> used targets <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/targets/bluepill_boot" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">bluepill_boot</a></code> and <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/targets/bluepill_my_sensor" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">bluepill_my_sensor</a></code>)</p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><figure class="gx gy gz ha hb cz mf mg paragraph-image"><div class="db dc dd de ak"><div class="cl cm me"><div class="dl r dd dm"><div class="mh r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*P_-KzIJd3H5iwGQUBA-zAw.png?q=20" width="1340" height="974" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1340" height="974" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/2680/1*P_-KzIJd3H5iwGQUBA-zAw.png" width="1340" height="974" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_boot/target.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_boot/target.yml</a> and <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/target.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/target.yml</a></figcaption></figure></div></div></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="2cd8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Instead of running the <code class="dm ia ib ic id b">newt target</code> command to create the targets, we may copy the target folders ourselves to create the targets. Be sure to update <code class="dm ia ib ic id b">target.yml</code> to point to the correct Board Support Package (see above).</p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><figure class="gx gy gz ha hb cz mf mg paragraph-image"><div class="db dc dd de ak"><div class="cl cm me"><div class="dl r dd dm"><div class="mh r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*60GcGa-VQ0lu_nZDw4ShQQ.png?q=20" width="1340" height="974" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1340" height="974" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/2680/1*60GcGa-VQ0lu_nZDw4ShQQ.png" width="1340" height="974" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_boot/pkg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_boot/pkg.yml</a> and <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/pkg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/pkg.yml</a></figcaption></figure></div></div></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="5d5d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The package name <code class="dm ia ib ic id b">pkg.name</code> in <code class="dm ia ib ic id b">pkg.yml</code> should be updated. C Compiler Directives and Linker Directives should be specified in <code class="dm ia ib ic id b">pkg.yml</code>, as shown above.</p></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="cl cm mi"><div class="dl r dd dm"><div class="mj r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*2mFlgIUBtOuGcaPy4P2NEA.png?q=20" width="647" height="555" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="647" height="555" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1294/1*2mFlgIUBtOuGcaPy4P2NEA.png" width="647" height="555" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Mynewt Libraries</figcaption></figure><h1 id="6c06" class="kc kd ec bk bj jf ke kf kg kh ki kj kk kl km kn ko">Mynewt Libraries</h1><p id="e85c" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu">Let’s look at the changes made to the Mynewt libraries and drivers (located in <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">libs</a></code>) that are used by our NB-IoT GPS Tracker application. Recall that <a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">the previous project</a> has already provided libraries for transmitting sensor data in CoAP format over NB-IoT, also for reading the STM32 internal temperature sensor.</p><p id="9f25" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/gps_l70r" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">gps_l70r</a></code>: Driver for the Quectel L70-R GPS module. This is a new driver that connects to the UART port to receive geolocation information (latitude, longitude, altitude) from the GPS module. It calls <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/tiny_gps_plus" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">tiny_gps_plus</a></code> to parse the <a href="https://web.archive.org/web/20191204194100/https://en.wikipedia.org/wiki/NMEA_0183" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">NMEA</a> messages generated by the GPS module.</p><p id="a55e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/tiny_gps_plus" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">tiny_gps_plus</a></code>: <a href="https://web.archive.org/web/20191204194100/http://arduiniana.org/libraries/tinygpsplus/" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">TinyGPS++</a> library that was ported from Arduino. It parses NMEA messages generated by the GPS module to obtain geolocation information.</p><p id="9c52" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/custom_sensor" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">custom_sensor</a></code>: We added a custom Sensor Data Type for the GPS geolocation, which contains latitude, longitude and altitude. This enables the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/gps_l70r" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">gps_l70r</a></code> GPS driver to be polled like any other sensor (e.g. internal temperature sensor) via <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_framework.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Mynewt’s Sensor Framework</a>.</p><p id="438e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">4️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/mynewt_rust" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">mynewt_rust</a></code>: Helper functions were added to allow the Rust application to read the new Geolocation Sensor Data Type</p><p id="d5b3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">5️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/buffered_serial" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">buffered_serial</a></code>: Library that buffers data from the UART port for easier parsing. Used by the GPS driver <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/gps_l70r" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">gps_l70r</a></code> and the Quectel NB-IoT driver <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/bc95g" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">bc95g</a></code></p><p id="467d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">6️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/adc_stm32l4" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">adc_stm32l4</a></code>: We added this driver to support the Analog-To-Digital Converter (ADC) found in the STM32 L476 microcontroller. The ADC driver is used by the internal temperature sensor <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/temp_stm32" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">temp_stm32</a></code></p><p id="e3e3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">7️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/temp_stm32" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">temp_stm32</a></code>: This is the driver for the internal temperature sensor. The driver has been updated to use <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/adc_stm32l4" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">adc_stm32l4</a></code> to read the internal temperature sensor on the STM32 L476 microcontroller.</p><p id="ea30" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">With these updates, our Rust application shall be able to <strong class="gj hp">poll the GPS sensor</strong> for the geolocation, <strong class="gj hp">attach the geolocation</strong> to the internal temperature sensor data, and <strong class="gj hp">transmit the geolocated sensor data</strong> to the CoAP Server at thethings.io over NB-IoT.</p></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="4e38" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Application Configuration</h1><p id="a93b" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu">Where do we configure the settings for the libraries? In the System Configuration File for our Target Application <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">targets/stm32l4_my_sensor/syscfg.yml</a></code>…</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/0cca53060a6a625685f7b487c63131e0" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Application Configuration. From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/syscfg.yml</a></figcaption></figure><p id="c935" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">(The System Configuration File for <a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">the previous project</a> was at <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/bluepill_my_sensor/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">targets/bluepill_my_sensor/syscfg.yml</a></code>)</p><p id="ec7f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here we enable the drivers for the GPS and NB-IoT modules, by setting <code class="dm ia ib ic id b">GPS_L70R</code> and <code class="dm ia ib ic id b">BC95G</code> to <code class="dm ia ib ic id b">1</code>. We specify the UART port for the GPS and NB-IoT modules like this…</p><pre class="gx gy gz ha hb mk ml mm"><span id="38f7" class="mn kd ec bk id b ds mo mp r mq">GPS_L70R_UART: 0  #  Connect to Quectel L70R module on USART2<br/>BC95G_UART:    2  #  Connect to Quectel BC95-G module on LPUART1 <br/>                  #  i.e. USART3 with TX/RX pins swapped</span></pre><p id="18b2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Why <code class="dm ia ib ic id b">0</code> and <code class="dm ia ib ic id b">2</code>? Because the Mynewt UART ports are named like this…</p><pre class="gx gy gz ha hb mk ml mm"><span id="1638" class="mn kd ec bk id b ds mo mp r mq"><strong class="id hp">UART_0 → USART2</strong><br/>UART_1 → USART1<br/><strong class="id hp">UART_2 → USART3</strong></span></pre><p id="2b96" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Recall that we need to swap the <code class="dm ia ib ic id b">TX/RX</code> pins for port <code class="dm ia ib ic id b">USART3</code> so that it behaves like <code class="dm ia ib ic id b">LPUART1</code>. We have applied a patch in <code class="dm ia ib ic id b">hal_uart.c</code> that swaps the pins only if <code class="dm ia ib ic id b">UART_2_SWAP_TXRX</code> is set to <code class="dm ia ib ic id b">1</code>…</p><pre class="gx gy gz ha hb mk ml mm"><span id="9da6" class="mn kd ec bk id b ds mo mp r mq"># Swap TX/RX pins for USART3 so that USART3 behaves like LPUART1<br/>UART_2_SWAP_TXRX: 1</span></pre><p id="e213" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">On the Ghostyu developer kit, the GPS module is disabled by default. The GPS driver needs to set Pin PA1 to high to enable the GPS module. We specify the pin like this…</p><pre class="gx gy gz ha hb mk ml mm"><span id="2bcd" class="mn kd ec bk id b ds mo mp r mq"># GPIO Pin PA1 enables and disables the GPS module<br/>GPS_L70R_ENABLE_PIN: MCU_GPIO_PORTA(1)</span></pre></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="8fd9" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Rust Application</h1><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="db dc dd de ak"><div class="cl cm mr"><div class="dl r dd dm"><div class="ms r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*othN-uAMqDuWDvPF8tgQYA.png?q=20" width="536" height="335" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="536" height="335" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1072/1*othN-uAMqDuWDvPF8tgQYA.png" width="536" height="335" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Rust Application</figcaption></figure><p id="3bd5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">In the previous project</a> we have created an Embedded Rust application that polls the internal temperature sensor every 10 seconds and transmits the temperature to the CoAP server (at thethings.io). Now we’ll extend the Rust application to transmit the GPS Geolocation (latitude, longitude) together with the temperature.</p><p id="c4e8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We reused the Rust modules in <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/rust/app/src" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">rust/app/src</a></code> from the previous application…</p><p id="cc5f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/lib.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">lib.rs</a></code>: Main program that starts the sensors and networking</p><p id="b0c4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_sensor.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">app_sensor.rs</a></code>: Poll the internal temperature sensor <code class="dm ia ib ic id b">temp_stm32</code> and call <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_network.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">app_network.rs</a></code> to transmit the data</p><p id="b565" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_network.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">app_network.rs</a></code>: Compose a CoAP Message with a JSON Payload to transmit the temperature data to the CoAP server at thethings.io</p><p id="bca8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We added a new module <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/gps_sensor.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">gps_sensor.rs</a></code> that instructs Mynewt to poll our GPS sensor every 11 seconds. This is possible because our GPS driver <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/gps_l70r" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">gps_l70r</a></code> has been integrated with <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/os/modules/sensor_framework/sensor_framework.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Mynewt’s Sensor Framework</a> so that it works like any other sensor (such as the internal temperature sensor).</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/661235fdcd8d699e62d61f5e1bd10ec3" allowfullscreen="" frameborder="0" height="0" width="0" title="From https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/gps_sensor.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/gps_sensor.rs</a></figcaption></figure><p id="2773" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Now we have two sources of sensor data in our Rust application…</p><p id="c413" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <strong class="gj hp">Internal Temperature Sensor Data</strong>, generated by the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/temp_stm32" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">temp_stm32</a></code> driver</p><p id="1ba8" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <strong class="gj hp">GPS Geolocation (latitude, longitude, altitude)</strong>, generated by the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/libs/gps_l70r" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">gps_l70r</a></code> driver</p><p id="0b38" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To conserve NB-IoT packets, we’ll aggregate the two types of sensor data and transmit as a single CoAP message. That’s why the Sensor Listeners for both sensors have been updated to forward the polled sensor data to a new function <code class="dm ia ib ic id b">aggregate_sensor_data()</code> defined in <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_network.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">app_network.rs</a></code>…</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/660da0876d3d1f19c03ae48ad12fcca2" allowfullscreen="" frameborder="0" height="0" width="0" title="From https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_network.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_network.rs</a></figcaption></figure><p id="4a6e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">When <code class="dm ia ib ic id b">aggregate_sensor_data()</code> receives a GPS Geolocation, it doesn’t transmit the data to the server. Instead it stores the GPS Geolocation.</p><p id="4d32" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">When <code class="dm ia ib ic id b">aggregate_sensor_data()</code> receives the temperature sensor data, it attaches the stored GPS Geolocation to the sensor data, and transmits the geolocated sensor data like this…</p><pre class="gx gy gz ha hb mk ml mm"><span id="8438" class="mn kd ec bk id b ds mo mp r mq">{ &quot;values&quot;: [<br/>   { &quot;key&quot;  : &quot;t&quot;,      <br/>     &quot;value&quot;: 960, <br/>     &quot;geo&quot;  : { &quot;lat&quot;: 1.2701, &quot;long&quot;: 103.8078 }}<br/>     ...<br/>]}</span></pre><p id="7287" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This <a href="https://web.archive.org/web/20191204194100/https://developers.thethings.io/docs/json-1" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">JSON Payload format</a> is specified by thethings.io for transmitting sensor data (<code class="dm ia ib ic id b">temperature t = 960</code>) with attached geolocation (<code class="dm ia ib ic id b">latitude = 1.2701, longitude = 103.8078</code>).</p><p id="b9ef" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The Rust code for creating the JSON Payload is exactly the same as before, based on the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/mynewt/src/encoding/macros.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">coap!</a></code> macro…</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/c9c7de17af267c3e9ea0ffb8b4910449" allowfullscreen="" frameborder="0" height="0" width="0" title="From https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_network.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/</a></figcaption></figure><figure class="du cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="db dc dd de ak"><div class="cl cm gw"><div class="dl r dd dm"><div class="ho r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/34/1*qT9I1BeqVmw_5-nhmDVZlQ.png?q=20" width="1242" height="2208" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1242" height="2208" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/2484/1*qT9I1BeqVmw_5-nhmDVZlQ.png" width="1242" height="2208" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Geolocated Sensor Data rendered in a dashboard at thethings.io</figcaption></figure><p id="81b5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">How is this possible? Because the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/mynewt/src/encoding/macros.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">coap!</a></code> macro has been updated to <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/mynewt/src/encoding/macros.rs#L535-L536" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">emit the GPS Geolocation</a> attached to the sensor data in <code class="dm ia ib ic id b">val</code> (if the GPS Geolocation exists).</p><p id="d174" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The screen shows how the Geolocated Sensor Data transmitted by our device would be rendered in a dashboard at thethings.io.</p><p id="3ef0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">That’s the power of creating a Domain-Specific Language (like <code class="dm ia ib ic id b">coap!</code>) in Rust… We simply focus on the intent of transmitting sensor data, and let the macro decide how to generate the right payload to match our intent.</p><p id="38a7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">One more enhancement implemented in the Mynewt Rust Wrapper: The polling of Mynewt sensors in the Rust application has been made simpler by introducing <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/mynewt/src/hw/sensor_mgr.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Rust Iterators</a>…</p></div></div><div class="cz ak"><figure class="gx gy gz ha hb cz ak paragraph-image"><div class="dl r dd dm"><div class="mt r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*0Noo0gaHItG2y45dxXYzyg.png?q=20" width="1976" height="997" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="1976" height="997" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/3952/1*0Noo0gaHItG2y45dxXYzyg.png" width="1976" height="997" role="presentation"/></noscript></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Rust Iterators for polling Mynewt sensors. From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_sensor.rs" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/rust/app/src/app_sensor.rs</a></figcaption></figure></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="4d93" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Mynewt Build and Flash Scripts</h1><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm mu"><div class="dl r dd dm"><div class="mv r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*3ChgwrLXPWxxExFRbfzTng.png?q=20" width="463" height="427" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="463" height="427" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/926/1*3ChgwrLXPWxxExFRbfzTng.png" width="463" height="427" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Mynewt Build and Flash Scripts</figcaption></figure><p id="9523" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Mynewt provides the <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/newt/newt_ops.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">command-line tool </a><code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/newt/newt_ops.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">newt</a></code> for building the firmware image and flashing it to the microcontroller. On Windows, <code class="dm ia ib ic id b">newt</code> requires the <a href="https://web.archive.org/web/20191204194100/https://mynewt.apache.org/latest/newt/newt_ops.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">MSYS2 and MinGW toolchains to be installed</a>.</p><p id="87a2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">I wanted to simplify the installation of the Mynewt build tools on Windows (and make them more robust), so I chose to write my own build and flash scripts based on pure Windows, without MSYS2 and MinGW. Earlier I have experimented with <code class="dm ia ib ic id b">newt</code> on <a href="https://web.archive.org/web/20191204194100/https://docs.microsoft.com/en-us/windows/wsl/about" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Windows Subsystem for Linux</a> but the performance was awful so I dropped it.</p><p id="ce30" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The custom build scripts for STM32 L476 are located in the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/scripts/stm32l4" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">scripts/stm32l4</a></code> folder (except for <code class="dm ia ib ic id b">build-app</code>, which is located in <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/scripts" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">scripts</a></code>). The <code class="dm ia ib ic id b">*.cmd</code> scripts are for Windows, <code class="dm ia ib ic id b">*.sh</code> scripts are for macOS and Linux (though not extensively tested for Linux). <code class="dm ia ib ic id b">*.ocd</code> are the <a href="https://web.archive.org/web/20191204194100/http://openocd.org/doc-release/html/About.html#About" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">OpenOCD</a> scripts for flashing and debugging (they control the ST-Link interface).</p><p id="5b4e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/build-boot.cmd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">build-boot.cmd</a>, <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/build-boot.sh" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.sh</a></code>: Build the bootloader by running <code class="dm ia ib ic id b">newt build stm32l4_boot</code></p><p id="994d" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/build-app.cmd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">build-app.cmd</a>, <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/build-app.sh" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.sh</a></code>: Build the application by running <code class="dm ia ib ic id b">newt build stm32l4_my_sensor</code>. Also builds the Rust application and injects the compiled Rust code into the build.</p><p id="6531" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Previously the Rust build for STM32 Blue Pill F103 was targeted for <code class="dm ia ib ic id b">thumbv7m-none-eabi</code> (Arm Cortex M3), now the Rust build for STM32 L476 is targeted for <code class="dm ia ib ic id b">thumbv7em-none-eabihf</code> (Arm Cortex M4 with Hardware Floating-Point)</p><p id="9e8e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/image-app.cmd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">image-app.cmd</a>, <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/image-app.sh" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.sh</a></code>: Create the application firmware image: <code class="dm ia ib ic id b">newt create-image -v stm32l4_my_sensor 1.0.0</code></p><p id="54cf" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">4️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-boot.cmd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">flash-boot.cmd</a>, <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-boot.sh" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.sh</a></code>: Flash the bootloader with OpenOCD</p><p id="e032" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">5️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-boot.ocd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">flash-boot.ocd</a></code>: OpenOCD script for flashing the bootloader</p><p id="a8b9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">6️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-app.cmd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">flash-app.cmd</a>, <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-app.sh" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.sh</a></code>: Flash the application with OpenOCD</p><p id="70cc" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">7️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-app.ocd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">flash-app.ocd</a></code>: OpenOCD script for flashing the application</p><p id="8778" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">8️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/flash-init.ocd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">flash-init.ocd</a></code>: OpenOCD initialisation script called by <code class="dm ia ib ic id b">flash-boot.ocd</code> and <code class="dm ia ib ic id b">flash-app.ocd</code></p><p id="6b74" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">9️⃣ <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/scripts/stm32l4/debug.ocd" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">debug.ocd</a></code>: OpenOCD script for debugging the application. Called by the <a href="https://web.archive.org/web/20191204194100/https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Cortex-Debug Extension</a> in <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch-stm32l4.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.vscode/launch-stm32l4.json</a></code></p><p id="3c78" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The <code class="dm ia ib ic id b">newt</code> command in the Windows scripts refer to the <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/newt" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Windows build of </a><code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/newt" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">newt</a></code>, which works without MSYS2 and MinGW.</p><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm mw"><div class="dl r dd dm"><div class="mx r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/52/1*1sUF3auTmMLywTHB6wyBxg.png?q=20" width="315" height="370" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="315" height="370" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/630/1*1sUF3auTmMLywTHB6wyBxg.png" width="315" height="370" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Visual Studio Code Tasks in the Task Runner</figcaption></figure><p id="a466" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The above scripts are linked into <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/tasks.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.vscode/tasks.json</a></code> so that they will appear as Tasks in Visual Studio Code.</p><p id="c30c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">If we’re using the <a href="https://web.archive.org/web/20191204194100/https://marketplace.visualstudio.com/items?itemName=SanaAjani.taskrunnercode" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Task Runner Extension</a>, the tasks will appear like this.</p><p id="0978" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">(The custom build and flash scripts from <a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">the previous project</a> are located in the <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/tree/l476/scripts" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">scripts</a></code> folder)</p></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="b94d" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Visual Studio Code Configuration</h1><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="db dc dd de ak"><div class="cl cm my"><div class="dl r dd dm"><div class="mz r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*rn5hIckz7OV_JoqN4ZxqNA.png?q=20" width="422" height="242" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="422" height="242" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/844/1*rn5hIckz7OV_JoqN4ZxqNA.png" width="422" height="242" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Changes made for Visual Studio Code Configuration</figcaption></figure><p id="e969" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a href="https://web.archive.org/web/20191204194100/https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Cortex-Debug</a> is the debugger we’re using in Visual Studio Code to debug our application. We added a new debugger configuration <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch-stm32l4.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.vscode/launch-stm32l4.json</a></code> for STM32 L476.</p><p id="e7b3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The debugger configuration specifies the <a href="https://web.archive.org/web/20191204194100/http://openocd.org/doc-release/html/About.html#About" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">OpenOCD</a> scripts and <a href="https://web.archive.org/web/20191204194100/https://www.gnu.org/software/gdb/" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">GDB</a> commands for debugging the application. Note that <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">launch.json</a></code>, the current debugger configuration, is overwritten by <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch-stm32l4.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">launch-stm32l4.json</a></code> whenever the application is rebuilt. So we should never edit <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">launch.json</a></code>.</p><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/483423855970ca1d00246c0c1005cbb8" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/build-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Cortex-Debug Configuration. From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch-stm32l4.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch-stm32l4.json</a></figcaption></figure><p id="a63e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">(The debugger configuration from <a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&amp;sk=aaa21371f68a07c543066b6b89a760f0">the previous project</a> is at <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/.vscode/launch-bluepill.json" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">.vscode/launch-bluepill.json</a></code>)</p></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="8249" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Connect the Hardware</h1><p id="81ea" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu">To build the NB-IoT GPS Tracker we’ll need the following hardware…</p><p id="7b4e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/quick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&amp;sk=37f71270cd52f497fb6fb8139917031c"><strong class="gj hp">Ghostyu NB-EK-L476 Developer Kit</strong></a>, as described in the article <em class="gv">“</em><a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/quick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&amp;sk=37f71270cd52f497fb6fb8139917031c"><em class="gv">Quick Peek of Huawei LiteOS with NB-IoT on Ghostyu NB-EK-L476 Developer Kit (STM32L476RCT6)</em></a><em class="gv">”</em></p><p id="b286" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The kit includes the <a href="https://web.archive.org/web/20191204194100/https://www.st.com/en/microcontrollers-microprocessors/stm32l476rc.html" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">STM32L476RCT6</a> microcontroller, <a href="https://web.archive.org/web/20191204194100/https://www.quectel.com/product/bc95.htm" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Quectel BC95</a> NB-IoT module (with antenna) and <a href="https://web.archive.org/web/20191204194100/https://www.quectel.com/product/l70r.htm" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Quectel L70-R</a> GPS module (with antenna).</p><p id="72aa" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj hp">Alternatively</strong>: You may assemble your own kit based on the same STM32 microcontroller and Quectel modules.</p><p id="a0b2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Remember to select a Quectel NB-IoT module that works with your local NB-IoT Frequency Band. You may consider this <a href="https://web.archive.org/web/20191204194100/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20190725022150&amp;SearchText=bc95-g+nb101&amp;switch_new_app=y" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp">Quectel BC95-G Global NB-IoT Module</strong></a> (breakout board with antenna), which supports all global bands.</p><p id="5bea" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To connect the components in your custom kit, refer to the <a href="https://web.archive.org/web/20191204194100/https://drive.google.com/file/d/14KZqMO6cj20eKqM85iJNth8vf_WbI5VM/view?usp=sharing" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Ghostyu NB-EK-L476 schematics</a>. Note that the Quectel NB-IoT module may require additional power, like <a href="https://web.archive.org/web/20191204194100/https://www.linkedin.com/posts/lupyuen_quectel-nbiot-stm32-activity-6558362381049790464-rDgF" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">tapping the 5V pin from ST-Link</a> instead of sharing the ST-Link’s 3.3V pin with the microcontroller.</p><p id="4ba1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <a href="https://web.archive.org/web/20191204194100/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924134644&amp;SearchText=st-link+v2" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp">ST-Link V2 USB Adapter</strong></a><strong class="gj hp">: </strong>Under $2, search <a href="https://web.archive.org/web/20191204194100/https://www.aliexpress.com/wholesale?catId=0&amp;initiative_id=SB_20180924134644&amp;SearchText=st-link+v2&amp;switch_new_app=y" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">AliExpress</a> for <code class="dm ia ib ic id b">st-link v2</code></p><p id="c2cb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <strong class="gj hp">NB-IoT SIM</strong> from your local NB-IoT network operator. <em class="gv">Many thanks to </em><a href="https://web.archive.org/web/20191204194100/https://www.starhub.com/" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp"><em class="gv">StarHub</em></strong></a><em class="gv"> for sponsoring the NB-IoT SIM that I used for this tutorial!</em></p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm na"><div class="dl r dd dm"><div class="nb r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*tsffm9X06OaAcHum--phRg.jpeg?q=20" width="6000" height="4000" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="6000" height="4000" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/12000/1*tsffm9X06OaAcHum--phRg.jpeg" width="6000" height="4000" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Pins connected from the SWD Debug Port to ST-Link: SWDIO, SWCLK, VCC, GND</figcaption></figure><figure class="du cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm nc"><div class="dl r dd dm"><div class="nd r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*LEZB_DbX56eJBbYhi_0NZg.png?q=20" width="203" height="169" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="203" height="169" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/406/1*LEZB_DbX56eJBbYhi_0NZg.png" width="203" height="169" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">SWD Debug Port on Ghostyu NB-EK-L476</figcaption></figure><p id="d88e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Connect the following pins from the SWD Debug Port to ST-Link: <code class="dm ia ib ic id b">SWDIO</code>, <code class="dm ia ib ic id b">SWCLK</code>, <code class="dm ia ib ic id b">VCC</code>, <code class="dm ia ib ic id b">GND</code>.</p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm ne"><div class="dl r dd dm"><div class="nf r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*nWozKPJNHOCA7Be5sk9_vQ.jpeg?q=20" width="2677" height="2123" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="2677" height="2123" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/5354/1*nWozKPJNHOCA7Be5sk9_vQ.jpeg" width="2677" height="2123" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Ghostyu STM32 L476 Development Kit powered by both ST-Link and micro-USB port. At top left is a USB hub.</figcaption></figure><p id="c713" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">For the Ghostyu NB-EK-L476, you need to <strong class="gj hp">connect the micro-USB port on the board to another USB port</strong> on your computer. This means that the board will have two power sources: 3.3V power from ST-Link, and 5V power from micro-USB port. This ensures that the NB-IoT module will have sufficient power.</p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm ng"><div class="dl r dd dm"><div class="nh r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*-d6mWNRRD7m3Kn9Y7QLeYg.png?q=20" width="874" height="472" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="874" height="472" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1748/1*-d6mWNRRD7m3Kn9Y7QLeYg.png" width="874" height="472" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">NB-IoT Module Power Supply for Ghostyu NB-EK-L476. From <a href="https://web.archive.org/web/20191204194100/https://drive.google.com/file/d/14KZqMO6cj20eKqM85iJNth8vf_WbI5VM/view?usp=sharing" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://drive.google.com/file/d/14KZqMO6cj20eKqM85iJNth8vf_WbI5VM/view?usp=sharing</a></figcaption></figure><figure class="du cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm ni"><div class="dl r dd dm"><div class="nj r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/58/0*UpJu2WsvTJwrpaRH.png?q=20" width="450" height="461" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="450" height="461" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/900/0*UpJu2WsvTJwrpaRH.png" width="450" height="461" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">SIM partially exposed to show the unusual orientation</figcaption></figure><p id="176a" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj hp">Insert the NB-IoT SIM</strong> into the Quectel NB-IoT Breakout Board according to the orientation shown in the photo. (Yes the SIM notch faces outward, not inward)</p><p id="e9f5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj hp"><em class="gv">Remember: Always connect the antenna before powering up the NB-IoT module!</em></strong></p><p id="caaf" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj hp">If you’re using Windows: </strong>Make sure that the ST-Link Driver has been installed before connecting ST-Link to your computer</p></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="d5e7" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">Install and Run the NB-IoT GPS Tracker</h1><p id="9bef" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu"><a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/install-apache-mynewt-and-embedded-rust-for-stm32-l476-and-visual-studio-code-on-windows-9ed40e065cf4?source=friends_link&amp;sk=23aadbb4931d991241927b905aa9e073">Follow the instructions in this article</a> to install, build and run our application on the STM32 L476 development board (or equivalent).</p><p id="cb4f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">While running the application, the Console Log should look like this…</p><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hu hv hw hx hn"><div class="dl r dd"><div class="hy r"><iframe src="https://web.archive.org/web/20191204194100if_/https://medium.com/media/a37fb388d4ab5a971fa328d9152a7938" allowfullscreen="" frameborder="0" height="0" width="0" title="See https://medium.com/@ly.lee/install-apache-mynewt-and-embedded-rust-for-stm32-l476-and-visual-studio-code-on-windows-9ed40e065cf4" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Adapter Output Log from <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/logs/standalone-node.log" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/logs/standalone-node.log</a></figcaption></figure><p id="27c9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here you can see the program reading the internal temperature sensor.</p><p id="1050" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The temperature sensor data is combined with the GPS geolocation into a JSON Payload.</p><p id="61d0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The JSON Payload is then transmitted as a CoAP Message to the CoAP server at thethings.io.</p><p id="7d55" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">In the Console Log, there is a URL displayed: <code class="dm ia ib ic id b">http://blue-pill-geolocate.appspot.com/...</code></p><p id="d9c0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Clicking this URL opens a web page that displays the computed temperature (in degrees Celsius) and the GPS geolocation, based on the sensor data received by thethings.io from your device over NB-IoT. This URL is randomly-generated each time we restart our device.</p><p id="ad62" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We have installed a <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/thethingsio-wifi-geolocation" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">script at thethings.io</a> that pushes the computed temperature and geolocation to <code class="dm ia ib ic id b">blue-pill-geolocate.appspot.com</code>. For more details, check the section <em class="gv">“Advanced Topic: WiFi Geolocation with thethings.io and Google App Engine”</em> in the article <em class="gv">“</em><a class="at cg hq hr hs ht" target="_blank" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee/connect-stm32-blue-pill-to-esp8266-with-apache-mynewt-7edceb9e3b8d?source=friends_link&amp;sk=df729a82533d817ec6b2d9b626b6f66b"><em class="gv">Connect STM32 Blue Pill to ESP8266 with Apache Mynewt</em></a><em class="gv">”</em>.</p><figure class="gx gy gz ha hb cz cl cm paragraph-image"><div class="db dc dd de ak"><div class="cl cm nk"><div class="dl r dd dm"><div class="nl r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*ocUyYJbh2pvzDX1ibTMmQQ.png?q=20" width="2758" height="1848" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="2758" height="1848" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/5516/1*ocUyYJbh2pvzDX1ibTMmQQ.png" width="2758" height="1848" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Computed temperature and the GPS geolocation</figcaption></figure><p id="d921" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">Does the transmission of geolocation work when the device is on the move (say, when mounted on a vehicle?) If the device moves between NB-IoT cells, will the transmission still succeed?</em></p><p id="fb06" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Yes! I have tested the NB-IoT GPS Tracker while walking around… Geolocation updates are indeed transmitted correctly to thethings.io as I walk.</p></div></div><div class="cz ak"><figure class="gx gy gz ha hb cz ak paragraph-image"><div class="db dc dd de ak"><div class="dl r dd dm"><div class="nm r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*K_66lgzCBwUTh82hO3P61w.jpeg?q=20" width="5999" height="2001" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="5999" height="2001" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/11998/1*K_66lgzCBwUTh82hO3P61w.jpeg" width="5999" height="2001" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Field testing of the NB-IoT GPS Tracker</figcaption></figure></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="bd64" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s a video demo of the NB-IoT GPS Tracker…</p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="nn r"><iframe src="https://web.archive.org/web/20191204194100if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FBLfAq1FzUbs%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DBLfAq1FzUbs&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FBLfAq1FzUbs%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="640" title="Reading a Quectel GPS and transmitting over NB-IoT with Rust (3D Map)" class="cp t u dh ak" scrolling="auto"></iframe></div></div></figure></div></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="01c5" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">thethings.io Configuration</h1><p id="f1df" class="gh gi ec bk gj b gk kp gm kq go kr gq ks gs kt gu">If you’re happy to view the sensor data using my server at <code class="dm ia ib ic id b">blue-pill-geolocate.appspot.com</code>, you may skip this section. If you wish to configure your own account for thethings.io, read on…</p><p id="c423" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Follow the steps in the three videos below to configure your thethings.io account and install the Cloud Code Scripts. Click <code class="dm ia ib ic id b">CC</code> to view the instructions.</p><p id="1e4e" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj hp">Note</strong>: There is one additional Cloud Code Function to be installed: <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/thethingsio-wifi-geolocation/blob/master/push_sensor_data.js" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">push_sensor_data</a></code>. Copy the code <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/thethingsio-wifi-geolocation/blob/master/push_sensor_data.js" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">from this link</a> to create a new Cloud Code Function named <code class="dm ia ib ic id b">push_sensor_data</code>.</p><p id="b211" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The Thing Token should be updated in the <code class="dm ia ib ic id b">COAP_URI</code> setting of the System Configuration File <code class="dm ia ib ic id b"><a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/targets/stm32l4_my_sensor/syscfg.yml" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">targets/stm32l4_my_sensor/syscfg.yml</a></code></p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="nn r"><iframe src="https://web.archive.org/web/20191204194100if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F4KJiZMboaUg%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D4KJiZMboaUg&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F4KJiZMboaUg%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="640" title="Transform sensor data with thethings.io (Part 1 of 3)" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">thethings.io Configuration: Part 1 of 3. Click CC to view the instructions.</figcaption></figure><figure class="da cz"><div class="dl r dd"><div class="nn r"><iframe src="https://web.archive.org/web/20191204194100if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FszCHheKEC7I%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DszCHheKEC7I&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FszCHheKEC7I%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="640" title="Transform sensor data with thethings.io (Part 2 of 3)" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">thethings.io Configuration: Part 2 of 3. Click CC to view the instructions.</figcaption></figure><figure class="da cz"><div class="dl r dd"><div class="nn r"><iframe src="https://web.archive.org/web/20191204194100if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FdMelHn4xTcM%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DdMelHn4xTcM&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FdMelHn4xTcM%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="640" title="Transform sensor data with thethings.io (Part 3 of 3)" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">thethings.io Configuration: Part 3 of 3. Click CC to view the instructions.</figcaption></figure></div></div></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="68d4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">At the dashboard page, create a new Widget with the following settings…</p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><div class="gx gy gz ha hb n et"><figure class="da cz no np mg mf nq paragraph-image"><div class="db dc dd de ak"><div class="dl r dd dm"><div class="nr r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/42/1*V7nBDddS3fZq2TAW7PRfkw.png?q=20" width="576" height="822" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="576" height="822" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1152/1*V7nBDddS3fZq2TAW7PRfkw.png" width="576" height="822" role="presentation"/></noscript></div></div></div></figure><figure class="da cz ns np mg mf nq paragraph-image"><div class="db dc dd de ak"><div class="dl r dd dm"><div class="nt r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/42/1*q3u2_gOFR1NUi03k2MXjiQ.png?q=20" width="570" height="819" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="570" height="819" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/1140/1*q3u2_gOFR1NUi03k2MXjiQ.png" width="570" height="819" role="presentation"/></noscript></div></div></div></figure></div></div></div></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="dc11" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The geolocated temperature will be shown in the Widget. Here’s how it looks…</p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><figure class="gx gy gz ha hb cz mf mg paragraph-image"><div class="db dc dd de ak"><div class="cl cm nu"><div class="dl r dd dm"><div class="nv r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/60/1*GLKsUpS-887-Ywcl02u2lA.png?q=20" width="2484" height="1298" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="2484" height="1298" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/4968/1*GLKsUpS-887-Ywcl02u2lA.png" width="2484" height="1298" role="presentation"/></noscript></div></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">thethings.io dashboard with geolocated temperature sensor data</figcaption></figure></div></div></div><div class="n p"><div class="ac ae af ag ah dz aj ak"><p id="468b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s a video demo of thethings.io dashboard with geolocated temperature sensor data…</p></div></div><div class="cz"><div class="n p"><div class="lw lx ly lz ma mb ag mc ah md aj ak"><figure class="gx gy gz ha hb cz"><div class="dl r dd"><div class="nn r"><iframe src="https://web.archive.org/web/20191204194100if_/https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F2-CWQju-Ffs%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D2-CWQju-Ffs&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F2-CWQju-Ffs%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="640" title="Reading a Quectel GPS and transmitting over NB-IoT with Rust" class="cp t u dh ak" scrolling="auto"></iframe></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Video demo of thethings.io dashboard with geolocated temperature sensor data</figcaption></figure></div></div></div></section><hr class="jr dy js jt ju dv jv jw jx jy jz"/><section class="cu cv cw cx cy"><div class="n p"><div class="ac ae af ag ah dz aj ak"><h1 id="a059" class="kc kd ec bk bj jf ke lp kg lq ki lr kk ls km lt ko">What’s Next?</h1><figure class="gx gy gz ha hb cz dr hc cd hd he hf hg hh ba hi hj hk hl hm hn paragraph-image"><div class="cl cm nw"><div class="dl r dd dm"><div class="nx r"><div class="df dg cp t u dh ak di dj dk"><img class="cp t u dh ak do dp dq" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/36/1*kfX4OugCyF--y9E_3zgjDQ.png?q=20" width="462" height="787" role="presentation"/></div><img class="df dg cp t u dh ak dr" width="462" height="787" role="presentation"/><noscript><img class="cp t u dh ak" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/max/924/1*kfX4OugCyF--y9E_3zgjDQ.png" width="462" height="787" role="presentation"/></noscript></div></div></div><figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">RAM and ROM usage in Application Build Log. From <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/logs/build-application.log" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/logs/build-application.log</a></figcaption></figure><p id="4c07" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">We have created an NB-IoT GPS Tracker in only <a href="https://web.archive.org/web/20191204194100/https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/l476/logs/build-application.log" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow"><strong class="gj hp">84 KB of Flash ROM</strong></a> (with debugging symbols included). Mighty impressive considering that it includes Mynewt Embedded OS and the Embedded Rust Libraries!</p><p id="3d72" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">STM32 L476 is definitely a good choice for building an NB-IoT GPS Tracker. Mynewt did a great job of shielding the microcontroller-specific details and making embedded applications truly portable. And the application was created with only a few lines of Rust application code… Rust is incredibly productive for creating embedded applications!</p><p id="4263" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">For my next article I shall be taking a break from STM32 (since we have proved that it’s so easy to port Mynewt applications across STM32 microcontrollers)… And explore <a href="https://web.archive.org/web/20191204194100/https://infocenter.nordicsemi.com/pdf/nRF52832_PS_v1.0.pdf" class="at cg hq hr hs ht" target="_blank" rel="noopener nofollow">Nordic nRF52832</a> with Mynewt and Rust!</p></div></div></section></div></article><div class="df ct ny s ak nz oa ob" data-test-id="post-sidebar"><div class="n p"><div class="ac ae af ag ah ai aj ak"><div class="oc n co"><div class="ct"><div class="od oe of n"><div class="n o"><div class="og r dd"><a href="https://web.archive.org/web/20191204194100/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546&amp;source=post_sidebar-----8c095a925546---------------------clap_sidebar-" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><div class="ba oh oi oj ok ol om on oo op oq"><svg width="29" height="29"><g fill-rule="evenodd"><path d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg></div></a></div><div class="or r"><div class="os"><h4 class="bj dy ds bl bo"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi">13 </button></h4></div></div></div></div><div><div class="cf"><a href="https://web.archive.org/web/20191204194100/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546&amp;source=post_sidebar--------------------------bookmark_sidebar-" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25" height="25" viewbox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div></div><div class="df ct ny s ot ex ou ov oa ow"></div><div><div class="ox cz n co p"><div class="n p"><div class="ac ae af ag ah dz aj ak"><div class="n oy"></div><div class="n o oy"></div><div class="oz r"><ul class="ba bb"><li class="cf pa pb pc"><a href="/web/20191204194100/https://medium.com/tag/internet-of-things" class="pd pe cg bo r ml pf a b fw">Internet of Things</a></li><li class="cf pa pb pc"><a href="/web/20191204194100/https://medium.com/tag/rust" class="pd pe cg bo r ml pf a b fw">Rust</a></li><li class="cf pa pb pc"><a href="/web/20191204194100/https://medium.com/tag/stm32" class="pd pe cg bo r ml pf a b fw">Stm32</a></li><li class="cf pa pb pc"><a href="/web/20191204194100/https://medium.com/tag/gps" class="pd pe cg bo r ml pf a b fw">Gps</a></li><li class="cf pa pb pc"><a href="/web/20191204194100/https://medium.com/tag/nb-iot" class="pd pe cg bo r ml pf a b fw">Nb Iot</a></li></ul></div><div class="pg n en ab"><div class="n o"><div class="ph r dd"><a href="https://web.archive.org/web/20191204194100/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546&amp;source=post_actions_footer-----8c095a925546---------------------clap_footer-" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><div class="c pi ez n o pj dd pk pl pm pn po pp pq pr ps pt pu pv pw px"><div class="ba oh oi oj ok ol py on o dr ez n p pz u dh cp t ak oo op oq qa"><svg width="33" height="33" viewbox="0 0 33 33"><path d="M28.86 17.34l-3.64-6.4c-.3-.43-.71-.73-1.16-.8a1.12 1.12 0 0 0-.9.21c-.62.5-.73 1.18-.32 2.06l1.22 2.6 1.4 2.45c2.23 4.09 1.51 8-2.15 11.66a9.6 9.6 0 0 1-.8.71 6.53 6.53 0 0 0 4.3-2.1c3.82-3.82 3.57-7.87 2.05-10.39zm-6.25 11.08c3.35-3.35 4-6.78 1.98-10.47L21.2 12c-.3-.43-.71-.72-1.16-.8a1.12 1.12 0 0 0-.9.22c-.62.49-.74 1.18-.32 2.06l1.72 3.63a.5.5 0 0 1-.81.57l-8.91-8.9a1.33 1.33 0 0 0-1.89 1.88l5.3 5.3a.5.5 0 0 1-.71.7l-5.3-5.3-1.49-1.49c-.5-.5-1.38-.5-1.88 0a1.34 1.34 0 0 0 0 1.89l1.49 1.5 5.3 5.28a.5.5 0 0 1-.36.86.5.5 0 0 1-.36-.15l-5.29-5.29a1.34 1.34 0 0 0-1.88 0 1.34 1.34 0 0 0 0 1.89l2.23 2.23L9.3 21.4a.5.5 0 0 1-.36.85.5.5 0 0 1-.35-.14l-3.32-3.33a1.33 1.33 0 0 0-1.89 0 1.32 1.32 0 0 0-.39.95c0 .35.14.69.4.94l6.39 6.4c3.53 3.53 8.86 5.3 12.82 1.35zM12.73 9.26l5.68 5.68-.49-1.04c-.52-1.1-.43-2.13.22-2.89l-3.3-3.3a1.34 1.34 0 0 0-1.88 0 1.33 1.33 0 0 0-.4.94c0 .22.07.42.17.61zm14.79 19.18a7.46 7.46 0 0 1-6.41 2.31 7.92 7.92 0 0 1-3.67.9c-3.05 0-6.12-1.63-8.36-3.88l-6.4-6.4A2.31 2.31 0 0 1 2 19.72a2.33 2.33 0 0 1 1.92-2.3l-.87-.87a2.34 2.34 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.64l-.14-.14a2.34 2.34 0 0 1 0-3.3 2.39 2.39 0 0 1 3.3 0l.14.14a2.33 2.33 0 0 1 3.95-1.24l.09.09c.09-.42.29-.83.62-1.16a2.34 2.34 0 0 1 3.3 0l3.38 3.39a2.17 2.17 0 0 1 1.27-.17c.54.08 1.03.35 1.45.76.1-.55.41-1.03.9-1.42a2.12 2.12 0 0 1 1.67-.4 2.8 2.8 0 0 1 1.85 1.25l3.65 6.43c1.7 2.83 2.03 7.37-2.2 11.6zM13.22.48l-1.92.89 2.37 2.83-.45-3.72zm8.48.88L19.78.5l-.44 3.7 2.36-2.84zM16.5 3.3L15.48 0h2.04L16.5 3.3z" fill-rule="evenodd"></path></svg></div></div></a></div><div class="or r"><div class="os"><h4 class="bj dy ds bl ec"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi">13 claps</button></h4></div></div></div><div class="n o"><div class="gf r ar"><a href="//web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/share/twitter?source=post_actions_footer---------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="gf r ar"><a href="//web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/share/linkedIn?source=post_actions_footer---------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg width="29" height="29" viewbox="0 0 29 29" fill="none" class="q"><path d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z" fill="#fff"></path></svg></a></div><div class="gf r ar"><a href="//web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/share/facebook?source=post_actions_footer---------------------------" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank" rel="noopener"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="gf r ar"><div><div class="cf"><a href="https://web.archive.org/web/20191204194100/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546&amp;source=post_actions_footer--------------------------bookmark_sidebar-" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg width="25" height="25" viewbox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div><div class="cf"><div class="r ar"><button class="at au av aw ax ay az ba bb bc bd be bf bg bh bi"><svg width="25" height="25" viewbox="-480.5 272.5 21 21" class="q"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></button></div></div></div></div><div class="qb qc qd oz r ab"><div class="qe qf r dd"><span class="r qg an qh"><div class="r cp qi qj"><a rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-"><div class="dd qk ql"><div class="bs n et o p cp eu ev ew ex ey ct"><svg width="91" height="91" viewbox="0 0 91 91"><path fill-rule="evenodd" clip-rule="evenodd" d="M45.5 1.4c-17.14 0-32 9.95-39.25 24.5L5 25.28C12.47 10.28 27.8 0 45.5 0S78.53 10.29 86 25.28l-1.25.62C77.5 11.35 62.65 1.4 45.5 1.4zM6.25 65.1c7.25 14.55 22.1 24.5 39.25 24.5 17.14 0 32-9.95 39.25-24.5l1.25.62C78.53 80.72 63.2 91 45.5 91S12.47 80.71 5 65.72l1.25-.62z"></path></svg></div><img alt="Lup Yuen Lee 李立源" class="r ez ql qk" src="https://web.archive.org/web/20191204194100im_/https://miro.medium.com/fit/c/160/160/1*KGohS3sQaUnr58gc0BIfoQ.jpeg" width="80" height="80"/></div></a></div><span class="r"><div class="qm r qn"><p class="bj dy fw bl bo qo qp">Written by</p></div><div class="qm qq n qn"><div class="ak n o en"><h2 class="bj jf js qr ec"><a class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener" href="/web/20191204194100/https://medium.com/@ly.lee?source=follow_footer--------------------------follow_footer-">Lup Yuen Lee 李立源</a></h2><div class="r g"><button class="qs ec q by fl fm fn fo bc bh fp fq fr fs ft fu cb bj b bk bl bm bn cc cd ce cf cg bf">Follow</button></div></div></div></span></span><div class="qm qt r qn aq"><div class="ni r"><h4 class="bj dy jg qu bo">Techie and Educator in IoT 物聯網教師</h4></div><div class="ap qv aq"><button class="qs ec q by fl fm fn fo bc bh fp fq fr fs ft fu cb bj b bk bl bm bn cc cd ce cf cg bf">Follow</button></div></div></div></div><div class="qw qc r ab"><a href="https://web.archive.org/web/20191204194100/https://medium.com/p/8c095a925546/responses/show?source=follow_footer--------------------------follow_footer-" class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><span class="qx qy ok"><div class="mk qz cb r dv g"><span class="br">Write the first response</span></div></span></a></div></div></div><div class="ra r rb ab"><div class="n p"><div class="ac ae af ag ah ai aj ak"></div></div></div></div></div><div class="rc r rd re"><section class="cl cm ak ce r in io ip iq ir is it iu iv iw ix iy iz ja jb"><div class="rf rg qe n en g"><div class="rh n en"><div class="ri r rj"><div class="rk r"><a href="https://web.archive.org/web/20191204194100/https://medium.com/about?autoplay=1&amp;source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc rl rm bf bg rn ro" rel="noopener"><h4 class="rp rq rr bj jf bk qu rs rt r">Discover <!-- -->Medium</h4></a></div><span class="bj b bk bl bm bn r ru rv">Welcome to a place where words matter. On <!-- -->Medium<!-- -->, smart voices and original ideas take center stage - with no ads in sight.<!-- --> <a href="https://web.archive.org/web/20191204194100/https://medium.com/about?autoplay=1&amp;source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc bf bg rn ro rw" rel="noopener">Watch</a></span></div><div class="ri r rj"><div class="rx r"><a href="https://web.archive.org/web/20191204194100/https://medium.com/topics?source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc rl rm bf bg rn ro" rel="noopener"><h4 class="rp rq rr bj jf bk qu rs rt r">Make <!-- -->Medium<!-- --> yours</h4></a></div><span class="bj b bk bl bm bn r ru rv">Follow all the topics you care about, and we’ll deliver the best stories for you to your homepage and inbox.<!-- --> <a href="https://web.archive.org/web/20191204194100/https://medium.com/topics?source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc bf bg rn ro rw" rel="noopener">Explore</a></span></div><div class="ri r rj"><div class="rk r"><a href="https://web.archive.org/web/20191204194100/https://medium.com/membership?source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc rl rm bf bg rn ro" rel="noopener"><h4 class="rp rq rr bj jf bk qu rs rt r">Become a member</h4></a></div><span class="bj b bk bl bm bn r ru rv">Get unlimited access to the best stories on <!-- -->Medium<!-- --> — and support writers while you’re at it. Just $5/month.<!-- --> <a href="https://web.archive.org/web/20191204194100/https://medium.com/membership?source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc bf bg rn ro rw" rel="noopener">Upgrade</a></span></div></div></div><div class="n o en"><a class="at au av aw ax ay az ba bb bc rl rm bf bg rn ro" rel="noopener" href="/web/20191204194100/https://medium.com/?source=post_page-----8c095a925546----------------------"><svg height="22" width="112" viewbox="0 0 111.5 22" class="rq"><path d="M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"></path></svg></a><span class="bj b bk bl bm bn r ru rv"><div class="ry rz n en sa an"><a href="https://web.archive.org/web/20191204194100/https://medium.com/about?autoplay=1&amp;source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc fi bf bg rn ro" rel="noopener">About</a><a href="https://web.archive.org/web/20191204194100/https://help.medium.com/?source=post_page-----8c095a925546----------------------" class="at au av aw ax ay az ba bb bc fi bf bg rn ro" rel="noopener">Help</a><a class="at au av aw ax ay az ba bb bc fi bf bg rn ro" rel="noopener" href="/web/20191204194100/https://medium.com/policy/9db0094a1e0f?source=post_page-----8c095a925546----------------------">Legal</a></div></span></div></section></div></div></div><script src="https://web.archive.org/web/20191204194100js_/https://cdn.optimizely.com/js/16180790160.js"></script><script>window.__BUILD_ID__ = "development"</script><script>window.__GRAPHQL_URI__ = "https://web.archive.org/web/20191204194100/https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"config":{"nodeEnv":"production","version":"master-20191204-181919-f1d0be3b6c","productName":"Medium","publicUrl":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","lightStep":{"name":"lite-web","host":"collector-medium.lightstep.com","token":"ce5be895bef60919541332990ac9fef2","appVersion":"master-20191204-181919-f1d0be3b6c"},"algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","sentry":{"dsn":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002F589e367c28ca47b195ce200d1507d18b@sentry.io\u002F1423575","environment":"production"},"isAmp":false,"googleAnalyticsCode":"UA-24232453-2","signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumOwnedAndOperatedCollectionIds":["544c7006046e","bcc38c8f6edf","444d13b52878","8d6b8a439e32","92d2092dc598","1285ba81cada","cb8577c9149e","8ccfed20cbb2","ae2a65f35510","3f6ecf56618","7b6769f2748b","fc8964313712","ef8e90590e66","191186aaafa0","d944778ce714","bdc4052bbdba","88d9857e584e"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"]},"debug":{"requestId":"0593d578-6741-4546-a013-03c895e906be","originalSpanCarrier":{"ot-tracer-spanid":"768eb7482aacc99b","ot-tracer-traceid":"44c602ac299fa4a5","ot-tracer-sampled":"true"}},"session":{"user":{"id":"lo_QFPBLPeijvUb"},"xsrf":""},"stats":{"itemCount":0,"sending":false,"timeout":null,"backup":{}},"navigation":{"showBranchBanner":null,"hasRenderedBranchBanner":null,"hideGoogleOneTap":false,"hideAlternateUser":false,"branchData":{"loaded":false},"shareKey":"f3e802795d4fd7d569f0d67679e8c9e6","referrerSource":"friends_link","currentLocation":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","host":"medium.com","hostname":"medium.com","referrer":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002Ftag\u002Frust","susiModal":{"step":null,"operation":"register","reportEventInfo":{"eventName":"","data":{}}}},"client":{"isBot":false,"isEu":false,"isNativeMedium":false,"isCustomDomain":false},"multiVote":{"clapsPerPost":{}},"metadata":{"faviconImageId":null}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"viewer":null,"variantFlags":[{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.0","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.1","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.2","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.3","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.4","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.5","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.6","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.7","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.8","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.9","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.10","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.11","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.12","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.13","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.14","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.15","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.16","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.17","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.18","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.19","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.20","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.21","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.22","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.23","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.24","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.25","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.26","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.27","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.28","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.29","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.30","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.31","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.32","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.33","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.34","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.35","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.36","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.37","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.38","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.39","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.40","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.41","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.42","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.43","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.44","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.45","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.46","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.47","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.48","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.49","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.50","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.51","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.52","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.53","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.54","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.55","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.56","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.57","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.58","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.59","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.60","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.61","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.62","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.63","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.64","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.65","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.66","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.67","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.68","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.69","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.70","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.71","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.72","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.73","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.74","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.75","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.76","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.77","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.78","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.79","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.80","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.81","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.82","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.83","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.84","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.85","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.86","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.87","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.88","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.89","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.90","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.91","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.92","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.93","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.94","typename":"VariantFlag"},{"type":"id","generated":true,"id":"ROOT_QUERY.variantFlags.95","typename":"VariantFlag"}],"meterPost({\"postId\":\"8c095a925546\",\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}})":{"type":"id","generated":false,"id":"MeteringInfo:singleton","typename":"MeteringInfo"},"postResult({\"id\":\"8c095a925546\"})":{"type":"id","generated":false,"id":"Post:8c095a925546","typename":"Post"}},"ROOT_QUERY.variantFlags.0":{"name":"allow_access","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.0.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.0.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.1":{"name":"allow_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.1.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.1.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.2":{"name":"allow_test_auth","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.2.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.2.valueType":{"__typename":"VariantFlagString","value":"disallow"},"ROOT_QUERY.variantFlags.3":{"name":"available_annual_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.3.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.3.valueType":{"__typename":"VariantFlagString","value":"2c754bcc2995"},"ROOT_QUERY.variantFlags.4":{"name":"available_monthly_plan","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.4.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.4.valueType":{"__typename":"VariantFlagString","value":"60e220181034"},"ROOT_QUERY.variantFlags.5":{"name":"browsable_stream_config_bucket","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.5.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.5.valueType":{"__typename":"VariantFlagString","value":"curated-topics"},"ROOT_QUERY.variantFlags.6":{"name":"daily_read_non_silent","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.6.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.6.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.7":{"name":"disable_gosocial_followers_that_you_follow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.7.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.7.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.8":{"name":"disable_ios_resume_reading_toast","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.8.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.8.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.9":{"name":"disable_mobile_featured_chunk","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.9.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.9.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.10":{"name":"disable_post_recommended_from_friends_provider","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.10.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.10.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.11":{"name":"diversification_no_embedding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.11.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.11.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.12":{"name":"enable_annual_renewal_reminder_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.12.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.12.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.13":{"name":"enable_app_flirty_thirty","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.13.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.13.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.14":{"name":"enable_automated_mission_control_triggers","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.14.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.14.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.15":{"name":"enable_branch_io","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.15.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.15.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.16":{"name":"enable_branding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.16.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.16.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.17":{"name":"enable_branding_fonts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.17.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.17.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.18":{"name":"enable_dedicated_series_tab_api_ios","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.18.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.18.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.19":{"name":"enable_different_grid","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.19.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.19.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.20":{"name":"enable_disregard_trunc_state_for_footer","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.20.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.20.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.21":{"name":"enable_edit_alt_text","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.21.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.21.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.22":{"name":"enable_email_sign_in_captcha","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.22.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.22.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.23":{"name":"enable_embedding_based_diversification","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.23.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.23.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.24":{"name":"enable_filter_by_resend_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.24.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.24.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.25":{"name":"enable_first_name_on_blocker_banner","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.25.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.25.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.26":{"name":"enable_first_name_on_paywall","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.26.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.26.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.27":{"name":"enable_gift_membership_ended_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.27.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.27.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.28":{"name":"enable_google_one_tap","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.28.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.28.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.29":{"name":"enable_inline_search_lite","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.29.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.29.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.30":{"name":"enable_inline_search_popover_lite","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.30.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.30.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.31":{"name":"enable_ios_post_stats","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.31.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.31.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.32":{"name":"enable_janky_spam_rules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.32.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.32.valueType":{"__typename":"VariantFlagString","value":"users,posts"},"ROOT_QUERY.variantFlags.33":{"name":"enable_kafka_events","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.33.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.33.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.34":{"name":"enable_lite_notifications","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.34.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.34.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.35":{"name":"enable_lite_post","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.35.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.35.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.36":{"name":"enable_lite_post_cd","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.36.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.36.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.37":{"name":"enable_lite_post_highlights","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.37.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.37.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.38":{"name":"enable_lite_post_highlights_view_only","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.38.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.38.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.39":{"name":"enable_lite_profile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.39.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.39.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.40":{"name":"enable_lite_pub_header_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.40.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.40.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.41":{"name":"enable_lite_read_next","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.41.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.41.valueType":{"__typename":"VariantFlagString","value":"sidebar"},"ROOT_QUERY.variantFlags.42":{"name":"enable_lite_stories","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.42.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.42.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.43":{"name":"enable_lite_topics","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.43.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.43.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.44":{"name":"enable_lite_unread_notification_count_mutation","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.44.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.44.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.45":{"name":"enable_lo_homepage","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.45.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.45.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.46":{"name":"enable_lo_scroll_away_metabar","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.46.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.46.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.47":{"name":"enable_logged_out_homepage_signup","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.47.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.47.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.48":{"name":"enable_marketing_emails","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.48.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.48.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.49":{"name":"enable_media_resource_try_catch","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.49.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.49.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.50":{"name":"enable_membership_remove_section_a","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.50.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.50.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.51":{"name":"enable_membership_thank_you_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.51.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.51.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.52":{"name":"enable_more_branch_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.52.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.52.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.53":{"name":"enable_multi_day_pub_digests","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.53.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.53.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.54":{"name":"enable_new_collaborative_filtering_data","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.54.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.54.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.55":{"name":"enable_new_gdpr_partner_export","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.55.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.55.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.56":{"name":"enable_new_partner_dashboard","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.56.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.56.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.57":{"name":"enable_new_partner_program_updates","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.57.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.57.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.58":{"name":"enable_new_pub_fonts","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.58.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.58.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.59":{"name":"enable_new_pub_modules","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.59.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.59.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.60":{"name":"enable_new_suspended_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.60.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.60.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.61":{"name":"enable_new_three_dot_menu","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.61.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.61.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.62":{"name":"enable_no_cache_control","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.62.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.62.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.63":{"name":"enable_optimizely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.63.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.63.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.64":{"name":"enable_parsely","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.64.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.64.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.65":{"name":"enable_patronus_on_kubernetes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.65.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.65.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.66":{"name":"enable_post_import","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.66.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.66.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.67":{"name":"enable_post_settings_screen","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.67.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.67.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.68":{"name":"enable_primary_topic_for_mobile","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.68.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.68.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.69":{"name":"enable_pub_digest_send_after_pub_follow","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.69.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.69.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.70":{"name":"enable_rtr_channel","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.70.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.70.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.71":{"name":"enable_save_to_medium","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.71.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.71.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.72":{"name":"enable_sign_up_with_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.72.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.72.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.73":{"name":"enable_stripe_express_initial_expansion_copy","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.73.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.73.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.74":{"name":"enable_stripe_express_rest_of_world_copy","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.74.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.74.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.75":{"name":"enable_suggest_account","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.75.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.75.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.76":{"name":"enable_suggest_account_li","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.76.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.76.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.77":{"name":"enable_susi_font_changes","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.77.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.77.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.78":{"name":"enable_tick_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.78.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.78.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.79":{"name":"enable_tipalti_onboarding","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.79.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.79.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.80":{"name":"enable_topic_lifecycle_email","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.80.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.80.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.81":{"name":"enable_tribute_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.81.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.81.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.82":{"name":"enable_trumpland_landing_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.82.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.82.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.83":{"name":"glyph_font_set","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.83.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.83.valueType":{"__typename":"VariantFlagString","value":"m2"},"ROOT_QUERY.variantFlags.84":{"name":"google_sign_in_android","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.84.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.84.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.85":{"name":"is_not_medium_subscriber","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.85.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.85.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.86":{"name":"new_transition_page","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.86.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.86.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.87":{"name":"pub_digest_cta_in_digest_copy2","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.87.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.87.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.88":{"name":"pub_sidebar","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.88.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.88.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.89":{"name":"rank_model","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.89.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.89.valueType":{"__typename":"VariantFlagString","value":"default"},"ROOT_QUERY.variantFlags.90":{"name":"redis_read_write_splitting","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.90.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.90.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.91":{"name":"share_post_linkedin","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.91.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.91.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.92":{"name":"signin_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.92.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.92.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap"},"ROOT_QUERY.variantFlags.93":{"name":"signup_services","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.93.valueType","typename":"VariantFlagString"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.93.valueType":{"__typename":"VariantFlagString","value":"twitter,facebook,google,email,google-fastidv,google-one-tap"},"ROOT_QUERY.variantFlags.94":{"name":"use_new_admin_topic_backend","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.94.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.94.valueType":{"__typename":"VariantFlagBoolean","value":true},"ROOT_QUERY.variantFlags.95":{"name":"use_sendgrid_queue_for_digest_sends","valueType":{"type":"id","generated":true,"id":"$ROOT_QUERY.variantFlags.95.valueType","typename":"VariantFlagBoolean"},"__typename":"VariantFlag"},"$ROOT_QUERY.variantFlags.95.valueType":{"__typename":"VariantFlagBoolean","value":true},"MeteringInfo:singleton":{"__typename":"MeteringInfo","postIds":{"type":"json","json":[]},"maxUnlockCount":3,"unlocksRemaining":3},"Post:8c095a925546":{"__typename":"Post","visibility":"PUBLIC","latestPublishedVersion":"3abb46a9035a","collection":null,"id":"8c095a925546","creator":{"type":"id","generated":false,"id":"User:1da08193a324","typename":"User"},"isLocked":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","sequence":null,"mediumUrl":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","canonicalUrl":"","content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}})":{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}})","typename":"PostContent"},"firstPublishedAt":1569154136213,"isPublished":true,"layerCake":0,"primaryTopic":null,"title":"Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust","isLimitedState":false,"pendingCollection":null,"shareKey":null,"statusForCollection":null,"readingTime":15.400943396226417,"readingList":"READING_LIST_NONE","license":"ALL_RIGHTS_RESERVED","allowResponses":true,"tags":[{"type":"id","generated":false,"id":"Tag:internet-of-things","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:rust","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:stm32","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:gps","typename":"Tag"},{"type":"id","generated":false,"id":"Tag:nb-iot","typename":"Tag"}],"viewerClapCount":0,"clapCount":13,"voterCount":5,"recommenders":[],"responsesCount":0,"collaborators":[],"translationSourcePost":null,"newsletterId":"","inResponseToPostResult":null,"inResponseToMediaResource":null,"curationEligibleAt":1569154134445,"audioVersionUrl":"","seoTitle":"","socialTitle":"","socialDek":"","metaDescription":"","latestPublishedAt":1569155081202,"wordCount":3432,"previewContent":{"type":"id","generated":true,"id":"$Post:8c095a925546.previewContent","typename":"PreviewContent"},"previewImage":{"type":"id","generated":false,"id":"ImageMetadata:1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg","typename":"ImageMetadata"},"updatedAt":1569155081491,"topics":[],"seoDescription":"","isSuspended":false},"User:1da08193a324":{"id":"1da08193a324","__typename":"User","isSuspended":false,"allowNotes":true,"name":"Lup Yuen Lee 李立源","isFollowing":false,"username":"ly.lee","bio":"Techie and Educator in IoT 物聯網教師","imageId":"1*KGohS3sQaUnr58gc0BIfoQ.jpeg","mediumMemberAt":1571194811000,"isBlocking":false,"isPartnerProgramEnrolled":false,"twitterScreenName":"MisterTechBlog"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}})":{"isLockedPreviewOnly":false,"validatedShareKey":"f3e802795d4fd7d569f0d67679e8c9e6","__typename":"PostContent","bodyModel":{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel","typename":"RichText"}},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.0":{"name":"00d9","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.1":{"name":"a5c5","startIndex":18,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.2":{"name":"8631","startIndex":39,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.3":{"name":"5cce","startIndex":59,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.4":{"name":"257d","startIndex":73,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.5":{"name":"4739","startIndex":84,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.6":{"name":"ae76","startIndex":96,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.7":{"name":"570c","startIndex":122,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.8":{"name":"9a8b","startIndex":142,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.9":{"name":"7eec","startIndex":148,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.10":{"name":"9747","startIndex":167,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.11":{"name":"8219","startIndex":183,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.12":{"name":"96d7","startIndex":198,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null,"__typename":"Section"},"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel":{"sections":[{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.0","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.1","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.2","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.3","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.4","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.5","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.6","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.7","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.8","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.9","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.10","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.11","typename":"Section"},{"type":"id","generated":true,"id":"$Post:8c095a925546.content({\"postMeteringOptions\":{\"referrer\":\"https:\u002F\u002Fmedium.com\u002Ftag\u002Frust\",\"sk\":\"f3e802795d4fd7d569f0d67679e8c9e6\",\"source\":\"friends_link\"}}).bodyModel.sections.12","typename":"Section"}],"paragraphs":[{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_0","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_1","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_2","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_3","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_4","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_5","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_6","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_7","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_8","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_9","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_10","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_11","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_12","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_13","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_14","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_15","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_16","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_17","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_18","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_19","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_20","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_21","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_22","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_23","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_24","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_25","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_26","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_27","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_28","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_29","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_30","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_31","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_32","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_33","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_34","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_35","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_36","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_37","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_38","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_39","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_40","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_41","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_42","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_43","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_44","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_45","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_46","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_47","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_48","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_49","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_50","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_51","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_52","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_53","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_54","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_55","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_56","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_57","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_58","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_59","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_60","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_61","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_62","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_63","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_64","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_65","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_66","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_67","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_68","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_69","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_70","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_71","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_72","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_73","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_74","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_75","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_76","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_77","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_78","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_79","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_80","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_81","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_82","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_83","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_84","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_85","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_86","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_87","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_88","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_89","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_90","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_91","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_92","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_93","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_94","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_95","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_96","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_97","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_98","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_99","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_100","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_101","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_102","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_103","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_104","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_105","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_106","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_107","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_108","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_109","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_110","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_111","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_112","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_113","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_114","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_115","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_116","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_117","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_118","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_119","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_120","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_121","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_122","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_123","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_124","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_125","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_126","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_127","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_128","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_129","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_130","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_131","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_132","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_133","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_134","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_135","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_136","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_137","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_138","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_139","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_140","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_141","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_142","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_143","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_144","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_145","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_146","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_147","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_148","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_149","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_150","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_151","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_152","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_153","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_154","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_155","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_156","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_157","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_158","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_159","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_160","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_161","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_162","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_163","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_164","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_165","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_166","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_167","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_168","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_169","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_170","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_171","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_172","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_173","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_174","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_175","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_176","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_177","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_178","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_179","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_180","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_181","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_182","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_183","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_184","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_185","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_186","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_187","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_188","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_189","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_190","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_191","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_192","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_193","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_194","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_195","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_196","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_197","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_198","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_199","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_200","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_201","typename":"Paragraph"},{"type":"id","generated":false,"id":"Paragraph:3abb46a9035a_202","typename":"Paragraph"}],"__typename":"RichText"},"Paragraph:3abb46a9035a_0":{"id":"3abb46a9035a_0","name":"4dae","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg","typename":"ImageMetadata"},"text":"NB-IoT GPS Tracker running on the Ghostyu NB-EK-L476 Developer Kit with STM32L476RCT6 microcontroller, Quectel L70-R GPS module and Quectel BC95 NB-IoT module. Photo taken during the field test at Berlayer Creek Boardwalk (and mangrove swamp) in Singapore.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg":{"id":"1*ZJteiy-eBf-vgmX3JvR9WQ.jpeg","originalHeight":1813,"originalWidth":3148,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_1":{"id":"3abb46a9035a_1","name":"5984","type":"H3","href":null,"layout":null,"metadata":null,"text":"Build an NB-IoT GPS Tracker on STM32 L476 with Apache Mynewt and Embedded Rust","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_2":{"id":"3abb46a9035a_2","name":"c30e","type":"P","href":null,"layout":null,"metadata":null,"text":"Plus Quectel L70-R GPS, Quectel BC95 NB-IoT modules and thethings.io","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_2.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_2.markups.0":{"type":"EM","start":0,"end":68,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_3":{"id":"3abb46a9035a_3","name":"95f0","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*qT9I1BeqVmw_5-nhmDVZlQ.png","typename":"ImageMetadata"},"text":"The Completed NB-IoT GPS Tracker Application showing geolocation and sensor data (raw temperature)","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*qT9I1BeqVmw_5-nhmDVZlQ.png":{"id":"1*qT9I1BeqVmw_5-nhmDVZlQ.png","originalHeight":2208,"originalWidth":1242,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_4":{"id":"3abb46a9035a_4","name":"20b9","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s build an NB-IoT GPS Tracker! A simple gadget that determines its current location based on received GPS signals… And transmits the location to a server via NB-IoT.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_4.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_4.markups.0":{"type":"STRONG","start":15,"end":33,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_5":{"id":"3abb46a9035a_5","name":"bdb6","type":"P","href":null,"layout":null,"metadata":null,"text":"We shall take an existing Apache Mynewt Embedded OS + Embedded Rust project from the article “Rust Rocks NB-IoT! STM32 Blue Pill with Quectel BC95-G on Apache Mynewt”… And extend it with a GPS module: Quectel L70-R.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_5.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_5.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_5.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_5.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_5.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_5.markups.0":{"type":"A","start":26,"end":51,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_5.markups.1":{"type":"A","start":94,"end":165,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_5.markups.2":{"type":"A","start":201,"end":214,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.quectel.com\u002Fproduct\u002Fl70r.htm","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_5.markups.3":{"type":"STRONG","start":201,"end":214,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_5.markups.4":{"type":"EM","start":93,"end":166,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_6":{"id":"3abb46a9035a_6","name":"3c4a","type":"P","href":null,"layout":null,"metadata":null,"text":"The project already includes the Quectel BC95 NB-IoT module for transmitting sensor data in CoAP format over NB-IoT.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_6.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_6.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_6.markups.0":{"type":"A","start":33,"end":45,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.quectel.com\u002Fproduct\u002Fbc95.htm","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_6.markups.1":{"type":"STRONG","start":33,"end":45,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_7":{"id":"3abb46a9035a_7","name":"bc3b","type":"P","href":null,"layout":null,"metadata":null,"text":"STM32 Blue Pill F103 doesn’t support floating-point computations in hardware, so it will be inefficient to compute floating-point latitude\u002Flongitude coordinates for the GPS module.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_8":{"id":"3abb46a9035a_8","name":"7cde","type":"P","href":null,"layout":null,"metadata":null,"text":"We’ll upgrade the STM32 F103 microcontroller to an STM32 L476 because it supports floating-point computations in hardware.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_8.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_8.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_8.markups.0":{"type":"A","start":51,"end":61,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fen\u002Fmicrocontrollers-microprocessors\u002Fstm32l476rc.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_8.markups.1":{"type":"STRONG","start":51,"end":61,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_9":{"id":"3abb46a9035a_9","name":"19d8","type":"P","href":null,"layout":null,"metadata":null,"text":"Thankfully there’s already a developer kit that contains the STM32 L476 microcontroller, Quectel L70-R GPS module and Quectel BC95 NB-IoT module… Ghostyu NB-EK-L476 Developer Kit, as described in the article “Quick Peek of Huawei LiteOS with NB-IoT on Ghostyu NB-EK-L476 Developer Kit (STM32L476RCT6)”. Perfect for our NB-IoT GPS Tracker!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_9.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_9.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_9.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_9.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_9.markups.0":{"type":"A","start":146,"end":178,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fquick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&sk=37f71270cd52f497fb6fb8139917031c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_9.markups.1":{"type":"A","start":209,"end":300,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fquick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&sk=37f71270cd52f497fb6fb8139917031c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_9.markups.2":{"type":"STRONG","start":146,"end":178,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_9.markups.3":{"type":"EM","start":208,"end":303,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_10":{"id":"3abb46a9035a_10","name":"58ca","type":"P","href":null,"layout":null,"metadata":null,"text":"Alternatively we may create your own kit based on the same STM32L476RCT6 microcontroller and Quectel modules.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_11":{"id":"3abb46a9035a_11","name":"3317","type":"IFRAME","href":null,"layout":"OUTSET_LEFT","metadata":null,"text":"Upgrading from STM32 Blue Pill F103 to L476","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_11.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:c58ee75565298292a27498c069b36912":{"id":"c58ee75565298292a27498c069b36912","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Finstall-apache-mynewt-and-embedded-rust-for-stm32-l476-and-visual-studio-code-on-windows-9ed40e065cf4","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_11.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:c58ee75565298292a27498c069b36912","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_12":{"id":"3abb46a9035a_12","name":"3ab3","type":"P","href":null,"layout":null,"metadata":null,"text":"How hard is it to switch microcontrollers and migrate a Mynewt + Rust project from STM32 Blue Pill F103 to L476? As we shall find out… Not that hard!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_12.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_12.markups.0":{"type":"EM","start":0,"end":112,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_13":{"id":"3abb46a9035a_13","name":"da6d","type":"P","href":null,"layout":null,"metadata":null,"text":"Below is the overall map of changes made to the Mynewt + Rust project while building the NB-IoT GPS Tracker. We’ll study each block in the subsequent sections.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_14":{"id":"3abb46a9035a_14","name":"358b","type":"P","href":null,"layout":null,"metadata":null,"text":"Even if you’re new to Mynewt or Rust, feel free to skim this article! While building the NB-IoT GPS Tracker we made changes to a number of components in Mynewt OS and the Rust application… You’ll soon understand how the various parts of Mynewt and Rust work together to create an IoT gadget.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_14.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_14.markups.0":{"type":"EM","start":0,"end":69,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_15":{"id":"3abb46a9035a_15","name":"5841","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*8M4JWUsBMEkf7L_eDUAZrA.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*8M4JWUsBMEkf7L_eDUAZrA.png":{"id":"1*8M4JWUsBMEkf7L_eDUAZrA.png","originalHeight":1024,"originalWidth":1856,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_16":{"id":"3abb46a9035a_16","name":"945d","type":"P","href":null,"layout":null,"metadata":null,"text":"The complete source code is available at the l476 branch of this repository…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_16.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_16.markups.0":{"type":"CODE","start":45,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_17":{"id":"3abb46a9035a_17","name":"eb87","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"lupyuen\u002Fstm32bluepill-mynewt-sensor\nTested on the Ghostyu NB-EK-L476 Developer Kit (STM32L476RCT6)... Quick Peek of Huawei LiteOS with NB-IoT on Ghostyu…github.com","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_17.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_17.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_17.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_17.mixtapeMetadata","typename":"MixtapeMetadata"}},"Paragraph:3abb46a9035a_17.markups.0":{"type":"A","start":0,"end":163,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_17.markups.1":{"type":"STRONG","start":0,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_17.markups.2":{"type":"EM","start":36,"end":153,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"$Paragraph:3abb46a9035a_17.mixtapeMetadata":{"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476","thumbnailImageId":"0*6o8mPnExokf9Og9J","mediaResourceId":"0*6o8mPnExokf9Og9J","__typename":"MixtapeMetadata"},"Paragraph:3abb46a9035a_18":{"id":"3abb46a9035a_18","name":"d75e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*_6qewiP2-zNY8JdVfiv_gQ.png","typename":"ImageMetadata"},"text":"Changes made for Mynewt Board Support Package","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*_6qewiP2-zNY8JdVfiv_gQ.png":{"id":"1*_6qewiP2-zNY8JdVfiv_gQ.png","originalHeight":389,"originalWidth":446,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_19":{"id":"3abb46a9035a_19","name":"9d72","type":"H3","href":null,"layout":null,"metadata":null,"text":"Mynewt Board Support Package","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_20":{"id":"3abb46a9035a_20","name":"689f","type":"P","href":null,"layout":null,"metadata":null,"text":"Every Mynewt project begins with a Board Support Package… Either take an existing one, or adapt from one. Check out the Board Support Packages","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_20.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_20.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_20.markups.0":{"type":"A","start":35,"end":56,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fcore_os\u002Fporting\u002Fport_bsp.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_20.markups.1":{"type":"A","start":106,"end":142,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Ftree\u002Fmaster\u002Fhw\u002Fbsp","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_21":{"id":"3abb46a9035a_21","name":"9491","type":"P","href":null,"layout":null,"metadata":null,"text":"A Board Support Package contains information, scripts and drivers necessary to build Mynewt for our microcontroller and the associated peripherals on our microcontroller board: flash memory, LEDs, UART ports, …","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_22":{"id":"3abb46a9035a_22","name":"3036","type":"P","href":null,"layout":null,"metadata":null,"text":"For this project, we customised an existing Board Support Package nucleo-l476rg by copying into hw\u002Fbsp\u002Fstm32l4 and renaming it. (The previous project used the Board Support Package hw\u002Fbsp\u002Fbluepill-64kb)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.5","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_22.markups.6","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_22.markups.0":{"type":"CODE","start":66,"end":79,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_22.markups.1":{"type":"CODE","start":96,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_22.markups.2":{"type":"CODE","start":181,"end":201,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_22.markups.3":{"type":"A","start":66,"end":79,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Ftree\u002Fmaster\u002Fhw\u002Fbsp\u002Fnucleo-l476rg","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_22.markups.4":{"type":"A","start":96,"end":110,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_22.markups.5":{"type":"A","start":129,"end":149,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_22.markups.6":{"type":"A","start":181,"end":201,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fhw\u002Fbsp\u002Fbluepill-64kb","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_23":{"id":"3abb46a9035a_23","name":"88d7","type":"P","href":null,"layout":null,"metadata":null,"text":"Our board is similar to the Nucleo L476RG, except that the Nucleo has 1 MB of flash ROM while ours has only 256 KB. Here’s how we resized the flash ROM by editing hw\u002Fbsp\u002Fstm32l4\u002Fbsp.yml…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_23.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_23.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_23.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_23.markups.0":{"type":"CODE","start":163,"end":185,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_23.markups.1":{"type":"A","start":28,"end":41,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fen\u002Fevaluation-tools\u002Fnucleo-l476rg.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_23.markups.2":{"type":"A","start":163,"end":185,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fbsp.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_24":{"id":"3abb46a9035a_24","name":"d862","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*9r4M6KlGwEHz-LlenvqYBA.png","typename":"ImageMetadata"},"text":"Customising a Board Support Package for STM32 L476 on Mynewt","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*9r4M6KlGwEHz-LlenvqYBA.png":{"id":"1*9r4M6KlGwEHz-LlenvqYBA.png","originalHeight":1435,"originalWidth":1662,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_25":{"id":"3abb46a9035a_25","name":"7cbd","type":"P","href":null,"layout":null,"metadata":null,"text":"The Board Support Package for the Nucleo defines two UART ports…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_26":{"id":"3abb46a9035a_26","name":"f73a","type":"ULI","href":null,"layout":null,"metadata":null,"text":"The first is named UART_0 which points to port USART2 (connected to the Quectel BC95 NB-IoT module)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_26.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_26.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_26.markups.0":{"type":"CODE","start":19,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_26.markups.1":{"type":"CODE","start":47,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_27":{"id":"3abb46a9035a_27","name":"0eec","type":"ULI","href":null,"layout":null,"metadata":null,"text":"The second is named UART_1 which points to port USART1 (not used)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_27.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_27.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_27.markups.0":{"type":"CODE","start":20,"end":26,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_27.markups.1":{"type":"CODE","start":48,"end":54,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_28":{"id":"3abb46a9035a_28","name":"1ecf","type":"P","href":null,"layout":null,"metadata":null,"text":"(Yep don’t confuse the Mynewt port name with the actual UART port)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_28.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_28.markups.0":{"type":"EM","start":0,"end":66,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_29":{"id":"3abb46a9035a_29","name":"485f","type":"P","href":null,"layout":null,"metadata":null,"text":"For our board we need a third port…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_30":{"id":"3abb46a9035a_30","name":"6f0b","type":"ULI","href":null,"layout":null,"metadata":null,"text":"UART_2 which points to port LPUART1 (connected to the Quectel L70-R GPS module)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_30.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_30.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_30.markups.0":{"type":"CODE","start":0,"end":6,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_30.markups.1":{"type":"CODE","start":28,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_31":{"id":"3abb46a9035a_31","name":"1e86","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s how we add UART_2 by editing hw\u002Fbsp\u002Fstm32l4\u002Fsyscfg.yml…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_31.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_31.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_31.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_31.markups.0":{"type":"CODE","start":18,"end":24,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_31.markups.1":{"type":"CODE","start":36,"end":61,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_31.markups.2":{"type":"A","start":36,"end":61,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_32":{"id":"3abb46a9035a_32","name":"c834","type":"IFRAME","href":null,"layout":"OUTSET_LEFT","metadata":null,"text":"Adding UART_2 to Board Support Package Configuration. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fsyscfg.yml","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_32.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_32.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_32.markups.0":{"type":"A","start":59,"end":149,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:761b33ec4f2297c20e801e74bf09712d":{"id":"761b33ec4f2297c20e801e74bf09712d","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_32.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:761b33ec4f2297c20e801e74bf09712d","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_33":{"id":"3abb46a9035a_33","name":"38a3","type":"P","href":null,"layout":null,"metadata":null,"text":"But wait… This says that UART_2 will point to port USART3, not LPUART1!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_33.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_33.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_33.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_33.markups.0":{"type":"CODE","start":25,"end":31,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_33.markups.1":{"type":"CODE","start":51,"end":57,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_33.markups.2":{"type":"CODE","start":63,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_34":{"id":"3abb46a9035a_34","name":"45c5","type":"P","href":null,"layout":null,"metadata":null,"text":"Mynewt doesn’t have the driver code to support LPUARTs (Low Power UART) on the STM32 platform, so we used a quick hack…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_35":{"id":"3abb46a9035a_35","name":"a7a9","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*zNV3jnzITl__3_MXOzFJMA.png","typename":"ImageMetadata"},"text":"From STM32L476xx Datasheet https:\u002F\u002Fwww.st.com\u002Fresource\u002Fen\u002Fdatasheet\u002Fstm32l476je.pdf and Ghostyu NB-EK-L476 Hardware Manual https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F14KZqMO6cj20eKqM85iJNth8vf_WbI5VM\u002Fview?usp=sharing","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_35.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_35.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*zNV3jnzITl__3_MXOzFJMA.png":{"id":"1*zNV3jnzITl__3_MXOzFJMA.png","originalHeight":906,"originalWidth":2055,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_35.markups.0":{"type":"A","start":27,"end":83,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fresource\u002Fen\u002Fdatasheet\u002Fstm32l476je.pdf","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_35.markups.1":{"type":"A","start":123,"end":205,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F14KZqMO6cj20eKqM85iJNth8vf_WbI5VM\u002Fview?usp=sharing","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36":{"id":"3abb46a9035a_36","name":"0979","type":"P","href":null,"layout":null,"metadata":null,"text":"The STM32L476 Datasheet says that LPUART1 and USART3 share the same TX and RX pins, except that they are flipped. (How odd!) STM32 programs may configure the UART port such that the TX and RX pins are swapped… That’s how we disguised USART3 as LPUART1! More about swapping TX and RX in a while.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.5","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.6","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.7","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.8","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.9","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.10","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_36.markups.11","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_36.markups.0":{"type":"CODE","start":34,"end":41,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.1":{"type":"CODE","start":46,"end":52,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.2":{"type":"CODE","start":68,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.3":{"type":"CODE","start":75,"end":77,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.4":{"type":"CODE","start":182,"end":184,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.5":{"type":"CODE","start":189,"end":191,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.6":{"type":"CODE","start":234,"end":240,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.7":{"type":"CODE","start":244,"end":251,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.8":{"type":"CODE","start":273,"end":275,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.9":{"type":"CODE","start":280,"end":282,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.10":{"type":"A","start":4,"end":23,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fresource\u002Fen\u002Fdatasheet\u002Fstm32l476je.pdf","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_36.markups.11":{"type":"EM","start":114,"end":124,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_37":{"id":"3abb46a9035a_37","name":"849d","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fsrc\u002Fhal_bsp.c","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_37.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_37.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_37.markups.0":{"type":"A","start":5,"end":98,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fsrc\u002Fhal_bsp.c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:3ba771ff2268d8af39b9990f479e6b8d":{"id":"3ba771ff2268d8af39b9990f479e6b8d","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_37.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:3ba771ff2268d8af39b9990f479e6b8d","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_38":{"id":"3abb46a9035a_38","name":"4ffd","type":"P","href":null,"layout":null,"metadata":null,"text":"We complete the UART customisation by adding the above code to hw\u002Fbsp\u002Fstm32l4\u002Fsrc\u002Fhal_bsp.c. We are now ready to use our custom Board Support Package!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_38.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_38.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_38.markups.0":{"type":"CODE","start":63,"end":91,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_38.markups.1":{"type":"A","start":63,"end":91,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4\u002Fsrc\u002Fhal_bsp.c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_39":{"id":"3abb46a9035a_39","name":"8091","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*Pz6L7nzL4EjE7Eoa3UAoOA.png","typename":"ImageMetadata"},"text":"Changes made for Mynewt Hardware Abstraction Layer","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Pz6L7nzL4EjE7Eoa3UAoOA.png":{"id":"1*Pz6L7nzL4EjE7Eoa3UAoOA.png","originalHeight":247,"originalWidth":730,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_40":{"id":"3abb46a9035a_40","name":"b33a","type":"H3","href":null,"layout":null,"metadata":null,"text":"Mynewt Hardware Abstraction Layer","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_41":{"id":"3abb46a9035a_41","name":"c541","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s talk about the Hardware Abstraction Layer (HAL) in Mynewt… Because there are two definitions of HAL used in Mynewt that may confuse us…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_42":{"id":"3abb46a9035a_42","name":"928d","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*owZ72OGq9YWjiWOHkvxmwQ.png","typename":"ImageMetadata"},"text":"General HAL for STM32 in repos\u002Fapache-mynewt-core\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32_common","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*owZ72OGq9YWjiWOHkvxmwQ.png":{"id":"1*owZ72OGq9YWjiWOHkvxmwQ.png","originalHeight":575,"originalWidth":333,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_43":{"id":"3abb46a9035a_43","name":"69f4","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ The first type of HAL is the General HAL that abstracts all the hardware on our microcontroller. The General HAL enables us to write Mynewt applications that are portable across microcontrollers. Here’s an example of a General HAL that abstracts the GPIO interface: https:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fhal\u002Fhal_gpio\u002Fhal_gpio.html","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_43.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_43.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_43.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_43.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_43.markups.0":{"type":"CODE","start":270,"end":340,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_43.markups.1":{"type":"A","start":240,"end":268,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fhal\u002Fhal_gpio\u002Fhal_gpio.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_43.markups.2":{"type":"A","start":270,"end":340,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fhal\u002Fhal_gpio\u002Fhal_gpio.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_43.markups.3":{"type":"STRONG","start":33,"end":100,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_44":{"id":"3abb46a9035a_44","name":"9972","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png":{"id":"1*pmGFQ2cRpqypaNDM1UYwEw.png","originalHeight":50,"originalWidth":1800,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_45":{"id":"3abb46a9035a_45","name":"29a3","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*xBtSEsEzLIg75Cu9gqMobg.png","typename":"ImageMetadata"},"text":"Vendor-Specific HAL for STM32 in repos\u002Fapache-mynewt-core\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32l4xx","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*xBtSEsEzLIg75Cu9gqMobg.png":{"id":"1*xBtSEsEzLIg75Cu9gqMobg.png","originalHeight":555,"originalWidth":326,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_46":{"id":"3abb46a9035a_46","name":"ac73","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ The second type of HAL is the Vendor-Specific HAL provided by a microcontroller maker (like STMicroelectronics) that abstracts the differences between various models of microcontrollers, e.g. STM32 F103 vs L476. Here’s a Vendor-Specific HAL: https:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Ftree\u002Fmaster\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32l4xx\u002Fsrc\u002Fext\u002FDrivers\u002FSTM32L4xx_HAL_Driver\u002FSrc","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_46.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_46.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_46.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_46.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_46.markups.0":{"type":"CODE","start":246,"end":357,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_46.markups.1":{"type":"A","start":225,"end":244,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Ftree\u002Fmaster\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32l4xx\u002Fsrc\u002Fext\u002FDrivers\u002FSTM32L4xx_HAL_Driver\u002FSrc","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_46.markups.2":{"type":"A","start":246,"end":357,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Ftree\u002Fmaster\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32l4xx\u002Fsrc\u002Fext\u002FDrivers\u002FSTM32L4xx_HAL_Driver\u002FSrc","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_46.markups.3":{"type":"STRONG","start":34,"end":89,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_47":{"id":"3abb46a9035a_47","name":"1760","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*pmGFQ2cRpqypaNDM1UYwEw.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_48":{"id":"3abb46a9035a_48","name":"8171","type":"P","href":null,"layout":null,"metadata":null,"text":"From now on, when we mention “HAL” we refer to 1️⃣ General HAL.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_48.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_48.markups.0":{"type":"STRONG","start":51,"end":62,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_49":{"id":"3abb46a9035a_49","name":"08e2","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*SyQclfixhtymp8JxPH5cpA.png","typename":"ImageMetadata"},"text":"From STM32L4x6 Reference Manual: https:\u002F\u002Fwww.st.com\u002Fcontent\u002Fccc\u002Fresource\u002Ftechnical\u002Fdocument\u002Freference_manual\u002F02\u002F35\u002F09\u002F0c\u002F4f\u002Ff7\u002F40\u002F03\u002FDM00083560.pdf\u002Ffiles\u002FDM00083560.pdf\u002Fjcr:content\u002Ftranslations\u002Fen.DM00083560.pdf","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_49.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*SyQclfixhtymp8JxPH5cpA.png":{"id":"1*SyQclfixhtymp8JxPH5cpA.png","originalHeight":557,"originalWidth":755,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_49.markups.0":{"type":"A","start":33,"end":211,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fcontent\u002Fccc\u002Fresource\u002Ftechnical\u002Fdocument\u002Freference_manual\u002F02\u002F35\u002F09\u002F0c\u002F4f\u002Ff7\u002F40\u002F03\u002FDM00083560.pdf\u002Ffiles\u002FDM00083560.pdf\u002Fjcr:content\u002Ftranslations\u002Fen.DM00083560.pdf","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50":{"id":"3abb46a9035a_50","name":"4650","type":"P","href":null,"layout":null,"metadata":null,"text":"Recall that we need to patch the UART HAL so that the TX and RX pins are swapped for port USART3 (so that it behaves like LPUART1). The STM32L4x6 Reference Manual says that we may set the SWAP bit of UART register CR2 to swap the TX\u002FRX pins.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.5","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.6","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_50.markups.7","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_50.markups.0":{"type":"CODE","start":54,"end":56,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.1":{"type":"CODE","start":61,"end":63,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.2":{"type":"CODE","start":90,"end":96,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.3":{"type":"CODE","start":122,"end":129,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.4":{"type":"CODE","start":188,"end":192,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.5":{"type":"CODE","start":214,"end":217,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.6":{"type":"CODE","start":230,"end":235,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_50.markups.7":{"type":"A","start":136,"end":162,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fcontent\u002Fccc\u002Fresource\u002Ftechnical\u002Fdocument\u002Freference_manual\u002F02\u002F35\u002F09\u002F0c\u002F4f\u002Ff7\u002F40\u002F03\u002FDM00083560.pdf\u002Ffiles\u002FDM00083560.pdf\u002Fjcr:content\u002Ftranslations\u002Fen.DM00083560.pdf","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_51":{"id":"3abb46a9035a_51","name":"6956","type":"P","href":null,"layout":null,"metadata":null,"text":"The UART HAL for STM32 is implemented in apache-mynewt-core\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32_common\u002Fsrc\u002Fhal_uart.c (inside the repos folder of our project). Edit the file at line 468 to set the SWAP bit of CR2 like this…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_51.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_51.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_51.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_51.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_51.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_51.markups.0":{"type":"CODE","start":41,"end":98,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_51.markups.1":{"type":"CODE","start":111,"end":116,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_51.markups.2":{"type":"CODE","start":178,"end":182,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_51.markups.3":{"type":"CODE","start":190,"end":193,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_51.markups.4":{"type":"A","start":41,"end":98,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Fblob\u002Fmaster\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32_common\u002Fsrc\u002Fhal_uart.c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_52":{"id":"3abb46a9035a_52","name":"12ff","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fpatch\u002Fhal_uart.c#L468-L471","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_52.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_52.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_52.markups.0":{"type":"A","start":5,"end":96,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fpatch\u002Fhal_uart.c#L468-L471","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:666b66c037a94c6e3326489ea30a7761":{"id":"666b66c037a94c6e3326489ea30a7761","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_52.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:666b66c037a94c6e3326489ea30a7761","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_53":{"id":"3abb46a9035a_53","name":"460b","type":"P","href":null,"layout":null,"metadata":null,"text":"You may refer to this patched version of hal_uart.c. This patch depends on two conditions…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_53.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_53.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_53.markups.0":{"type":"CODE","start":41,"end":51,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_53.markups.1":{"type":"A","start":22,"end":51,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fpatch\u002Fhal_uart.c#L468-L471","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_54":{"id":"3abb46a9035a_54","name":"ebb7","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ UART_2_SWAP_TXRX must be set to 1 in the syscfg.yml configuration file. Remember that UART_2 is the Mynewt name for port USART3.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_54.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_54.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_54.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_54.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_54.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_54.markups.0":{"type":"CODE","start":4,"end":20,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_54.markups.1":{"type":"CODE","start":45,"end":55,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_54.markups.2":{"type":"CODE","start":90,"end":96,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_54.markups.3":{"type":"CODE","start":125,"end":131,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_54.markups.4":{"type":"A","start":45,"end":74,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_55":{"id":"3abb46a9035a_55","name":"3d79","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ UART port must be USART3","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_55.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_55.markups.0":{"type":"CODE","start":22,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_56":{"id":"3abb46a9035a_56","name":"8f80","type":"P","href":null,"layout":null,"metadata":null,"text":"Where is USART_CR2_SWAP defined? In the Vendor-Specific HAL.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_56.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_56.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_56.markups.0":{"type":"CODE","start":9,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_56.markups.1":{"type":"A","start":40,"end":59,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Fapache\u002Fmynewt-core\u002Fblob\u002Fmaster\u002Fhw\u002Fmcu\u002Fstm\u002Fstm32l4xx\u002Fsrc\u002Fext\u002FDrivers\u002FCMSIS\u002FDevice\u002FST\u002FSTM32L4xx\u002FInclude\u002Fstm32l4a6xx.h","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_57":{"id":"3abb46a9035a_57","name":"78e7","type":"P","href":null,"layout":null,"metadata":null,"text":"In Visual Studio Code, the patch should look like this…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_58":{"id":"3abb46a9035a_58","name":"d78a","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*ItdOaKusfagV5z7_8FtcZw.png","typename":"ImageMetadata"},"text":"Patching hal_uart.c to swap TX\u002FRX pins for USART3","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*ItdOaKusfagV5z7_8FtcZw.png":{"id":"1*ItdOaKusfagV5z7_8FtcZw.png","originalHeight":575,"originalWidth":1222,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_59":{"id":"3abb46a9035a_59","name":"b3f1","type":"H3","href":null,"layout":null,"metadata":null,"text":"Mynewt Targets","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_60":{"id":"3abb46a9035a_60","name":"2d34","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*82TqzmSYlp6Xi9w9xEr9xg.png","typename":"ImageMetadata"},"text":"Changes made for Mynewt Targets","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*82TqzmSYlp6Xi9w9xEr9xg.png":{"id":"1*82TqzmSYlp6Xi9w9xEr9xg.png","originalHeight":383,"originalWidth":406,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_61":{"id":"3abb46a9035a_61","name":"6619","type":"P","href":null,"layout":null,"metadata":null,"text":"Mynewt Applications are designed to be portable across microcontrollers… The same application may be recompiled to run on STM32 Blue Pill F103, STM32 F476, or even BBC micro:bit (based on Nordic nRF51).","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_62":{"id":"3abb46a9035a_62","name":"3977","type":"P","href":null,"layout":null,"metadata":null,"text":"To compile a Mynewt Application for a specific microcontroller board, we run the newt target command like this…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_62.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_62.markups.0":{"type":"CODE","start":81,"end":92,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_63":{"id":"3abb46a9035a_63","name":"1a3b","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_63.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:c5f926b4424456accab0308c211f7cf3":{"id":"c5f926b4424456accab0308c211f7cf3","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_63.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:c5f926b4424456accab0308c211f7cf3","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_64":{"id":"3abb46a9035a_64","name":"4cd2","type":"P","href":null,"layout":null,"metadata":null,"text":"This creates two targets stm32l4_boot (for the bootloader) and stm32l4_my_sensor (for the application)…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_64.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_64.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_64.markups.0":{"type":"CODE","start":25,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_64.markups.1":{"type":"CODE","start":63,"end":80,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_65":{"id":"3abb46a9035a_65","name":"ef7d","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ stm32l4_boot is based on the Stub Bootloader located at apps\u002Fboot_stub","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_65.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_65.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_65.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_65.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_65.markups.0":{"type":"CODE","start":4,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_65.markups.1":{"type":"CODE","start":60,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_65.markups.2":{"type":"A","start":4,"end":16,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_boot\u002Fpkg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_65.markups.3":{"type":"A","start":60,"end":74,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fapps\u002Fboot_stub","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_66":{"id":"3abb46a9035a_66","name":"2117","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ stm32l4_my_sensor is based on our platform-indepedent Sensor Application located at apps\u002Fmy_sensor_app (which will be merged with the Rust application during compilation)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_66.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_66.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_66.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_66.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_66.markups.0":{"type":"CODE","start":4,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_66.markups.1":{"type":"CODE","start":88,"end":106,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_66.markups.2":{"type":"A","start":4,"end":21,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_66.markups.3":{"type":"A","start":88,"end":106,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fapps\u002Fmy_sensor_app","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_67":{"id":"3abb46a9035a_67","name":"4c2b","type":"P","href":null,"layout":null,"metadata":null,"text":"Both targets stm32l4_boot and stm32l4_my_sensor point to the same Board Support Package for STM32 L476 (hw\u002Fbsp\u002Fstm32l4), so they will produce Bootloader and Application Firmware Images that will run on our STM32 L476 board.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_67.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_67.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_67.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_67.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_67.markups.0":{"type":"CODE","start":13,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_67.markups.1":{"type":"CODE","start":30,"end":47,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_67.markups.2":{"type":"CODE","start":104,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_67.markups.3":{"type":"A","start":104,"end":118,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fhw\u002Fbsp\u002Fstm32l4","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_68":{"id":"3abb46a9035a_68","name":"8484","type":"P","href":null,"layout":null,"metadata":null,"text":"(The previous project used targets bluepill_boot and bluepill_my_sensor)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_68.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_68.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_68.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_68.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_68.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_68.markups.0":{"type":"CODE","start":35,"end":48,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_68.markups.1":{"type":"CODE","start":53,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_68.markups.2":{"type":"A","start":1,"end":21,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_68.markups.3":{"type":"A","start":35,"end":48,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Ftargets\u002Fbluepill_boot","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_68.markups.4":{"type":"A","start":53,"end":71,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Ftargets\u002Fbluepill_my_sensor","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_69":{"id":"3abb46a9035a_69","name":"e4b0","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*P_-KzIJd3H5iwGQUBA-zAw.png","typename":"ImageMetadata"},"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_boot\u002Ftarget.yml and https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Ftarget.yml","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_69.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_69.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*P_-KzIJd3H5iwGQUBA-zAw.png":{"id":"1*P_-KzIJd3H5iwGQUBA-zAw.png","originalHeight":974,"originalWidth":1340,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_69.markups.0":{"type":"A","start":5,"end":101,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_boot\u002Ftarget.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_69.markups.1":{"type":"A","start":106,"end":207,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Ftarget.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_70":{"id":"3abb46a9035a_70","name":"2cd8","type":"P","href":null,"layout":null,"metadata":null,"text":"Instead of running the newt target command to create the targets, we may copy the target folders ourselves to create the targets. Be sure to update target.yml to point to the correct Board Support Package (see above).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_70.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_70.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_70.markups.0":{"type":"CODE","start":23,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_70.markups.1":{"type":"CODE","start":148,"end":158,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_71":{"id":"3abb46a9035a_71","name":"f91f","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*60GcGa-VQ0lu_nZDw4ShQQ.png","typename":"ImageMetadata"},"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_boot\u002Fpkg.yml and https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fpkg.yml","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_71.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_71.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*60GcGa-VQ0lu_nZDw4ShQQ.png":{"id":"1*60GcGa-VQ0lu_nZDw4ShQQ.png","originalHeight":974,"originalWidth":1340,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_71.markups.0":{"type":"A","start":5,"end":98,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_boot\u002Fpkg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_71.markups.1":{"type":"A","start":103,"end":201,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fpkg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_72":{"id":"3abb46a9035a_72","name":"5d5d","type":"P","href":null,"layout":null,"metadata":null,"text":"The package name pkg.name in pkg.yml should be updated. C Compiler Directives and Linker Directives should be specified in pkg.yml, as shown above.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_72.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_72.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_72.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_72.markups.0":{"type":"CODE","start":17,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_72.markups.1":{"type":"CODE","start":29,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_72.markups.2":{"type":"CODE","start":123,"end":130,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_73":{"id":"3abb46a9035a_73","name":"65db","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*2mFlgIUBtOuGcaPy4P2NEA.png","typename":"ImageMetadata"},"text":"Changes made for Mynewt Libraries","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*2mFlgIUBtOuGcaPy4P2NEA.png":{"id":"1*2mFlgIUBtOuGcaPy4P2NEA.png","originalHeight":555,"originalWidth":647,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_74":{"id":"3abb46a9035a_74","name":"6c06","type":"H3","href":null,"layout":null,"metadata":null,"text":"Mynewt Libraries","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_75":{"id":"3abb46a9035a_75","name":"e85c","type":"P","href":null,"layout":null,"metadata":null,"text":"Let’s look at the changes made to the Mynewt libraries and drivers (located in libs) that are used by our NB-IoT GPS Tracker application. Recall that the previous project has already provided libraries for transmitting sensor data in CoAP format over NB-IoT, also for reading the STM32 internal temperature sensor.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_75.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_75.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_75.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_75.markups.0":{"type":"CODE","start":79,"end":83,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_75.markups.1":{"type":"A","start":79,"end":83,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_75.markups.2":{"type":"A","start":150,"end":170,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_76":{"id":"3abb46a9035a_76","name":"9f25","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ gps_l70r: Driver for the Quectel L70-R GPS module. This is a new driver that connects to the UART port to receive geolocation information (latitude, longitude, altitude) from the GPS module. It calls tiny_gps_plus to parse the NMEA messages generated by the GPS module.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_76.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_76.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_76.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_76.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_76.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_76.markups.0":{"type":"CODE","start":4,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_76.markups.1":{"type":"CODE","start":204,"end":217,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_76.markups.2":{"type":"A","start":4,"end":12,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fgps_l70r","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_76.markups.3":{"type":"A","start":204,"end":217,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Ftiny_gps_plus","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_76.markups.4":{"type":"A","start":231,"end":235,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FNMEA_0183","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_77":{"id":"3abb46a9035a_77","name":"a55e","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ tiny_gps_plus: TinyGPS++ library that was ported from Arduino. It parses NMEA messages generated by the GPS module to obtain geolocation information.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_77.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_77.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_77.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_77.markups.0":{"type":"CODE","start":4,"end":17,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_77.markups.1":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Ftiny_gps_plus","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_77.markups.2":{"type":"A","start":19,"end":28,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttp:\u002F\u002Farduiniana.org\u002Flibraries\u002Ftinygpsplus\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_78":{"id":"3abb46a9035a_78","name":"9c52","type":"P","href":null,"layout":null,"metadata":null,"text":"3️⃣ custom_sensor: We added a custom Sensor Data Type for the GPS geolocation, which contains latitude, longitude and altitude. This enables the gps_l70r GPS driver to be polled like any other sensor (e.g. internal temperature sensor) via Mynewt’s Sensor Framework.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_78.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_78.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_78.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_78.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_78.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_78.markups.0":{"type":"CODE","start":4,"end":17,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_78.markups.1":{"type":"CODE","start":145,"end":153,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_78.markups.2":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fcustom_sensor","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_78.markups.3":{"type":"A","start":145,"end":153,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fgps_l70r","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_78.markups.4":{"type":"A","start":239,"end":264,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_framework.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_79":{"id":"3abb46a9035a_79","name":"438e","type":"P","href":null,"layout":null,"metadata":null,"text":"4️⃣ mynewt_rust: Helper functions were added to allow the Rust application to read the new Geolocation Sensor Data Type","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_79.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_79.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_79.markups.0":{"type":"CODE","start":4,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_79.markups.1":{"type":"A","start":4,"end":15,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fmynewt_rust","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_80":{"id":"3abb46a9035a_80","name":"d5b3","type":"P","href":null,"layout":null,"metadata":null,"text":"5️⃣ buffered_serial: Library that buffers data from the UART port for easier parsing. Used by the GPS driver gps_l70r and the Quectel NB-IoT driver bc95g","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_80.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_80.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_80.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_80.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_80.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_80.markups.5","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_80.markups.0":{"type":"CODE","start":4,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_80.markups.1":{"type":"CODE","start":109,"end":117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_80.markups.2":{"type":"CODE","start":148,"end":153,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_80.markups.3":{"type":"A","start":4,"end":19,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fbuffered_serial","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_80.markups.4":{"type":"A","start":109,"end":117,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fgps_l70r","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_80.markups.5":{"type":"A","start":148,"end":153,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fbc95g","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_81":{"id":"3abb46a9035a_81","name":"467d","type":"P","href":null,"layout":null,"metadata":null,"text":"6️⃣ adc_stm32l4: We added this driver to support the Analog-To-Digital Converter (ADC) found in the STM32 L476 microcontroller. The ADC driver is used by the internal temperature sensor temp_stm32","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_81.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_81.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_81.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_81.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_81.markups.0":{"type":"CODE","start":4,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_81.markups.1":{"type":"CODE","start":186,"end":196,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_81.markups.2":{"type":"A","start":4,"end":15,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fadc_stm32l4","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_81.markups.3":{"type":"A","start":186,"end":196,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Ftemp_stm32","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_82":{"id":"3abb46a9035a_82","name":"e3e3","type":"P","href":null,"layout":null,"metadata":null,"text":"7️⃣ temp_stm32: This is the driver for the internal temperature sensor. The driver has been updated to use adc_stm32l4 to read the internal temperature sensor on the STM32 L476 microcontroller.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_82.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_82.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_82.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_82.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_82.markups.0":{"type":"CODE","start":4,"end":14,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_82.markups.1":{"type":"CODE","start":107,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_82.markups.2":{"type":"A","start":4,"end":14,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Ftemp_stm32","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_82.markups.3":{"type":"A","start":107,"end":118,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fadc_stm32l4","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_83":{"id":"3abb46a9035a_83","name":"ea30","type":"P","href":null,"layout":null,"metadata":null,"text":"With these updates, our Rust application shall be able to poll the GPS sensor for the geolocation, attach the geolocation to the internal temperature sensor data, and transmit the geolocated sensor data to the CoAP Server at thethings.io over NB-IoT.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_83.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_83.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_83.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_83.markups.0":{"type":"STRONG","start":58,"end":77,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_83.markups.1":{"type":"STRONG","start":99,"end":121,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_83.markups.2":{"type":"STRONG","start":167,"end":202,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_84":{"id":"3abb46a9035a_84","name":"4e38","type":"H3","href":null,"layout":null,"metadata":null,"text":"Application Configuration","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_85":{"id":"3abb46a9035a_85","name":"a93b","type":"P","href":null,"layout":null,"metadata":null,"text":"Where do we configure the settings for the libraries? In the System Configuration File for our Target Application targets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_85.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_85.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_85.markups.0":{"type":"CODE","start":114,"end":150,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_85.markups.1":{"type":"A","start":114,"end":150,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_86":{"id":"3abb46a9035a_86","name":"a65e","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Application Configuration. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_86.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_86.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_86.markups.0":{"type":"A","start":32,"end":133,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:0cca53060a6a625685f7b487c63131e0":{"id":"0cca53060a6a625685f7b487c63131e0","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_86.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:0cca53060a6a625685f7b487c63131e0","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_87":{"id":"3abb46a9035a_87","name":"c935","type":"P","href":null,"layout":null,"metadata":null,"text":"(The System Configuration File for the previous project was at targets\u002Fbluepill_my_sensor\u002Fsyscfg.yml)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_87.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_87.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_87.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_87.markups.0":{"type":"CODE","start":63,"end":100,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_87.markups.1":{"type":"A","start":35,"end":55,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_87.markups.2":{"type":"A","start":63,"end":100,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fbluepill_my_sensor\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_88":{"id":"3abb46a9035a_88","name":"ec7f","type":"P","href":null,"layout":null,"metadata":null,"text":"Here we enable the drivers for the GPS and NB-IoT modules, by setting GPS_L70R and BC95G to 1. We specify the UART port for the GPS and NB-IoT modules like this…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_88.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_88.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_88.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_88.markups.0":{"type":"CODE","start":70,"end":78,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_88.markups.1":{"type":"CODE","start":83,"end":88,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_88.markups.2":{"type":"CODE","start":92,"end":93,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_89":{"id":"3abb46a9035a_89","name":"38f7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"GPS_L70R_UART: 0  #  Connect to Quectel L70R module on USART2\nBC95G_UART:    2  #  Connect to Quectel BC95-G module on LPUART1 \n                  #  i.e. USART3 with TX\u002FRX pins swapped","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_90":{"id":"3abb46a9035a_90","name":"18b2","type":"P","href":null,"layout":null,"metadata":null,"text":"Why 0 and 2? Because the Mynewt UART ports are named like this…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_90.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_90.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_90.markups.0":{"type":"CODE","start":4,"end":5,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_90.markups.1":{"type":"CODE","start":10,"end":11,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_91":{"id":"3abb46a9035a_91","name":"1638","type":"PRE","href":null,"layout":null,"metadata":null,"text":"UART_0 → USART2\nUART_1 → USART1\nUART_2 → USART3","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_91.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_91.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_91.markups.0":{"type":"STRONG","start":0,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_91.markups.1":{"type":"STRONG","start":32,"end":47,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_92":{"id":"3abb46a9035a_92","name":"2b96","type":"P","href":null,"layout":null,"metadata":null,"text":"Recall that we need to swap the TX\u002FRX pins for port USART3 so that it behaves like LPUART1. We have applied a patch in hal_uart.c that swaps the pins only if UART_2_SWAP_TXRX is set to 1…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_92.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_92.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_92.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_92.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_92.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_92.markups.5","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_92.markups.0":{"type":"CODE","start":32,"end":37,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_92.markups.1":{"type":"CODE","start":52,"end":58,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_92.markups.2":{"type":"CODE","start":83,"end":90,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_92.markups.3":{"type":"CODE","start":119,"end":129,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_92.markups.4":{"type":"CODE","start":158,"end":174,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_92.markups.5":{"type":"CODE","start":185,"end":186,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_93":{"id":"3abb46a9035a_93","name":"9da6","type":"PRE","href":null,"layout":null,"metadata":null,"text":"# Swap TX\u002FRX pins for USART3 so that USART3 behaves like LPUART1\nUART_2_SWAP_TXRX: 1","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_94":{"id":"3abb46a9035a_94","name":"e213","type":"P","href":null,"layout":null,"metadata":null,"text":"On the Ghostyu developer kit, the GPS module is disabled by default. The GPS driver needs to set Pin PA1 to high to enable the GPS module. We specify the pin like this…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_95":{"id":"3abb46a9035a_95","name":"2bcd","type":"PRE","href":null,"layout":null,"metadata":null,"text":"# GPIO Pin PA1 enables and disables the GPS module\nGPS_L70R_ENABLE_PIN: MCU_GPIO_PORTA(1)","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_96":{"id":"3abb46a9035a_96","name":"8fd9","type":"H3","href":null,"layout":null,"metadata":null,"text":"Rust Application","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_97":{"id":"3abb46a9035a_97","name":"b903","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*othN-uAMqDuWDvPF8tgQYA.png","typename":"ImageMetadata"},"text":"Changes made for Rust Application","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*othN-uAMqDuWDvPF8tgQYA.png":{"id":"1*othN-uAMqDuWDvPF8tgQYA.png","originalHeight":335,"originalWidth":536,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_98":{"id":"3abb46a9035a_98","name":"3bd5","type":"P","href":null,"layout":null,"metadata":null,"text":"In the previous project we have created an Embedded Rust application that polls the internal temperature sensor every 10 seconds and transmits the temperature to the CoAP server (at thethings.io). Now we’ll extend the Rust application to transmit the GPS Geolocation (latitude, longitude) together with the temperature.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_98.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_98.markups.0":{"type":"A","start":0,"end":23,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_99":{"id":"3abb46a9035a_99","name":"c4e8","type":"P","href":null,"layout":null,"metadata":null,"text":"We reused the Rust modules in rust\u002Fapp\u002Fsrc from the previous application…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_99.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_99.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_99.markups.0":{"type":"CODE","start":30,"end":42,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_99.markups.1":{"type":"A","start":30,"end":42,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Frust\u002Fapp\u002Fsrc","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_100":{"id":"3abb46a9035a_100","name":"cc5f","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ lib.rs: Main program that starts the sensors and networking","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_100.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_100.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_100.markups.0":{"type":"CODE","start":4,"end":10,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_100.markups.1":{"type":"A","start":4,"end":10,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Flib.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_101":{"id":"3abb46a9035a_101","name":"b0c4","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ app_sensor.rs: Poll the internal temperature sensor temp_stm32 and call app_network.rs to transmit the data","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_101.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_101.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_101.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_101.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_101.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_101.markups.0":{"type":"CODE","start":4,"end":17,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_101.markups.1":{"type":"CODE","start":56,"end":66,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_101.markups.2":{"type":"CODE","start":76,"end":90,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_101.markups.3":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_101.markups.4":{"type":"A","start":76,"end":90,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_102":{"id":"3abb46a9035a_102","name":"b565","type":"P","href":null,"layout":null,"metadata":null,"text":"3️⃣ app_network.rs: Compose a CoAP Message with a JSON Payload to transmit the temperature data to the CoAP server at thethings.io","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_102.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_102.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_102.markups.0":{"type":"CODE","start":4,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_102.markups.1":{"type":"A","start":4,"end":18,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_103":{"id":"3abb46a9035a_103","name":"bca8","type":"P","href":null,"layout":null,"metadata":null,"text":"We added a new module gps_sensor.rs that instructs Mynewt to poll our GPS sensor every 11 seconds. This is possible because our GPS driver gps_l70r has been integrated with Mynewt’s Sensor Framework so that it works like any other sensor (such as the internal temperature sensor).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_103.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_103.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_103.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_103.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_103.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_103.markups.0":{"type":"CODE","start":22,"end":35,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_103.markups.1":{"type":"CODE","start":139,"end":147,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_103.markups.2":{"type":"A","start":22,"end":35,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fgps_sensor.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_103.markups.3":{"type":"A","start":139,"end":147,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fgps_l70r","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_103.markups.4":{"type":"A","start":173,"end":198,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fos\u002Fmodules\u002Fsensor_framework\u002Fsensor_framework.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_104":{"id":"3abb46a9035a_104","name":"a0d4","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fgps_sensor.rs","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_104.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_104.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_104.markups.0":{"type":"A","start":5,"end":96,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fgps_sensor.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:661235fdcd8d699e62d61f5e1bd10ec3":{"id":"661235fdcd8d699e62d61f5e1bd10ec3","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"From https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_104.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:661235fdcd8d699e62d61f5e1bd10ec3","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_105":{"id":"3abb46a9035a_105","name":"2773","type":"P","href":null,"layout":null,"metadata":null,"text":"Now we have two sources of sensor data in our Rust application…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_106":{"id":"3abb46a9035a_106","name":"c413","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ Internal Temperature Sensor Data, generated by the temp_stm32 driver","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_106.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_106.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_106.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_106.markups.0":{"type":"CODE","start":55,"end":65,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_106.markups.1":{"type":"A","start":55,"end":65,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Ftemp_stm32","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_106.markups.2":{"type":"STRONG","start":4,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_107":{"id":"3abb46a9035a_107","name":"1ba8","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ GPS Geolocation (latitude, longitude, altitude), generated by the gps_l70r driver","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_107.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_107.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_107.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_107.markups.0":{"type":"CODE","start":70,"end":78,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_107.markups.1":{"type":"A","start":70,"end":78,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Flibs\u002Fgps_l70r","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_107.markups.2":{"type":"STRONG","start":4,"end":51,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_108":{"id":"3abb46a9035a_108","name":"0b38","type":"P","href":null,"layout":null,"metadata":null,"text":"To conserve NB-IoT packets, we’ll aggregate the two types of sensor data and transmit as a single CoAP message. That’s why the Sensor Listeners for both sensors have been updated to forward the polled sensor data to a new function aggregate_sensor_data() defined in app_network.rs…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_108.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_108.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_108.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_108.markups.0":{"type":"CODE","start":231,"end":254,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_108.markups.1":{"type":"CODE","start":266,"end":280,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_108.markups.2":{"type":"A","start":266,"end":280,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_109":{"id":"3abb46a9035a_109","name":"0479","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_109.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_109.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_109.markups.0":{"type":"A","start":5,"end":97,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:660da0876d3d1f19c03ae48ad12fcca2":{"id":"660da0876d3d1f19c03ae48ad12fcca2","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"From https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_109.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:660da0876d3d1f19c03ae48ad12fcca2","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_110":{"id":"3abb46a9035a_110","name":"4a6e","type":"P","href":null,"layout":null,"metadata":null,"text":"When aggregate_sensor_data() receives a GPS Geolocation, it doesn’t transmit the data to the server. Instead it stores the GPS Geolocation.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_110.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_110.markups.0":{"type":"CODE","start":5,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_111":{"id":"3abb46a9035a_111","name":"4d32","type":"P","href":null,"layout":null,"metadata":null,"text":"When aggregate_sensor_data() receives the temperature sensor data, it attaches the stored GPS Geolocation to the sensor data, and transmits the geolocated sensor data like this…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_111.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_111.markups.0":{"type":"CODE","start":5,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_112":{"id":"3abb46a9035a_112","name":"8438","type":"PRE","href":null,"layout":null,"metadata":null,"text":"{ \"values\": [\n   { \"key\"  : \"t\",      \n     \"value\": 960, \n     \"geo\"  : { \"lat\": 1.2701, \"long\": 103.8078 }}\n     ...\n]}","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_113":{"id":"3abb46a9035a_113","name":"7287","type":"P","href":null,"layout":null,"metadata":null,"text":"This JSON Payload format is specified by thethings.io for transmitting sensor data (temperature t = 960) with attached geolocation (latitude = 1.2701, longitude = 103.8078).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_113.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_113.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_113.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_113.markups.0":{"type":"CODE","start":84,"end":103,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_113.markups.1":{"type":"CODE","start":132,"end":171,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_113.markups.2":{"type":"A","start":5,"end":24,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fdevelopers.thethings.io\u002Fdocs\u002Fjson-1","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_114":{"id":"3abb46a9035a_114","name":"b9ef","type":"P","href":null,"layout":null,"metadata":null,"text":"The Rust code for creating the JSON Payload is exactly the same as before, based on the coap! macro…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_114.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_114.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_114.markups.0":{"type":"CODE","start":88,"end":93,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_114.markups.1":{"type":"A","start":88,"end":93,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_115":{"id":"3abb46a9035a_115","name":"aeda","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002F","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_115.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_115.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_115.markups.0":{"type":"A","start":5,"end":75,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_network.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:c9c7de17af267c3e9ea0ffb8b4910449":{"id":"c9c7de17af267c3e9ea0ffb8b4910449","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"From https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_115.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:c9c7de17af267c3e9ea0ffb8b4910449","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_116":{"id":"3abb46a9035a_116","name":"44c9","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*qT9I1BeqVmw_5-nhmDVZlQ.png","typename":"ImageMetadata"},"text":"Geolocated Sensor Data rendered in a dashboard at thethings.io","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_117":{"id":"3abb46a9035a_117","name":"81b5","type":"P","href":null,"layout":null,"metadata":null,"text":"How is this possible? Because the coap! macro has been updated to emit the GPS Geolocation attached to the sensor data in val (if the GPS Geolocation exists).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_117.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_117.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_117.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_117.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_117.markups.0":{"type":"CODE","start":34,"end":39,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_117.markups.1":{"type":"CODE","start":122,"end":125,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_117.markups.2":{"type":"A","start":34,"end":39,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_117.markups.3":{"type":"A","start":66,"end":90,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fmynewt\u002Fsrc\u002Fencoding\u002Fmacros.rs#L535-L536","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_118":{"id":"3abb46a9035a_118","name":"d174","type":"P","href":null,"layout":null,"metadata":null,"text":"The screen shows how the Geolocated Sensor Data transmitted by our device would be rendered in a dashboard at thethings.io.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_119":{"id":"3abb46a9035a_119","name":"3ef0","type":"P","href":null,"layout":null,"metadata":null,"text":"That’s the power of creating a Domain-Specific Language (like coap!) in Rust… We simply focus on the intent of transmitting sensor data, and let the macro decide how to generate the right payload to match our intent.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_119.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_119.markups.0":{"type":"CODE","start":62,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_120":{"id":"3abb46a9035a_120","name":"38a7","type":"P","href":null,"layout":null,"metadata":null,"text":"One more enhancement implemented in the Mynewt Rust Wrapper: The polling of Mynewt sensors in the Rust application has been made simpler by introducing Rust Iterators…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_120.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_120.markups.0":{"type":"A","start":152,"end":166,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fmynewt\u002Fsrc\u002Fhw\u002Fsensor_mgr.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_121":{"id":"3abb46a9035a_121","name":"8f00","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*0Noo0gaHItG2y45dxXYzyg.png","typename":"ImageMetadata"},"text":"Rust Iterators for polling Mynewt sensors. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_121.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*0Noo0gaHItG2y45dxXYzyg.png":{"id":"1*0Noo0gaHItG2y45dxXYzyg.png","originalHeight":997,"originalWidth":1976,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_121.markups.0":{"type":"A","start":48,"end":139,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Frust\u002Fapp\u002Fsrc\u002Fapp_sensor.rs","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_122":{"id":"3abb46a9035a_122","name":"4d93","type":"H3","href":null,"layout":null,"metadata":null,"text":"Mynewt Build and Flash Scripts","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_123":{"id":"3abb46a9035a_123","name":"4b77","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*3ChgwrLXPWxxExFRbfzTng.png","typename":"ImageMetadata"},"text":"Changes made for Mynewt Build and Flash Scripts","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*3ChgwrLXPWxxExFRbfzTng.png":{"id":"1*3ChgwrLXPWxxExFRbfzTng.png","originalHeight":427,"originalWidth":463,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_124":{"id":"3abb46a9035a_124","name":"9523","type":"P","href":null,"layout":null,"metadata":null,"text":"Mynewt provides the command-line tool newt for building the firmware image and flashing it to the microcontroller. On Windows, newt requires the MSYS2 and MinGW toolchains to be installed.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_124.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_124.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_124.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_124.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_124.markups.0":{"type":"CODE","start":38,"end":42,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_124.markups.1":{"type":"CODE","start":127,"end":131,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_124.markups.2":{"type":"A","start":20,"end":42,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fnewt\u002Fnewt_ops.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_124.markups.3":{"type":"A","start":145,"end":187,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmynewt.apache.org\u002Flatest\u002Fnewt\u002Fnewt_ops.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_125":{"id":"3abb46a9035a_125","name":"87a2","type":"P","href":null,"layout":null,"metadata":null,"text":"I wanted to simplify the installation of the Mynewt build tools on Windows (and make them more robust), so I chose to write my own build and flash scripts based on pure Windows, without MSYS2 and MinGW. Earlier I have experimented with newt on Windows Subsystem for Linux but the performance was awful so I dropped it.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_125.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_125.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_125.markups.0":{"type":"CODE","start":236,"end":240,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_125.markups.1":{"type":"A","start":244,"end":271,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fdocs.microsoft.com\u002Fen-us\u002Fwindows\u002Fwsl\u002Fabout","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126":{"id":"3abb46a9035a_126","name":"ce30","type":"P","href":null,"layout":null,"metadata":null,"text":"The custom build scripts for STM32 L476 are located in the scripts\u002Fstm32l4 folder (except for build-app, which is located in scripts). The *.cmd scripts are for Windows, *.sh scripts are for macOS and Linux (though not extensively tested for Linux). *.ocd are the OpenOCD scripts for flashing and debugging (they control the ST-Link interface).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.5","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.6","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.7","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_126.markups.8","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_126.markups.0":{"type":"CODE","start":59,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.1":{"type":"CODE","start":94,"end":103,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.2":{"type":"CODE","start":125,"end":132,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.3":{"type":"CODE","start":139,"end":144,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.4":{"type":"CODE","start":170,"end":174,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.5":{"type":"CODE","start":250,"end":255,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.6":{"type":"A","start":59,"end":74,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fscripts\u002Fstm32l4","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.7":{"type":"A","start":125,"end":132,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fscripts","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_126.markups.8":{"type":"A","start":264,"end":271,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttp:\u002F\u002Fopenocd.org\u002Fdoc-release\u002Fhtml\u002FAbout.html#About","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_127":{"id":"3abb46a9035a_127","name":"5b4e","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ build-boot.cmd, .sh: Build the bootloader by running newt build stm32l4_boot","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_127.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_127.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_127.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_127.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_127.markups.0":{"type":"CODE","start":4,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_127.markups.1":{"type":"CODE","start":57,"end":80,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_127.markups.2":{"type":"A","start":4,"end":18,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fbuild-boot.cmd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_127.markups.3":{"type":"A","start":20,"end":23,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fbuild-boot.sh","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_128":{"id":"3abb46a9035a_128","name":"994d","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ build-app.cmd, .sh: Build the application by running newt build stm32l4_my_sensor. Also builds the Rust application and injects the compiled Rust code into the build.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_128.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_128.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_128.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_128.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_128.markups.0":{"type":"CODE","start":4,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_128.markups.1":{"type":"CODE","start":57,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_128.markups.2":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fbuild-app.cmd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_128.markups.3":{"type":"A","start":19,"end":22,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fbuild-app.sh","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_129":{"id":"3abb46a9035a_129","name":"6531","type":"P","href":null,"layout":null,"metadata":null,"text":"Previously the Rust build for STM32 Blue Pill F103 was targeted for thumbv7m-none-eabi (Arm Cortex M3), now the Rust build for STM32 L476 is targeted for thumbv7em-none-eabihf (Arm Cortex M4 with Hardware Floating-Point)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_129.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_129.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_129.markups.0":{"type":"CODE","start":68,"end":86,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_129.markups.1":{"type":"CODE","start":154,"end":175,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_130":{"id":"3abb46a9035a_130","name":"9e8e","type":"P","href":null,"layout":null,"metadata":null,"text":"3️⃣ image-app.cmd, .sh: Create the application firmware image: newt create-image -v stm32l4_my_sensor 1.0.0","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_130.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_130.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_130.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_130.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_130.markups.0":{"type":"CODE","start":4,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_130.markups.1":{"type":"CODE","start":63,"end":107,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_130.markups.2":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fimage-app.cmd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_130.markups.3":{"type":"A","start":19,"end":22,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fimage-app.sh","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_131":{"id":"3abb46a9035a_131","name":"54cf","type":"P","href":null,"layout":null,"metadata":null,"text":"4️⃣ flash-boot.cmd, .sh: Flash the bootloader with OpenOCD","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_131.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_131.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_131.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_131.markups.0":{"type":"CODE","start":4,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_131.markups.1":{"type":"A","start":4,"end":18,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-boot.cmd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_131.markups.2":{"type":"A","start":20,"end":23,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-boot.sh","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_132":{"id":"3abb46a9035a_132","name":"e032","type":"P","href":null,"layout":null,"metadata":null,"text":"5️⃣ flash-boot.ocd: OpenOCD script for flashing the bootloader","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_132.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_132.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_132.markups.0":{"type":"CODE","start":4,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_132.markups.1":{"type":"A","start":4,"end":18,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-boot.ocd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_133":{"id":"3abb46a9035a_133","name":"a8b9","type":"P","href":null,"layout":null,"metadata":null,"text":"6️⃣ flash-app.cmd, .sh: Flash the application with OpenOCD","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_133.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_133.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_133.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_133.markups.0":{"type":"CODE","start":4,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_133.markups.1":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-app.cmd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_133.markups.2":{"type":"A","start":19,"end":22,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-app.sh","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_134":{"id":"3abb46a9035a_134","name":"70cc","type":"P","href":null,"layout":null,"metadata":null,"text":"7️⃣ flash-app.ocd: OpenOCD script for flashing the application","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_134.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_134.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_134.markups.0":{"type":"CODE","start":4,"end":17,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_134.markups.1":{"type":"A","start":4,"end":17,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-app.ocd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_135":{"id":"3abb46a9035a_135","name":"8778","type":"P","href":null,"layout":null,"metadata":null,"text":"8️⃣ flash-init.ocd: OpenOCD initialisation script called by flash-boot.ocd and flash-app.ocd","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_135.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_135.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_135.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_135.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_135.markups.0":{"type":"CODE","start":4,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_135.markups.1":{"type":"CODE","start":60,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_135.markups.2":{"type":"CODE","start":79,"end":92,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_135.markups.3":{"type":"A","start":4,"end":18,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fflash-init.ocd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_136":{"id":"3abb46a9035a_136","name":"6b74","type":"P","href":null,"layout":null,"metadata":null,"text":"9️⃣ debug.ocd: OpenOCD script for debugging the application. Called by the Cortex-Debug Extension in .vscode\u002Flaunch-stm32l4.json","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_136.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_136.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_136.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_136.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_136.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_136.markups.0":{"type":"CODE","start":4,"end":13,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_136.markups.1":{"type":"CODE","start":101,"end":128,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_136.markups.2":{"type":"A","start":4,"end":13,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Fscripts\u002Fstm32l4\u002Fdebug.ocd","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_136.markups.3":{"type":"A","start":75,"end":97,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmarketplace.visualstudio.com\u002Fitems?itemName=marus25.cortex-debug","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_136.markups.4":{"type":"A","start":101,"end":128,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch-stm32l4.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_137":{"id":"3abb46a9035a_137","name":"3c78","type":"P","href":null,"layout":null,"metadata":null,"text":"The newt command in the Windows scripts refer to the Windows build of newt, which works without MSYS2 and MinGW.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_137.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_137.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_137.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_137.markups.0":{"type":"CODE","start":4,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_137.markups.1":{"type":"CODE","start":70,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_137.markups.2":{"type":"A","start":53,"end":74,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fnewt","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_138":{"id":"3abb46a9035a_138","name":"c958","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*1sUF3auTmMLywTHB6wyBxg.png","typename":"ImageMetadata"},"text":"Visual Studio Code Tasks in the Task Runner","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*1sUF3auTmMLywTHB6wyBxg.png":{"id":"1*1sUF3auTmMLywTHB6wyBxg.png","originalHeight":370,"originalWidth":315,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_139":{"id":"3abb46a9035a_139","name":"a466","type":"P","href":null,"layout":null,"metadata":null,"text":"The above scripts are linked into .vscode\u002Ftasks.json so that they will appear as Tasks in Visual Studio Code.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_139.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_139.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_139.markups.0":{"type":"CODE","start":34,"end":52,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_139.markups.1":{"type":"A","start":34,"end":52,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Ftasks.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_140":{"id":"3abb46a9035a_140","name":"c30c","type":"P","href":null,"layout":null,"metadata":null,"text":"If we’re using the Task Runner Extension, the tasks will appear like this.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_140.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_140.markups.0":{"type":"A","start":19,"end":40,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmarketplace.visualstudio.com\u002Fitems?itemName=SanaAjani.taskrunnercode","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_141":{"id":"3abb46a9035a_141","name":"0978","type":"P","href":null,"layout":null,"metadata":null,"text":"(The custom build and flash scripts from the previous project are located in the scripts folder)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_141.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_141.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_141.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_141.markups.0":{"type":"CODE","start":81,"end":88,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_141.markups.1":{"type":"A","start":41,"end":61,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_141.markups.2":{"type":"A","start":81,"end":88,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Ftree\u002Fl476\u002Fscripts","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_142":{"id":"3abb46a9035a_142","name":"b94d","type":"H3","href":null,"layout":null,"metadata":null,"text":"Visual Studio Code Configuration","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_143":{"id":"3abb46a9035a_143","name":"0a4d","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*rn5hIckz7OV_JoqN4ZxqNA.png","typename":"ImageMetadata"},"text":"Changes made for Visual Studio Code Configuration","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*rn5hIckz7OV_JoqN4ZxqNA.png":{"id":"1*rn5hIckz7OV_JoqN4ZxqNA.png","originalHeight":242,"originalWidth":422,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_144":{"id":"3abb46a9035a_144","name":"e969","type":"P","href":null,"layout":null,"metadata":null,"text":"Cortex-Debug is the debugger we’re using in Visual Studio Code to debug our application. We added a new debugger configuration .vscode\u002Flaunch-stm32l4.json for STM32 L476.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_144.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_144.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_144.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_144.markups.0":{"type":"CODE","start":127,"end":154,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_144.markups.1":{"type":"A","start":0,"end":12,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmarketplace.visualstudio.com\u002Fitems?itemName=marus25.cortex-debug","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_144.markups.2":{"type":"A","start":127,"end":154,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch-stm32l4.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145":{"id":"3abb46a9035a_145","name":"e7b3","type":"P","href":null,"layout":null,"metadata":null,"text":"The debugger configuration specifies the OpenOCD scripts and GDB commands for debugging the application. Note that launch.json, the current debugger configuration, is overwritten by launch-stm32l4.json whenever the application is rebuilt. So we should never edit launch.json.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.4","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.5","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.6","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_145.markups.7","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_145.markups.0":{"type":"CODE","start":115,"end":126,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.1":{"type":"CODE","start":182,"end":201,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.2":{"type":"CODE","start":263,"end":274,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.3":{"type":"A","start":41,"end":48,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttp:\u002F\u002Fopenocd.org\u002Fdoc-release\u002Fhtml\u002FAbout.html#About","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.4":{"type":"A","start":61,"end":64,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.gnu.org\u002Fsoftware\u002Fgdb\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.5":{"type":"A","start":115,"end":126,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.6":{"type":"A","start":182,"end":201,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch-stm32l4.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_145.markups.7":{"type":"A","start":263,"end":274,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_146":{"id":"3abb46a9035a_146","name":"10b1","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Cortex-Debug Configuration. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch-stm32l4.json","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_146.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_146.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_146.markups.0":{"type":"A","start":33,"end":125,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch-stm32l4.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:483423855970ca1d00246c0c1005cbb8":{"id":"483423855970ca1d00246c0c1005cbb8","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fbuild-an-nb-iot-gps-tracker-on-stm32-l476-with-apache-mynewt-and-embedded-rust-8c095a925546","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_146.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:483423855970ca1d00246c0c1005cbb8","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_147":{"id":"3abb46a9035a_147","name":"a63e","type":"P","href":null,"layout":null,"metadata":null,"text":"(The debugger configuration from the previous project is at .vscode\u002Flaunch-bluepill.json)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_147.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_147.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_147.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_147.markups.0":{"type":"CODE","start":60,"end":88,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_147.markups.1":{"type":"A","start":33,"end":53,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Frust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e?source=friends_link&sk=aaa21371f68a07c543066b6b89a760f0","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_147.markups.2":{"type":"A","start":60,"end":88,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002F.vscode\u002Flaunch-bluepill.json","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_148":{"id":"3abb46a9035a_148","name":"8249","type":"H3","href":null,"layout":null,"metadata":null,"text":"Connect the Hardware","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_149":{"id":"3abb46a9035a_149","name":"81ea","type":"P","href":null,"layout":null,"metadata":null,"text":"To build the NB-IoT GPS Tracker we’ll need the following hardware…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_150":{"id":"3abb46a9035a_150","name":"7b4e","type":"P","href":null,"layout":null,"metadata":null,"text":"1️⃣ Ghostyu NB-EK-L476 Developer Kit, as described in the article “Quick Peek of Huawei LiteOS with NB-IoT on Ghostyu NB-EK-L476 Developer Kit (STM32L476RCT6)”","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_150.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_150.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_150.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_150.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_150.markups.0":{"type":"A","start":4,"end":36,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fquick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&sk=37f71270cd52f497fb6fb8139917031c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_150.markups.1":{"type":"A","start":67,"end":158,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fquick-peek-of-huawei-liteos-with-nb-iot-on-ghostyu-nb-ek-l476-developer-kit-2bbfb7f2fbcc?source=friends_link&sk=37f71270cd52f497fb6fb8139917031c","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_150.markups.2":{"type":"STRONG","start":4,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_150.markups.3":{"type":"EM","start":66,"end":159,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_151":{"id":"3abb46a9035a_151","name":"b286","type":"P","href":null,"layout":null,"metadata":null,"text":"The kit includes the STM32L476RCT6 microcontroller, Quectel BC95 NB-IoT module (with antenna) and Quectel L70-R GPS module (with antenna).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_151.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_151.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_151.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_151.markups.0":{"type":"A","start":21,"end":34,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.st.com\u002Fen\u002Fmicrocontrollers-microprocessors\u002Fstm32l476rc.html","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_151.markups.1":{"type":"A","start":52,"end":64,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.quectel.com\u002Fproduct\u002Fbc95.htm","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_151.markups.2":{"type":"A","start":98,"end":111,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.quectel.com\u002Fproduct\u002Fl70r.htm","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_152":{"id":"3abb46a9035a_152","name":"72aa","type":"P","href":null,"layout":null,"metadata":null,"text":"Alternatively: You may assemble your own kit based on the same STM32 microcontroller and Quectel modules.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_152.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_152.markups.0":{"type":"STRONG","start":0,"end":13,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_153":{"id":"3abb46a9035a_153","name":"a0b2","type":"P","href":null,"layout":null,"metadata":null,"text":"Remember to select a Quectel NB-IoT module that works with your local NB-IoT Frequency Band. You may consider this Quectel BC95-G Global NB-IoT Module (breakout board with antenna), which supports all global bands.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_153.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_153.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_153.markups.0":{"type":"A","start":115,"end":150,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20190725022150&SearchText=bc95-g+nb101&switch_new_app=y","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_153.markups.1":{"type":"STRONG","start":115,"end":150,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_154":{"id":"3abb46a9035a_154","name":"5bea","type":"P","href":null,"layout":null,"metadata":null,"text":"To connect the components in your custom kit, refer to the Ghostyu NB-EK-L476 schematics. Note that the Quectel NB-IoT module may require additional power, like tapping the 5V pin from ST-Link instead of sharing the ST-Link’s 3.3V pin with the microcontroller.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_154.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_154.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_154.markups.0":{"type":"A","start":59,"end":88,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F14KZqMO6cj20eKqM85iJNth8vf_WbI5VM\u002Fview?usp=sharing","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_154.markups.1":{"type":"A","start":161,"end":192,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.linkedin.com\u002Fposts\u002Flupyuen_quectel-nbiot-stm32-activity-6558362381049790464-rDgF","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_155":{"id":"3abb46a9035a_155","name":"4ba1","type":"P","href":null,"layout":null,"metadata":null,"text":"2️⃣ ST-Link V2 USB Adapter: Under $2, search AliExpress for st-link v2","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_155.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_155.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_155.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_155.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_155.markups.0":{"type":"CODE","start":60,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_155.markups.1":{"type":"A","start":4,"end":26,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20180924134644&SearchText=st-link+v2","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_155.markups.2":{"type":"A","start":45,"end":55,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.aliexpress.com\u002Fwholesale?catId=0&initiative_id=SB_20180924134644&SearchText=st-link+v2&switch_new_app=y","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_155.markups.3":{"type":"STRONG","start":4,"end":28,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_156":{"id":"3abb46a9035a_156","name":"c2cb","type":"P","href":null,"layout":null,"metadata":null,"text":"3️⃣ NB-IoT SIM from your local NB-IoT network operator. Many thanks to StarHub for sponsoring the NB-IoT SIM that I used for this tutorial!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_156.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_156.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_156.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_156.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_156.markups.0":{"type":"A","start":71,"end":78,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fwww.starhub.com\u002F","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_156.markups.1":{"type":"STRONG","start":4,"end":14,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_156.markups.2":{"type":"STRONG","start":71,"end":78,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_156.markups.3":{"type":"EM","start":56,"end":139,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_157":{"id":"3abb46a9035a_157","name":"484e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*tsffm9X06OaAcHum--phRg.jpeg","typename":"ImageMetadata"},"text":"Pins connected from the SWD Debug Port to ST-Link: SWDIO, SWCLK, VCC, GND","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*tsffm9X06OaAcHum--phRg.jpeg":{"id":"1*tsffm9X06OaAcHum--phRg.jpeg","originalHeight":4000,"originalWidth":6000,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_158":{"id":"3abb46a9035a_158","name":"4458","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*LEZB_DbX56eJBbYhi_0NZg.png","typename":"ImageMetadata"},"text":"SWD Debug Port on Ghostyu NB-EK-L476","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*LEZB_DbX56eJBbYhi_0NZg.png":{"id":"1*LEZB_DbX56eJBbYhi_0NZg.png","originalHeight":169,"originalWidth":203,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_159":{"id":"3abb46a9035a_159","name":"d88e","type":"P","href":null,"layout":null,"metadata":null,"text":"Connect the following pins from the SWD Debug Port to ST-Link: SWDIO, SWCLK, VCC, GND.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_159.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_159.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_159.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_159.markups.3","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_159.markups.0":{"type":"CODE","start":63,"end":68,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_159.markups.1":{"type":"CODE","start":70,"end":75,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_159.markups.2":{"type":"CODE","start":77,"end":80,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_159.markups.3":{"type":"CODE","start":82,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_160":{"id":"3abb46a9035a_160","name":"ed04","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*nWozKPJNHOCA7Be5sk9_vQ.jpeg","typename":"ImageMetadata"},"text":"Ghostyu STM32 L476 Development Kit powered by both ST-Link and micro-USB port. At top left is a USB hub.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*nWozKPJNHOCA7Be5sk9_vQ.jpeg":{"id":"1*nWozKPJNHOCA7Be5sk9_vQ.jpeg","originalHeight":2123,"originalWidth":2677,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_161":{"id":"3abb46a9035a_161","name":"c713","type":"P","href":null,"layout":null,"metadata":null,"text":"For the Ghostyu NB-EK-L476, you need to connect the micro-USB port on the board to another USB port on your computer. This means that the board will have two power sources: 3.3V power from ST-Link, and 5V power from micro-USB port. This ensures that the NB-IoT module will have sufficient power.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_161.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_161.markups.0":{"type":"STRONG","start":40,"end":99,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_162":{"id":"3abb46a9035a_162","name":"ff4e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*-d6mWNRRD7m3Kn9Y7QLeYg.png","typename":"ImageMetadata"},"text":"NB-IoT Module Power Supply for Ghostyu NB-EK-L476. From https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F14KZqMO6cj20eKqM85iJNth8vf_WbI5VM\u002Fview?usp=sharing","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_162.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*-d6mWNRRD7m3Kn9Y7QLeYg.png":{"id":"1*-d6mWNRRD7m3Kn9Y7QLeYg.png","originalHeight":472,"originalWidth":874,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_162.markups.0":{"type":"A","start":56,"end":138,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F14KZqMO6cj20eKqM85iJNth8vf_WbI5VM\u002Fview?usp=sharing","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_163":{"id":"3abb46a9035a_163","name":"e9c7","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:0*UpJu2WsvTJwrpaRH.png","typename":"ImageMetadata"},"text":"SIM partially exposed to show the unusual orientation","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*UpJu2WsvTJwrpaRH.png":{"id":"0*UpJu2WsvTJwrpaRH.png","originalHeight":461,"originalWidth":450,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_164":{"id":"3abb46a9035a_164","name":"176a","type":"P","href":null,"layout":null,"metadata":null,"text":"Insert the NB-IoT SIM into the Quectel NB-IoT Breakout Board according to the orientation shown in the photo. (Yes the SIM notch faces outward, not inward)","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_164.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_164.markups.0":{"type":"STRONG","start":0,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_165":{"id":"3abb46a9035a_165","name":"e9f5","type":"P","href":null,"layout":null,"metadata":null,"text":"Remember: Always connect the antenna before powering up the NB-IoT module!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_165.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_165.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_165.markups.0":{"type":"STRONG","start":0,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_165.markups.1":{"type":"EM","start":0,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_166":{"id":"3abb46a9035a_166","name":"caaf","type":"P","href":null,"layout":null,"metadata":null,"text":"If you’re using Windows: Make sure that the ST-Link Driver has been installed before connecting ST-Link to your computer","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_166.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_166.markups.0":{"type":"STRONG","start":0,"end":25,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_167":{"id":"3abb46a9035a_167","name":"d5e7","type":"H3","href":null,"layout":null,"metadata":null,"text":"Install and Run the NB-IoT GPS Tracker","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_168":{"id":"3abb46a9035a_168","name":"9bef","type":"P","href":null,"layout":null,"metadata":null,"text":"Follow the instructions in this article to install, build and run our application on the STM32 L476 development board (or equivalent).","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_168.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_168.markups.0":{"type":"A","start":0,"end":39,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Finstall-apache-mynewt-and-embedded-rust-for-stm32-l476-and-visual-studio-code-on-windows-9ed40e065cf4?source=friends_link&sk=23aadbb4931d991241927b905aa9e073","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_169":{"id":"3abb46a9035a_169","name":"cb4f","type":"P","href":null,"layout":null,"metadata":null,"text":"While running the application, the Console Log should look like this…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_170":{"id":"3abb46a9035a_170","name":"c71f","type":"IFRAME","href":null,"layout":"OUTSET_LEFT","metadata":null,"text":"Adapter Output Log from https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Flogs\u002Fstandalone-node.log","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_170.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_170.iframe","typename":"Iframe"},"mixtapeMetadata":null},"Paragraph:3abb46a9035a_170.markups.0":{"type":"A","start":24,"end":113,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Flogs\u002Fstandalone-node.log","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"MediaResource:a37fb388d4ab5a971fa328d9152a7938":{"id":"a37fb388d4ab5a971fa328d9152a7938","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"See https:\u002F\u002Fmedium.com\u002F@ly.lee\u002Finstall-apache-mynewt-and-embedded-rust-for-stm32-l476-and-visual-studio-code-on-windows-9ed40e065cf4","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_170.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:a37fb388d4ab5a971fa328d9152a7938","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_171":{"id":"3abb46a9035a_171","name":"27c9","type":"P","href":null,"layout":null,"metadata":null,"text":"Here you can see the program reading the internal temperature sensor.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_172":{"id":"3abb46a9035a_172","name":"1050","type":"P","href":null,"layout":null,"metadata":null,"text":"The temperature sensor data is combined with the GPS geolocation into a JSON Payload.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_173":{"id":"3abb46a9035a_173","name":"61d0","type":"P","href":null,"layout":null,"metadata":null,"text":"The JSON Payload is then transmitted as a CoAP Message to the CoAP server at thethings.io.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_174":{"id":"3abb46a9035a_174","name":"7d55","type":"P","href":null,"layout":null,"metadata":null,"text":"In the Console Log, there is a URL displayed: http:\u002F\u002Fblue-pill-geolocate.appspot.com\u002F...","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_174.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_174.markups.0":{"type":"CODE","start":46,"end":88,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_175":{"id":"3abb46a9035a_175","name":"d9c0","type":"P","href":null,"layout":null,"metadata":null,"text":"Clicking this URL opens a web page that displays the computed temperature (in degrees Celsius) and the GPS geolocation, based on the sensor data received by thethings.io from your device over NB-IoT. This URL is randomly-generated each time we restart our device.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_176":{"id":"3abb46a9035a_176","name":"ad62","type":"P","href":null,"layout":null,"metadata":null,"text":"We have installed a script at thethings.io that pushes the computed temperature and geolocation to blue-pill-geolocate.appspot.com. For more details, check the section “Advanced Topic: WiFi Geolocation with thethings.io and Google App Engine” in the article “Connect STM32 Blue Pill to ESP8266 with Apache Mynewt”.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_176.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_176.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_176.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_176.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_176.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_176.markups.0":{"type":"CODE","start":99,"end":130,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_176.markups.1":{"type":"A","start":20,"end":42,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fthethingsio-wifi-geolocation","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_176.markups.2":{"type":"A","start":259,"end":312,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fmedium.com\u002F@ly.lee\u002Fconnect-stm32-blue-pill-to-esp8266-with-apache-mynewt-7edceb9e3b8d?source=friends_link&sk=df729a82533d817ec6b2d9b626b6f66b","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_176.markups.3":{"type":"EM","start":168,"end":242,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_176.markups.4":{"type":"EM","start":258,"end":313,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_177":{"id":"3abb46a9035a_177","name":"8fc0","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*ocUyYJbh2pvzDX1ibTMmQQ.png","typename":"ImageMetadata"},"text":"Computed temperature and the GPS geolocation","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*ocUyYJbh2pvzDX1ibTMmQQ.png":{"id":"1*ocUyYJbh2pvzDX1ibTMmQQ.png","originalHeight":1848,"originalWidth":2758,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_178":{"id":"3abb46a9035a_178","name":"d921","type":"P","href":null,"layout":null,"metadata":null,"text":"Does the transmission of geolocation work when the device is on the move (say, when mounted on a vehicle?) If the device moves between NB-IoT cells, will the transmission still succeed?","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_178.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_178.markups.0":{"type":"EM","start":0,"end":185,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_179":{"id":"3abb46a9035a_179","name":"fb06","type":"P","href":null,"layout":null,"metadata":null,"text":"Yes! I have tested the NB-IoT GPS Tracker while walking around… Geolocation updates are indeed transmitted correctly to thethings.io as I walk.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_180":{"id":"3abb46a9035a_180","name":"c3ea","type":"IMG","href":null,"layout":"FULL_WIDTH","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*K_66lgzCBwUTh82hO3P61w.jpeg","typename":"ImageMetadata"},"text":"Field testing of the NB-IoT GPS Tracker","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*K_66lgzCBwUTh82hO3P61w.jpeg":{"id":"1*K_66lgzCBwUTh82hO3P61w.jpeg","originalHeight":2001,"originalWidth":5999,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_181":{"id":"3abb46a9035a_181","name":"bd64","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s a video demo of the NB-IoT GPS Tracker…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_182":{"id":"3abb46a9035a_182","name":"39a2","type":"IFRAME","href":null,"layout":"OUTSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_182.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:b8f9eb52e8de68fc7e806725173966f1":{"id":"b8f9eb52e8de68fc7e806725173966f1","iframeSrc":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FBLfAq1FzUbs%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DBLfAq1FzUbs&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FBLfAq1FzUbs%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube","iframeHeight":480,"iframeWidth":640,"title":"Reading a Quectel GPS and transmitting over NB-IoT with Rust (3D Map)","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_182.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:b8f9eb52e8de68fc7e806725173966f1","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_183":{"id":"3abb46a9035a_183","name":"01c5","type":"H3","href":null,"layout":null,"metadata":null,"text":"thethings.io Configuration","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_184":{"id":"3abb46a9035a_184","name":"f1df","type":"P","href":null,"layout":null,"metadata":null,"text":"If you’re happy to view the sensor data using my server at blue-pill-geolocate.appspot.com, you may skip this section. If you wish to configure your own account for thethings.io, read on…","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_184.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_184.markups.0":{"type":"CODE","start":59,"end":90,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_185":{"id":"3abb46a9035a_185","name":"c423","type":"P","href":null,"layout":null,"metadata":null,"text":"Follow the steps in the three videos below to configure your thethings.io account and install the Cloud Code Scripts. Click CC to view the instructions.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_185.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_185.markups.0":{"type":"CODE","start":124,"end":126,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_186":{"id":"3abb46a9035a_186","name":"1e4e","type":"P","href":null,"layout":null,"metadata":null,"text":"Note: There is one additional Cloud Code Function to be installed: push_sensor_data. Copy the code from this link to create a new Cloud Code Function named push_sensor_data.","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_186.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_186.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_186.markups.2","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_186.markups.3","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_186.markups.4","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_186.markups.0":{"type":"CODE","start":67,"end":83,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_186.markups.1":{"type":"CODE","start":156,"end":172,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_186.markups.2":{"type":"A","start":67,"end":83,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fthethingsio-wifi-geolocation\u002Fblob\u002Fmaster\u002Fpush_sensor_data.js","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_186.markups.3":{"type":"A","start":99,"end":113,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fthethingsio-wifi-geolocation\u002Fblob\u002Fmaster\u002Fpush_sensor_data.js","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_186.markups.4":{"type":"STRONG","start":0,"end":4,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_187":{"id":"3abb46a9035a_187","name":"b211","type":"P","href":null,"layout":null,"metadata":null,"text":"The Thing Token should be updated in the COAP_URI setting of the System Configuration File targets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_187.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_187.markups.1","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_187.markups.2","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_187.markups.0":{"type":"CODE","start":41,"end":49,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_187.markups.1":{"type":"CODE","start":91,"end":127,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_187.markups.2":{"type":"A","start":91,"end":127,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Ftargets\u002Fstm32l4_my_sensor\u002Fsyscfg.yml","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_188":{"id":"3abb46a9035a_188","name":"2f88","type":"IFRAME","href":null,"layout":"OUTSET_CENTER","metadata":null,"text":"thethings.io Configuration: Part 1 of 3. Click CC to view the instructions.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_188.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:a0f2046c3ad7d70ad29c52b8d76fe867":{"id":"a0f2046c3ad7d70ad29c52b8d76fe867","iframeSrc":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F4KJiZMboaUg%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D4KJiZMboaUg&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F4KJiZMboaUg%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube","iframeHeight":480,"iframeWidth":640,"title":"Transform sensor data with thethings.io (Part 1 of 3)","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_188.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:a0f2046c3ad7d70ad29c52b8d76fe867","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_189":{"id":"3abb46a9035a_189","name":"bbfa","type":"IFRAME","href":null,"layout":"OUTSET_CENTER","metadata":null,"text":"thethings.io Configuration: Part 2 of 3. Click CC to view the instructions.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_189.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:60ccd1053f700d6f438a5e38e16f8338":{"id":"60ccd1053f700d6f438a5e38e16f8338","iframeSrc":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FszCHheKEC7I%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DszCHheKEC7I&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FszCHheKEC7I%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube","iframeHeight":480,"iframeWidth":640,"title":"Transform sensor data with thethings.io (Part 2 of 3)","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_189.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:60ccd1053f700d6f438a5e38e16f8338","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_190":{"id":"3abb46a9035a_190","name":"e7e3","type":"IFRAME","href":null,"layout":"OUTSET_CENTER","metadata":null,"text":"thethings.io Configuration: Part 3 of 3. Click CC to view the instructions.","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_190.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:5d8e9f0557387bdbc3b204555a5fe1bf":{"id":"5d8e9f0557387bdbc3b204555a5fe1bf","iframeSrc":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FdMelHn4xTcM%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DdMelHn4xTcM&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FdMelHn4xTcM%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube","iframeHeight":480,"iframeWidth":640,"title":"Transform sensor data with thethings.io (Part 3 of 3)","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_190.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:5d8e9f0557387bdbc3b204555a5fe1bf","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_191":{"id":"3abb46a9035a_191","name":"68d4","type":"P","href":null,"layout":null,"metadata":null,"text":"At the dashboard page, create a new Widget with the following settings…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_192":{"id":"3abb46a9035a_192","name":"4eee","type":"IMG","href":null,"layout":"OUTSET_ROW","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*V7nBDddS3fZq2TAW7PRfkw.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*V7nBDddS3fZq2TAW7PRfkw.png":{"id":"1*V7nBDddS3fZq2TAW7PRfkw.png","originalHeight":822,"originalWidth":576,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_193":{"id":"3abb46a9035a_193","name":"27a7","type":"IMG","href":null,"layout":"OUTSET_ROW_CONTINUE","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*q3u2_gOFR1NUi03k2MXjiQ.png","typename":"ImageMetadata"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*q3u2_gOFR1NUi03k2MXjiQ.png":{"id":"1*q3u2_gOFR1NUi03k2MXjiQ.png","originalHeight":819,"originalWidth":570,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_194":{"id":"3abb46a9035a_194","name":"dc11","type":"P","href":null,"layout":null,"metadata":null,"text":"The geolocated temperature will be shown in the Widget. Here’s how it looks…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_195":{"id":"3abb46a9035a_195","name":"a055","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*GLKsUpS-887-Ywcl02u2lA.png","typename":"ImageMetadata"},"text":"thethings.io dashboard with geolocated temperature sensor data","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*GLKsUpS-887-Ywcl02u2lA.png":{"id":"1*GLKsUpS-887-Ywcl02u2lA.png","originalHeight":1298,"originalWidth":2484,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_196":{"id":"3abb46a9035a_196","name":"468b","type":"P","href":null,"layout":null,"metadata":null,"text":"Here’s a video demo of thethings.io dashboard with geolocated temperature sensor data…","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_197":{"id":"3abb46a9035a_197","name":"cc10","type":"IFRAME","href":null,"layout":"OUTSET_CENTER","metadata":null,"text":"Video demo of thethings.io dashboard with geolocated temperature sensor data","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":{"type":"id","generated":true,"id":"$Paragraph:3abb46a9035a_197.iframe","typename":"Iframe"},"mixtapeMetadata":null},"MediaResource:579a3a41df892281da3f22488ce7342f":{"id":"579a3a41df892281da3f22488ce7342f","iframeSrc":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F2-CWQju-Ffs%3Ffeature%3Doembed&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D2-CWQju-Ffs&image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F2-CWQju-Ffs%2Fhqdefault.jpg&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=youtube","iframeHeight":480,"iframeWidth":640,"title":"Reading a Quectel GPS and transmitting over NB-IoT with Rust","__typename":"MediaResource"},"$Paragraph:3abb46a9035a_197.iframe":{"mediaResource":{"type":"id","generated":false,"id":"MediaResource:579a3a41df892281da3f22488ce7342f","typename":"MediaResource"},"__typename":"Iframe"},"Paragraph:3abb46a9035a_198":{"id":"3abb46a9035a_198","name":"a059","type":"H3","href":null,"layout":null,"metadata":null,"text":"What’s Next?","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_199":{"id":"3abb46a9035a_199","name":"c2a8","type":"IMG","href":null,"layout":"OUTSET_LEFT","metadata":{"type":"id","generated":false,"id":"ImageMetadata:1*kfX4OugCyF--y9E_3zgjDQ.png","typename":"ImageMetadata"},"text":"RAM and ROM usage in Application Build Log. From https:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Flogs\u002Fbuild-application.log","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_199.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*kfX4OugCyF--y9E_3zgjDQ.png":{"id":"1*kfX4OugCyF--y9E_3zgjDQ.png","originalHeight":787,"originalWidth":462,"focusPercentX":null,"focusPercentY":null,"alt":null,"__typename":"ImageMetadata"},"Paragraph:3abb46a9035a_199.markups.0":{"type":"A","start":49,"end":140,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Flogs\u002Fbuild-application.log","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_200":{"id":"3abb46a9035a_200","name":"4c07","type":"P","href":null,"layout":null,"metadata":null,"text":"We have created an NB-IoT GPS Tracker in only 84 KB of Flash ROM (with debugging symbols included). Mighty impressive considering that it includes Mynewt Embedded OS and the Embedded Rust Libraries!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_200.markups.0","typename":"Markup"},{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_200.markups.1","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_200.markups.0":{"type":"A","start":46,"end":64,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Fgithub.com\u002Flupyuen\u002Fstm32bluepill-mynewt-sensor\u002Fblob\u002Fl476\u002Flogs\u002Fbuild-application.log","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_200.markups.1":{"type":"STRONG","start":46,"end":64,"href":null,"anchorType":null,"userId":null,"linkMetadata":null,"__typename":"Markup"},"Paragraph:3abb46a9035a_201":{"id":"3abb46a9035a_201","name":"3d72","type":"P","href":null,"layout":null,"metadata":null,"text":"STM32 L476 is definitely a good choice for building an NB-IoT GPS Tracker. Mynewt did a great job of shielding the microcontroller-specific details and making embedded applications truly portable. And the application was created with only a few lines of Rust application code… Rust is incredibly productive for creating embedded applications!","hasDropCap":null,"dropCapImage":null,"markups":[],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_202":{"id":"3abb46a9035a_202","name":"4263","type":"P","href":null,"layout":null,"metadata":null,"text":"For my next article I shall be taking a break from STM32 (since we have proved that it’s so easy to port Mynewt applications across STM32 microcontrollers)… And explore Nordic nRF52832 with Mynewt and Rust!","hasDropCap":null,"dropCapImage":null,"markups":[{"type":"id","generated":true,"id":"Paragraph:3abb46a9035a_202.markups.0","typename":"Markup"}],"__typename":"Paragraph","iframe":null,"mixtapeMetadata":null},"Paragraph:3abb46a9035a_202.markups.0":{"type":"A","start":169,"end":184,"href":"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20191204194100\u002Fhttps:\u002F\u002Finfocenter.nordicsemi.com\u002Fpdf\u002FnRF52832_PS_v1.0.pdf","anchorType":"LINK","userId":null,"linkMetadata":null,"__typename":"Markup"},"Tag:internet-of-things":{"id":"internet-of-things","displayTitle":"Internet of Things","__typename":"Tag"},"Tag:rust":{"id":"rust","displayTitle":"Rust","__typename":"Tag"},"Tag:stm32":{"id":"stm32","displayTitle":"Stm32","__typename":"Tag"},"Tag:gps":{"id":"gps","displayTitle":"Gps","__typename":"Tag"},"Tag:nb-iot":{"id":"nb-iot","displayTitle":"Nb Iot","__typename":"Tag"},"$Post:8c095a925546.previewContent":{"subtitle":"Plus Quectel L70-R GPS, Quectel BC95 NB-IoT modules and thethings.io","__typename":"PreviewContent"}}</script><script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/manifest.c83c1a1a.js"></script><script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/vendors~main.9c8dc7d0.chunk.js"></script><script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/main.c5c932e3.chunk.js"></script><script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/vendors~screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tribute~scre~3e410f11.faa5af01.chunk.js"></script>
<script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tribute~screen.post~~73c4bb05.cf7c8ea6.chunk.js"></script>
<script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/screen.post~screen.post.amp~screen.post.series~screen.profile~screen.sequence.library~screen.sequenc~036c6b37.3e471c5d.chunk.js"></script>
<script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/screen.collection.packageBuilder~screen.landingpages.pres45~screen.landingpages.tick~screen.landingp~ed90ee39.3c8733a8.chunk.js"></script>
<script src="https://web.archive.org/web/20191204194100js_/https://cdn-client.medium.com/lite/static/js/screen.post.1aa42b57.chunk.js"></script><script>window.main();</script></body></html><!--
     FILE ARCHIVED ON 19:41:00 Dec 04, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:13:41 Feb 22, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  LoadShardBlock: 206.117 (3)
  PetaboxLoader3.datanode: 145.259 (4)
  RedisCDXSource: 0.649
  exclusion.robots.policy: 0.461
  exclusion.robots: 0.472
  CDXLines.iter: 22.513 (3)
  captures_list: 232.651
  esindex: 0.011
  PetaboxLoader3.resolve: 26.915
  load_resource: 117.202
-->