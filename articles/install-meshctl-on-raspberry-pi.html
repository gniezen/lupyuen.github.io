<!doctype html>
<html lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <!-- End Wayback Rewrite JS Include -->
  <title data-rh="true">Install meshctl on Raspberry Pi. Follow these instructions to install… | by Lup Yuen Lee 李立源 |
    Medium</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" name="twitter:app:name:iphone" content="Medium" />
  <meta data-rh="true" name="twitter:app:id:iphone" content="828256236" />
  <meta data-rh="true" property="al:ios:app_name" content="Medium" />
  <meta data-rh="true" property="al:ios:app_store_id" content="828256236" />
  <meta data-rh="true" property="al:android:package" content="com.medium.reader" />
  <meta data-rh="true" property="fb:app_id" content="542599432471018" />
  <meta data-rh="true" property="og:site_name" content="Medium" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2019-10-16T04:30:17.217Z" />
  <meta data-rh="true" name="title"
    content="Install meshctl on Raspberry Pi. Follow these instructions to install… | by Lup Yuen Lee 李立源 | Medium" />
  <meta data-rh="true" property="og:title" content="Install meshctl on Raspberry Pi" />
  <meta data-rh="true" property="twitter:title" content="Install meshctl on Raspberry Pi" />
  <meta data-rh="true" name="twitter:site" content="@Medium" />
  <meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/51aa1e2579e6" />
  <meta data-rh="true" property="al:android:url" content="medium://p/51aa1e2579e6" />
  <meta data-rh="true" property="al:ios:url" content="medium://p/51aa1e2579e6" />
  <meta data-rh="true" property="al:android:app_name" content="Medium" />
  <meta data-rh="true" name="description"
    content="Follow these instructions to install the Bluetooth Mesh provisioning tool meshctl for Raspberry Pi for the article “Bluetooth Mesh with nRF52 and Apache Mynewt” meshctl is part of the open-source…" />
  <meta data-rh="true" property="og:description"
    content="Follow these instructions to install the Bluetooth Mesh provisioning tool meshctl for Raspberry Pi for the article “Bluetooth Mesh with…" />
  <meta data-rh="true" property="twitter:description"
    content="Follow these instructions to install the Bluetooth Mesh provisioning tool meshctl for Raspberry Pi for the article “Bluetooth Mesh with…" />
  <meta data-rh="true" property="og:url"
    content="https://web.archive.org/web/20200717083609/https://medium.com/@ly.lee/install-meshctl-on-raspberry-pi-51aa1e2579e6" />
  <meta data-rh="true" property="al:web:url"
    content="https://medium.com/@ly.lee/install-meshctl-on-raspberry-pi-51aa1e2579e6" />
  <meta data-rh="true" property="og:image"
    content="https://web.archive.org/web/20200717083609im_/https://miro.medium.com/max/1200/1*-fN9d2jg1vAKIj4YdMrmcw.jpeg" />
  <meta data-rh="true" name="twitter:image:src"
    content="https://miro.medium.com/max/1200/1*-fN9d2jg1vAKIj4YdMrmcw.jpeg" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" property="article:author" content="https://medium.com/@ly.lee" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow,max-image-preview:large" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="4 min read" />
  <meta data-rh="true" name="parsely-post-id" content="51aa1e2579e6" />
  <link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium"
    href="/web/20200717083609/https://medium.com/osd.xml" />
  <link data-rh="true" rel="apple-touch-icon" sizes="152x152"
    href="https://web.archive.org/web/20200717083609im_/https://cdn-images-1.medium.com/fit/c/152/152/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="120x120"
    href="https://web.archive.org/web/20200717083609im_/https://cdn-images-1.medium.com/fit/c/120/120/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="76x76"
    href="https://web.archive.org/web/20200717083609im_/https://cdn-images-1.medium.com/fit/c/76/76/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="apple-touch-icon" sizes="60x60"
    href="https://web.archive.org/web/20200717083609im_/https://cdn-images-1.medium.com/fit/c/60/60/1*8I-HPL0bfoIzGied-dzOvA.png" />
  <link data-rh="true" rel="mask-icon"
    href="https://web.archive.org/web/20200717083609im_/https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg"
    color="#171717" />
  <link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css"
    href="https://web.archive.org/web/20200717083609cs_/https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css" />
  <link data-rh="true" rel="author" href="https://medium.com/@ly.lee" />
  <link data-rh="true" rel="canonical"
    href="https://web.archive.org/web/20200717083609/https://medium.com/@ly.lee/install-meshctl-on-raspberry-pi-51aa1e2579e6" />
  <link data-rh="true" rel="alternate"
    href="https://web.archive.org/web/20200717083609/android-app://com.medium.reader/https/medium.com/p/51aa1e2579e6" />
  <link data-rh="true" rel="icon"
    href="https://web.archive.org/web/20200717083609im_/https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" />

<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">

<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->

</head>

<body>
  <div id="root">
    <div class="a b c">
      <article>
        <section class="bw bx by bz ai ca cb r"></section><span class="r"></span>
        <div>
          <div class="s u cc cd ce cf"></div>
          <section class="cg ch ci cj ck">
            <div class="cl ai">
              <figure class="cm cl ai paragraph-image">

                <p><img src="https://lupyuen.github.io/images/legacy/m1.jpeg" /></p>

        
                <figcaption class="df dg ca by bz dh di bn dj dk bp bs">EBYTE E73-TBB Development Board (based on nRF52)
                  provisioned into a Bluetooth Mesh by running meshctl on Raspberry Pi 4</figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <div>
                  <h1 id="024f" class="dm dn bo do b dp dq dr ds dt du dv dw dx dy dz ea eb ec ed ee ef">Install meshctl
                    on Raspberry Pi</h1>
                  <div class="eg">
                    <div class="n eh ei ej ek">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="/web/20200717083609/https://medium.com/@ly.lee?source=post_page-----51aa1e2579e6----------------------">
                            <div class="cp el em">
                              <div class="as n en o p s eo ep eq er es cf"><svg width="57" height="57"
                                  viewbox="0 0 57 57">
                                  <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M28.5 1.2A27.45 27.45 0 0 0 4.06 15.82L3 15.27A28.65 28.65 0 0 1 28.5 0C39.64 0 49.29 6.2 54 15.27l-1.06.55A27.45 27.45 0 0 0 28.5 1.2zM4.06 41.18A27.45 27.45 0 0 0 28.5 55.8a27.45 27.45 0 0 0 24.44-14.62l1.06.55A28.65 28.65 0 0 1 28.5 57 28.65 28.65 0 0 1 3 41.73l1.06-.55z">
                                  </path>
                                </svg></div><img alt="Lup Yuen Lee 李立源" class="r et em el"
                                src="https://web.archive.org/web/20200717083609im_/https://miro.medium.com/fit/c/96/96/1*72qLH3RF4S4q2AcxlnIdSw.jpeg"
                                width="48" height="48" />
                            </div>
                          </a></div>
                        <div class="eu ai r">
                          <div class="n">
                            <div style="flex:1"><span class="bn b bo bp bq br r ef q">
                                <div class="ev n o ew"><span class="bn dj dk bp cu ex ey ez fa fb ef"><a
                                      class="bh bi at au av aw ax ay az ba fc bd bl bm" rel="noopener"
                                      href="/web/20200717083609/https://medium.com/@ly.lee?source=post_page-----51aa1e2579e6----------------------">Lup
                                      Yuen Lee 李立源</a></span>
                                  <div class="fd r bg h"><span><button
                                        class="fe ef q ff fg fh fi fj ba bl fk fl fm fn fo fp fq bn b bo fr fs br ft fu cb fv fw">Follow</button></span>
                                  </div>
                                </div>
                              </span></div>
                          </div><span class="bn b bo bp bq br r bs bt"><span class="bn dj dk bp cu ex ey ez fa fb bs">
                              <div><a class="bh bi at au av aw ax ay az ba fc bd bl bm" rel="noopener"
                                  href="/web/20200717083609/https://medium.com/@ly.lee/install-meshctl-on-raspberry-pi-51aa1e2579e6?source=post_page-----51aa1e2579e6----------------------">Oct
                                  15, 2019</a> <!-- -->·
                                <!-- -->
                                <!-- -->4
                                <!-- --> min read
                              </div>
                            </span></span>
                        </div>
                      </div>
                      <div class="n fx fy fz ga gb gc gd ge y">
                        <div class="n o">
                          <div class="gf r bg"><button class="bh bi at au av aw ax ay az ba bj bk bd bl bm"><svg
                                width="29" height="29" class="q">
                                <path
                                  d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                                </path>
                              </svg></button></div>
                          <div class="gf r bg"><button class="bh bi at au av aw ax ay az ba bj bk bd bl bm"><svg
                                width="29" height="29" viewbox="0 0 29 29" fill="none" class="q">
                                <path
                                  d="M5 6.36C5 5.61 5.63 5 6.4 5h16.2c.77 0 1.4.61 1.4 1.36v16.28c0 .75-.63 1.36-1.4 1.36H6.4c-.77 0-1.4-.6-1.4-1.36V6.36z">
                                </path>
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M10.76 20.9v-8.57H7.89v8.58h2.87zm-1.44-9.75c1 0 1.63-.65 1.63-1.48-.02-.84-.62-1.48-1.6-1.48-.99 0-1.63.64-1.63 1.48 0 .83.62 1.48 1.59 1.48h.01zM12.35 20.9h2.87v-4.79c0-.25.02-.5.1-.7.2-.5.67-1.04 1.46-1.04 1.04 0 1.46.8 1.46 1.95v4.59h2.87v-4.92c0-2.64-1.42-3.87-3.3-3.87-1.55 0-2.23.86-2.61 1.45h.02v-1.24h-2.87c.04.8 0 8.58 0 8.58z"
                                  fill="#fff"></path>
                              </svg></button></div>
                          <div class="gf r bg"><button class="bh bi at au av aw ax ay az ba bj bk bd bl bm"><svg
                                width="29" height="29" class="q">
                                <path
                                  d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                                </path>
                              </svg></button></div>
                          <div class="gg r">
                            <div class="q"><span><a
                                  href="https://web.archive.org/web/20200717083609/https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40ly.lee%2Finstall-meshctl-on-raspberry-pi-51aa1e2579e6&amp;source=post_actions_header--------------------------bookmark_header-"
                                  class="bh bi at au av aw ax ay az ba bj bk bd bl bm" rel="noopener"><svg width="25"
                                    height="25" viewbox="0 0 25 25">
                                    <path
                                      d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                      fill-rule="evenodd"></path>
                                  </svg></a></span></div>
                          </div>
                          <div class="gh r am"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="91d0" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Follow these
                  instructions to install the Bluetooth Mesh provisioning tool <code
                    class="cy hh hi hj hk b">meshctl</code> for Raspberry Pi for the article <em class="hl">“</em><a
                    class="bh fw hm hn ho hp" target="_blank" rel="noopener"
                    href="/web/20200717083609/https://medium.com/@ly.lee/bluetooth-mesh-with-nrf52-and-apache-mynewt-44823407c471?source=friends_link&amp;sk=ac433fa04e13f75985927c37db1e2b10"><em
                      class="hl">Bluetooth Mesh with nRF52 and Apache Mynewt</em></a><em class="hl">”</em></p>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="7407" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">1. Install BlueZ
                </h1>
                <p id="8f74" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef"><code
                    class="cy hh hi hj hk b">meshctl</code> is part of the open-source BlueZ software suite (which
                  doesn’t run on Windows and macOS, that’s why we are using a Pi). BlueZ may be preinstalled on Pi but
                  the default installation lacks the <code class="cy hh hi hj hk b">meshctl</code> utility. We’ll
                  install BlueZ now with the <code class="cy hh hi hj hk b">meshctl</code> option…</p>
                <p id="4bb0" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Refer to the
                  official guide by Bluetooth SIG:<br /><em class="hl">“</em><a
                    href="https://3pl46c46ctx02p7rzdsvsg21-wpengine.netdna-ssl.com/wp-content/uploads/2019/03/T1804_How-to-set-up-BlueZ_LFC_FINAL-1.pdf?utm_campaign=developer&amp;utm_source=internal&amp;utm_medium=blog&amp;utm_content=Deploying-BlueZ-v5.50-on-Raspberry-Pi3-Update"
                    class="bh fw hm hn ho hp" target="_blank" rel="noopener nofollow"><em class="hl">Developer Study
                      Guide: Deploying BlueZ v5.50 on Raspberry Pi3, Part 1 — Deployment</em></a><em class="hl">”</em>
                </p>
                <p id="a6a6" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Follow the
                  instructions in the sections…</p>
                <p id="45f2" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><em
                    class="hl">“0. Prerequisite”</em></p>
                <p id="8c11" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><em
                    class="hl">“1. Install BlueZ v5.50”</em></p>
                <p id="903b" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><strong
                    class="gq iy">BUT stop before</strong> <em class="hl">“2. Rebuilding the kernel for BlueZ
                    v5.50”</em></p>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="1a41" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">2. Download Pi
                  Kernel Source Files</h1>
                <p id="4dc0" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef">We shall
                  rebuild the Pi kernel now. Why? Because <code class="cy hh hi hj hk b">meshctl</code> needs
                  AEAD-AES_CCM encryption, which runs as a secure service in the kernel. This may take an hour or more
                  to complete.</p>
                <p id="cd37" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Enter the
                  following at a command prompt…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="c1da" class="ef jh ib bo hk b dk ji jj r jk">cd ~<br/>sudo apt-get install -y git bc bison flex libssl-dev<br/>uname -a</span></pre>
                <p id="1020" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">You should see
                  a message like…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="ffa2" class="ef jh ib bo hk b dk ji jj r jk">Linux raspberrypi <strong class="hk iy">4.19</strong>.75-v7l+ #1270 SMP Tue Sep 24 18:51:41 BST 2019 armv7l GNU/Linux</span></pre>
                <p id="85c7" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">See the <code
                    class="cy hh hi hj hk b">4.19</code> part? This is important — it’s the <strong
                    class="gq iy">Version Number</strong> for your Pi kernel. We need to fetch the kernel source files
                  for our kernel version, or our Pi won’t boot after rebuilding the kernel.</p>
                <p id="76a4" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Enter this
                  command…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="7f53" class="ef jh ib bo hk b dk ji jj r jk">git clone --depth=1 --branch rpi-<strong class="hk iy">4.19</strong>.y https://github.com/raspberrypi/linux</span></pre>
                <p id="a69a" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><strong
                    class="gq iy">BUT replace </strong><code
                    class="cy hh hi hj hk b"><strong class="gq iy">4.19</strong></code><strong class="gq iy"> by your Pi
                    Kernel Version Number</strong>.</p>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="0528" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">3. Initialise Pi
                  Kernel Settings</h1>
                <p id="ed14" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef">We shall now
                  initialise the new Pi kernel to the default settings…</p>
                <p id="2c40" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><strong
                    class="gq iy"><em class="hl">For Raspberry Pi 1, Pi Zero, Pi Zero W, and Compute Module,
                      enter…</em></strong></p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="b0f0" class="ef jh ib bo hk b dk ji jj r jk">cd linux<br/>KERNEL=kernel<br/>make bcmrpi_defconfig</span></pre>
                <p id="5dc3" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><strong
                    class="gq iy"><em class="hl">For Raspberry Pi 2, Pi 3, Pi 3+, and Compute Module 3,
                      enter…</em></strong></p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="f3e3" class="ef jh ib bo hk b dk ji jj r jk">cd linux<br/>KERNEL=kernel7<br/>make bcm2709_defconfig</span></pre>
                <p id="929b" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><strong
                    class="gq iy"><em class="hl">For Raspberry Pi 4, enter…</em></strong></p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="b650" class="ef jh ib bo hk b dk ji jj r jk">cd linux<br/>KERNEL=kernel7l<br/>make bcm2711_defconfig</span></pre>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="0fe1" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">4. Configure Pi
                  Kernel</h1>
                <p id="d75b" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef">Let’s configure
                  the kernel and select the AEAD-AES_CCM encryption needed by <code
                    class="cy hh hi hj hk b">meshctl</code>. Enter…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="1e0f" class="ef jh ib bo hk b dk ji jj r jk">make menuconfig</span></pre>
                <p id="61a5" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Press the arrow
                  keys to move the cursor to <code class="cy hh hi hj hk b">Cryptographic API.</code></p>
                <figure class="iz ja jb jc jd cl by bz paragraph-image">

                  <p><img src="https://lupyuen.github.io/images/legacy/m2.png" /></p>

               
                </figure>
                <p id="2340" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Press <code
                    class="cy hh hi hj hk b">Enter</code></p>
                <p id="3b2f" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Press the arrow
                  keys to move the cursor to each of these modules. Press <code class="cy hh hi hj hk b">S</code> to
                  select…</p>
                <p id="5724" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">1️⃣ <code
                    class="cy hh hi hj hk b">Hash Modes → CMAC support</code></p>
              </div>
            </div>
            <div class="cl">
              <div class="n p">
                <div class="jn jo jp jq jr js ae jt af ju ah ai">
                  <figure class="iz ja jb jc jd cl jv jw paragraph-image">

                    <p><img src="https://lupyuen.github.io/images/legacy/m3.png" /></p>

              
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <p id="5bcf" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">2️⃣ <code
                    class="cy hh hi hj hk b">Random Number Generation → User-space interface for hash algorithms</code>
                </p>
                <p id="91de" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">3️⃣ <code
                    class="cy hh hi hj hk b">Random Number Generation → User-space interface for symmetric key cipher algorithms</code>
                </p>
              </div>
            </div>
            <div class="cl">
              <div class="n p">
                <div class="jn jo jp jq jr js ae jt af ju ah ai">
                  <figure class="iz ja jb jc jd cl jv jw paragraph-image">

                    <p><img src="https://lupyuen.github.io/images/legacy/m4.png" /></p>

         
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <p id="337e" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">You should see
                  <code class="cy hh hi hj hk b">(*)</code> when the module is selected.</p>
                <p id="bea2" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Press <code
                    class="cy hh hi hj hk b">Esc</code> a few times until you see the prompt <code
                    class="cy hh hi hj hk b">Do you wish to save your new configuration</code>…</p>
              </div>
            </div>
            <div class="cl">
              <div class="n p">
                <div class="jn jo jp jq jr js ae jt af ju ah ai">
                  <figure class="iz ja jb jc jd cl jv jw paragraph-image">

                    <p><img src="https://lupyuen.github.io/images/legacy/m5.png" /></p>

             
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <p id="4468" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Select <code
                    class="cy hh hi hj hk b">Yes</code> and the command prompt reappears.</p>
                <p id="9926" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Here’s a video
                  that shows the steps…</p>
              </div>
            </div>
            <div class="cl">
              <div class="n p">
                <div class="jn jo jp jq jr js ae jt af ju ah ai">
                  <figure class="iz ja jb jc jd cl">
                                        
                    <p><a href="https://youtu.be/ETDOdd6daUY">[Watch video on YouTube]</a></p>
  
                
                    <figcaption class="df dg ca by bz dh di bn dj dk bp bs">AEAD-AES_CCM encryption for meshctl on
                      Raspberry Pi</figcaption>
                  </figure>
                </div>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="0c72" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">5. Build Pi
                  Kernel</h1>
                <p id="0b9c" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef">Before building
                  the kernel, we’ll backup the old kernel into <code class="cy hh hi hj hk b">/OLDboot</code> in case
                  the new kernel fails. Enter…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="09f5" class="ef jh ib bo hk b dk ji jj r jk">sudo cp -r /boot /OLDboot</span></pre>
                <p id="4c2f" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Now we build
                  and install the kernel. Enter…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="a55e" class="ef jh ib bo hk b dk ji jj r jk">make -j4 zImage modules dtbs<br/>sudo make modules_install<br/>sudo cp arch/arm/boot/dts/*.dtb /boot/<br/>sudo cp arch/arm/boot/dts/overlays/*.dtb* /boot/overlays/<br/>sudo cp arch/arm/boot/dts/overlays/README /boot/overlays/<br/>sudo cp arch/arm/boot/zImage /boot/$KERNEL.img<br/>sudo sync<br/>sudo reboot</span></pre>
                <p id="b812" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">This kernel
                  build may take an hour or more to complete. When it’s done our Pi should reboot with the new kernel.
                </p>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="1994" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">6. Test meshctl
                </h1>
                <p id="60eb" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef">After
                  rebooting, open a command prompt and enter…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="5461" class="ef jh ib bo hk b dk ji jj r jk">meshctl</span></pre>
                <p id="bd1d" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Press <code
                    class="cy hh hi hj hk b">Enter</code> to see the <code class="cy hh hi hj hk b">[meshctl]#</code>
                  prompt.</p>
                <p id="ed4f" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">If you don’t
                  see any errors, congratulations you have installed <code class="cy hh hi hj hk b">meshctl</code>!</p>
                <p id="a8ea" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Enter this to
                  exit <code class="cy hh hi hj hk b">meshctl</code>…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="12b0" class="ef jh ib bo hk b dk ji jj r jk">exit</span></pre>
                <p id="8874" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Remember:
                  Always exit <code class="cy hh hi hj hk b">meshctl</code> properly, otherwise it will lock on to the
                  Bluetooth driver and you would need to reboot the Pi to fix this.</p>
                <p id="739a" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">If you see this
                  message instead…</p>
                <pre
                  class="iz ja jb jc jd je jf jg"><span id="65fa" class="ef jh ib bo hk b dk ji jj r jk">Failed to parse provisioning database file prov_db.json</span></pre>
                <p id="91b7" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">It means that
                  your kernel still doesn’t have AEAD-AES_CCM encryption installed. Carefully redo each step from the
                  top of this article.</p>
              </div>
            </div>
          </section>
          <hr class="hq dj hr hs ht hu dg hv hw hx hy hz" />
          <section class="cg ch ci cj ck">
            <div class="n p">
              <div class="z ab ac ae af dl ah ai">
                <h1 id="86ba" class="ia ib bo bn ic id ie if ig ih ii ij ik il im in io ip iq ir is ef">References</h1>
                <p id="34d7" class="go gp bo gq b gr it gt gu iu gw gx iv gz ha iw hc hd ix hf hg cg ef">If you have
                  problems configuring and building the Pi kernel, refer to the official guides…</p>
                <ol class="">
                  <li id="12ce" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg jz ka kb ef"><em
                      class="hl">“</em><a
                      href="https://www.raspberrypi.org/documentation/linux/kernel/building.md"
                      class="bh fw hm hn ho hp" target="_blank" rel="noopener nofollow"><em class="hl">Kernel
                        Building</em></a><em class="hl">”</em></li>
                  <li id="1c28" class="go gp bo gq b gr kc gt gu kd gw gx ke gz ha kf hc hd kg hf hg jz ka kb ef"><em
                      class="hl">“</em><a
                      href="https://www.raspberrypi.org/documentation/linux/kernel/configuring.md"
                      class="bh fw hm hn ho hp" target="_blank" rel="noopener nofollow"><em class="hl">Configuring The
                        Kernel</em></a><em class="hl">”</em></li>
                </ol>
                <p id="b701" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">If you have
                  problems provisioning the Bluetooth Mesh, refer to the official guide by Bluetooth SIG…</p>
                <p id="c676" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><em
                    class="hl">“</em><a
                    href="https://3pl46c46ctx02p7rzdsvsg21-wpengine.netdna-ssl.com/wp-content/uploads/2019/03/Tutorial-How-to-set-up-BlueZ_Part2-3.pdf?utm_campaign=developer&amp;utm_source=internal&amp;utm_medium=blog&amp;utm_content=Deploying-BlueZ-v5.50-on-Raspberry-Pi3-Update"
                    class="bh fw hm hn ho hp" target="_blank" rel="noopener nofollow"><em class="hl">How to Deploy BlueZ
                      v5.50 on Raspberry Pi 3 and Use It, Part 2 — Provisioning</em></a><em class="hl">”</em></p>
                <p id="cbbf" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef">Here is an
                  excellent series of articles on Bluetooth Mesh for Zephyr embedded OS…</p>
                <p id="2f43" class="go gp bo gq b gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg cg ef"><em
                    class="hl">“</em><a
                    href="https://www.96boards.org/blog/patient-monitoring-system-part4/"
                    class="bh fw hm hn ho hp" target="_blank" rel="noopener nofollow"><em class="hl">Patient Monitoring
                      System using 96Boards</em></a><em class="hl">”</em></p>
              </div>
            </div>
          </section>
        </div>
      </article>
    </div>
  </div>
</body>

</html>
<!--
     FILE ARCHIVED ON 08:36:09 Jul 17, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 11:35:57 Feb 23, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  exclusion.robots.policy: 0.347
  captures_list: 86.975
  exclusion.robots: 0.365
  RedisCDXSource: 1.823
  PetaboxLoader3.resolve: 26.596
  esindex: 0.017
  CDXLines.iter: 29.229 (3)
  LoadShardBlock: 51.06 (3)
  PetaboxLoader3.datanode: 727.886 (4)
  load_resource: 720.111
-->